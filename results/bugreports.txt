I am encountering an issue using hsqldb and "select for update" statement
In a nutshell, when the "select for update" is executed, it does not seem to lock the row (or the table) during the time of the transaction.
I have made a small program that reproduces the issue on hsqldb which can be found in the attachment. The same program works with Oracle and other dbs.
The program executes the following statements by 3 threads:
SELECT OID FROM ID_TABLE FOR UDPATE;
UPDATE ID_TABLE SET = 'newOID'
COMMIT;
Then each thread updates a global oid. If another thread founds the same oid as it own, the program stops. As it is, the program should not stop.
I have the same behavior with the 2.5.0 version and the trunk version. All the configuration I am using can be found in the resources directory.
Thank you.