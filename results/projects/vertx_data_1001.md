https://github.com/eclipse-vertx/vert.x/issues/1001
IsolatingClassLoader getResource() and getResources() should behave the same as loadClass() by adrianluisgonzalez · Pull Request #1001 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Yes, I have signed the Eclipse CLA
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1002
Bug fix : cannot use event bus from worker by vietj · Pull Request #1002 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I fixed this in a somewhat different way. But thanks anyway :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1003
Eventbus metrics by vietj · Pull Request #1003 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@purplefox  can you review these changes please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1004
Use correct thread pools by purplefox · Pull Request #1004 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1005
Removed VertxSPI as is now redundant by purplefox · Pull Request #1005 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Pretty straightforward this one. Basically removed VertxSPI as Vertx.executeBlocking can now be used directly.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1006
Get the sessionID string from the message body, not the by michalboska · Pull Request #1006 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
During message reply handling, vert.x Event bus bridge decides if the reply contains authentication data (sessionID) which it should cache and then keep using for that socket. The reply is stored as "sessionID" variable in the reply body JSON object.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1007
Get the sessionID string from the message body, not the message itself when parsing reply by michalboska · Pull Request #1007 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
During message reply handling, vert.x Event bus bridge decides if the reply contains authentication data (sessionID) which it should cache and then keep using for that socket. The reply is stored as "sessionID" variable in the reply body JSON object.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1008
Check the message body for sessionID, not the message JSON itself by michalboska · Pull Request #1008 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Update: this applies for each message sent through the EventBus bridge to an endpoint that requires authentication (basically everything processed by org.vertx.java.core.sockjs.EventBusBridge#doSendOrPub )
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1009
Websocket metrics by vietj · Pull Request #1009 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you review it @purplefox ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1010
update to mod-lang-clojure 1.0.5 by tobias · Pull Request #1010 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Toby Crawley toby@tcrawley.org
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1011
Resolved API/impl dependency for json module. by atsticks · Pull Request #1011 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Interesting, I signed the CLA just a few minutes ago. Seems that it requires some time to synchronize...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1012
VertxImpl.getContext should not return a context create from another Ver... by vietj · Pull Request #1012 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@purplefox please review Tim
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1013
more informative error message for ReplyException by beders · Pull Request #1013 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Nice stack trace and error message. Makes it easier to spot the problem.
Example:
io.vertx.core.eventbus.ReplyException: (NO_HANDLERS,100) dang!
Signed-off-by: Jochen Bedersdorfer beders@yahoo.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1014
Allow Starter to run in its own classloader if -cp command line option i... by purplefox · Pull Request #1014 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj ping :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1015
Fixed a few race conditions and better vertx close process, also disable... by purplefox · Pull Request #1015 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj ping :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1016
Request ended by purplefox · Pull Request #1016 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj ping :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1017
exposed the number of instances of a verticle that were started by jtruelove · Pull Request #1017 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1018
exposed the number of instances of a verticle that were started by jtruelove · Pull Request #1018 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Jeremy Truelove jtruelove@cyngn.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1019
exposed the number of instances of a verticle that were started by jtruelove · Pull Request #1019 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Jeremy,
DeploymentTest is probably a good place :)
Also, can you two spaces for tabs, not four?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1020
Update Jackson to 2.5.2 by marcust · Pull Request #1020 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks, I will deal with this manually as it needs a manual merge.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1021
exposed the number of instances of a verticle that were started by jtruelove · Pull Request #1021 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
anything else needed on this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1022
BZ465510: new NetClientOptions() and new NetClientOptions(new JsonObject... by alexlehm · Pull Request #1022 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
new NetClientOptions() and new NetClientOptions(new JsonObject("{}")) create objects that are not equal
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1023
Explicitly close all connections and unregister all handlers when event ... by purplefox · Pull Request #1023 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1024
Fixed typo which caused JDBC to be described as async by andyhedges · Pull Request #1024 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks Andy, I will fix this manually
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1025
SockJS Session must call super.close() by fleaflicker · Pull Request #1025 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sorry for the confusion, I see where it is called.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1026
Change VerticleFactory#resolve method to be asynchronous by vietj · Pull Request #1026 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks good to me :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1027
Clustering fixes by purplefox · Pull Request #1027 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1028
bz466228:  BlockedThreadChecker doesn't have a config value for the time until a stack trace is written by alexlehm · Pull Request #1028 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1029
2.x clustering fixes by purplefox · Pull Request #1029 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1030
2.x clustering fixes by purplefox · Pull Request #1030 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks ok to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1031
More clustering fixes by purplefox · Pull Request #1031 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj  is this one ok to merge now?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1032
MessageConsumer#endHandler should be invoked with the registration context by vietj · Pull Request #1032 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1033
[2.x] Create parent dir(s) if necessary, do not try to create an existing dir (module unzip) by msoute · Pull Request #1033 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi folks, was this updated to take into account @felfert 's comments?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1034
Added helper methods to determine whether running on worker or event … by purplefox · Pull Request #1034 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The contextData map is a plain HashMap and is accessed by different threads, it requires some kind of synchronization.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1035
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1036
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1037
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1038
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1039
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1040
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1041
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1042
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1043
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1044
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1045
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1046
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1047
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1048
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1049
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1050
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1051
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1052
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1053
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1054
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1055
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1056
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1057
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1058
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1059
Add vert.x cli documentation by cescoffier · Pull Request #1059 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The documentation is close to the vert.x 2 documentation. I've added the new options (redeploy, ha, hagroup...)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1060
Core docs updates tim by purplefox · Pull Request #1060 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just had a look. Everything fine for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1061
Updated libraries versions by fmatar · Pull Request #1061 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj I can update the version to 6 the build runs smoothly with those libraries, however I can revert the netty version to 4.0.25. Would that work?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1062
Logging params by purplefox · Pull Request #1062 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Does this mean you're not going to merge it to the master ?
I'm not the only one who worked on a similar thing
https://github.com/eclipse/vert.x/pull/991/commits
So I guess that is something the community wants.
Can you let me know why it was closed ?
Thank you.
Patrick.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1063
Provide the client HTTP Error handling documentation by cescoffier · Pull Request #1063 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1064
Fix bare instance creation by cescoffier · Pull Request #1064 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix https://bugs.eclipse.org/bugs/show_bug.cgi?id=469604 by checking whether or not -ha is the first parameter. In that case, it creates the vert.x instance without deploying a vertical
Also update the command line documentation
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1065
Add high availability documentation by cescoffier · Pull Request #1065 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just the HA / fail over documentation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1066
Add the documentation related to the Context object. by cescoffier · Pull Request #1066 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Clement Escoffier clement.escoffier@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1067
Use connection as lock for synchronizing access to request/response t… by purplefox · Pull Request #1067 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi @vietj @cescoffier @pmlopes
could someone review this please?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1068
respect JDK properties to limit SSL protocols by pwielgolaski · Pull Request #1068 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Piotr Wielgolaski pwielgolaski@gmail.com
Change take into account what protocols are enabled and only enable intersection of JDK and Vert.x protocols.
In this way client can use system properties described here http://www.oracle.com/technetwork/java/javase/documentation/cve-2014-3566-2342133.html
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1069
Implement an unordered execute blocking and remove unused testing met… by purplefox · Pull Request #1069 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1070
Merge pull request #1 from eclipse/master by vertxer · Pull Request #1070 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Update from eclipse/vert.x
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1071
Support switching to netty transport epoll in GNU/Linux, significantly improve performance by vertxer · Pull Request #1071 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I squash 3 commit in this patch, commit operational confusion. So I re-fork project, and create this new pull request.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1072
Documentation improvements by cescoffier · Pull Request #1072 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Clement - for Eclipse core unfortunately commits need to be signed unless you're a comitter to the core project.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1073
Fix behaviour of absoluteURI by purplefox · Pull Request #1073 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1074
Documentation override and parsetools by cescoffier · Pull Request #1074 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Here is the replacement of #1072.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1075
Fixed logging from anonymous class by zdanek · Pull Request #1075 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes 470205
https://bugs.eclipse.org/bugs/show_bug.cgi?id=470205
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1076
Fixed logging from anonymous class- https://bugs.eclipse.org/bugs/show_bug.cgi?id=470205 by zdanek · Pull Request #1076 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix for bug
470205
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1077
Log the deploy redeploy error by vietj · Pull Request #1077 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Really no need for a PR for this, it's a small change that you can do direct in master :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1078
Add Vertx Start Hooks Methods in io.vertx.core.Starter by weand · Pull Request #1078 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1079
Fix links in the documentation by cescoffier · Pull Request #1079 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1080
Various performance improvements and optimisations by purplefox · Pull Request #1080 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj @cescoffier @pmlopes please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1081
Ws frame methods by purplefox · Pull Request #1081 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add some helper methods for sending websocket final frames.
See https://bugs.eclipse.org/bugs/show_bug.cgi?id=469870
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1082
Add Verticle Deployment Hook Method in io.vertx.core.Starter by weand · Pull Request #1082 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This change enables subclasses of io.vertx.core.Starter to implement
custom behavior (e.g. attach further configuration on the
DeploymentOptions.config) before the verticle managed by the Starter is
deployed:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1083
Make sure exception is provided if connection is closed by purplefox · Pull Request #1083 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
:+1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1084
Implementation of Eclipse bug #469623 by iweiss · Pull Request #1084 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue tracker reference:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=469623
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1085
Classloading reproducer2 by purplefox · Pull Request #1085 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1086
Remove broken redeploy functionality, and change isolation group beha… by purplefox · Pull Request #1086 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj @cescoffier @pmlopes please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1087
Replace Apex with Web by pmlopes · Pull Request #1087 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1088
Replace Apex with Web by pmlopes · Pull Request #1088 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@purplefox @vietj @cescoffier please merge
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1089
Register binary and text handler as needed. by dinhnn · Pull Request #1089 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Almost case, we use one of type Frame (binary frame or text frame).
By register reply (binary and text) handler as needed, we reduce number of event bus address.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1090
Register binary and text frame handler in websocket as needed & Allow send websocket frame from any verticle in cluster  by dinhnn · Pull Request #1090 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I already had an Eclipse account and I thought my CLA was still valid. But it my pull request still not pass Eclipse validation
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1091
Add #getUnsignedXXX methods to Buffer class by tsegismont · Pull Request #1091 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I already had an Eclipse account and I thought my CLA was still valid. But it looks like they invalidate it after some time... I've signed it again. Not sure what can trigger a new CLA validation process.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1092
Shutdown Netty eventloopgroup gracefully to avoid annoying java.util.… by purplefox · Pull Request #1092 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
code looks fine, built locally and re-run redis tests and i can report that the stacktrace does not show anymore and tests still pass :)
Good to merge
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1093
make possible to extend Starter and use it in fatjar by pwielgolaski · Pull Request #1093 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm going to close this as it is superseded by Clement's recent work on Starter/CLI refactoring that we're going to merge very soon.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1094
Starter now stops vert.x instance of deploy unsuccessful, also remova… by purplefox · Pull Request #1094 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just a small cosmetic comment. Looks good to me otherwise.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1095
File resolver improvements by purplefox · Pull Request #1095 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
everything fine.
I wonder if we should document the new property (setting the cache base directory) in the manual.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1096
Manual 100 continue handling by purplefox · Pull Request #1096 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Alright for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1097
Synchronize on connection not websocket to remove deadlock by purplefox · Pull Request #1097 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Everything fine for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1098
Documentation Maven / Gradle dependencies by cescoffier · Pull Request #1098 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add  Maven and Gradle dependency information to the documentation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1099
Update expired test certificates by pmlopes · Pull Request #1099 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes paulo@mlopes.net
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1100
Fix metrics SPI http request upgrade to websocket by vietj · Pull Request #1100 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
reported in vertx-dropwizard-metrics project vert-x3/vertx-dropwizard-metrics#10
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1101
Temporal support for JSON, completing the implementation of RFC-7494. by pmlopes · Pull Request #1101 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm going to close this as it doesn't seem to contain the JSON changes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1102
Undeploy bug fix by purplefox · Pull Request #1102 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes https://groups.google.com/d/msg/vertx/0aR54K-_RBg/aQ76BZx7JUQJ
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1103
Document new buffer unsignedXXX methods by tsegismont · Pull Request #1103 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Document new buffer unsignedXXX methods
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1104
Make sure currentResponse is set to null after response has ended to … by purplefox · Pull Request #1104 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1105
Make it easier for working with subclassed Starters by ellebrecht · Pull Request #1105 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Old CLA did not match GitHub email, invalidated and signed a new one.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1106
Async lookups2 by purplefox · Pull Request #1106 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do name lookups on internal worker thread to avoid blocking event loop.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1107
Do lookups on worker thread to avoid blocking event loop by purplefox · Pull Request #1107 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1108
Data object conversion helper by vietj · Pull Request #1108 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1109
Data object converter generation by vietj · Pull Request #1109 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Has conflicts, can you rebase?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1110
Starter refactoring step1 by cescoffier · Pull Request #1110 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Step 1 ready for review - @vietj @pmlopes @purplefox
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1111
Starter refactoring step 2 : start stop list commands by cescoffier · Pull Request #1111 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
perhaps you should wait PR1 is valid :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1112
added websocket connection failure handler for HttpClient fluent API by wrobelm · Pull Request #1112 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1113
added websocket connection failure handler for HttpClient fluent API by wrobelm · Pull Request #1113 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Doesn't
client.websocketStream().exceptionHandler(t -> {});
Already accomplish this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1114
Some discrepancies in the handling of (non) keep-alive HTTP requests by bschev · Pull Request #1114 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1115
Feature/range send file by pmlopes · Pull Request #1115 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1116
Concatenate pending buffers when connection is paused to avoid orderi… by purplefox · Pull Request #1116 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier @pmlopes  please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1117
don't add parent verticle if deployment fails by purplefox · Pull Request #1117 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1118
Cluster public props by purplefox · Pull Request #1118 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I wonder if we should we add a parameter to Starter to configure the public host / port ? We can use the system property mapping for this, so it's not required.
Except that, +1.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1119
Bug fix: HttpClientImpl::requestAbs does not respect default port option by simonpai · Pull Request #1119 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks.
Can you add a test in HttpTest for this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1120
Implement Temporal Support for JSON by pmlopes · Pull Request #1120 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Would it be a good idea to allow instants to be added/retrieved as longs too?
In many cases, Java programs handle date/times as longs and forcing a conversion to Instant just so it can be converted to String seems a bit long-winded.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1121
Implementation of Eclipse bug #469623 by iweiss · Pull Request #1121 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue tracker reference:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=469623
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1122
Add license and javadoc to Converters by cescoffier · Pull Request #1122 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1123
Fix race where failure can occur if verticle is undeployed concurrent… by purplefox · Pull Request #1123 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1124
Handler outside sync by purplefox · Pull Request #1124 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix for https://bugs.eclipse.org/bugs/show_bug.cgi?id=473714
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1125
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1126
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1127
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1128
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1129
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1130
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1131
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1132
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1133
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1134
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1135
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1136
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1137
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1138
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1139
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1140
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1141
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1142
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1143
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1144
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1144 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1145
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1145 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1146
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1146 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1147
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1147 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Tim, do you have any idea what wrong I might be doing here ? My commit isn't approved by Eclipse CLA.
I have same email (manishk@vmware.com) in github and Eclipse CLA account, and same user id (manish-panwar) in github and Eclipse CLA account. Also I had signed off my commit but seeing this error. I have tried using emails but not sure why this is happening.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1148
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1148 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1149
Implemented parameterized logging in Vertx core api by manish-panwar · Pull Request #1149 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Tim, do you have any idea what wrong I might be doing here ? My commit isn't approved by Eclipse CLA.
I have same email (manishk@vmware.com) in github and Eclipse CLA account, and same user id (manish-panwar) in github and Eclipse CLA account. Also I had signed off my commit but seeing this error. I have tried using emails but not sure why this is happening.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1150
Implementation of the start stop and list commands by cescoffier · Pull Request #1150 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1151
Headers end handler no longer takes a Future as async completion is v… by purplefox · Pull Request #1151 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
shouldn't we keep the old method and mark it @deprecated to keep API compatibility with 3.x?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1152
Deprecate ClusterManager.nodeListener() and replace it with add/removeNodeListener() by vascokk · Pull Request #1152 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm not sure I understand this PR. Why are the changes preferable to the previous API?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1153
Add an ability to control the read buffer size for AsyncFile's async … by testn · Pull Request #1153 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks fine to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1154
Add option to handle http client redirect by testn · Pull Request #1154 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1155
Support for client auth by manish-panwar · Pull Request #1155 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closing this pull request and going to create a new one. I found out what was the issue with Eclipse CLA and I am going to fix it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1156
Added support for parametrized logging(similar to how SLF4J API). by manish-panwar · Pull Request #1156 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1157
Added support to set the "Client Auth" value as enum. It allows us to… by manish-panwar · Pull Request #1157 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
These changes are breaking the API compatibility. It should keep the previous method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1158
Expose io.vertx.core.Context Netty EventLoop so such context can be i… by vietj · Pull Request #1158 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Everything fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1159
Added event address when reporting failure on message reply timeout by zdanek · Pull Request #1159 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Bartek, I already fixed this in master the other day, but thanks anyway.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1160
CLI and Launcher documentation by cescoffier · Pull Request #1160 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj you asked for it... please review.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1161
Added support for setting custom TLS protocol versions by mareng85 · Pull Request #1161 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Now you can set custom TLS protocol versions
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1162
Added support for setting custom TLS protocol versions by mareng85 · Pull Request #1162 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1163
Remove SocketDefaults as they don't seem to give correct values on so… by purplefox · Pull Request #1163 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1164
Don't set server to no handlers unless all handlers are removed by purplefox · Pull Request #1164 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1165
Make sure stream() for JsonObject/JsonArray returns correct types by purplefox · Pull Request #1165 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1166
Make sure setting write queue max size works irrrespective of previou… by purplefox · Pull Request #1166 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Everything fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1167
Launcher process redeploy by cescoffier · Pull Request #1167 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1168
CLI usage argument by cescoffier · Pull Request #1168 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks good to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1169
Replace the WatcherService by a home-made FS scanner by cescoffier · Pull Request #1169 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Replace the WatcherService by the scanner used in the previous version of vert.x and avoiding quite some issues on linux (ulimit), and on windows (bad latency).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1170
Replace asciidoc attributes by docgen variables by cescoffier · Pull Request #1170 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
sounds good, gotta merge
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1171
Handle exception on callbacks by stampy88 · Pull Request #1171 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Gonna close this and re-submit because of the IP validation check. Whatever I do doesn't seem to fix it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1172
Do not remove system properties during the tearDown by cescoffier · Pull Request #1172 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
System properties should not be removed. Removing them introduce a race condition when the verticles are starting asynchronously (they may have been removed before, or still be there...).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1173
Some improvements to net param defaulting and use different eventloop… by purplefox · Pull Request #1173 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1174
Extend the FileResolver to support OSGi bundles by cescoffier · Pull Request #1174 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what about bundleresource? why is this not extensible?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1175
Add an option to set max chunk size for large file upload/download by testn · Pull Request #1175 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks good, but could you please amend the tests in HttpTest where the options are tested?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1176
Various cli improvements by cescoffier · Pull Request #1176 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me, will check with vertx-shell and merge it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1177
Eventbus refactor by purplefox · Pull Request #1177 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier @vietj @pmlopes pls review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1178
BZ480001: HandlerRegistration cancels timerID 0 in doUnregister by alexlehm · Pull Request #1178 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Alex, could you explain the reasoning behind this change?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1179
Fixed logging delegate name for Log4j by zdanek · Pull Request #1179 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1180
Add support for bundleresource and bundleentry urls in the FileResolver by cescoffier · Pull Request #1180 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix vert-x3/issues#69.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1181
Fix CLI test when the surefire jar name is too long by cescoffier · Pull Request #1181 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
arg1 [arg2] may be cut on 2 lines if the surefire jar name (generated at runtime) is too long.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1182
Create a new common Socket interface  by chirino · Pull Request #1182 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Going to close this as it's a breaking API change.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1183
Improve the launcher extensibility by cescoffier · Pull Request #1183 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Related to vert-x3/issues#70
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1184
Race reproduced with FakeClusterManager by agura · Pull Request #1184 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm a bit confused - is this a reproducer or does it also contain a fix?
It appears to include changes to HAManager behaviour, I'd expect a reproducer to only include a test and no changes to Vert.x itself, otherwise you're reproducing the issue against something that's not the released Vert.x version....
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1185
Race fixed in HAManager by agura · Pull Request #1185 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1186
Memory leak fix in the subscribers cache by nevesmarcio · Pull Request #1186 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks good, but can you just fix your indentation?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1187
Added a EventBusHook facility to DefaultEventBus in order to be able … by nevesmarcio · Pull Request #1187 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi, the event bus recently had an interceptor addition that one can use to build similar things, could you check that feature to see if that could be built using it ? if not, perhaps we can improve the eventbus interceptors to achieve it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1188
annotate api with @Nullable by vietj · Pull Request #1188 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1189
fixed non-null message for codec.name() by tmont · Pull Request #1189 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
please sign your commit and agree to CLA.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1190
Call exceptionHandler when error occurs on dataHandler and endHandler by stampy88 · Pull Request #1190 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1191
Eb interceptors by purplefox · Pull Request #1191 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1192
Event bus flow control / interceptors by purplefox · Pull Request #1192 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1193
Changed FileResolver so it can handle nested fat jars by rworsnop · Pull Request #1193 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1194
Broken config argument in redeploy by cescoffier · Pull Request #1194 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When launching an application in redeploy mode, the -conf argument is not passed correctly to the launched process. This PR fixes this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1195
exceptionHandler is hiding the inherited one by tespeleta · Pull Request #1195 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
would be nice to have a test case exhibiting the issue
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1196
BZ482023: Pump.pump does not check that the streams != null by alexlehm · Pull Request #1196 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1197
Provide response size to bodyEndHandler on HttpServerResponse by stampy88 · Pull Request #1197 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently it is very difficult to write an access log containing the response size for a chunked response. By adding the response size as the parameter to the bodyEndHandler it simplifies this tremendously. Will have a subsequent PR for vertx-web if this is merged.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1198
Provide response size to bodyEndHandler on HttpServerResponse by stampy88 · Pull Request #1198 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Stampy,
Unfortunately we can't do it this way as it would involve an incompatible change on a public API (we must maintain backwards compatibility in minor or point releases).
A different way to do this and which would preserve backwards compatibility would be to keep the signature of the body end handler the same but to expose a new method bytesWritten() which could called from inside the bodyEndHandler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1199
Provide the remote name to the TCPMetrics connected callback so clien… by vietj · Pull Request #1199 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I haven't checked, do you know if the issue applies to DatagramSocketMetrics as well?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1200
Add a callback invoked when the event bus is initialized.  by cescoffier · Pull Request #1200 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
there is not test for this feature.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1201
Use current class loader instead of system class loader. by mguillet · Pull Request #1201 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Replaced by #1202 (same implementation, with a few tests).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1202
Fix default classloader in command lookup by cescoffier · Pull Request #1202 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1203
Added bytesWritten to HttpServerResponse by stampy88 · Pull Request #1203 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@purplefox any chance you'll be able to look over this soon? Right now I have my version in our maven repo until this is merged. Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1204
Http Client deadlock fix by purplefox · Pull Request #1204 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1205
Stream documentation updates by jponge · Pull Request #1205 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just did a rebase and excluded the generated asciidoc to avoid conflicts.
Ping @vietj
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1206
Use host name provided by the user in DatagramSocketMetrics#listening by tsegismont · Pull Request #1206 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1207
Allow handler to be unhooked at anytime by testn · Pull Request #1207 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok for me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1208
Fix missing pass logging arguments on slf4j delegate by kjim · Pull Request #1208 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@kjim could you please sign the Eclipse CLA:
https://www.eclipse.org/legal/CLA.php
And then re-submit this PR and don't forget to sign-off the commit:
git commit -s "comment"
This way you comply to the IP rules and your commit can be merged.
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1209
Add details about the application  by cescoffier · Pull Request #1209 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1210
Cache "Connection was closed" as a singleton by testn · Pull Request #1210 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1211
buffer.duplicate() is invoked twice · Issue #1211 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpServerRequestImpl.java, line no. 360:
          decoder.offer(new DefaultHttpContent(data.getByteBuf().duplicate()));

but data.getByteBuf() itself invokes buf.duplicate ()
This is in the latest released version 3.1.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1212
Add max queue size in HttpClient · Issue #1212 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Vert.x 2 there was an option to limit the size of HttpClient waiting connection queue made in this PR - #849 (discussion in #845). Apparently, in Vert.x 3, due to the refactoring, this functionality wasn't included.
See https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/ConnectionManager.java#L95
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1213
Add "Connection: close" handling to HttpClient keepalive connections · Issue #1213 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The functionality was added to Vert.x 2.x but was not carried forward into the 3.x code base.  If using keepalive connections and the server sends back an 'Connection: close' header then the client should close it's connection and not continue using it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1214
Fix thread safety issue for writePos variable by testn · Pull Request #1214 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
shouldn't you reduce the scope of synchronization to only += statement ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1215
Grammatical fixes in README. by AndersDJohnson · Pull Request #1215 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
In order to contribute you must have signed the eclipse CLA: http://www.eclipse.org/legal/CLA.php
And then re-submit the PR and don't forget to commit and sign-off:
git commit -s -a -m "Grammatical fixes in README"

You only need to sign the CLA once for all Eclipse projects :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1216
Allow to plug a Context exception handler · Issue #1216 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
that would allow to trace the flow propagation (i.e when a context schedules the execution of a context and its later execution, etc...)
Vert.x Unit could use that to be aware of failures and somehow get rid of TestContext , for instance:
@Test
public void testSomething(TestContext ctx) {
  long now = System.currentMillis();
   vertx.setTimer(50, v -> {
      ctx.assertTrue(System.currentMillis() - now <= 50);
   });
}

could be pretty much like:
@Test
public void testSomething() {
  long now = System.currentMillis();
   vertx.setTimer(50, v -> {
      assertTrue(System.currentMillis() - now <= 50);
   });
}

the AssertionError would be caught by Vert.x Unit and make the test fail.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1217
HttpClientRequest end() could be invoked out of order · Issue #1217 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If HttpClient is not running inside a verticle/container. For example, it's running as a HTTP client application. HttpClientRequest.write()/end() are supposed to be called from outside vert.x event loop. When doing so, write() will be re-invoked in vert.x event loop but end() will not be. Therefore, complete flag may be set to "true" before all the write() calls are invoked. In such case, the request may end before it sends out all of its data.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1218
ClientConnection should be closed upon http RequestTimeout · Issue #1218 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If an HttpClientRequest get's in a state where it is no longer receiving data from a server and a request timeout fires then Vertx should force the connection to close so that it can be freed up so another request can be processed.   Most likely since the connection is in an unknown state it shouldn't be reused if keepalive is enabled.
This issue combined with issue #1212 can easily cause an OOM or stalled HTTPClient situation on high throughput servers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1219
Waiting requests that have been timed out should not open a tcp connection. · Issue #1219 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If a request goes into the HTTPClient wait queue and times out before being processed it will still cause an http connection to be opened and closed in a non-keepalive case.  This has the side effect of causing a large number of TIME_WAIT sockets on the local host and extra load on the server and network for no value.
If a waiting request times out it should be ignored rather than cause an interaction with the connection pool.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1220
Add Buffer#toString() / Buffer#toJsonObject() / Buffer#toJsonArray() · Issue #1220 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1221
Fix typo in documentation about logging backend by cescoffier · Pull Request #1221 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix issue reported in vert-x3/vertx-web-site#118 (Typo in the class name to implement to change the logging backend)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1222
Fix #1211 by cescoffier · Pull Request #1222 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
fixed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1223
No good way to clean up resource attached to a request · Issue #1223 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
From a server perspective, there is no handler which is guaranteed to be called when a request finishes. HttpServerResponse.bodyEndHandler is only called if the request ends properly. If a socket is closed by either side, it may not be called. Another option is to use closeHandler but it will not be called when the request is ended either.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1224
VertX 3 can send an object via EventBus?? · Issue #1224 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a class,and i use Vertx.eventBus.send("Address",my_object).But i get this error:SEVERE: No message codec for type: for my_object.
So how to fix it???
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1225
ExecuteBlocking timeout · Issue #1225 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It should be possible to set specify a timeout in an executeBlocking that happens when no worker thread is available before this timeout.
This would be used in JDBCClient for instance, etc...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1226
CLI redeploy improvements (termination, on-redeploy) by cescoffier · Pull Request #1226 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1227
Handle Exception when convert from Object to Json via EventBus · Issue #1227 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to send an Object via EventBus,and this is my way:
-Convert from Object to JSON String
-Handle String
-When handling String,Convert from JSON String to Object
But i still get this error:SEVERE: Unhandled exception
java.lang.RuntimeException: Message type: Object not found.
I don`t know why vertX handles that Object type,even after i convert it????
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1228
Handle timed out waiting requests without causing a connect/close. by ddimensia · Pull Request #1228 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #1219 for more details.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1229
Handle timed out waiting requests without causing a connect/close. by ddimensia · Pull Request #1229 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #1228 for more details.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1230
Handle timed out waiting requests without causing a connect/close. by ddimensia · Pull Request #1230 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #1219 for more details.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1231
Add max queue size in HttpClient by meshuga · Pull Request #1231 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
see #1232
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1232
Ported 2.x support for setting maxWaitQueueSize on HttpClient to master. by ddimensia · Pull Request #1232 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1233
Optionally specifying whether to fail on unknown properies by mwhitlaw · Pull Request #1233 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1234
Added support for respecting the Connection header in Http client connections. by ddimensia · Pull Request #1234 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1235
Add toString(Charset) method by testn · Pull Request #1235 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
To make it easier to work with Charset instead of String
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1236
HttpClientRequest timeout doesn't work as indicated · Issue #1236 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Based on the code in HttpClientRequestImpl#handleTimeout and the test testRequestTimeoutExtendedWhenResponseChunksReceived it would indicate that the request timeout is supposed to be canceled at the end of the response with some grace period applied as long as data is being received.
The current code doesn't actually work in that manner and I question whether a sliding timeout window is desired behavior either.
Currently, the timeout is canceled in handleResponse which is called when the underlying connection handler receives the Status-Line of the response in HttpClientImpl.ClientHandler#doMessageReceived.  Since this is the first packet of the response it means that the time it takes to receive the body, and the implied chunk handling timeout extension, is never included in the request timeout time.  A test that would illustrate the problem would be to set a requestTimeout, have the server send headers but delay the body for more than the timeout.  You should see that the timeout never fires as it was already canceled once the server sent the initial response packet.
It seems like the preferred behavior would be to cancel the requestTimeout timer in ClientConnection#handleResponseEnd and remove the sliding window implied by the chunk handling or make it optional.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1237
updates to make max http url length and the max header size configura… by sameer7 · Pull Request #1237 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…ble. Also exposed isSSL in http request interface
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1238
updates to make max http url length and the max header size configura… by sameer7 · Pull Request #1238 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1239
Fix missing pass logging arguments on slf4j delegate by zcx2001 · Pull Request #1239 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
How to accept this Agreement？
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1240
Prefix internal event bus handlers with "__vertx." · Issue #1240 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For instance the NetSocket handlers, that would allow the Metrics SPI to distinguish them easily.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1241
HttpClient: Netty "decodeResult" not handled · Issue #1241 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have an issue when a server send a response with too large headers, when debugging I  see that Netty has put the status "decodeResult: failure(io.netty.handler.codec.TooLongFrameException: HTTP header is larger than 8192 bytes.)" on the DefaultHttpResponse but Vert.x HttpClient does not check this status and handle normally the response which has incomplete headers.
For example the initial content-length header is not present in the headers and that breaks the processing of the response. Processing that should not be done as Netty has failed decoding the response.
Can you fix this problem?
I have a second issue, I effectively have some big headers but the  "HttpClientCodec" parameters are not configurable, I will open a second issue for this point.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1242
Make Netty HttpClientCodec and HttpRequestDecoder Configurable · Issue #1242 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add some options to HttpClientOptions and HttpServerOptions to let users customize the netty HttpClientCodec/HttpRequestDecoder options (maxHeaderSize/maxChunkSize).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1243
SLF4JLogDelegate does not pass down parameters when it is location aware · Issue #1243 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LocationAwareLogger l = (LocationAwareLogger) logger;
  l.log(null, FQCN, level, msg, null, t);

Should pass params as the second last parameter
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1244
Http client hangs if connection pooling is used (default) · Issue #1244 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm writing non-blocking HTTP proxy server and faced with the issue: after several benchmark iterations my server stop handling requests. As I see pooled connections are in CLOSE_WAIT state (according to netstat) which means that remote server has closed them, but vert.x http client still keeps them for sending data. I suppose when new request arrives vert.x acquires one of them to pass the request and then hangs.
My environment:
Vert.x 3.1.0
JDK 1.8
OS X 10.9.5
Code sample (Kotlin):
val clientOptions =
                HttpClientOptions()
                        .setDefaultHost("$BUCKET.s3.amazonaws.com")
                        .setMaxPoolSize(1000)

        val client = vertx.createHttpClient(clientOptions)

        val serverOptions =
                HttpServerOptions()
                .setAcceptBacklog(1000)

        vertx.createHttpServer(serverOptions)
                .requestHandler { request ->
                    val path = request.path()

                    when (request.method()) {                        
                        HttpMethod.GET -> {
                            client.get(path) { s3Response ->
                                if (s3Response.statusCode() != 200)
                                    request.response().setStatusCode(s3Response.statusCode()).end()
                                else {
                                    val response =
                                            request.response()
                                                    .putHeader(LENGTH_HEADER, s3Response.getHeader(LENGTH_HEADER))

                                    val pump = Pump.pump(s3Response, response)

                                    s3Response.endHandler { response.end() }

                                    pump.start()
                                }
                            }
                            .putHeader("Date", "...") // put required headers
                            .end()
                        }
                        else ->
                            request.response().setStatusCode(400).end("Unsupported HTTP verb")
                    }
                }
                .listen(8080) { result ->
                    if (result.succeeded())
                        future.complete()
                    else
                        future.fail(result.cause())
                }

...

@JvmStatic fun main(args: Array<String>) {
            Launcher.main(arrayOf("run", MyVerticle::class.java.name))
}
The issue looks similar to #1218 but differs in closing connection trigger - my case is a remote server closes connection explicitly. I suppose that http client should close it in order and remove from pool.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1245
HttpClient metrics request lifecycle improvements · Issue #1245 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Client request metrics callback in the metrics SPI:

when a request is enqueued in the connection manager
when it gets the client connection
when a request time outs

that would allow the metrics SPI implementation to report client statistics like connection pool dimensions, request queuing statistics, etc.....
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1246
Add worker thread pool metrics · Issue #1246 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add to the metrics SPI details about the current worker pool.

max size
current size
queue size
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1247
Deadlock if the connection is still being used while HttpClient is closing · Issue #1247 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This happens in Vert.x 3.2. In thread 5717, we hold the lock on HttpClientImpl.close (lock #1) and then we try to acquire a lock on ClientConnection.close (lock #2). In thread 7035, we hold a lock #2 in ClientConnection.handleClosed and try to hold a lock #1 at HttpClientImpl.checkClosed. And boom, we get a deadlock.
I don't have a good repro now since it's quite hard to reproduce consistently. But I can demonstrate from the stack trace:
Thread 5717: (state = BLOCKED)
 - io.vertx.core.http.impl.ClientConnection.close() @bci=0, line=352 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientImpl.close() @bci=46, line=642 (Interpreted frame)

Thread 7035: (state = BLOCKED)
 - io.vertx.core.http.impl.HttpClientImpl.checkClosed() @bci=0, line=791 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientImpl.doRequest(io.vertx.core.http.HttpMethod, java.lang.String, int, java.lang.String, io.vertx.core.MultiMap) @bci=23, line=782 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientImpl.request(io.vertx.core.http.HttpMethod, int, java.lang.String, java.lang.String) @bci=7, line=338 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientImpl.get(int, java.lang.String, java.lang.String) @bci=7, line=348 (Interpreted frame)
          . 
          .
          .
 - io.vertx.core.http.impl.HttpClientRequestImpl.lambda$exceptionHandler$78(io.vertx.core.Handler, java.lang.Throwable) @bci=6, line=262 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$21.handle(java.lang.Object) @bci=12 (Interpreted frame)
 - io.vertx.core.http.impl.HttpClientRequestImpl.handleException(java.lang.Throwable) @bci=21, line=384 (Interpreted frame)
 - io.vertx.core.http.impl.ClientConnection.handleClosed() @bci=59, line=307 (Interpreted frame)
 - io.vertx.core.net.impl.VertxHandler$$Lambda$43.run() @bci=4 (Interpreted frame)
 - io.vertx.core.impl.ContextImpl.lambda$wrapTask$16(boolean, io.vertx.core.impl.ContextTask, io.vertx.core.Handler) @bci=167, line=333 (Compiled frame)
 - io.vertx.core.impl.ContextImpl$$Lambda$15.run() @bci=16 (Compiled frame)
 - io.vertx.core.impl.ContextImpl.executeFromIO(io.vertx.core.impl.ContextTask) @bci=17, line=225 (Compiled frame)
 - io.vertx.core.net.impl.VertxHandler.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=37, line=99 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive() @bci=8, line=218 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive() @bci=20, line=204 (Interpreted frame)
 - io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=1, line=75 (Interpreted frame)
 - io.netty.handler.timeout.IdleStateHandler.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=6, line=257 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive() @bci=8, line=218 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive() @bci=20, line=204 (Interpreted frame)
 - io.netty.handler.codec.ByteToMessageDecoder.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=86, line=332 (Interpreted frame)
 - io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=2, line=212 (Interpreted frame)
 - io.netty.channel.CombinedChannelDuplexHandler.channelInactive(io.netty.channel.ChannelHandlerContext) @bci=5, line=132 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive() @bci=8, line=218 (Interpreted frame)
 - io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive() @bci=20, line=204 (Interpreted frame)
 - io.netty.channel.DefaultChannelPipeline.fireChannelInactive() @bci=4, line=828 (Interpreted frame)
 - io.netty.channel.AbstractChannel$AbstractUnsafe$7.run() @bci=10, line=625 (Interpreted frame)
 - io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(long) @bci=26, line=358 (Compiled frame)
 - io.netty.channel.nio.NioEventLoop.run() @bci=106, line=357 (Compiled frame)
 - io.netty.util.concurrent.SingleThreadEventExecutor$2.run() @bci=13, line=112 (Compiled frame)
 - java.lang.Thread.run() @bci=11, line=745 (Compiled frame)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1248
Shared instance of HttpClient is not guaranteed to be executed in the same thread · Issue #1248 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This does not behave as I expected where the callback of HttpClient called inside event loop is not guaranteed to be called back in the same event loop due to the connection from another event loop is reused in another event loop.
package io.vertx.test.core;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.http.HttpClient;
import io.vertx.core.http.HttpClientRequest;
import io.vertx.core.http.HttpServer;
import org.junit.Test;

import java.util.concurrent.CountDownLatch;

public class HttpDeadlockTest extends HttpTestBase {

    @Test
    public void testDeadlock() throws Exception {
        CountDownLatch latch = new CountDownLatch(4);
        client = vertx.createHttpClient();
        HttpClient localClient = vertx.createHttpClient();
        vertx.deployVerticle(new TestVerticle(), x -> latch.countDown());
        vertx.deployVerticle(new TestVerticle(), x -> latch.countDown());
        vertx.deployVerticle(new TestVerticle(), x -> latch.countDown());
        vertx.deployVerticle(new TestVerticle(), x -> latch.countDown());
        latch.await();
        CountDownLatch latch1 = new CountDownLatch(100);
        for (int i = 0; i < 100; i++) {
            localClient.getNow(19009, "localhost", "/", res -> {
                latch1.countDown();
                assertEquals(200, res.statusCode());
            });
        }
        latch1.await();
        localClient.close();
    }

    private class TestVerticle extends AbstractVerticle {

        @Override
        public void start(Future<Void> startFuture) throws Exception {
            HttpServer httpServer = vertx.createHttpServer();
            httpServer.requestHandler(x -> {
                Thread serverThread = Thread.currentThread();
                HttpClientRequest req = client.get(80, "load.s3.amazonaws.com", "/pixel.gif");
                req.handler(res -> {
                    Buffer buf = Buffer.buffer();
                    res.endHandler(v -> {
                        Thread clientThread = Thread.currentThread();
                        if (clientThread != serverThread) {
                            x.response().setStatusCode(500);
                        } else {
                            x.response().setStatusCode(200);
                        }
                        x.response().end();
                    });
                    res.handler(buf::appendBuffer);
                });
                req.end();
            });
            httpServer.listen(19009, x -> startFuture.complete());
        }

        @Override
        public void stop(Future<Void> stopFuture) throws Exception {
            super.stop(stopFuture);
        }
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1249
Connection close fix by vietj · Pull Request #1249 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Not much credit to me, most of the code was copied from a PR of @ddimensia (for some reason I was not able to make this PR working and merged just before 3.2 so I preferred to revert) , I modified it a bit, the tests are provided by @alexlehm .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1250
Support connection close header in HttpClient · Issue #1250 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1251
HTTP server incorrectly responds HTTP/1.0 to 1.0 clients · Issue #1251 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If I send an HTTP/1.0 request to a (Ceylon) Vert.x http server with Vert.x 3.2.0 like
GET / HTTP/1.0

.. then the server responds with:
HTTP/1.0 200 OK

However the response version should indicate the capabilities of the server. Since Vert.x supports 1.1 as well it should instead respond with:
HTTP/1.1 200 OK

This way the client becomes aware that the server also supports HTTP/1.1. It does not however change the semantics of the response - the server still has to send a response that complies with HTTP/1.0 semantics since the client has indicated the maximum version it can use.
The only required change to implement this is thus to always write "HTTP/1.1" in the response. All the logic on setting response headers and closing connections etc should work as before, i.e. use the version from the request to decide semantics.
Some references for more information:

https://bugs.php.net/bug.php?id=42779
http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.1 - "The protocol versioning policy is intended to allow the sender to indicate the format of a message and its capacity for understanding further HTTP communication"
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1252
Live Redeploy option is not working · Issue #1252 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying out vert.x 3.2.0, the live redeploy option appears to be broken:
john@vbox:~/wokspace/vertx/cae$ $ vertx run -cp target/classes --redeploy="*/.class" io.mytest.HelloWorld
Starting the vert.x application in redeploy mode
Starting vert.x application...
c7dc08f2-693e-4dfe-8312-62c17d0595a7-redeploy
java.lang.ClassNotFoundException: run
at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
at io.vertx.core.impl.JavaVerticleFactory.createVerticle(JavaVerticleFactory.java:42)
at io.vertx.core.impl.DeploymentManager.createVerticles(DeploymentManager.java:186)
at io.vertx.core.impl.DeploymentManager.lambda$doDeployVerticle$153(DeploymentManager.java:159)
at io.vertx.core.impl.FutureImpl.checkCallHandler(FutureImpl.java:135)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:100)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:132)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:104)
at io.vertx.core.impl.DeploymentManager.deployVerticle(DeploymentManager.java:92)
at io.vertx.core.impl.VertxImpl.deployVerticle(VertxImpl.java:546)
at io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer.deploy(VertxIsolatedDeployer.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at io.vertx.core.impl.launcher.commands.ClasspathHandler.deploy(ClasspathHandler.java:160)
at io.vertx.core.impl.launcher.commands.RunCommand.deploy(RunCommand.java:373)
at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:247)
at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:230)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:365)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:328)
at io.vertx.core.Launcher.main(Launcher.java:48)
Dec 21, 2015 11:03:45 AM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
SEVERE: Failed in deploying verticle
java.lang.ClassNotFoundException: run
at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
at io.vertx.core.impl.JavaVerticleFactory.createVerticle(JavaVerticleFactory.java:42)
at io.vertx.core.impl.DeploymentManager.createVerticles(DeploymentManager.java:186)
at io.vertx.core.impl.DeploymentManager.lambda$doDeployVerticle$153(DeploymentManager.java:159)
at io.vertx.core.impl.FutureImpl.checkCallHandler(FutureImpl.java:135)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:100)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:132)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:104)
at io.vertx.core.impl.DeploymentManager.deployVerticle(DeploymentManager.java:92)
at io.vertx.core.impl.VertxImpl.deployVerticle(VertxImpl.java:546)
at io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer.deploy(VertxIsolatedDeployer.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at io.vertx.core.impl.launcher.commands.ClasspathHandler.deploy(ClasspathHandler.java:160)
at io.vertx.core.impl.launcher.commands.RunCommand.deploy(RunCommand.java:373)
at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:247)
at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:230)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:365)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:328)
at io.vertx.core.Launcher.main(Launcher.java:48)
java.lang.ClassNotFoundException: run
at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
at io.vertx.core.impl.JavaVerticleFactory.createVerticle(JavaVerticleFactory.java:42)
at io.vertx.core.impl.DeploymentManager.createVerticles(DeploymentManager.java:186)
at io.vertx.core.impl.DeploymentManager.lambda$doDeployVerticle$153(DeploymentManager.java:159)
at io.vertx.core.impl.FutureImpl.checkCallHandler(FutureImpl.java:135)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:100)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:132)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:104)
at io.vertx.core.impl.DeploymentManager.deployVerticle(DeploymentManager.java:92)
at io.vertx.core.impl.VertxImpl.deployVerticle(VertxImpl.java:546)
at io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer.deploy(VertxIsolatedDeployer.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at io.vertx.core.impl.launcher.commands.ClasspathHandler.deploy(ClasspathHandler.java:160)
at io.vertx.core.impl.launcher.commands.RunCommand.deploy(RunCommand.java:373)
at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:247)
at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:230)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:365)
at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:328)
at io.vertx.core.Launcher.main(Launcher.java:48)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1253
Update redeploy documentation · Issue #1253 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Eclipse need the launcher-class
It should give a complete example with Gradle and Maven.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1254
Fix typos in documentation by cescoffier · Pull Request #1254 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This commit fixes:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1255
Add an ability to name Vert.x instance · Issue #1255 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It is useful when dealing with unit tests that involve multiple vert.x especially if the name is used as part of the threads created by vert.x
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1256
A call to routingContext.request().netSocket().isSsl() make the verticle to stop accepting new connections · Issue #1256 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a route that tries to retrieve if the request is an http or https request.
private void handleAddEvent(RoutingContext routingContext) {
routingContext.request.netSocket().isSsl();
response.end();
}
The call the isSsl seems to stop the verticle to accept any new http request.
I use Vert.x 3.2.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1257
Exclude codegen.json from final vertx-core binary · Issue #1257 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to utilize vertx-codegen to generate code, somehow it always picks up codegen from vertx-core instead of my own's. Would be great if you guys can just move it out of final release
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1258
Fat-JAR-Error: on unpackFromJarURL with whitespaces in the path of windows filepath · Issue #1258 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This happens in Vert.x 3.2.
On start-up a vertx-web-fat-JAR on a path with whitespace i get a internall server error.
Example -> ok:
Working dir: C:\Users*Max*\git\Project\target
Start-CMD: java -jar webapp.jar
Example -> failed:
Working dir: C:\Users*Max Mustermann*\git\Project\target
Start-CMD: java -jar webapp.jar
500 C:\Users\Max%20Mustermann\git\Project\target\webapp.jar (Das System kann den angegebenen Pfad nicht finden)

    java.io.FileInputStream.open0(Native Method)
    java.io.FileInputStream.open(Unknown Source)
    java.io.FileInputStream.(Unknown Source)
    java.io.FileInputStream.(Unknown Source)
    io.vertx.core.impl.FileResolver.toZipInputStream(FileResolver.java:171)
    io.vertx.core.impl.FileResolver.unpackFromJarURL(FileResolver.java:180)
    io.vertx.core.impl.FileResolver.resolveFile(FileResolver.java:121)
    io.vertx.core.impl.VertxImpl.resolveFile(VertxImpl.java:657)
    io.vertx.core.file.impl.FileSystemImpl$6.perform(FileSystemImpl.java:517)
    io.vertx.core.file.impl.FileSystemImpl$6.perform(FileSystemImpl.java:514)
    io.vertx.core.file.impl.FileSystemImpl.propsBlocking(FileSystemImpl.java:150)
    io.vertx.ext.web.handler.impl.StaticHandlerImpl.lambda$getFileProps$4(StaticHandlerImpl.java:264)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1259
Make sure that request.handleException is called only once by testn · Pull Request #1259 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
handleException is called for each request of the connection, this is necessary as there could be several requests made in the current connection (keepalive or pipeline).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1260
Make sure that request.handleException is called only once by testn · Pull Request #1260 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj test added
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1261
Provide  a way to force request state to become 'ended' after invoking response.end() · Issue #1261 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I know this is a tricky subject, but the problem is real. Here is my scenario. I'm implementing an API method that allows the client to update a server resource with a new content PROVIDED the resource is already known on the server. A nice way of doing it is to have the client wait for 100-Continue before sending in the update stream itself which can be quite large.  Since the URL contains the resource ID the server can look it up first, and only if exists signal the client to proceed. However, if the resource does not exist, the server would reply with an error status and the client would not send the update. The connection can remain open and ready for the next request.
However, with vert.x this is apparently not possible...
Here is what I'm doing at a bit lower level:

In httpserverconfig I use handle100ContinueAutomatically = false
Upon receiving request, the server extracts the resource ID from the URL and checks for the resource availability status.
If resource available, do

               if (isExpect100Continue())
                    response.writeContinue();

then proceed with setting up request handler as usual.
4. If resource is not available, do
response.setStatusCode (404).end ("some error message);

What I see:
In the case of resource being available, everything works as expected.
In the case of resource being not available, the connection becomes unusable and all subsequent client requests arriving on that connection simply time out. In that state, the following is what I see in my log (in my code I log these states after invoking "request.end()"):
request.isEnded()=false, rc.response.ended()=true, rc.response.bytesWritten()=65

This clearly shows that request is not 'ended' since really the client did not send any data expecting 100-continue but instead getting 404 (btw, I'm using standard apache http client and it behaves flawlessly in the scenario above)
This may lead to a bigger question: perhaps the right answer is to expose 'drainAndEnd ()' method on the request to ensure that nothing remains in the request pipeline and forcing the end state? Http/2 has this feature built-in.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1262
Enable adding netty logging handler to log HTTP requests/responses (for debugging) · Issue #1262 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
if (...)
   pipeline.addLast("log", new LoggingHandler())

Those who ever needed to debug Netty know that LoggingHandler is one of the first instruments.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1263
Fix issue #1258 - resolve file from jar when the path contains spaces by cescoffier · Pull Request #1263 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj, @pmlopes  please review.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1264
HttpClient connection should not be reused for a request when there is an on-going request · Issue #1264 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1265
Http client pooling improvements by vietj · Pull Request #1265 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
You will need to update. Except that +1.
(BTW it includes changes coming from other PR).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1266
HttpClient sharing clarifications and warns · Issue #1266 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
An HttpClient should not be shared between different Verticles or Context. It should be documented and when the client detects a different context, it should print a warn on the console to make the user aware of this situation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1267
HttpClient sharing clarifications and warns - fixes #1266 by vietj · Pull Request #1267 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1268
How we can check if Verticle sends Message successfully or not??? · Issue #1268 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have 2 Verticles :a sender and a receive.Sometimes - with sending-receiving first message ,i see that My Receive can not  handle first message -but ok with all other messages after it.So i have 2 assumptions: i have sent message when Receive haven't deployed completed ,or Message didn't send successfully.How can i fix it???
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1269
Implement toString() method by junbong · Pull Request #1269 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I know the platform is very JSON oriented but I think this is not that same. MultiMap obtain used as the "request header" which style is like KEY=VALUE;. Otherwise, I just followed familiar Java toString() style of Collection of HashSet.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1270
DefaultExceptionHandler for HttpClient · Issue #1270 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add a new option for HttpClientOptions where we should set a DefaultExceptionHandler for all HttpClientRequest created by that HttpClient.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1271
PROXY protocol support to HttpServer by jkeys089 · Pull Request #1271 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi, this seems to be interesting but we didn't have time to include it in 3.3.0 - will look for 3.3.1 instead
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1272
HttpClientRequest endHandler() is confusing · Issue #1272 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
endHandler callback handler is not called when the HttpClientRequest.end() is called. However, it is called when it receives a HttpClientResponse which is quite unexpected. And worse, it is also called after the handler for HttpClientRequest.handler(Handler<HttpClientResponse>) being called. I would expected it to be called when the entire data has been written to.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1273
MessageProducer.writeQueueFull always returns `true` · Issue #1273 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current implementation of this method in MessageProducerImpl will always return a value of true.    At least for my use case it would be preferable if it returned true only if the producer is out of credit and has started to place messages in its pending queue.  It looks like this may have been the intent (since the code checks the pending queue size), but the check is current pending.size() >= 0 when I think it should be pending.size() > 0.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1274
Added possibility to register custom jackson modules in Json utility class by pjozsef · Pull Request #1274 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If we add registration support, it would be good to have the unregister no ?
We would need unit tests, before integrating this feature.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1275
Encryption for EventBus · Issue #1275 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Initial ticket: Encryption for EventBus #574:
For being able to run a vertx-cluster on a LAN, where other nodes are present (they should not be able to read the event bus communication) encryption for the server node traffic is necessary.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1276
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1277
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1278
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1279
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1280
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1281
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1282
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1283
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1284
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1285
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1286
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1287
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1288
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1289
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1290
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1291
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1292
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1293
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1294
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1295
Configure LogDelegateFactory through file · Issue #1295 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JULLogDelegateFactory can be configured through a system property and a file vertx-default-jul-logging.properties. I wonder if it would make sense to also make LoggerFactory configurable through the system property vertx.logger-delegate-factory-class-name as well as a file (probably called vertx-logger-factory.properties with a single property vertx.logger-delegate-factory-class-name) or through the Java service mechanism maybe.
This would make it easier to pre-configure the required logger by placing a file in the classpath. This would even work in a fat jar where system properties can only be set by the caller.
What do you think?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1296
io.vertx.core.Launcher doesn't launch launcher class · Issue #1296 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I tried to run gradle-verticles example. I followed a README, but after build and run, no verticle listens on the port.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1297
Added documentation about classpath resolution and restrictions by JotBePunkt · Pull Request #1297 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1298
FileResolver performance issue · Issue #1298 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fatjar it creates perf issues when unpacking resources because it went from ZipFile#entries() (that is basically a lookup in the Zip dir structure) to ZipFileInputStream that performs a scan of the Zip file.
See this commit : 29000c6#diff-4f1620acdced3de97ebe522db0fd106a
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1299
VertxImpl.deployVerticle combines asynchronous with synchronous completion · Issue #1299 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi all,
deployVerticle can perform asynchronous computations.
Given the code below on error case the handler is called synchronously when closed is true.

  public void deployVerticle(Verticle verticle, DeploymentOptions options, Handler<AsyncResult<String>> completionHandler) {
    boolean closed;
    synchronized (this) {
      closed = this.closed;
    }
    if (closed) {
      completionHandler.handle(Future.failedFuture("Vert.x closed"));
    } else {
      deploymentManager.deployVerticle(verticle, options, completionHandler);
    }
  }

My suggestion is to always invoke completionHandler asynchronously.
This would simplify caller code a lot if this method will always invoke the handler asynchronously. In this way the caller can embrace declarative style programming without having to worry about results coming synchronously while declarative code executes.
This should be applied to all APIs which might mix them.
I am trying to write this kind of code:
AsyncJoin
    .join(h->deployVerticle(x,h))
    .onCompleted(lambda).

And because of the described problem i am forced to do the one below otherwise the AsyncJoin might be complete before onCompleted was registered and since is a declarative construct the order should not matter.
AsyncJoin
     .join(
             h->runInContext(
                     ()->deployVerticle(x,h)
             ))
     .onCompleted(lambda).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1300
Nested jar perf issue by vietj · Pull Request #1300 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1301
Rxfied Buffer.buffer(byte[] bytes) is not available · Issue #1301 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to user Rxfied Buffer.buffer(byte[] bytes) but it seems not available
Any alternative solution !?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1302
EventLoop thread blocked on Vertx.clusteredVertx() · Issue #1302 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx 3.2.1.
Sometimes EventLoop thread blocked on Vertx.clusteredVertx().
Method Vertx.clusteredVertx() called on the main java thread on application startup.
Stacktrace:
19:30:48.633 [vertx-blocked-thread-checker] WARN  i.v.core.impl.BlockedThreadChecker - Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 5660 ms, time limit is 2000
io.vertx.core.VertxException: Thread blocked
    at java.lang.Object.wait(Native Method) ~[na:1.8.0]
    at com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.pollResponse(InvocationFuture.java:299) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.waitForResponse(InvocationFuture.java:247) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.get(InvocationFuture.java:224) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.get(InvocationFuture.java:204) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.map.impl.proxy.MapProxySupport.invokeOperation(MapProxySupport.java:456) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.map.impl.proxy.MapProxySupport.putInternal(MapProxySupport.java:417) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.map.impl.proxy.MapProxyImpl.put(MapProxyImpl.java:97) ~[hazelcast-3.5.2.jar:3.5.2]
    at com.hazelcast.map.impl.proxy.MapProxyImpl.put(MapProxyImpl.java:87) ~[hazelcast-3.5.2.jar:3.5.2]
    at io.vertx.core.impl.HAManager.<init>(HAManager.java:145) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.VertxImpl.lambda$new$270(VertxImpl.java:152) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.VertxImpl$$Lambda$3/852445367.handle(Unknown Source) ~[na:na]
    at io.vertx.core.impl.FutureImpl.checkCallHandler(FutureImpl.java:158) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:100) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.ContextImpl.lambda$null$16(ContextImpl.java:305) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.ContextImpl$$Lambda$7/299713639.handle(Unknown Source) ~[na:na]
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:335) ~[vertx-core-3.2.1.jar:na]
    at io.vertx.core.impl.ContextImpl$$Lambda$8/977225900.run(Unknown Source) ~[na:na]
    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:358) ~[netty-common-4.0.33.Final.jar:4.0.33.Final]
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357) ~[netty-transport-4.0.33.Final.jar:4.0.33.Final]
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112) ~[netty-common-4.0.33.Final.jar:4.0.33.Final]
    at java.lang.Thread.run(Thread.java:744) ~[na:1.8.0]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1303
Implement a log delegate using Log4J 2. by cescoffier · Pull Request #1303 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj @pmlopes ready for review
@vietj it adds two 'provided' dependencies - not sure if we need to open CQ for these.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1304
Adding support for naming the vert.x instance by ionelMihai · Pull Request #1304 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
related to #1255
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1305
Bump versions to latest libs as of 12 Feb 2016 - Tests pass by karianna · Pull Request #1305 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As discussed on the mailing list.  Bumping the versions in core introduces no breakages on core but may conflict with child 'modules' as Vert.x has a flat Classpath.  I'll shortly post a possible Maven plugin detection solution for checking this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1306
Add some comment to buffer(ByteBuf) method of Buffer class by junbong · Pull Request #1306 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add some comment to buffer(ByteBuf) method of Buffer class because previous comment was confusing.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1307
ConcurrentModificationException from ConnectionManager.close · Issue #1307 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I got this exception from HttpClient.close:

java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextNode(HashMap.java:1429)
at java.util.HashMap$KeyIterator.next(HashMap.java:1453)
at java.util.AbstractCollection.addAll(AbstractCollection.java:343)
at java.util.HashSet.(HashSet.java:119)
at io.vertx.core.http.impl.ConnectionManager$ConnQueue.closeAllConnections(ConnectionManager.java:143)
at io.vertx.core.http.impl.ConnectionManager.close(ConnectionManager.java:78)
at io.vertx.core.http.impl.HttpClientImpl.close(HttpClientImpl.java:640)

I'm guessing the problem is with the synchronization on the methods of the inner ConnectionQueue class that access the allConnections member:

ConnectionManager::ConnectionQueue::connectionClosed and ConnectionManager::ConnectionQueue::closeAllConnections both synchronize on this (i.e. ConnectionManager.ConnectionQueue.this)
ConnectionManager::ConnectionQueue::createNewConnection synchronizes on ConnectionManager.this

See: https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/ConnectionManager.java#L174
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1308
Enable configuration of LoggerFactory through properties file by michel-kraemer · Pull Request #1308 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj @cescoffier @pmlopes Maybe something for the spring cleanup? :-) :-) :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1309
Throw a more specific exception from HazelCastClusterManager in case lock timout is reached · Issue #1309 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I would like to analyze the exception thrown when a failure to acquire the lock occurs.
I woul like to be sure it's due to a timeout.
Right now the only option is to check if the exception is a VertxException and if the message of the exception starts with "Timed out waiting to get lock".
It's a rather fragile solution to detect the timeout.
Could it be possible to throw a specific subclass instead to facilitate the exception handling?
For example:
package io.vertx.core;
public final class LockTimeoutException extends VertxException {
private final String lockName;
public LockTimeoutException( String lockName ) {
super( "Timed out waiting to get lock " + lockName );
this.lockName = lockName;
}
public String getLockName() {
return lockName;
}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1310
vertx start failes silently if a verticle doesn't exist · Issue #1310 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using the vertx command line loader you can start a verticle:
   vertx run phantom

and you will get:
    java.lang.ClassNotFoundException: phantom
at java.net.URLClassLoader.findClass(URLClassLoader.java:381)

as expected. But when you start
  vertx start phantom

you get:
   Starting vert.x application...
   7cbd4867-036f-4eeb-bdb1-010b491abe65

Which doesn't indicate that phantom doesn't exist
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1311
Update parent, dependencies and plugins by cescoffier · Pull Request #1311 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Update parent pom and integrate changes proposed in #1305.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1312
fix to completer impl to actually fail the Future by joydip · Pull Request #1312 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ouch... can you provide a test case too please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1313
TCPSSLOptions: Some default values missing in Java doc · Issue #1313 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think these values was fetched from SocketDefaults earlier, which has now been removed
https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/net/TCPSSLOptions.java
I guess it is really just the comments that need to be updated to include the default value
/**
   * The default value of TCP keep alive
   */
  public static final boolean DEFAULT_TCP_KEEP_ALIVE = false;

  /**
   * The default value of SO_linger
   */
  public static final int DEFAULT_SO_LINGER = -1;
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1314
HttpClient metrics aggregation · Issue #1314 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Using an option defined in the http client client for this purpose. See vert-x3/vertx-dropwizard-metrics#20 (comment)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1315
expose the config after parsing to the Launcher by jtruelove · Pull Request #1315 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you review @cescoffier ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1316
Error loading from classpath within .zip files · Issue #1316 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue description
I have found an issue with the vertx.fileSystem().readFile() function.
The function will fail if you try to load a file from the classpath and that file is stored inside a .zip file.
The problem is in the class io.vertx.core.impl.FileResolver. The method unpackFromJarURL() is assuming that the file will be always stored inside a .jar file:
  private synchronized File unpackFromJarURL(URL url, String fileName, ClassLoader cl) {
    try {
      ZipFile zip;
      String path = url.getPath();
      int idx1 = path.lastIndexOf(".jar!");
      ...

The method will throw an ArrayIndexOutOfBoundsException if the file is stored inside a .zip file.
How to reproduce it
I have attached two files:

test.zip: Compressed file that implements a Vert.x service. It contains two files:

mainVerticle.js: Main Service Verticle, written in JavaScript, that try to load a file.
myMod.json: Service descriptor, that indicates the location of the main service verticle.


vertx-service-factory-3.2.1.zip: Official Vert.x Service Factories implementation, used for loading the above service. Note that the .zip extension is not relevant here. Renamed from .jar to .zip just for being able to upload the file here.

For reproducing the issue just download both files and introduced the following commands (Linux/Mac):

export CLASSPATH=${CLASSPTH}:.:vertx-service-factory-3.2.1.zip:test.zip
vertx run service:myMod

You should see this log:
Hello from the mainVerticle.js
Succeeded in deploying verticle
Unhandled exception
<eval>#88:17<eval>:7:7 Error loading myMod.json file: java.lang.ArrayIndexOutOfBoundsException: 1
    at jdk.nashorn.internal.runtime.ECMAException.create(ECMAException.java:113)
    at jdk.nashorn.internal.scripts.Script$Recompilation$138$274AA$\^eval\_#88\!17\^eval\_.L:1$L:5(mainVerticle.js:7)
    at jdk.nashorn.internal.scripts.Script$Recompilation$137$31550A$\^eval\_#88\!17\^eval\_.L:1$FileSystem$readFile$L:831(vertx-js/file_system.js:835)
    at io.vertx.core.Handler$$NashornJavaAdapter.handle(Unknown Source)
    at io.vertx.core.impl.FutureImpl.checkCallHandler(FutureImpl.java:135)
    at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:100)
    at io.vertx.core.impl.ContextImpl.lambda$null$14(ContextImpl.java:305)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$16(ContextImpl.java:335)
    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:358)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357)
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
    at java.lang.Thread.run(Thread.java:745)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1317
#1316 Fixed bug loading from classpath within .zip files by ernestojpg · Pull Request #1317 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, can you add a test for this please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1318
Http server actual port · Issue #1318 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
NetServer has an actualPort() that returns the current actual port, there could be the same for HttpServer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1319
Update jackson version by cescoffier · Pull Request #1319 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Update jackson to latest version.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1320
Improve documentation of getClusterWideMap · Issue #1320 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There are many aspects when going distributed which are missing from the documentation
"Get the cluster wide map with the specified name. The map is accessible to all nodes in the cluster and data put into the map from any node is visible to any other node."
More specific topics:

how much HA is in there (is the data replicated?)
are there situations when data can be lost?
how about performance?
how about split brain? How about concurrent updates in a split brain situation? How about merging of the split brain?


Incorrect documentation for put with a TTL.
http://vertx.io/docs/apidocs/io/vertx/core/shareddata/AsyncMap.html#put-K-V-long-io.vertx.core.Handler-
It seems that the parameter is not a timeout but a TTL which does not match the comment below.
"Like put(K, V, io.vertx.core.Handler<io.vertx.core.AsyncResult<java.lang.Void>>) but specifying a timeout. If the value cannot be put within the timeout a failure will be passed to the handler"
I assume the word timeout does not refer to the TTL in which case i assume there is some internal timeout to consider although not mentioned for other methods which take the completionHandler as parameter.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1321
Add java.util.UUID support for JSON · Issue #1321 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I'm using the JDBC client to query my database. Unfortunately, I'm also using java.util.UUIDs which the vert.x JSON abstraction does not support. Converting it to a String does not work because the DB expect a UUID.
Is it possible/allowed to extend the supported datatypes? I've read that jackson supports UUIDs out-of-the-box. I hope that this will fix my problem.
Cheers,
Paul
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1322
Add Eventbus tcp options by cescoffier · Pull Request #1322 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1323
Reuse existing connections for the HttpClient · Issue #1323 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the ConnectionManager used by the HttpClientImpl, it is only polling the first connection and if it is closed, creates a new one. Should it try to empty the queue first ?
https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/ConnectionManager.java#L97
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1324
Extend cluster manager SPI to allow encryption configuration · Issue #1324 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do it make sense to extend the cluster manager SPI to allow enforcing the cluster manager security (encryption) by API / option.
See #1275 (comment).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1325
Add processing hooks in the clustered event bus · Issue #1325 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This issue proposes to add "hooks" in the clustered event bus to intercept the messages just before they are written on the wire, and just after they have been read from the wire.
It would allow customizing the binary format or apply message-based encryption.
See #1275 for more details.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1326
DatagramSocket.close() does't decrease metrics counter. · Issue #1326 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
DatagramSocket.close(handler) call metrics.close()
But  DatagramSocket.close()  ( --> ConnectionBase.close()) - does'not
This cause "vertx.datagram.sockets" (and i think other socket counting metrics) to show wrong data
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1327
Direct Scala support needs revival · Issue #1327 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Support for Scala as a first class citizen has gotten left behind in recent times.  It needs a champion (or four) to help it regain entry back to full citizenship.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1328
Config should not be printed to log when JSON cannot be parsed · Issue #1328 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the entire config file (passed to -conf) will be printed to the log if it cannot be correctly parsed as a JSON object on vertx startup. Since the config potentially can contain sensitive information that you don't want printed in a log this is not a good default.
I suggest vertx don't print the content of the config, rather just an error message telling that the config cannot be parsed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1329
Peer certificate chain cannot be retrieved after NetSocket TLS upgrade · Issue #1329 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1330
Raw WebSocket (via /websocket) always returns binary (instead of text) · Issue #1330 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a simple sockjs echo server written with vertx using sockJS.write(Buffer.buffer(msg)) where msg is a String. Now, on the client side, if I use sockJS client, then the onmessage gives me an echo String. However, when I use websocket and connect to /websocket, then the echo is a blob instead.
I tested with ws://echo.websocket.org  and they echo a String instead of a blob. Shouldn't vertx behave in the same way?
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1331
How to start one module after another · Issue #1331 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
i need to send a message from second to module first when module second starting, so i need first  module to start before second, How is it possible?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1332
Get the number of available threads in the worker pool from the vertx object · Issue #1332 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I would be nice to fine tune vert.x to know the number of available threads in the worker pool. I would me helpful for me to understand a bottleneck in a system.
https://groups.google.com/forum/#!searchin/vertx/poiuytrez/vertx/DgV9S2k_r9I/pMd2lCVlAwAJ
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1333
Get the number of execute blocking code waiting for a worker thread to be available · Issue #1333 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I would help me to identify a bottleneck.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1334
Add the number of default event loop threads created by Vert.x by poiuytrez · Pull Request #1334 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It was very weird to notice that in production with a machine having a lot of cores that I got many java threads (which does not occur in development with less cores).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1335
Add number of NIO loops created by Vert.x in the documentation. by poiuytrez · Pull Request #1335 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1336
Need MongoDB Client to support ReadPreference at the Operation level. · Issue #1336 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MongoDB supports the WriteConcern and ReadPreference at the DB, Collection, and Operation level.
The setting at the operation level overwrites the setting at the Collection level which overwrites the setting at the DB level.
The current Vertx MongoDB Client supports the WriteConcern at the DB, Collection and Operation level.
For Write operation, one can use the *WithOption() methods to specify the writeConcern. This is the operation level of WriteConcern which overwrites the collection and DB setting of the MongoClient.
Foe Query operation, one is limited to the readpreference setting when the MongoClient is created. To use different ReadPreference, one needs to create another MongoClient with different readPreference.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1337
Reduce the number of combination of the Clustered Event Bus SSL tests. by cescoffier · Pull Request #1337 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1338
Add method for setVerifyHost on NetClientOptions · Issue #1338 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently you can only set the verifyHost for HttpClientOptions.
You should be able to set this option when using the NetClient as well.
We should be able to reuse the HTTPS identification algorithm that is already in place in the SslHelper class
sslParameters.setEndpointIdentificationAlgorithm("HTTPS");
if the host is passed to the createSslHandler() in NetClientImpl
if (sslHelper.isSSL()) {
    SslHandler sslHandler = sslHelper.createSslHandler(vertx, true);    <-- Add host and port here
    pipeline.addLast("ssl", sslHandler);
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1339
Additional HTTP methods support · Issue #1339 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 2 had support for any extended HTTP method as methods are accepted as String. Vert.x has now limited itself to work only with standard HTTP methods and this has been a limitation for our application to migrate to Vert.x 3.
As per the discussion with @vietj , it is expected in 3.3. Adding this issue for tracking convenience.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1340
Handle Netty Http Decoder failures by gmagniez · Pull Request #1340 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse CLA please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1341
Merge pull request #1 from eclipse/master by FainTMako · Pull Request #1341 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what is this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1342
Improve HttpServerMetrics SPI to include url pattern · Issue #1342 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the http server metrics passes the received url to the metrics provider implementation.
R requestBegin(S socketMetric, HttpServerRequest request);
However for monitoring purposes this leads to an explosion of monitoring statistics.
It would be interesting if vertx could pass the associated router that matches the url requested so the
url pattern can be used for monitoring purposes.
Suppose I have a router defined that matches urls of the type:
/persons/:personId
Where I visualize my monitoring metrics I don't want to see:
/persons/1 GET total 10 requests avg 5ms
/persons/2 GET total 5 requests avg 5ms
/persons/3 GET total 6 requests avg 5ms
/persons/4 GET total 2 requests avg 5ms
This will generate too many lines in monitoring tools.
I would like to be able to get access to the path so I can get something like this:
/persons/:personId GET total 23 requests avg 5ms.
In order to make this possible the matching route needs to be passed to the beginRequest method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1343
Websocket deadlock during handshake · Issue #1343 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Affects 3.2.1
"test-akka.actor.default-dispatcher-1854" - Thread t@1934
   java.lang.Thread.State: WAITING
    at java.lang.Object.wait(Native Method)
    - waiting on <101efae> (a io.netty.util.concurrent.PromiseTask)
    at java.lang.Object.wait(Object.java:502)
    at io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:255)
    at io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:33)
    at io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:32)
    at io.netty.channel.DefaultChannelPipeline.waitForFuture(DefaultChannelPipeline.java:546)
    at io.netty.channel.DefaultChannelPipeline.remove(DefaultChannelPipeline.java:333)
    at io.netty.channel.DefaultChannelPipeline.remove(DefaultChannelPipeline.java:304)
    at io.netty.handler.codec.http.websocketx.WebSocketServerHandshaker.handshake(WebSocketServerHandshaker.java:176)
    at io.netty.handler.codec.http.websocketx.WebSocketServerHandshaker.handshake(WebSocketServerHandshaker.java:145)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.lambda$null$26(HttpServerImpl.java:570)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler$$Lambda$47/6681436.run(Unknown
Source)
    at io.vertx.core.http.impl.ServerWebSocketImpl.connect(ServerWebSocketImpl.java:257)
    at io.vertx.core.http.impl.ServerWebSocketImpl.writeFrame(ServerWebSocketImpl.java:229)
    - locked <150f83c> (a io.vertx.core.http.impl.ServerConnection)
    at io.vertx.core.http.impl.ServerWebSocketImpl.writeFinalTextFrame(ServerWebSocketImpl.java:239)
    at com.tomas.test.actor.ConnectionHandlerActor.com$tomas$test$actor$ConnectionHandlerActor$$sendToClient(ConnectionHandlerActor.scala:118)
    at com.tomas.test.actor.ConnectionHandlerActor.sendToClient(ConnectionHandlerActor.scala:127)
    at com.tomas.test.actor.ConnectionHandlerActor.handleUnknownUser(ConnectionHandlerActor.scala:131)
    at com.tomas.test.actor.ConnectionHandlerActor.preStart(ConnectionHandlerActor.scala:70)
    at akka.actor.Actor$class.aroundPreStart(Actor.scala:470)
    at com.tomas.test.actor.ConnectionHandlerActor.aroundPreStart(ConnectionHandlerActor.scala:40)
    at akka.actor.ActorCell.create(ActorCell.scala:580)
    at akka.actor.ActorCell.invokeAll$1(ActorCell.scala:456)
    at akka.actor.ActorCell.systemInvoke(ActorCell.scala:478)
    at akka.dispatch.Mailbox.processAllSystemMessages(Mailbox.scala:279)
    at akka.dispatch.Mailbox.run(Mailbox.scala:220)
    at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
    at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
    at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.pollAndExecAll(ForkJoinPool.java:1253)
    at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1346)
    at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
    at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)

   Locked ownable synchronizers:
    - None


"vert.x-eventloop-thread-1" - Thread t@13
   java.lang.Thread.State: BLOCKED
    at io.vertx.core.http.impl.ServerWebSocketImpl.isRejected(ServerWebSocketImpl.java:272)
    - waiting to lock <150f83c> (a
io.vertx.core.http.impl.ServerConnection) owned by
"test-akka.actor.default-dispatcher-1854" t@1934
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.lambda$handshake$27(HttpServerImpl.java:583)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler$$Lambda$46/6399973.run(Unknown
Source)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$16(ContextImpl.java:333)
    at io.vertx.core.impl.ContextImpl$$Lambda$22/11074884.run(Unknown Source)
    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:225)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.handshake(HttpServerImpl.java:554)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:509)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:420)
    at io.vertx.core.http.impl.VertxHttpHandler.channelRead(VertxHttpHandler.java:85)
    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:124)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:266)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
    at io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:276)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:263)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1070)
    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:912)
    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:369)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:244)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:307)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:293)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:840)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
    at java.lang.Thread.run(Thread.java:744)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1344
Use LinkedHashMap in copy() to preserve key ordering. by LarsDenBakker · Pull Request #1344 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just as a note, there is no requirement that json keys are ordered and it is probably a bad assumption specially once you start consuming json from different sources or languages.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1345
Nested zip tests fails on Windows · Issue #1345 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Failed tests:
  NestedZipFileResolverTest>AsyncTestBase.lambda$onSuccess$1:622->FileResolverTestBase.lambda$testCacheDirDeletedOnVertxClose$3:197->AsyncTestBase.assertFalse:208 null
  NestedZipFileResolverTest>AsyncTestBase.lambda$onSuccess$1:620->AsyncTestBase.fail:262 java.nio.file.FileSystemException: C:\Users\FTM\Documents\NetBeansProjects\vert.x\.vertx\file-cache-bd9e09f4-0e7a-4400-b8cf-a97a8735ea7c\lib\nested.zip: The process cannot access the file because it is being used by another process.

  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null
  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null
  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null
  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null
  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null
  NestedZipFileResolverTest.after:60->AsyncTestBase.after:81->FileResolverTestBase.tearDown:52->AsyncTestBase.awaitLatch:592->AsyncTestBase.assertTrue:372 null

Tests run: 17, Failures: 8, Errors: 0, Skipped: 0

reported by @FainTMako on Window 7
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1346
Default command specified in Main-Command MANIFEST entry not run if no Main-Verticle entry · Issue #1346 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vext.x version 3.2.1
In VerxCommandLauncher line 378 there is check for verticle != null only then getDefaultCommand() executed. But may be we not needed any vehicles in manifest at all.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1347
Null Pointer returned in ConnectionBase.writeChannel · Issue #1347 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I've just seen a null-pointer exception when our very simple http server below is serving files. Nothing special.
I traced back the Null Pointer to ConnectionBase.writeChannel
There is a wierd case that is returning a null, can someone suggest a reason this is done and why it would reach this code?
More of a philosophical question, why is the null returned? Surely this means a large amount of null checking and fragile code ?
Maybe there should be an exception?
Note this has not changed in the main branch since 3.2.0
Exception trace:

java.lang.NullPointerException: null
at io.vertx.core.http.impl.HttpServerResponseImpl.doSendFile(HttpServerResponseImpl.java:493) ~[vertx-core-3.2.0.jar:na]
at io.vertx.core.http.impl.HttpServerResponseImpl.sendFile(HttpServerResponseImpl.java:340) ~[vertx-core-3.2.0.jar:na]
at io.vertx.core.http.HttpServerResponse.sendFile(HttpServerResponse.java:317) ~[vertx-core-3.2.0.jar:na]
at io.vertx.core.http.HttpServerResponse.sendFile(HttpServerResponse.java:303) ~[vertx-core-3.2.0.jar:na]

Note the IP stuff has been taken out for NDA reasons.

public class Server extends AbstractVerticle {
String path="some_path"
@Override
public void start(Future<Void> future) {
    startServer(future);
}

private void startServer(Future<Void> future) {
    vertx.createHttpServer().requestHandler(this::processRequest).listen(8080, result ->  future.complete());
}

private void processRequest(HttpServerRequest req) {

    String file = path + req.path();
    req.response().sendFile(file, res -> {
        if (res.failed()) {
            log.warn("File not found {}", file);
            setErrorResponse(req, file);
        }
    });
}

private void setErrorResponse(HttpServerRequest req, String file) {
    req.response()
       .setStatusCode(404);
    req.response()
       .end("File not found");
}

}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1348
Add "computeIf*" methods to LocalMap interface · Issue #1348 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
These are very useful additions to the Java Map interface which it would be nice to see added to LocalMap (they greatly simplify concurrent population of the map).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1349
Clustered deserialization of a JsonObject within a JsonArray ends up a LinkedHashMap · Issue #1349 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A tweak to the JsonArrayTest.testClusterSerializable() seen here reproduces the issue. Here is an example:
    JsonObject obj = new JsonObject().put("quux", "wibble");
    jsonArray.add("foo").add(123).add(obj);
    Buffer buff = Buffer.buffer();
    jsonArray.writeToBuffer(buff);
    JsonArray deserialized = new JsonArray();
    deserialized.readFromBuffer(0, buff);

    // this works
    JsonObject o1 = deserialized.getJsonObject(2);

    // this doesn't work and this cast exception occurs intermittently only when clustered
    JsonObject o2 = (JsonObject)deserialized.getList().get(2);


This was an issue for us because we frequently use the underlying List instead of the JsonArray and getting a JsonObject from that list would always work in our non-clustered dev environment. After clustering we experienced some intermittent issues where we would get random java.util.LinkedHashMap cannot be cast to io.vertx.core.json.JsonObject exceptions.
You can work around it by using JsonArray.getJsonObject or converting the LinkedHashMap to a JsonObject but it was definitely hard to track down since it didn't happen in our non-clustered environment.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1350
Deserialize JsonObject in a JsonArray consistently when clustered by shaunrader · Pull Request #1350 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
is it possible to achieve the same when nested in JsonObject ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1351
Fixed SLF4JLogDelegateTest on windows platform due to CR/LF inconsistency by Mart-Bogdan · Pull Request #1351 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you capture the system.lineSeparator in a constant in the test class and reuse it ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1352
Extend Launcher documentation when `CLASSPATH` is set by cescoffier · Pull Request #1352 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1353
Http2 support by vietj · Pull Request #1353 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1354
Make LocalMap extends Map by cescoffier · Pull Request #1354 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
+1 for this. It's almost a year, and this PR not reviewed. Still do not know why some PRs nobody cares, it's discourages people to contribute ... Even constructive refusal is useful.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1355
Deadlock between ClientConnection and HttpClientRequestImpl · Issue #1355 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
After a week attached to our load balancer which does a simple poll to one of our rest end points (we have no other traffic right now) all 4 machines (4 instances) end up in deadlock and had to be "kill -9"ed , which  in theory brought down our whole DC. Since we are in testing stages this was not a big problem but I imagine to most it would be a bit hair raising.
From my simple analysis it seems that the Exception handling and the request response seem to be locking on the HttpClientRequestImpl->handleException->getlock -> (this)  and HttpClientRequestImpl->connect(this)->lamda->(this)
Also looking at the traffic it seems our load-balancer (a cisco content switch with ACE module) sends a request gets the response then resets the connection. I believe this behaviour is causing the deadlock, since this is important for us to go live I will try create a test to replicate this behaviour.
This was running 3.2.0 code (Ive seen no fixes in 3.2.1) and using JVM 1.8_74 on RHEL 6.5
Here is the jstack information.

Debugger attached successfully.
Server compiler detected.
JVM version is 25.74-b02
Deadlock Detection:
Found one Java-level deadlock:
"vert.x-eventloop-thread-0":
waiting to lock Monitor@0x0000000081060ac8 (Object@0x0000000081060ac8, a io/vertx/core/http/impl/ClientConnection),
which is held by "vert.x-eventloop-thread-7"
"vert.x-eventloop-thread-7":
waiting to lock Monitor@0x00007f6dac2a5e98 (Object@0x0000000081060bf0, a io/vertx/core/http/impl/HttpClientRequestImpl),
which is held by the"vert.x-eventloop-thread-0"
Found a total of 1 deadlock.
Thread 19522: (state = BLOCKED)

io.vertx.core.net.impl.ConnectionBase.writeToChannel(java.lang.Object) @bci=0, line=113 (Compiled frame)
io.vertx.core.http.impl.HttpClientRequestImpl.writeHeadWithContent(io.netty.buffer.ByteBuf, boolean) @bci=24, line=678 (Compiled frame)
io.vertx.core.http.impl.HttpClientRequestImpl.connected(io.vertx.core.http.impl.ClientConnection) @bci=82, line=629 (Compiled frame)
io.vertx.core.http.impl.HttpClientRequestImpl.lambda$connect$82(io.vertx.core.http.impl.ClientConnection) @bci=27, line=593 (Compiled frame)
io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$190.handle(java.lang.Object) @bci=8 (Compiled frame)
io.vertx.core.http.impl.ConnectionManager$ConnQueue.lambda$responseEnded$66(io.vertx.core.http.impl.ConnectionManager$Waiter, io.vertx.core.http.impl.ClientConnection, java.lang.Void) @bci=5, line=129 (Compiled frame)
io.vertx.core.http.impl.ConnectionManager$ConnQueue$$Lambda$233.handle(java.lang.Object) @bci=12 (Compiled frame)
io.vertx.core.impl.ContextImpl.lambda$wrapTask$16(boolean, io.vertx.core.impl.ContextTask, io.vertx.core.Handler) @bci=177, line=335 (Compiled frame)
io.vertx.core.impl.ContextImpl$$Lambda$24.run() @bci=16 (Compiled frame)
io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(long) @bci=26, line=358 (Compiled frame)
io.netty.channel.nio.NioEventLoop.run() @bci=106, line=357 (Compiled frame)
io.netty.util.concurrent.SingleThreadEventExecutor$2.run() @bci=13, line=112 (Interpreted frame)
java.lang.Thread.run() @bci=11, line=745 (Interpreted frame)

Thread 19465: (state = BLOCKED)

io.vertx.core.http.impl.HttpClientRequestImpl.getLock() @bci=15, line=426 (Compiled frame)
io.vertx.core.http.impl.HttpClientRequestImpl.handleException(java.lang.Throwable) @bci=1, line=381 (Compiled frame)
io.vertx.core.http.impl.ClientConnection.handleException(java.lang.Throwable) @bci=17, line=324 (Compiled frame)
io.vertx.core.net.impl.VertxHandler.lambda$exceptionCaught$17(io.netty.channel.Channel, io.vertx.core.net.impl.ConnectionBase, java.lang.Throwable) @bci=22, line=86 (Compiled frame)
io.vertx.core.net.impl.VertxHandler$$Lambda$225.run() @bci=12 (Compiled frame)
io.vertx.core.impl.ContextImpl.lambda$wrapTask$16(boolean, io.vertx.core.impl.ContextTask, io.vertx.core.Handler) @bci=167, line=333 (Compiled frame)
io.vertx.core.impl.ContextImpl$$Lambda$24.run() @bci=16 (Compiled frame)
io.vertx.core.impl.ContextImpl.executeFromIO(io.vertx.core.impl.ContextTask) @bci=17, line=225 (Compiled frame)
io.vertx.core.net.impl.VertxHandler.exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) @bci=38, line=79 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(java.lang.Throwable) @bci=6, line=256 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(java.lang.Throwable) @bci=35, line=234 (Compiled frame)
io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) @bci=2, line=131 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(java.lang.Throwable) @bci=6, line=256 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(java.lang.Throwable) @bci=35, line=234 (Compiled frame)
io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) @bci=2, line=131 (Compiled frame)
io.netty.channel.CombinedChannelDuplexHandler.exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) @bci=6, line=137 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(java.lang.Throwable) @bci=6, line=256 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(java.lang.Throwable) @bci=35, line=234 (Compiled frame)
io.netty.handler.ssl.SslHandler.exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) @bci=62, line=729 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(java.lang.Throwable) @bci=6, line=256 (Compiled frame)
io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(java.lang.Throwable) @bci=35, line=234 (Compiled frame)
io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(java.lang.Throwable) @bci=5, line=834 (Compiled frame)
io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(io.netty.channel.ChannelPipeline, io.netty.buffer.ByteBuf, java.lang.Throwable, boolean) @bci=44, line=87 (Compiled frame)
io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read() @bci=305, line=162 (Compiled frame)
io.netty.channel.nio.NioEventLoop.processSelectedKey(java.nio.channels.SelectionKey, io.netty.channel.nio.AbstractNioChannel) @bci=42, line=511 (Compiled frame)
io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(java.nio.channels.SelectionKey[]) @bci=37, line=468 (Compiled frame)
io.netty.channel.nio.NioEventLoop.processSelectedKeys() @bci=15, line=382 (Compiled frame)
io.netty.channel.nio.NioEventLoop.run() @bci=84, line=354 (Compiled frame)
io.netty.util.concurrent.SingleThreadEventExecutor$2.run() @bci=13, line=112 (Interpreted frame)
java.lang.Thread.run() @bci=11, line=745 (Interpreted frame)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1356
Support command set in the manifest without main verticle. by cescoffier · Pull Request #1356 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1357
Do not dump the configuration in the log by cescoffier · Pull Request #1357 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1358
Remove HttpClientImpl#close method synchronization · Issue #1358 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1359
Add a `actualPort` method in HTTPServer to retrieve the listened port by cescoffier · Pull Request #1359 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me, I'll merge it after http2 has been reviewed and merged.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1360
Adds log4j2 support by gitplaneta · Pull Request #1360 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is another PR providing an implementation for log4j2 (#1303)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1361
Support HttpClient access to https via proxy · Issue #1361 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
(please note that this description applies to HTTP 1.0/1.1, I am not sure how proxies will work with HTTP2)
When running applications in a network that does not have direct internet access but have e.g. a squid proxy, it is currently not possible to access https urls, since that requires a CONNECT tunnel request to the proxy, upgradeToSsl and then a http request to the origin server on the NetSocket.
It is also necessary to enable Proxy authentication for the CONNECT request since the proxy might require that, which is a different account/password than authentication on the origin site.
the section explaining the CONNECT method, but that is a bit brief: https://tools.ietf.org/html/rfc7231#section-4.3.6
an example request flow is the following:
client connects to proxy.example.com:3128
CONNECT www.example.org:443 HTTP/1.1
Host: www.example.org:443
server replies with
HTTP/1.0 200 Connection established
client and server do ssl upgrade
client sends on ssl netsocket
GET / HTTP/1.1
Host: www.example.org
Connection: close
server replies with http response
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1362
[1313] Javadoc corrections by harisankars · Pull Request #1362 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue tracker reference:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=1313
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1363
fixing some formatting, spelling and unicode characters by ahus1 · Pull Request #1363 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1364
Add address and replyAddress to message on reply timeout to aid in pr… by diabolicallabs · Pull Request #1364 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It's difficult to know what handler is timing out. This expanded message should help.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1365
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1366
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1367
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1368
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1369
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1370
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1371
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1372
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1373
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1374
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1375
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1376
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1377
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1378
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1379
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1380
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1381
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1382
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1383
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1384
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1385
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1386
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1387
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1388
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1389
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1390
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1391
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1392
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1393
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1394
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1395
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1396
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1397
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1398
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1399
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1400
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1401
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1402
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1403
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1404
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1405
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1406
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1407
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1408
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1409
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1410
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1411
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1412
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1413
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1414
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1415
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1416
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1417
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1418
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1419
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1420
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1421
On windows - allow / in Watch include patterns by cescoffier · Pull Request #1421 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix issue #1415, on windows when / is used in Ant patterns (watcher), they are replaced by the system-specific file separator.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1422
Fix NPE in deployVerticle by cescoffier · Pull Request #1422 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix issue #1383
Check that the completion handler is not null before calling it upon failed verticle deployment.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1423
PostgreSql json datatype · Issue #1423 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there!
Here is an example of calling a function with a json data type parameter: https://gist.github.com/zadoff/f5a33398ff81ba75a06cedf93fa97de8
If I use text data type instead of json it works well.
Could you please add support for this type?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1424
Implement HttpConnection for HTTP/1.1 client and server by vietj · Pull Request #1424 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do you think that it could be useful to have another handler when the connection is released from the request/response?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1425
vertx run xxxx.groovy,chinease chars will be garbled,but java file is OK · Issue #1425 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
myverticle.groovy
void vertxStart() {
println("\u4f60\u597d")
println "你好 starting"
}
void vertxStop() {
println "stopping"
}
$ vertx run myverticle.groovy
你好
������ starting
Succeeded in deploying verticle
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1426
Future.failedFuture returns successful future if cause is null · Issue #1426 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A question from our team:
Should Future.failedFuture always return a failed future?
At present failedFuture(null) returns a succeeded future.
Agree that we should never call failedFuture with null, but it can happen by accident ... and depending on the complexity of the system, finding the root cause can take some time.
Also perhaps, calling Future.fail(null) should really set the cause to NoStackTraceThrowable.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1427
multiple verticle instances as REST service with routingContext.next() · Issue #1427 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I have a problem possible bug with multiple deployed instances of a verticle that is used as a REST endpoint. The service will receive every request and sanitize the payload. Then the next matching route (router.next()) will be called.
The Sanitizer verticle do something like this:
this.router.post("/*").handler(routingContext -> { // do something routingContext.next(); }
This Sanitizer verticle is deployed several times:
deploymentOptions.setInstances(5); this.vertx.deployVerticle(verticleName, deploymentOptions);
We use for all verticles the same router to go through all matching routes with routingContext.next(). For every request our Sanitizer is called, but it is called 5 times because it is deployed 5 times. Vert.x didn't notice, that´s the same verticle which is called multiple times. I want that the Sanitizer verticle is only called once and then the next route (e.g. /test/test).
Is this a bug in vert.x or should I handle the router in a different way?
Example of verticle (The Runner.mainRouter is initialized once in Runner class):
`public class App extends AbstractVerticle {
public static void main(final String[] args) {
    Runner.run(App.class);
}

@Override
public void start() {

    Runner.mainRouter.get("/rest/*").handler(rc -> {
        System.out.println("sanitizer " + this);
        rc.next();
    });

    vertx.createHttpServer().requestHandler(Runner.mainRouter::accept).listen(8090);
}

}`
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1428
Solver - Logging with Slf4J not working for io.vertx.core.impl.ContextImp · Issue #1428 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I have some problems with the logging of vertx. When using the default logging framework everything works fine. But when using SLF4J with logback some of vertx loggins don't appear in the log.
Classes like 'io.vertx.core.impl.launcher.commands.RunCommand' or 'io.vertx.ext.web.impl.RoutingContextImplBase' are logging as expected and the log entry is available in the log file.
The class 'io.vertx.core.impl.ContextImpl' (line 338 of vertx 3.2.1) logs if an error occurred but this log entry never appears in the log file. The reason so far is unknown.
Slf4J is set this way:
private static final String LOGGER_DELEGATE_FACTORY_CLASS_NAME_PROPERTY = "vertx.logger-delegate-factory-class-name";
private static final String LOGGER_DELEGATE_FACTORY_CLASS_NAME = "io.vertx.core.logging.SLF4JLogDelegateFactory";
static {
    System.setProperty(LOGGER_DELEGATE_FACTORY_CLASS_NAME_PROPERTY, LOGGER_DELEGATE_FACTORY_CLASS_NAME);
}

Could you please have a look? Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1429
Add SSL options to delegate key and trust store configuration to Java Security Providers. by ellebrecht · Pull Request #1429 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was actually thinking at something simpler that allows you to come up with your specific use case and allow others to do their own if they want to : https://github.com/eclipse/vert.x/tree/keystore-load-refactor
please have a look and check that it allows you to do so.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1430
CompositeFuture.all/any fails for 1 single fail · Issue #1430 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there:
We just encounter a problem and it is difficult to reproduce.
For example, if we use Future future = Future.future(); and then send the http request
and if one of the request fails very fast like got connection refused instantly
and then we set the future.fails(url+" request failed");
and then interesting thing is
CompositeFuture.all(...)/any(...) method some times execute without receiving other responses.
the difficulty of reproduce is not every time it happens, but happened in few tests
Our guess is when one of the future fails and it successfully registered in the compositeFuture and the other future has not registered successfully yet, thus the size of compositeFuture list/set is only 1 and the only 1 fails then the rest would fail also, not sure about the logic but it happens
We will continue test this problem and maybe later submit our code
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1431
Allow to limit the number of concurrent streams per http/2 connection… by vietj · Pull Request #1431 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1432
Allow to set the metrics factory programmatically on MetricsOptions · Issue #1432 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
like the ClusterManager on VertxOptions
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1433
HttpClient fails when response is chunked, but no body is sent · Issue #1433 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm using HttpClient to invoke a third party REST API. Using a curl on the resource in question gives the following:
HTTP/1.1 204 No Content
Transfer-Encoding: chunked

Vert.x doesn't like the combination of chunked and "no content", which can be reproduced with the test below:
public class VertxTest {
    public static void main(String[] args) {
        Vertx vertx = Vertx.vertx();
        vertx.createHttpServer().requestHandler(r -> {
            r.response().setChunked(true).setStatusCode(204).end();
        }).listen(9888, (status) -> {
            vertx.createHttpClient().postAbs("http://localhost:9888").handler(r -> {
                System.out.println(r);
            }).end();

        });
    }
}

The following exception is thrown.
SEVERE: Unhandled exception
java.lang.IllegalStateException: No response handler
    at io.vertx.core.http.impl.ClientConnection.handleResponse(ClientConnection.java:275)
    at io.vertx.core.http.impl.HttpClientImpl$ClientHandler.doMessageReceived(HttpClientImpl.java:869)
    at io.vertx.core.http.impl.HttpClientImpl$ClientHandler.doMessageReceived(HttpClientImpl.java:847)
    at io.vertx.core.http.impl.VertxHttpHandler.lambda$channelRead$20(VertxHttpHandler.java:80)
    at io.vertx.core.http.impl.VertxHttpHandler$$Lambda$21/288971877.run(Unknown Source)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:333)
    at io.vertx.core.impl.ContextImpl$$Lambda$9/752209249.run(Unknown Source)
    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:225)
    at io.vertx.core.http.impl.VertxHttpHandler.channelRead(VertxHttpHandler.java:80)
    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:124)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:318)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:304)
    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:276)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:263)
    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:147)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:318)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:304)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:846)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
    at java.lang.Thread.run(Thread.java:745)

Switching setChunked to false fixes the problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1434
Enable adding netty logging handler to log HTTP requests/responses - … by vietj · Pull Request #1434 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1435
issue#101: Socks 4/5 Proxy handler in NetClient by alexlehm · Pull Request #1435 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1436
vert.x could support socket.io · Issue #1436 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vert.x could support socket.io?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1437
Service loading of VerticleFactory does not work with mvn exec:java · Issue #1437 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The service loading of VerticleFactory's does not work when starting Vert.x with Maven's exec:java target. When using the ServiceVerticleFactory the verticles are not started as a service but as a regular verticles. This means that the service descriptor is ignored (without any warning) and the worker verticles are started as non-worker verticles instead (resulting in blocking event threads).
A quick fix is to supply the correct class loader to the SeviceLoader in the DeploymentManager. I will open a PR for that.
PR: #1438
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1438
Fixed service loading of VerticleFactory from mvn exec java by paulmiddelkoop · Pull Request #1438 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier thoughts ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1439
Socks proxy implementation by vietj · Pull Request #1439 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1440
MimeMapping support for WOFF2 · Issue #1440 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the file MimeMapping.java has no support for the new top level type "font" thus no support for WOFF2 files. Regarding the specification [1], [2] the mime type for woff2 should be "font/woff2".
[1] https://dev.w3.org/webfonts/WOFF2/spec/#IMT
[2] https://datatracker.ietf.org/doc/draft-ietf-justfont-toplevel/
This leads to a some parsing exception in chrome for example:
"OTS parsing error: invalid version tag"
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1441
Metrics for endpoints + make dummy metrics singleton instances by vietj · Pull Request #1441 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
there is an implementation for dropwizard after that will follow
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1442
change String comparison with == in NetClientOptions by alexlehm · Pull Request #1442 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1443
update tcnative-boringssl to Fork17 by alexlehm · Pull Request #1443 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can't use it right now, need to make an Eclipse CQ for this - it's a works-with dependency so should be quick
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1444
Use Service Helper to avoid classloading issue by cescoffier · Pull Request #1444 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1445
Pipe lined limit by vietj · Pull Request #1445 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
please review this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1446
Mapping added for woff2 files following the latest W3C recommendation  by leolux · Pull Request #1446 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi @leolux you need to sign the Eclipse CLA.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1447
Mapping added for woff2 files following the latest W3C recommendation by leolux · Pull Request #1447 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Spec: 15 March 2016 (https://www.w3.org/TR/WOFF2/#IMT)
PR for the issue: #1440
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1448
Open ssl session cache enabled by ustinovvladi · Pull Request #1448 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I committed using -s:
git commit -s -m "Exposing session cache mode setting in HttpServerOptions for Open SSL based HTTP servers (see org.apache.tomcat.jni.SSLContext.setSessionCacheMode)"
What's wrong, why was it not validated. Am I missing something?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1449
StopCommand issue on Windows · Issue #1449 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On Windows the stop command can match multiple process when the vertx.id is similar.
e.g. In case of the two running processes: 'app' and 'app-2'.
the command 'stop app' will stop both of them.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1450
Open ssl session cache enabled pr by ustinovvladi · Pull Request #1450 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Still problems with CLA... I'm lost :(
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1451
HttpServerRequestImpl.handleEnd() should catch endHandler.handle() exceptions · Issue #1451 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The body handler I set on an HttpServerRequest threw an exception.  I expected the request's exception handler to be called, but it was not.  This is with Vert.x 3.2.1.  The stack includes
    at io.vertx.core.http.impl.HttpServerRequestImpl.lambda$bodyHandler$54(HttpServerRequestImpl.java:288)
    at io.vertx.core.http.impl.HttpServerRequestImpl.handleEnd(HttpServerRequestImpl.java:411)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1452
ClassNotFound when io.netty.handler.proxy is not included for the proxy functions · Issue #1452 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The proxy code tries to catch a NoClassDefFoundError when the optional proxy handler jar is not included in the pom, but it still gives a NoClassDefFoundError.
To check the issue, I have created a small verticle project with fatjar that uses the proxy, which gives the following exception:
java.lang.NoClassDefFoundError: io/netty/handler/proxy/ProxyHandler
        at io.vertx.core.http.impl.ConnectionManager$ChannelConnector.connect(ConnectionManager.java:420)
        at io.vertx.core.http.impl.ConnectionManager$ConnQueue.createNewConnection(ConnectionManager.java:286)
        at io.vertx.core.http.impl.ConnectionManager$ConnQueue.getConnection(ConnectionManager.java:229)
        at io.vertx.core.http.impl.ConnectionManager.getConnectionForRequest(ConnectionManager.java:146)
        at io.vertx.core.http.impl.HttpClientImpl.getConnectionForRequest(HttpClientImpl.java:681)
        at io.vertx.core.http.impl.HttpClientRequestImpl.connect(HttpClientRequestImpl.java:614)
        at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:738)
        at io.vertx.core.http.impl.HttpClientRequestImpl.end(HttpClientRequestImpl.java:334)
        at cx.lehmann.vertx.ProxyRequestVerticle.start(ProxyRequestVerticle.java:32)
        at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:111)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1453
Only one certificate used in TLS handshake when using PemKeyCertOptions · Issue #1453 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If you have a keystore file with certificate chain and you create NetServer and use setKeyStoreOptions(JksOptions) option, then the whole certificate chain will be sent to the client during TLS handshake.
If you have a pem file with certificate chain and you create NetServer and use setPemKeyCertOptions(PemKeyCertOptions) option, then only the first certificate in the chain will be sent to the client during TLS handshake.
The same problem exists in Vertx 3.3.0 and also when you use OpenSSL engine (setSslEngine(SSLEngine.OPENSSL) option). And when using OpenSSL engine there is no alternative because it requires PemKeyCertOptions.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1454
catch NoClassDefFoundError and give a warning by alexlehm · Pull Request #1454 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1455
fixes vert-x3/issues#129 by alexlehm · Pull Request #1455 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think it should also cleanup the
    try {
      doConnect(vertx, bootstrap, options, host, port, channelInitializer, channelHandler);
    } catch (NoClassDefFoundError e) {
      if (e.getMessage().contains("io/netty/handler/proxy")) {
        log.warn("Dependency io.netty:netty-handler-proxy missing - check your classpath");
        channelHandler.handle(Future.failedFuture(e));
      }
    }

in ChannelProvider
and remove the need of a doConnect
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1456
Exposing session cache mode setting in HttpServerOptions for Open SSL… by ustinovvladi · Pull Request #1456 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I rebased it and commited it, thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1457
Fix how is passed inlined configuration in redeploy mode. by cescoffier · Pull Request #1457 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj - ready for review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1458
Certificate chaining for PemKeyCertOptions by vietj · Pull Request #1458 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1459
Log the error when client isn't able to connect to remote host. by manish-panwar · Pull Request #1459 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Being handled part of #1562, so closing this PR.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1460
Log the error when client isn't able to connect to remote host. by manish-panwar · Pull Request #1460 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hey guys,
Even though I have added "Signed-off" but it's not passing  IP validation. I always have issues with this process. Can you guys accept this pull request since change is so trivial?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1461
Inaccessible client's certificate when using OPENSSL engine · Issue #1461 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Little backstory...
Due to reasons our server requires client authentication during TLS handshake and accepts self-signed certificates. In order to make it work on Vertx we are forced to do an ugly hack with getDeclaredField() and setAccessible() in order to set SSLHelper.trustAll to true for NetServer object. This works and after accepting a connection we use peerCertificateChain() to get client's certificate and we do stuff with it.
It stopped working with SSLEngine.OPENSSL, we get SSLPeerUnverifiedException instead. The problem is surely in Netty but maybe also in Vertx.
javax.net.ssl.SSLSession declares two methods: getPeerCertificateChain() and getPeerCertificates(). They both should return client's certificate and certificate authorities in the resulting array:

Returns:
an ordered array of peer certificates, with the peer's own certificate first followed by any certificate authorities.

But when Netty is configured to use OpenSSL engine, getPeerCertificateChain() returns only certificate authorities (getPeerCertificates() works correctly). In our case, peerCertificateChain() from NetSocket calls SSLSession.getPeerCertificateChain(), there are no certificate authorities (because self-signed certificate) and SSLPeerUnverifiedException is thrown.
So it is clearly a bug in Netty, but in getPeerCertificateChain() documentation there is also this:

Note: this method exists for compatibility with previous releases. New applications should use getPeerCertificates() instead.

And Vertx doesn't provide anything that would call SSLSession.getPeerCertificates() (which, as I mentioned, works correctly).
BTW: it surely would be nice to get rid of the hack I mentioned at the beginning. Any chances to have setTrustAll() in NetServerOptions?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1462
Support map entry adder in data object converters · Issue #1462 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1463
vertx-rx-java - Unnecessary wrapping of handlers while invoking setters on delegate · Issue #1463 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
While consuming vertx-rx-java, I see that handlers set on delegate are wrapped objects of input parameters. This seems to pose two issues -

The input parameters in rxjava as well as core packages are of io.vertx.core.Handler type. Still, in rxjava package, we wrap it to the same type through constructor before passing it to delegate. This creates unnecessary objects.
If null is passed as a parameter to rxjava package, it results in NPE in core package.

Example:
io.vertx.rxjava.core.http.HttpServerResponse#drainHandler, closeHandler
  public HttpServerResponse drainHandler(Handler<Void> handler) { 
    ((io.vertx.core.http.HttpServerResponse) delegate).drainHandler(new Handler<java.lang.Void>() {
      public void handle(java.lang.Void event) {
        handler.handle(event);
      }
    });
    return this;
  }


My use case expects to wait for some data to arrive from an external source and write it to client. I register to drain handler when I have excess amount of data and write queue gets full. When I do not have data to write (as I wait for my source to send some), drain events make no sense and I unregister by setting drain handler to null. Though my overall functionality is not impacted, there are NPEs thrown from vertx and additional objects are created.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1464
DNS resolver issues by vietj · Pull Request #1464 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1465
Pump does not handle end of stream · Issue #1465 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Here's the code of the Pump :
PumpImpl(ReadStream<T> rs, WriteStream<T> ws) {
    this.readStream = rs;
    this.writeStream = ws;
    drainHandler = v-> readStream.resume();
    dataHandler = data -> {
      writeStream.write(data);
      incPumped();
      if (writeStream.writeQueueFull()) {
        readStream.pause();
        writeStream.drainHandler(drainHandler);
      }
    };
  }
I think this method should have the following last line in order to handle the end of the reading stream :
rs.endHandler(v -> ws.end());
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1466
Deadlock in ServerConnection / HttpClientRequestImpl · Issue #1466 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We use an HttpClient per thread, and this just happened.
Found one Java-level deadlock:
=============================
"vert.x-eventloop-thread-0":
  waiting to lock monitor 0x00007f553c037b48 (object 0x000000070d5fda10, a io.vertx.core.http.impl.ServerConnection),
  which is held by "vert.x-eventloop-thread-3"
"vert.x-eventloop-thread-3":
  waiting to lock monitor 0x00007f55d9772a28 (object 0x0000000653c73ab0, a io.vertx.core.http.impl.HttpClientRequestImpl),
  which is held by "vert.x-eventloop-thread-0"
​
Java stack information for the threads listed above:
===================================================
"vert.x-eventloop-thread-0":
    at io.vertx.core.http.impl.HttpServerResponseImpl.ended(HttpServerResponseImpl.java:346)
    - waiting to lock <0x000000070d5fda10> (a io.vertx.core.http.impl.ServerConnection)
.....
    at io.vertx.core.http.impl.HttpClientRequestImpl.lambda$exceptionHandler$80(HttpClientRequestImpl.java:262)
    at io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$249/478457932.handle(Unknown Source)
    at io.vertx.core.http.impl.HttpClientRequestImpl.handleException(HttpClientRequestImpl.java:384)
    - locked <0x0000000653c73ab0> (a io.vertx.core.http.impl.HttpClientRequestImpl)
    at io.vertx.core.http.impl.HttpClientRequestImpl.timeout(HttpClientRequestImpl.java:578)
    at io.vertx.core.http.impl.HttpClientRequestImpl.handleTimeout(HttpClientRequestImpl.java:563)
    at io.vertx.core.http.impl.HttpClientRequestImpl.lambda$setTimeout$81(HttpClientRequestImpl.java:337)
    at io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$246/1883207809.handle(Unknown Source)
    at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:738)
    at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:709)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:335)
    at io.vertx.core.impl.ContextImpl$$Lambda$10/2081191879.run(Unknown Source)
    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:358)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357)
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
    at java.lang.Thread.run(Thread.java:745)
"vert.x-eventloop-thread-3":
    at io.vertx.core.http.impl.HttpClientRequestImpl.getLock(HttpClientRequestImpl.java:426)
    - waiting to lock <0x0000000653c73ab0> (a io.vertx.core.http.impl.HttpClientRequestImpl)
    at io.vertx.core.http.impl.HttpClientRequestImpl.end(HttpClientRequestImpl.java:299)
.....
    at io.vertx.core.http.impl.HttpServerRequestImpl.lambda$bodyHandler$54(HttpServerRequestImpl.java:288)
    at io.vertx.core.http.impl.HttpServerRequestImpl$$Lambda$77/1019769903.handle(Unknown Source)
    at io.vertx.core.http.impl.HttpServerRequestImpl.handleEnd(HttpServerRequestImpl.java:411)
    - locked <0x000000070d5fda10> (a io.vertx.core.http.impl.ServerConnection)
    at io.vertx.core.http.impl.ServerConnection.handleEnd(ServerConnection.java:286)
    at io.vertx.core.http.impl.ServerConnection.processMessage(ServerConnection.java:404)
    at io.vertx.core.http.impl.ServerConnection.handleMessage(ServerConnection.java:134)
    - locked <0x000000070d5fda10> (a io.vertx.core.http.impl.ServerConnection)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:515)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:421)
    at io.vertx.core.http.impl.VertxHttpHandler.lambda$channelRead$20(VertxHttpHandler.java:80)
    at io.vertx.core.http.impl.VertxHttpHandler$$Lambda$81/108612809.run(Unknown Source)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:333)
    at io.vertx.core.impl.ContextImpl$$Lambda$10/2081191879.run(Unknown Source)
    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:225)
    at io.vertx.core.http.impl.VertxHttpHandler.channelRead(VertxHttpHandler.java:80)
    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:124)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:318)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:304)
    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:266)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:318)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:304)
    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:276)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:263)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:318)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:304)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:846)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
    at java.lang.Thread.run(Thread.java:745)

There is a chance that it's just a glitch, we had some weird behaviour, two instances launched instead of one or something...
Also, this code looks a bit dangerous (io.vertx.core.http.impl.HttpClientRequestImpl#getLock):
  // After connecting we should synchronize on the client connection instance to prevent deadlock conditions
  // but there is a catch - the client connection is null before connecting so we synchronized on this before that
  // point
  private Object getLock() {
    // We do the initial check outside the synchronized block to prevent the hit of synchronized once the conn has
    // been set
    if (conn != null) {
      return conn;
    } else {
      synchronized (this) {
        if (conn != null) {
          return conn;
        } else {
          return this;
        }
      }
    }
  }

related:
df69aa3
#1355
#1247
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1467
Adding files needed in order to use Travis CI by tjtunnell · Pull Request #1467 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi, we do use CI here : https://vertx.ci.cloudbees.com . thanks anyway!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1468
eventBus publisher should have a publish method · Issue #1468 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It was slightly confusing when i used the eventBus to create publisher.
I had code that looked like this
vertx.eventBus().publish("endpoint","Hello World");
and wanted to use a publisher instead
vertx.eventBus().publisher("endpoint")
but the publisher did not have the "publish" method (the write method does the correct function though).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1469
HttpClientMetrics#createEndpoint may be called multiple times for the same endpoint · Issue #1469 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of io.vertx.core.http.impl.ConnectionManager.QueueManager#getConnQueue can lead to HttpClientMetrics#createEndpoint being called multiple times for the same endpoint if different threads try to use a fresh HTTP client:
      ConnQueue connQueue = queueMap.get(address);
      if (connQueue == null) {
        connQueue = new ConnQueue(version, this, address);
        ConnQueue prev = queueMap.putIfAbsent(address, connQueue);
        if (prev != null) {
          connQueue = prev;
        }
      }
      return connQueue;
HttpClientMetrics#createEndpoint is called from the ConnQueue constructor so a single instance of ConnQueue must be created if none is in the map.
Otherwise SPI implementations my leak resources acquired in #createEndpoint as #closeEndpoint would never be called for the corresponding queue instance.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1470
Fixes #1469 HttpClientMetrics#createEndpoint may be called multiple times for the same endpoint by tsegismont · Pull Request #1470 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Make sure we build it once - since #createEndpoint is called in the constructor of the queue
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1471
tls protocol error logs message · Issue #1471 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The content if the buffer should not be logged
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1472
launcher can't be subclassed as described in documentation · Issue #1472 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
there are actually two separate issues:

io.vertx.core.Launcher's main method is implemented as
public static void main(String[] args) { new Launcher().dispatch(args); }
and therefore Launcher can't be effectively subclassed and customized - the instance created will be always of the parent class and not of hte implementation.
io.vertx.core.Launcher provides some methods that can be used by Launchers subclasses, e.g. afterConfigParsed(), beforeStartingVertx(), beforeDeployingVerticle() and so on. it seems that none of these methods is implemented in launcher flow.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1473
Json.decodeValue() hangs up when unknown attribute is present · Issue #1473 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I tried to decode { "payload":"hello" } into a POJO class with just a single attribute String message (and its public getter and setter).
Instead of an exception, the method never returns.
Tried with vertx 3.2.1.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1474
java.lang.ClassCastException when removing a keyset of Shareable entities of a ConcurrentSharedMap · Issue #1474 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version used:

Vert.x 2.1.6
Java 8

I'm trying to clear the cache using vert.x shared data and I get an exception.
Knowing that:

keySet returns a Set view of the keys contained in this map. The set is backed by the map, so changes to the map are reflected in the set, and vice-versa.

Code to clear the cache:
    private void clearCache() {
        ConcurrentSharedMap<KeyCache, String> lookupCache = vertx.sharedData().getMap("lookups");
        lookupCache.keySet().removeIf(keyCache -> keyCache.getDataType().equals(schema.getString("dataType")));
    }

My KeyCache class implements Shareable and override equals and hashcode for 2 private String.
Exception:
java.lang.ClassCastException: com.tesco.disco.shareable.KeyCache cannot be cast to com.tesco.disco.shareable.KeyCache
        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174)
        at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1540)
        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)
        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)
        at com.tesco.disco.indexer.workers.Indexer.clearCache(Indexer.java:66)
        at com.tesco.disco.indexer.workers.Indexer.handle(Indexer.java:131)
        at com.tesco.disco.indexer.workers.Indexer.handle(Indexer.java:30)
        at org.vertx.java.core.eventbus.impl.DefaultEventBus$11.run(DefaultEventBus.java:951)
        at org.vertx.java.core.impl.DefaultContext$3.run(DefaultContext.java:175)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:370)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357)
        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)
        at java.lang.Thread.run(Thread.java:745)


And I think there is another issue, because if I am using a String as a key of the SharedMap, and if I want to clear it, I have to do it one by one using the Map:remove(Object key), if I use Collection:removeIf(Predicate<? super E> filter), it does not work, see example below:
Example:
private void clearCache() {
        ConcurrentSharedMap<String, String> lookupCache = vertx.sharedData().getMap("lookups");
        //Copy the elements of the sharedMap into a new hashMap
        Map<String, String> copy = lookupCache.entrySet().stream().collect(Collectors.toMap(e -> e.getKey(), e -> e.getValue()));
        //SharedMap: removeIf does not work, lookupCache still filled
        lookupCache.keySet().removeIf(key -> key.startsWith(schema.getString("dataType") + Transformer.DATA_TYPE_CACHE_SEPARATOR));
        //HashMap: removeIf works, copy is empty
        copy.keySet().removeIf(key -> key.startsWith(schema.getString("dataType") + Transformer.DATA_TYPE_CACHE_SEPARATOR));
        //SharedMap: Solution to remove the cache entries
        for (String keyCache : lookupCache.keySet()) {
            if(keyCache.startsWith(schema.getString("dataType") + Transformer.DATA_TYPE_CACHE_SEPARATOR)){
                lookupCache.remove(keyCache);
            }
        }
    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1475
DNS search domains resolution · Issue #1475 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Implements DNS search domains for the AddressResolver
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1476
Implement search domains - fixes #1475 by vietj · Pull Request #1476 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1477
Add SNI support · Issue #1477 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Maybe I just can't find the options for enabling SNI, but I think it is not supported.
It is already supported in netty and I found an example for it:
https://github.com/grahamedgecombe/netty-sni-example
Thank you!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1478
Unfinished Futures? · Issue #1478 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When result() is called it simply returns the member variable.  Documentation says this:
  /**
   * The result of the operation. This will be null if the operation failed.
   * @return the result or null if the operation failed.
   */

Is there anything that guarantees the future has completed before the result is returned?  Am I missing something about how this works?
https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/Future.java#L147
https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/impl/FutureImpl.java#L64
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1479
AddressResolver should not bind locally · Issue #1479 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current AddressResolver binds locally a DatagramChannel which is not necessary (and not always permitted) via the DnsNameResolver implementation.
The bind is used to obtain a channel and it is possible to create a DatagramChannel directly without the need to bind. The method newChannel in DnsNameResolver can be changed from:
  private ChannelFuture newChannel(
      ChannelFactory<? extends DatagramChannel> channelFactory, InetSocketAddress localAddress) {

    Bootstrap b = new Bootstrap();
    b.group(executor());
    b.channelFactory(channelFactory);
    final DnsResponseHandler responseHandler = new DnsResponseHandler();
    b.handler(new ChannelInitializer<DatagramChannel>() {
      @Override
      protected void initChannel(DatagramChannel ch) throws Exception {
        ch.pipeline().addLast(DECODER, ENCODER, responseHandler);
      }
    });

    ChannelFuture bindFuture = b.bind(localAddress);
    bindFuture.channel().closeFuture().addListener(new ChannelFutureListener() {
      @Override
      public void operationComplete(ChannelFuture future) throws Exception {
        resolveCache.clear();
      }
    });

    return bindFuture;
  }

to
  private ChannelFuture newChannel(
      ChannelFactory<? extends DatagramChannel> channelFactory, InetSocketAddress localAddress) {

    DatagramChannel channel = channelFactory.newChannel();
    channel.config().setOption(ChannelOption.DATAGRAM_CHANNEL_ACTIVE_ON_REGISTRATION, true);
    channel.config().setRecvByteBufAllocator(new FixedRecvByteBufAllocator(maxPayloadSize));
    final DnsResponseHandler responseHandler = new DnsResponseHandler();
    channel.pipeline().addLast(DECODER, ENCODER, responseHandler);
    channel.closeFuture().addListener(new ChannelFutureListener() {
      @Override
      public void operationComplete(ChannelFuture future) throws Exception {
        resolveCache.clear();
      }
    });

    return executor().register(channel);
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1480
Metric "vertx.eventbus.messages.pending" can contain incorrect value. · Issue #1480 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version: 3.3.0
In the case where a handler is removed after a message is sent, but before it is received then the pending count can be incremented, but not decremented.  Consider the following sequence:
A message is delivered locally and a handler is found at line 366 in EventBusImpl.java.  This increments the pending count metric and calls deliverToHandler.  When the runOnContext block is scheduled it is determined that the handler has been removed at line 498 and so the message is never actually processed.  As a result the pending count is never decremented making is seem like there are pending messages when in fact there aren't.
This happens most often with the "credit" handler which is installed to receive the credit based flow control messages.  It is often the case that the hander gets removed because the producer has been closed, but the consumer on the other side doesn't know this and sends the credit update.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1481
OpenSSL KeyManagerFactory support · Issue #1481 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
when available from Netty:
netty/netty@5e64985
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1482
java.lang.ClassCastException: java.lang.Long cannot be cast to [Lio.vertx.redis.impl.Reply; · Issue #1482 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
RedisTransaction rtx = redisClient.transaction();
    rtx.multi(r -> {

        String setKey = RepositoryHelper.createKSKey("SessionScreenSymbol", clientCd, sessionId, viewNum);

        List<String> keyList = new ArrayList<>();
        for (String data : delS) {
            keyList.add(data);
            rtx.del(data, r1 -> {
                GLog.info("trans del executing ..., result: {} ", r1);
            });
        }

        if (delS.size() > 0) {
            rtx.sremMany(setKey, keyList, rst -> {
                GLog.info("trans strm executing ..., result: {}", rst);
            });
        }

        rtx.exec(handler);
    });

sometimes, will throw exception like that , and then, can not receive the reply. :
fatal: Unhandled exception
java.lang.ClassCastException: java.lang.Long cannot be cast to [Lio.vertx.redis.impl.Reply;
at io.vertx.redis.impl.Reply.asType(Reply.java:94)
at io.vertx.redis.impl.Reply.asType(Reply.java:156)
at io.vertx.redis.impl.RedisConnection.handleReply(RedisConnection.java:441)
at io.vertx.redis.impl.ReplyParser.handle(ReplyParser.java:180)
at io.vertx.redis.impl.ReplyParser.handle(ReplyParser.java:21)
at io.vertx.core.net.impl.NetSocketImpl.handleDataReceived(NetSocketImpl.java:312)
at io.vertx.core.net.impl.VertxNetHandler.lambda$channelRead$0(VertxNetHandler.java:67)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$3(ContextImpl.java:357)
at io.vertx.core.impl.OrderedExecutorFactory$OrderedExecutor.lambda$new$0(OrderedExecutorFactory.java:94)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
2016-06-28 17:57:57.558 [vert.x-eventloop-thread-7] ERROR EAGLE.DEFAULT - system error.
io.vertx.core.eventbus.ReplyException: Timed out after waiting 5000(ms) for a reply. address: 136
at io.vertx.core.eventbus.impl.HandlerRegistration.sendAsyncResultFailure(HandlerRegistration.java:118) ~[vertx-core-3.3.0.jar:na]
at io.vertx.core.eventbus.impl.HandlerRegistration.lambda$new$0(HandlerRegistration.java:65) ~[vertx-core-3.3.0.jar:na]
at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:769) ~[vertx-core-3.3.0.jar:na]
at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:740) ~[vertx-core-3.3.0.jar:na]
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$3(ContextImpl.java:359) ~[vertx-core-3.3.0.jar:na]
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:339) ~[netty-common-4.1.1.Final.jar:4.1.1.Final]
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:393) ~[netty-transport-4.1.1.Final.jar:4.1.1.Final]
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:742) ~[netty-common-4.1.1.Final.jar:4.1.1.Final]
at java.lang.Thread.run(Unknown Source) ~[na:1.8.0_91]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1483
any chance for Jackson 2.5+ on vertx 2.x? · Issue #1483 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We have a relatively large application based on vertx 2.1.6 which is not worth the effort for updating to vertx 3. however due to some problems we need to have Jackson at least 2.5+ as dependency. but it seems that vertx forces Jackson 2.2.2 no matter how we packages the module.
currently we are packing everything as fat Jar and vertx puts Jackson 2.2.2 in its lib/ and loads it even when Jackson 2.7.4 is present under mods/module-name/lib.
Is there any way to change this behaviour and to force using newer Jackson versions?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1484
MQ-based ClusteredEventBus support · Issue #1484 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes we want to persist the event into the MQ to avoid it being lost in some special cases. For example, if the Vert.x node crushed, the unhandled events in this node will be lost.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1485
Fix message producer by amannocci · Pull Request #1485 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@amannocci can you sign the Eclipse CLA and your commit ? see https://github.com/eclipse/vert.x/blob/master/CONTRIBUTING.md
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1486
Allow AsyncFile's to be opened in append mode · Issue #1486 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Appending to a file requires three steps:

Open the file with FileSystem.open() with an OpenOptions object on which setTruncateExisting(false) and setWrite(true) have been called.
Get the file properties with FileSystem.props()
Call setWritePos() on the file with the length according to the properties.

It seems like a simpler and less error-prone way would be to add setAppend() and getAppend() to OpenOptions and make AsyncFileImpl's constructor translate it to StandardOpenOption.APPEND.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1487
SEVERE: java.io.IOException: An existing connection was forcibly closed by the remote host · Issue #1487 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On the server side (vertx), I have (earlier, setChunked is set to true)
route("/test").handler { rc =>
      rc.response().end("Cool stuff")
    }
On the client side (I'm using OkHttp3), I have
  val JSON = MediaType.parse("application/json; charset=utf-8")

  val client = new OkHttpClient()
  val requestBuilder = new Request.Builder().url("http://localhost:8080/test")
  requestBuilder.method("POST", RequestBody.create(JSON, ""))
  val request = requestBuilder.build()
  val response = client.newCall(request).execute()
  println(response.body.string())
  response.close()
The client prints "Cool stuff" as desired.  However, when the client exits, I get this error on the server
SEVERE: java.io.IOException: An existing connection was forcibly closed by the remote host

When I use HttpURLConnection instead of OkHttp, I still get the same error. Could someone please help?
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1488
AddressResolver should not bind locally - fixes #1479 by vietj · Pull Request #1488 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
i think the pr for dns is ok, however I am probably not the best person for netty
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1489
Proxy based http connections do not throw Proxy errors · Issue #1489 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Http Client requesting via web proxy does not throw errors from the proxy server.
Discussion: https://groups.google.com/forum/#!topic/vertx/LialiWptlLQ
Reproducer:

public static void main(String[] args) {
        Vertx vertx = Vertx.vertx();
        HttpClientOptions options = new HttpClientOptions();
        ProxyOptions proxyOptions = new ProxyOptions();
        proxyOptions.setHost("www.google.com");
        proxyOptions.setPort(80);
        options.setProxyOptions(proxyOptions);
        HttpClient client = vertx.createHttpClient(options);

        client.getAbs("http://vertx.io/", resp ->
            System.out.println(resp.getHeader("Content-Length")))
            .exceptionHandler(e -> System.out.println("Got error: "+e.getMessage()))
            .end();

        try {
            new CountDownLatch(2).await();
        } catch (InterruptedException e) {   }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1490
Fix #1320 - improve shared data documentation by cescoffier · Pull Request #1490 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1491
Preserve order of enabled cipher suites and protocols for TCPSSLOptions · Issue #1491 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently we use HashSet for storing the suites and protocols.
Ordering set when building the options should be respected in the options and when creating the ssl engine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1492
Preserve order of enabled cipher suites and protocols for TCPSSLOptio… by vietj · Pull Request #1492 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1493
Eventbusmetrics schedule message by vietj · Pull Request #1493 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1494
Let the user access the logger delegate and logger implementation · Issue #1494 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This has been discussed on the mailing list. A user wants to be able to reconfigure some loggers programatically after the logging SPI has been initialized.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1495
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1496
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1497
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1498
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1499
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1500
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1501
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1502
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1503
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1504
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1505
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1506
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1507
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1508
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1509
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1510
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1511
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1512
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1513
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1514
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1515
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1516
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1517
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1518
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1519
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1520
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1521
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1522
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1523
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1524
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1525
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1526
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1527
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1528
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1529
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1530
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1531
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1532
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1533
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1534
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1535
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1536
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1537
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1538
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1539
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1540
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1541
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1542
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1543
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1544
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1545
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1546
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1547
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1548
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1549
test for #1511 Proxying - Host header not formed properly by alexlehm · Pull Request #1549 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
test that proxy connect requests have the Host header set to the target host, not the the proxy host
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1550
Issues/#1498 merged by alexlehm · Pull Request #1550 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
fixes #1498
new pr for issue #1498 merged into current master and with a unit test for the host header in http proxy requests
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1551
Fixes #1542: Code sample in 'Async coordination' incorrect by aschrijver · Pull Request #1551 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closing, repo not picking up my gpg-signed commit
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1552
Fixes #1542: Code sample in 'Async coordination' incorrect by aschrijver · Pull Request #1552 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1553
BodyEndHandlers can be called after the full response has been read & flushed. · Issue #1553 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
BodyEndHandlers registered on the HttpServerResponse can be executed on the EventLoop thread after the response has been wholly received.
This is not-consistent with what the javadocs have written

Add a handler that will be called just before the response body has been completely written. This gives you a hook where you can write any extra data to the response before it has ended when it will be too late.

Here is a test case that demonstrates this:
import io.vertx.core.Handler;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpServer;
import io.vertx.ext.web.Router;
import org.apache.http.client.fluent.Content;
import org.apache.http.client.fluent.Request;
import org.assertj.core.api.Assertions;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import java.util.concurrent.CountDownLatch;
import java.util.concurrent.atomic.AtomicBoolean;

/**
 * {@link io.vertx.core.http.HttpServerResponse#bodyEndHandler(Handler)} is called afer the response has been written
 * to the channel. There's no guarentee it will occur before the client has consumed the request fully.
 */
public class VertxBugDemonstrateIT {

    private Vertx vertx;

    @BeforeClass
    public void beforeClass() {
        vertx = Vertx.vertx();
    }

    @AfterClass
    public void afterClass() {
        if (vertx != null) {
            vertx.close();
        }
    }

    @Test
    public void testDemonstrateBodyEndHandler() throws Exception {
        String message = "Hello World!";
        AtomicBoolean bodyEndHandlerHit = new AtomicBoolean();
        Router router = Router.router(vertx);
        router.route().handler(context -> {
            context.addBodyEndHandler(v -> {
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    Assertions.fail("Interrupted exception");
                }
                bodyEndHandlerHit.set(true);
            });
            context.response().end(message);
        });

        CountDownLatch serverStartedLatch = new CountDownLatch(1);
        final HttpServer server = vertx.createHttpServer().requestHandler(router::accept).listen(0, event -> {
            serverStartedLatch.countDown();
        });
        serverStartedLatch.await();

        int port = server.actualPort();

        bodyEndHandlerHit.set(false);
        //Blocking call
        Content context = Request.Get(String.format("http://localhost:%s", port)).execute().returnContent();
        Assertions.assertThat(context.asString()).isEqualTo(message);
        Assertions.assertThat(bodyEndHandlerHit.get()).isTrue();
    }

}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1554
DatagramSocket should use unpooled buffers · Issue #1554 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
DatagramSocket copies the direct buffer to an pooled heap buffer - it should use an unpooled heap buffer instead.
Workaround : use -Dio.netty.allocator.type=unpooled
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1555
CompositeFuture join method · Issue #1555 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This operation is like the CompositeFuture#all method, except that it always wait until all its futures are completed and will not fail as soon as one of its futures fails.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1556
Added Json#decodeValue with generic types support by grossws · Pull Request #1556 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@grossws can you add a small test for this feature ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1557
Fix javadoc for bodyEndHandler by fzakaria · Pull Request #1557 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The javadoc for bodyEndHandler makes it sound like the handler is called
before the body is written over the wire.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1558
Safe jackson module registration · Issue #1558 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently mapper and prettyMapper can be customized because they are public static fields but such customization can be a bit fragile (because of visibility issues) even if no concurrent modification happens.
I propose to add method Json.customize(Consumer<? super ObjectMapper> customizer) which will pass mapper and prettyMapper to customizer to allow user safe customization (like registering modules for e.g. guava serialization/deserialization) and either

make these field public volatile (to preserve backward compatibility for ones who modified mappers in these fields);
make them private volatile and provide accessors;
make them private, provide accessors and use them under syncronized/rwlock.

Also I propose register modules from com.fasterxml.jackson.databind.Module SPI by default for mapper and prettyMapper using ObjectMapper#findAndRegisterModules method.
If this proposal makes sence for project maintainers I can make pull requests.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1559
Find Jackson modules from SPI and register in Json by grossws · Pull Request #1559 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1560
fix http 1.1 requests with socks proxy by alexlehm · Pull Request #1560 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1561
DatagramSocket should use unpooled buffers - fixes #1554 by vietj · Pull Request #1561 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM but I can't merge.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1562
better logging when eventbus failed by jan-zajic · Pull Request #1562 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jan-zajic  Is it possible to use parameterized logging
logger.warn("Some error {}", someArgument); ?
Also, can you please also print the port in log, not just the host. If you don't define the cluster-port then Vertx will pick a default port, so it will be good to print the port as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1563
Do not wait for 2 minutes when failing to boot a clustered test by Sanne · Pull Request #1563 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@Sanne can you sign the Eclipse CLA and sign your commit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1564
Remove KeyCertOptions limitation for OpenSSL · Issue #1564 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The previous version of OpenSSL engine was restricted to use pem file format.
Now the engine can use a generic KeyManagerFactory : netty/netty#5439
We can so support it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1565
Remove openssl keycert format limitations by vietj · Pull Request #1565 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍 from me
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1566
Multivalued server cookies should be seen as a single semi colon sepa… by vietj · Pull Request #1566 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'll check soon and let you know, sorry for delay i'm out of office now, will get back to you monday
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1567
Composite future join composition by vietj · Pull Request #1567 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks good! 👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1568
Improve handling of exceptions thrown in Future handlers · Issue #1568 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In my multi-developer Vert.x 3.x project it seems very easy to write code that doesn't handle exceptions well. I think that Vert.x could do better here.
I've attached an example of one of the common scenarios. The program invokes some method that returns a Future. This is often a method that accesses a database or other web service. In the example I call someAsyncMethod, which just sets a timer. The handler for the database or web service responses (the timer handler here) does some stuff and then completes the Future it returned earlier. However, due to a programming error or unexpected condition, the handler throws an exception.
In someAsyncMethod, I've anticipated that the timer handler may throw, so I catch any exception and fail the Future. If I don't do this, then any exception will propagate back to Vert.x, and the Future I returned from someAsyncMethod will never be completed. But the exception thrown from the caller's handler wounds up being caught by the catch block in the timer handler. It then tries to fail the Future. Since the Future is already completed, the call to fail throws IllegalStateException. That exception then masks the original exception. In production we see IllegalStateException in the log but have no idea what actually triggered it.
I've shown one possible solution in someOtherAsyncMethod. Here I move the call to complete outside the try block so that any exceptions thrown by the handler will propagate out of this handler. This at least produces the right message in the log. It's not easy to do consistently, though.
Another strategy would be to check whether or not the Future is already completed in the catch block, and do "something else" if it's already completed. But the "something else" would probably be just writing the exception to the log, so there's some record of what went wrong, or rethrowing it (this is what Future.compose does), which will ultimately return it to the Vert.x event loop. There's nothing else the handler can do because the future has already completed.
Some recommendations for how Vert.x could handle this situation better:

Don't allow exceptions to propagate from a handler to the method that completed the Future. The completing method can't possibly handle a random exception from the handler in any meaningful way. If a handler throws, Vert.x should treat that as an unrecoverable condition and just log it. Perhaps there could be option to install a global exception handler that would do something else.
Do something with the exception passed to Future.fail, even if the future is already completed. Either include it in the IllegalStateException that fail will throw, or just rethrow it directly, which seems to be the behavior recommend by Future.compose.

FutureFail.zip
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1569
Support local address for TCP clients · Issue #1569 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient should allow an option to specify the local ip address. This is useful for a machine with multiple ip addresses / network interfaces. It might want to communication to happen on a specific network interface. Another use case is for a HttpClient with a really high outbound fanout and slow response (i.e. web crawler). Without an ability to force the outgoing connection to share the same local ip address and port, it will be difficult to scale the number of requests on one machine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1570
netty resolver may get ipv6 addresses even when only ipv4 is available · Issue #1570 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Following up on this groups thread https://groups.google.com/d/topic/vertx/7xTo_a_lOWk/discussion, it is necessary to switch to the next netty version 4.1.5 when it becomes available to get fix for the issue that the resolver might get a ipv6 address even though only ipv4 is available and is unable to connect to the address. This behaviour is switched off by -Djava.net.preferIPv4Stack=true, which was not honoured by the new resolver in netty 4.1.
The netty issue for the issue is netty/netty#5657
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1571
HttpServerResponse.sendFile() returns status code 200 for non existing file · Issue #1571 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Usually I would expect a webserver to respond with status code 404 for a non existing resource. Today I noticed that sendFile("doesnotexists.js") returns 200 with content-length = 0 instead of 404.
Does it work as expected? Regarding the javadoc [1] there is no word about status codes.
Btw, does sendFile() really bypass the userspace when using SSL?
[1] http://vertx.io/docs/apidocs/io/vertx/core/http/HttpServerResponse.html#sendFile-java.lang.String-long-long-
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1572
Is it possible to get EventLoop for verticle by using open API only? · Issue #1572 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I need to get verticle's EventLoop to use it in netty-based library. I want to reuse it to avoid any issues with synchronization. I found only how to get EventLoopGroup but in this case this library will be executed on different EventLoop.
I found another way by using internal structure case ((ContextImpl) vertx.getOrCreateContext()).nettyEventLoop();
Is it possible to add this method to Context interface?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1573
Blocked thread warning when opening or closing an AsyncFile  · Issue #1573 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Users have reported blocked thread warning when opening or closing an AsyncFile.
Here are example stack traces:
io.vertx.core.VertxException: Thread blocked
        at java.io.UnixFileSystem.getBooleanAttributes0(Native Method)
        at java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:242)
        at java.io.File.exists(File.java:819)
        at io.vertx.core.impl.FileResolver.resolveFile(FileResolver.java:103)
        at io.vertx.core.impl.VertxImpl.resolveFile(VertxImpl.java:657)
        at io.vertx.core.file.impl.FileSystemImpl$14.<init>(FileSystemImpl.java:736)
        at io.vertx.core.file.impl.FileSystemImpl.openInternal(FileSystemImpl.java:735)
        at io.vertx.core.file.impl.FileSystemImpl.open(FileSystemImpl.java:299)
        at io.vertx.core.http.impl.HttpServerFileUploadImpl.streamToFileSystem(HttpServerFileUploadImpl.java:148)

and
io.vertx.core.VertxException: Thread blocked
    at sun.nio.ch.WindowsAsynchronousFileChannelImpl.close0(Native Method)
    at sun.nio.ch.WindowsAsynchronousFileChannelImpl.close(WindowsAsynchronousFileChannelImpl.java:142)
    at io.vertx.core.file.impl.AsyncFileImpl.doClose(AsyncFileImpl.java:464)
    at io.vertx.core.file.impl.AsyncFileImpl.closeInternal(AsyncFileImpl.java:480)
    at io.vertx.core.file.impl.AsyncFileImpl.close(AsyncFileImpl.java:117)
    at io.vertx.rxjava.core.file.AsyncFile.close(AsyncFile.java:143)

One user provided more details and reported he was using a mapped Windows shared drive.
I have been able to reproduce the opening issue by a slow network filesystem (with twickle and nbd).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1574
Fixes #1573 Blocked thread warning when opening or closing an AsyncFile by tsegismont · Pull Request #1574 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1575
ConnectionHolder should log when queuing messages · Issue #1575 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ConnectionHolder creates a queue and inserts messages bound for a remote host if it isn't connected.  It would be very useful it it logged debug messages when this happened.  It would also be exceptionally useful if it logged a warning for failed connection attempts to remote peers, including the attempted host/port.
Also, the queue appears to grow without bound.  It would be good to limit the size of the queue via a config entry, then stop queuing messages for that remote host once that limit is reached.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1576
Allow tuning for gzip/deflate compression level (for performance) by creativeprogramming · Pull Request #1576 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm running this in production since 7 days, all ok, anyway needs testing.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1577
Close the shared worker pools when closing Vertx · Issue #1577 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1578
Rethrow the RejectedExecutionException when a worker task is rejected · Issue #1578 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
so the caller of executeBlocking is notified
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1579
Worker pool fixes by vietj · Pull Request #1579 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1580
Log a warn when the Connection header is used in HTTP/2 response headers · Issue #1580 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1581
File close is done from the wrong thread · Issue #1581 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Got this thread warning from time to time due to AsyncFileImpl.close is called from Vert.x event loop.
2016-08-24 17:17:22,228 WARN io.vertx.core.impl.BlockedThreadChecker [vertx-blocked-thread-checker] Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 44689 ms, time limit is 2000 io.vertx.core.VertxException: Thread blocked
        at sun.nio.ch.FileDispatcherImpl.close0(Native Method)
        at sun.nio.ch.FileDispatcherImpl.close(FileDispatcherImpl.java:98)
        at sun.nio.ch.SimpleAsynchronousFileChannelImpl.close(SimpleAsynchronousFileChannelImpl.java:102)
        at io.vertx.core.file.impl.AsyncFileImpl.doClose(AsyncFileImpl.java:464)
        at io.vertx.core.file.impl.AsyncFileImpl.lambda$closeInternal$5(AsyncFileImpl.java:482)
        at io.vertx.core.file.impl.AsyncFileImpl$$Lambda$531/233412243.run(Unknown Source)
        at io.vertx.core.file.impl.AsyncFileImpl.lambda$doWrite$0(AsyncFileImpl.java:153)
        at io.vertx.core.file.impl.AsyncFileImpl$$Lambda$523/830092490.handle(Unknown Source)
        at io.vertx.core.file.impl.AsyncFileImpl$1.lambda$completed$0(AsyncFileImpl.java:394)
        at io.vertx.core.file.impl.AsyncFileImpl$1$$Lambda$525/1409392663.handle(Unknown Source)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$3(ContextImpl.java:359)
        at io.vertx.core.impl.ContextImpl$$Lambda$122/405091754.run(Unknown Source)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:339)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:393)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:742)
        at java.lang.Thread.run(Thread.java:745)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1582
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects by LoneRifle · Pull Request #1582 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have since signed the Eclipse CLA and would like to request that checks are run again.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1583
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects  by LoneRifle · Pull Request #1583 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Supersedes #1582
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1584
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects  by LoneRifle · Pull Request #1584 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm really confused as to what's going on. I've signed the CLA and tagged my account with my GitHub id but your CI job insists on identifying me by my github mail address, which doesn't really exist.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1585
Add documentation on the Vert.x cache and how to configure it. by cescoffier · Pull Request #1585 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add some details about the configuration of the cache behavior
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1586
Make JsonObject and JsonArray extend a common class · Issue #1586 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently both JsonObject and JsonArray are 2 completely independent classes, but they do share some method signatures. It could be beneficial to make both classes extend some common interface (for example JsonData).
The main shared methods that could belong to this common class are:

int size()
String encode()
String encodePrettily()
boolean isEmpty();

Adding this hierarchy, could enable users send/receive JsonData objects in/to the EventBus without the need for casting if any of these methods needs to be called.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1587
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects by LoneRifle · Pull Request #1587 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1588
putIfAbsent -> computeIfAbsent by LoneRifle · Pull Request #1588 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1589
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects by LoneRifle · Pull Request #1589 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1590
SharedDataImpl: Use computeIfAbsent to atomically get-or-create objects by LoneRifle · Pull Request #1590 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1591
SharedDataImpl: Use ConcurrentMap#computeIfAbsent to atomically get-or-create objects by LoneRifle · Pull Request #1591 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Could I humbly seek this PR to be reviewed possibly for inclusion into the 3.4.x series of releases?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1592
Bad documentation · Issue #1592 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In VertxOptions, DeploymentOptions, etc, the option to set the time seems to be documented inconsistently. Some of them are "ms". Some of them are "ns". (Even in the same method).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1593
always remove subs when removing node in clusterMap by pontushellgren · Pull Request #1593 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1594
Implement High Fault Tolerance: Vertx Cluster is fault tolerant when several nodes are killed by polipodi · Pull Request #1594 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Can't it be done by configuring the underlying component (for example Hazelcast in the HZ cluster manager). It has configuration variables to specify the ping time (http://docs.hazelcast.org/docs/3.5/manual/html/systemproperties.html). For example hazelcast.heartbeat.interval.seconds may make it, no ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1595
[Question] Current approaches and best practices for Dependency Injection on VertX · Issue #1595 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello There,
looking in the documentation and searching i didn't find any current approaches nor best practices for Dependency Injection with vertx, so i'm asking here for advices i hope someone can share their knowledge and approaches about that subject.
Maybe explaining my current problem could help you understand why i have doubts.
Currently i'm developing an service for integration with an external third party service, that integration will be via REST api calls.
In the current design, i have a Service that 'll handle the communication with this third party service, doing the network call, and this Service has 2 more dependencies, that works fine with Dependency Injection, based on Google Guice, the problem is, to do the network call i need a vertx instance to create the HttpClient, and i'm doing this to inject it:
InjectorBuilder.fromModules(modulos)
              .overrideWith(new AbstractModule() {
                @Override
                protected void configure() {
                  bind(io.vertx.rxjava.core.Vertx.class).toInstance(io.vertx.rxjava.core.Vertx.newInstance(vertx)); // pretty weird solution, i think there maybe problems with this approach too, but don't know what problem
                  bind(MongoClient.class).toInstance(mongoClient); // Another weird solution for injecting it in a service :s
                }
              })
              .createInjector();

As you see, i'm sure that must have another way of doing it, because this approach i used is just for the sake of working, but i think maybe could have problems.
As you see on the binding, i use mongodb, i inject it in a class responsible for persisting the data, looks pretty weird too me too.
Could someone share their knowledge about it? How do you design your services / persistence modules to talk to vertx?
Thanks, and sorry for my english, if i failed somewhere.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1596
Using random port with HttpServer only works for first server. · Issue #1596 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to setup multiple HttpServer instances listening on different random ports in my application using the port 0 method.  The first one works, however subsequent ones do not and the actualPort() method reports 0.  The same technique used with NetServer works as expected with each instance reporting a random port in actualPort();
Using Clement's excellent starter app to reproduce.  Change the start method to
  @Override
  public void start() {
    vertx.createHttpServer()
        .requestHandler(req -> req.response().end("Hello Vert.x!"))
        .listen(0, res -> System.out.println("Http Port " + res.result().actualPort()));
    vertx.createHttpServer()
        .requestHandler(req -> req.response().end("Hello Vert.x!"))
        .listen(0, res -> System.out.println("Http Port " + res.result().actualPort()));
    vertx.createNetServer()
        .connectHandler(req -> {})
        .listen(0, res -> System.out.println("Net Port " + res.result().actualPort()));
    vertx.createNetServer()
        .connectHandler(req -> {})
        .listen(0, res -> System.out.println("Net Port " + res.result().actualPort()));
}

Output
Aug 30, 2016 11:08:23 PM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
INFO: Succeeded in deploying verticle
Http Port 52550
Http Port 0
Net Port 52551
Net Port 52552
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1597
Consider setting a default value to the `Launcher-class` in the StartCommand · Issue #1597 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The default launcher class should be: io.core.vertx.Launcher. It would avoid passing --launcher-class="..." every time. This value should be overridden only in application using their own main class.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1598
Asynchronous read/write done on wrong thread · Issue #1598 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The open/close issue has been addressed here #1573 . Async read/write still is blocking.
2016-08-30 18:16:25,382 aaa  WARN (vertx-blocked-thread-checker) [io.vertx.core.impl.BlockedThreadChecker] - Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 9988 ms, time limit is 2000
io.vertx.core.VertxException: Thread blocked
at sun.nio.ch.WindowsAsynchronousFileChannelImpl.writeFile(Native Method)
at sun.nio.ch.WindowsAsynchronousFileChannelImpl.access$500(WindowsAsynchronousFileChannelImpl.java:41)
at sun.nio.ch.WindowsAsynchronousFileChannelImpl$WriteTask.run(WindowsAsynchronousFileChannelImpl.java:635)
at sun.nio.ch.WindowsAsynchronousFileChannelImpl.implWrite(WindowsAsynchronousFileChannelImpl.java:734)
at sun.nio.ch.AsynchronousFileChannelImpl.write(AsynchronousFileChannelImpl.java:251)
at io.vertx.core.file.impl.AsyncFileImpl.writeInternal(AsyncFileImpl.java:379)
at io.vertx.core.file.impl.AsyncFileImpl.doWrite(AsyncFileImpl.java:374)
at io.vertx.core.file.impl.AsyncFileImpl.doWrite(AsyncFileImpl.java:171)
at io.vertx.core.file.impl.AsyncFileImpl.write(AsyncFileImpl.java:179)
at io.vertx.core.file.impl.AsyncFileImpl.write(AsyncFileImpl.java:57)
at io.vertx.core.file.impl.AsyncFileImpl.writeInternal(AsyncFileImpl.java:378)
at io.vertx.core.file.impl.AsyncFileImpl.doWrite(AsyncFileImpl.java:373)
at io.vertx.core.file.impl.AsyncFileImpl.doWrite(AsyncFileImpl.java:170)
at io.vertx.core.file.impl.AsyncFileImpl.write(AsyncFileImpl.java:178)
at io.vertx.core.file.impl.AsyncFileImpl.write(AsyncFileImpl.java:56)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1599
Reading/writing to disk is a blocking operation and must be executed on by shravanAngadi · Pull Request #1599 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
a worker thread
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1600
There is no read method for Buffer. · Issue #1600 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The ByteBuf has readInt()   readShort().
It's very convenient.
Buffer only has getInt() getShort() method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1601
NetSocket implementation can redeliver the same buffer when paused · Issue #1601 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current NetSocket implementation accumulates received data when it is paused and does not clear the pending data when it is resumed.
The pendingData field should be set to null when it is delivered to the application.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1602
NetClient with SOCKS Proxy checks wrong hostname on upgradeToSsl() · Issue #1602 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using a NetClient with SOCKS Proxy, the upgradeToSsl() checks the ssl cert against the name of the proxy, not the name of the target server.
I created a unit test that shows the issue by setting the proxy hostname to 127.0.0.1 and connecting to a server at localhost, this way it fails with "No subject alternative names matching IP address 127.0.0.1 found".
A unlikely usecase, however I got the error when trying to send a mail via smtp with starttls over TOR, which uses SOCKS5 to connect.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1603
Stop Methods Not Being Called on Exit · Issue #1603 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I've made a simple test to figure out why none of my stop methods are getting called on exit (Ctrl-C from command line).
`public class SimpleServer extends AbstractVerticle {
private HttpServer httpServer = null;
@Override
public void stop()
{
    System.out.println("tallyho!!");
}

@Override
public void start() throws Exception
{
    Router mainRouter = Router.router(vertx);
    mainRouter.delete("/something").handler(routingCtx -> {});
    httpServer = vertx.createHttpServer().requestHandler(mainRouter::accept);
    httpServer.listen(9999);
    System.out.println("started!!");
}

public static void main(String[] args) throws InterruptedException
{
    Vertx vertx = Vertx.vertx();
    vertx.deployVerticle("com.mykpg.SimpleServer", stringAsyncResult ->
    {
        if (stringAsyncResult.succeeded())
        {
            //vertx.close() works on my simple example but not my 3 verticle (1 worker) actual app
            System.out.println(stringAsyncResult.result());
        }
        else
        {
            System.out.println(stringAsyncResult.cause().getMessage());
        }
    });
}

}`
I don't get any error messages even though I've Log4J2 set to debug. I've disabled Log4J2 and same behavior. vertx.close() only works in this very simple example. On my 3 verticle (1 worker) actual app vertx.close() does nothing. Any ideas?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1604
fixes #1602: NetClient with SOCKS Proxy checks wrong hostname on upgradeToSsl() by alexlehm · Pull Request #1604 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this is a rather unlikely usecase when connecting with a SOCKS proxy to a service that requires upgradeToSsl
e.g. STARTTLS in SMTP, since the ssl helper is constructed with the target address of the tcp connection, the cert is checked against the proxy address (e.g. localhost) instead of the actual address (e.g. smtp.gmail.com)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1605
Deprecate and @GenIgnore CompositeFuture#result(int) in favor of CompositeFuture#resultAt(int)  · Issue #1605 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1606
Deprecate and @GenIgnore CompositeFuture#result(int) in favor of Comp… by vietj · Pull Request #1606 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…ositeFuture#resultAt(int) - fixes #1605
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1607
vertx don't instant sends messages while processing handlers! · Issue #1607 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It seems that vertx only sends cluster messages when is idle (nothing to process).
That means while a vertx is very busy/active there is no messages dispatched to eventBus until the vertx becomes completely idle, that could be a big limitation if there is a need to send instant messages.
What is the solution to force vertx to instant send a message without waiting the need to be idle?
In order to demonstrate this issue, I have created two very simple verticles:

Verticles ping: sends 60 instant messages to pong and prints the reply answers.
Verticle pong: emulates a 50ms processing time and reply the message

Scenarios: (cluster mode)

Test1: pong is a worker verticle:
Test2: pong is a multithread worker verticle:

java -cp 'target/*' io.vertx.core.Launcher start my.pacakge.Pong -id pong -worker -cluster
java -cp 'target/*' io.vertx.core.Launcher start my.pacakge.Ping -id ping -worker -cluster

For these tests ping verticle is a worker verticle ([w-##] means vert.x-worker-thread-##), however it's not revenant if it's a standard verticle because both configurations are similar. Both ping and pong suffers from the reported issue and therefore the messages were stuck on eventBus until idle (nothing to process).
Note that If the ping used a multithread worker then the 1 second extra stuff wasn't noticed and the entire process was 1 second quicker (see ping code), however the pong continues suffering from the reported issue.
ping verticle code:
public class Ping extends AbstractVerticle {
    private final static Logger LOG = LoggerFactory.getLogger(Ping.class);

    @Override
    public void start() {
        for (int i = 1; i <= 60; i++) {
            String ball = String.format("ball%02d", i);
            getVertx().eventBus().send("table", ball, response -> {
                if (response.succeeded()) {
                    LOG.info("ping> recv " + response.result().body());
                } else {
                    LOG.error("ping> fail " + response.cause());
                }
            });
        }
        LOG.info("ping> send ball01 to ball60");
        doExtraStuff(); // 1 second wait
    }

    private static void doExtraStuff() {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            throw new IllegalStateException(e);
        }
    }
}
pong verticle code:
public class Pong extends AbstractVerticle {
    private final static Logger LOG = LoggerFactory.getLogger(Pong.class);

    @Override
    public void start() {
        getVertx().eventBus().consumer("table", message -> {
            String ball = (String)message.body();
            LOG.info("pong> recv " + ball);
            process(); // 50ms wait
            LOG.info("pong> send " + ball);
            message.reply(ball);
        });
    }

    private static void process() {
        try {
            Thread.sleep(50);
        } catch (InterruptedException e) {
            throw new IllegalStateException(e);
        }
    }
}

Test1 results: ping and pong are worker verticle:

[2016-09-04 02:12:23.169] [w-02] ping> send ball01 to ball60 

# -> (ping is doing extra sfuff for 1 second and the 60 messages aren't dispatched to pong)

[2016-09-04 02:12:24.294]                              [w-03] pong> recv ball01 
[2016-09-04 02:12:24.349]                              [w-03] pong> send ball01 
[2016-09-04 02:12:24.364]                              [w-03] pong> recv ball02 
[2016-09-04 02:12:24.415]                              [w-03] pong> send ball02 
#... (2x57 lines - recv and send for ball03 to ball59 - time between recv and send is ~50ms)
[2016-09-04 02:12:27.392]                              [w-03] pong> recv ball60 
[2016-09-04 02:12:27.443]                              [w-03] pong> send ball60 

# -> (pong is idle and only now the 60 messages are dispatched to ping)
# -> (ping didn't receive answers for at least 3 seconds; pong processing time is 50ms!)

[2016-09-04 02:12:27.463] [w-04] ping> recv ball01 
[2016-09-04 02:12:27.465] [w-04] ping> recv ball02 
#... (57 lines - recv for ball03 to ball59)
[2016-09-04 02:12:27.504] [w-04] ping> recv ball60 

# -> (ping received the 60 reply messages practically in one go!)

Test2 results: ping is a worker verticle and pong is a multithread worker verticle:

[2016-09-04 02:12:37.623] [w-02] ping> send ball01 to ball60 

# -> (ping is doing extra sfuff for 1 second and the 60 messages aren't dispatched to pong)

[2016-09-04 02:12:38.754]                              [w-12] pong> ball01 recv 
[2016-09-04 02:12:38.754]                              [w-13] pong> ball02 recv 
#... (17 lines - recv for random bal01 to bal20 except ball01, ball02 and ball18)
[2016-09-04 02:12:38.760]                              [w-09] pong> ball18 recv 

# -> (pong doesn't have more idle threads - all 20 pool threads are processing for 50ms)

[2016-09-04 02:12:38.805]                              [w-13] pong> ball02 send 
[2016-09-04 02:12:38.805]                              [w-14] pong> ball03 send 
[2016-09-04 02:12:38.805]                              [w-13] pong> ball03 recv
#... (2x18 lines - with random send/recv bal01 to bal20 except already displayed balls)
[2016-09-04 02:12:38.835]                              [w-12] pong> ball40 recv 

# -> (pong doesn't have more idle threads - all 20 pool threads are processing for 50ms)

[2016-09-04 02:12:38.872]                              [w-16] pong> ball26 send 
[2016-09-04 02:12:38.872]                              [w-06] pong> ball27 send 
[2016-09-04 02:12:38.873]                              [w-16] pong> ball41 recv 
#... (2x17 lines - with random send/recv bal21 to bal40 except already displayed balls)
[2016-09-04 02:12:38.882]                              [w-02] pong> ball59 recv 
[2016-09-04 02:12:38.887]                              [w-14] pong> ball40 send 
[2016-09-04 02:12:38.888]                              [w-14] pong> ball60 recv 

# -> (pong doesn't have more idle threads - all 20 pool threads are processing for 50ms)

[2016-09-04 02:12:38.925]                              [w-16] pong> ball41 send 
[2016-09-04 02:12:38.926]                              [w-19] pong> ball44 send 
#... (17 lines - send for random bal41 to bal60 except ball41, ball44 and ball60)
[2016-09-04 02:12:38.938]                              [w-14] pong> ball60 send 

# -> (pong has idle threads and only the 60 messages are dispatched to ping)
# -> (ping didn't receive answers for at least 150ms seconds; pong processing time is 50ms!)

[2016-09-04 02:12:38.945] [w-04] ping> recv ball09 
[2016-09-04 02:12:38.959] [w-04] ping> recv ball04 
#... (57 lines - recv for random bal01 to bal60 except ball09, ball04 and ball44)
[2016-09-04 02:12:39.004] [w-04] ping> recv ball44 

# -> (ping received the 60 reply messages practically in one go!)
What is the solution to force vertx to instant send a message without waiting the need to be idle?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1608
Expose io.vertx.core.http.impl.MimeMapping methods to public API · Issue #1608 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x http uses this class to figure mime, but this class is not accessible via public API. Would be nice to have the methods getMimeTypeForExtension and getMimeTypeForFilename accessible via public API too.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1609
More cluster tests by tsegismont · Pull Request #1609 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1610
Making coming release compatible with RxJava2 · Issue #1610 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
RxJava has just come out with one of the biggest release candidate which includes bug fixes cleanups and improvments they changed whole api with this it is now closer to Java 8 and I would like vertx to be compatible with coming releases of RxJava
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1611
JsonObject copy() preserves LinkedHashMap by giovibal · Pull Request #1611 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
just a small comment, this is not a bug, according to the spec http://json.org:

An object is an unordered set of name/value pairs.

Users should not make assumptions on the order of the keys for several reasons:

vertx nodes in other languages than java will use language specific encode/decode which will not guarantee the order
bridge members from e.g.: sockjs will receive json encoded by browsers which will not preserve order
nodejs, C++, python, C# bridges will also not guarantee the order

It could become a false assumption to say that the order is preserved. However swapping from HashMap to LinkedHashMap could be considered for performance issues but not for the order.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1612
Load multiple certificates into keystore by eyce9000 · Pull Request #1612 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
did you sign the CLA and can you sign the commit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1613
Unable to load multiple client certificates into PEM trust store · Issue #1613 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If I try to load multiple client certificates for client authentication, only one of the certificates gets loaded.
PemTrustOptions trustStore = new PemTrustOptions();
        File certDir = new File("cert");
        File clientCertsDir = new File(certDir,"clients");
        Files.find(clientCertsDir.toPath(), 1, (Path path, BasicFileAttributes attrs)->{
            return path.getFileName().toString().endsWith(".pem");
        }).forEach(certPath ->{
            log.info("Adding cert "+certPath);
            trustStore.addCertPath(certPath.toString());
        });
I have created pull request #1612 that should fix this issue. The certificates were all being loaded with the same name/alias into the keystore.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1614
Infinite skip of control characters in an http request (beyond size limits) · Issue #1614 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Steps:

have a web server
run from bash while true; do printf '\xD'; done | netcat localhost 80

The connection is not dropped. An attacker could keep connection open and slowly stream control characters.
The problem is caused by: netty/netty#5796
however i am using Vert.x, that's why i also filed the bug here.
I think Vert.x could fix the problem by adding some new ChannelHandler in the function below.
private void configureHttp1(ChannelPipeline pipeline) {
    if (logEnabled) {
      pipeline.addLast("logging", new LoggingHandler());
    }
    if (USE_FLASH_POLICY_HANDLER) {
      pipeline.addLast("flashpolicy", new FlashPolicyHandler());
    }
    pipeline.addLast("httpDecoder", new HttpRequestDecoder(options.getMaxInitialLineLength()
        , options.getMaxHeaderSize(), options.getMaxChunkSize(), false));
    pipeline.addLast("httpEncoder", new VertxHttpResponseEncoder());
    if (options.isCompressionSupported()) {
      pipeline.addLast("deflater", new HttpChunkContentCompressor());
    }
    if (sslHelper.isSSL() || options.isCompressionSupported()) {
      // only add ChunkedWriteHandler when SSL is enabled otherwise it is not needed as FileRegion is used.
      pipeline.addLast("chunkedWriter", new ChunkedWriteHandler());       // For large file / sendfile support
    }
    if (options.getIdleTimeout() > 0) {
      pipeline.addLast("idle", new IdleStateHandler(0, 0, options.getIdleTimeout()));
    }
    pipeline.addLast("handler", new ServerHandler(pipeline.channel()));
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1615
Trust multi pem bug by vietj · Pull Request #1615 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1616
clarify comment to NetTest#testHostVerificationHttpsMatching by alexlehm · Pull Request #1616 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thank you
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1617
Documentation fix for running bare instances by jponge · Pull Request #1617 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1618
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1619
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1620
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1621
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1622
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1623
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1624
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1625
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1626
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1627
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1628
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1629
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1630
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1631
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1632
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1633
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1634
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1635
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1636
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1637
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1638
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1639
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1640
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1641
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1642
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1643
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1644
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1645
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1646
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1647
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1648
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1649
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1650
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1651
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1652
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1653
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1654
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1655
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1656
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1657
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1658
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1659
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1660
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1661
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1662
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1663
LocalEventBus for sending thread-safe references implementing Sharable · Issue #1663 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
First of - I'm am more than willing to code this myself through a pull-request. Question is only: has this been already discussed to death? Would there be any demand? Would this be in-line with your design?
Justification: Sending huge immutable/threadsafe objects over the EventBus is currently an unnecessary chore, both for the programmer himself, and the server (potentially introducing many irrelevant de/encodings and allocations). Simply allowing the programmer to declare "I hereby solemnly swear I know what I'm doing" by implementing a mixin interface, and enabling him/her to explicitly pass such a reference on a LocalEventBus (or predefined channel of the "normal" EventBus) would vanish the issue.
There already exists a LocalMap that accomplishes virtually the same effect, arguably in a much less "vertexy" way, resulting in less elegant APIs. So no new risks would be introduced, and due to the "opt-in" nature the programmer would have only himself to blame if hell freezes over ;)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1664
A composite future join should fail with the cause of one of its components · Issue #1664 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1665
-- · Issue #1665 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1666
RoutingContext getAsJsonObject throws exception · Issue #1666 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When sent a json object using some tools(like RestClient firefox) to server throw exception on convert body of request to jsonobject because json sent with some characters like "\n" and JsonObject can not convert this String to JsonObject but "org.json" has not this problem and can convert this string to JSONObject.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1667
add ability to cleanup others (frame/close/drain) handlers too, when websocket is closed by andrey-ko · Pull Request #1667 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse ECA and sign-off the pull request ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1668
Fixes vert-x3/vertx-infinispan#3 InfinispanHATest>HATest.testFailureInFailover fails intermittently by tsegismont · Pull Request #1668 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See vert-x3/vertx-infinispan#3
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1669
In test code, show throwable caught from non main thread by tsegismont · Pull Request #1669 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you have a look at this one too? Thx
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1670
When simulating kill, wait for result uninterruptedly by tsegismont · Pull Request #1670 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The calling thread might be interrupted and then the test fails like this:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1671
JsonObject copy() preserves LinkedHashMap - fixes #1611 by vietj · Pull Request #1671 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
2016-10-11 21:45 GMT+02:00 Julien Viet notifications@github.com:

please review
You can view, comment on, or merge this pull request online at:
#1671
Commit Summary

JsonObject copy() preserves LinkedHashMap - fixes #1611

File Changes

M src/main/java/io/vertx/core/json/JsonObject.java
https://github.com/eclipse/vert.x/pull/1671/files#diff-0 (7)
M src/test/java/io/vertx/test/core/JsonObjectTest.java
https://github.com/eclipse/vert.x/pull/1671/files#diff-1 (23)

Patch Links:

https://github.com/eclipse/vert.x/pull/1671.patch
https://github.com/eclipse/vert.x/pull/1671.diff

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
#1671, or mute the thread
https://github.com/notifications/unsubscribe-auth/ABbltjCZVg9AqqpwB5zQqveNucN5IZ3Yks5qy-dzgaJpZM4KUBtO
.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1672
We should be able to turn off useNormalisedPath by default · Issue #1672 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
useNormalisedPath should be able to be turned off by default (probably per Router basis). I find that we have to turn this feature off most of the time especially when we have to deal with wide range of inputs including special characters.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1673
vertx HttpClient exception handler · Issue #1673 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Am using vertx 3.3.2.
httpClient.exceptionHandler is throwing compilation error.
Whether its removed in this version and how to handle connection exceptions.
Could anyone please help on this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1674
Support UNIX Domain Sockets in HttpClient · Issue #1674 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Netty already supports DomainSockets/DomainChannels, so I was hoping it might be possible to implement support (via HttpOptions/SocketOptions) to support UNIX Domain sockets (AF_UNIX)??? We do this quite often for secured APIs across docker containers. We mount the socket file as a volume in the container and then the different applications communicate via the UNIX Domain socket. We have also taken to communicating with the Docker daemon itself in this manner instead of exposing the Docker HTTP API.
My suggestion for implementation would be one of the following:
Add an overloaded method for Vertx.create(Net/Http)(Client/Server) which could take a "Path" object to point to the location for the UNIX domain socket..
Add logic to the Net/HTTP Client/Server implementations to parse a URL of the format "unix+http://" or "unix+socket://"
Probably many more questions to be answered, but that should be a good start.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1675
Future convenience success and failure handlers by Xargos · Pull Request #1675 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm not against having shortcut method like you added to the interface, however I find confusing the fact to have more than one handler in the implementation, i.e
default void setSuccessHandler(Handler<T> handler) {
  setHandler(ar -> {
    if (ar.succeeded()) {
      handler.handle(ar.result());
    }
  });
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1676
Fixed command line parameter name to be "hagroup" instead of "ha-group" by riperez · Pull Request #1676 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Wrong source file to edit documentation. Will submit a new PR with the fix on the correct source file.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1677
Fixed command line parameter name to be "hagroup" instead of "ha-group" by riperez · Pull Request #1677 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Richard Perez riperez@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1678
Move Cookie interface from Vert.x Web to core · Issue #1678 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Cookies are not specific from the web framework and if one is doing a HTTP server just with core it would be nice not to re-invent the API.
I'd like to propose to move:
https://github.com/vert-x3/vertx-web/blob/master/vertx-web/src/main/java/io/vertx/ext/web/Cookie.java
to core.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1679
RoutingContext getAsJsonObject throws exception · Issue #1679 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When send json to server using some plugins like restful client Firefox get this exception.
The problem is converting String to JsonObject. I test org.json.JSONObject and didn't get this exception.
The problem is by some characters like "\n" which will be added to json string in receiving in server side and JsonObject class can not convert to JsonObject but JSONObject didn't has this problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1680
Incorrect UDP source port in reply packet · Issue #1680 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I tried to develop a server receiving and sending UDP packets (see code snippet below). The issue is that the reply packets don't have the correct source port, that is, the port the server listens on.
public class VerticleUdp extends AbstractVerticle {

    public static final int RECEIVER_PORT = 5000;
    public static final String RECEIVER_HOST = "0.0.0.0";

    @Override
    public void start(Future<Void> fut) {
        // Starting listening on specific socket
        DatagramSocket socket = vertx.createDatagramSocket(new DatagramSocketOptions());
        socket.listen(RECEIVER_PORT, RECEIVER_HOST, asyncResult -> {
            if (asyncResult.succeeded()) {
                socket.handler(packet -> {
                    Buffer buffer = Buffer.buffer(new String("HELLO").getBytes());
                    // Send a Buffer
                    socket.send(buffer, packet.sender().port(), packet.sender().host(), isSent -> {
                        if(isSent.succeeded()){
                        }
                    });
                });
                fut.complete();
                System.out.println("Verticle UDP deployed");
            } else {
                fut.fail( asyncResult.cause());
                System.err.println("VerticleUdpReceiver : Cannot listen port");
            }
        });
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1681
Upgrade to Netty 4.1.6.Final · Issue #1681 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1682
Minor Javadoc fix by kliakos · Pull Request #1682 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1683
Vert.x websocket client doesn't set host header · Issue #1683 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Vert.x websocket client doesn't set a Host header. I'm not sure this can be considered a bug, but I do see other clients behaving different. This is a problem for most load balancer configurations which makes it bit of a usability issue.
A workaround is easy though by passing the header manually:
httpClient.websocket(443,"mydomain.com", "/", MultiMap.caseInsensitiveMultiMap().add("Host", "mydomain.com"), ws -> {
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1684
Fix a few broken tls tests by vietj · Pull Request #1684 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1685
Propose a new contributing.md by pmlopes · Pull Request #1685 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@pmlopes looks like you forgot to read the part about commit signoff 😛
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1686
updated doc as per f2f discussion by pmlopes · Pull Request #1686 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1687
HttpClient: Vert.x should default to port 443 when using https · Issue #1687 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi everybody!
When not specifying a Port - using the Vert.x websocket client - results in connecting to port 80 in both cases - http and https. I think it makes sense to default to port 443 on https connections.
Greets, Markus
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1688
Fixes vert-x3/vertx-hazelcast#49 io.vertx.test.core.HazelcastHATest.testSimpleFailover by tsegismont · Pull Request #1688 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Simulate kill should not use ordered executeBlocking otherwise the CM
leave operation may not execute before the minute delay expires.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1689
OCSP Stapling (for improving HTTPS effective throughput and allow scalability) · Issue #1689 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Cross posted on: netty/netty#5943
Please read this article:
https://letsencrypt.org/2016/10/24/squarespace-ocsp-impl.html
Please focus on:

Our extension is a standalone library but we could equally well fold it into the netty-tcnative library itself. If there is interest, we can contribute it upstream as part of Netty’s next API-breaking development cycle.

hoping you'll show that there's interest!

Anyway it think in any case vert.x should wrap this feature ( once it's ready ) in the HttpServer implementation for this reason I'm opening a ticket also here...
And I hope also, that even if Netty will not show interest, VertX can do that, and embed that implementation itself...
It can reduce the ssl performance bottleneck that still require me to use nginx reverse proxy in front of some VertX as you know that even with tncnative we're not as good as nginx on https, maybe most of the bottleneck it's due to the missing ocsp stapling support, and it may be also a visibility opportunity for this project itself as letsencrypt can feature it too.
It's reactive!
My 2 cents
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1690
Addition of Future.discardingCompleter() by jponge · Pull Request #1690 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it seems it only fit well with the Future<Void> for which complete() is for.
it would not fit well for a Future<String> for which the provider of the future would expect a non value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1691
Does not get response by second request · Issue #1691 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi
I am trying to use vertx with rxjava in web router like:
private void registerTooRoute(Router router) {

    ObservableHandler<RoutingContext> handler = RxHelper.observableHandler();

    handler
        .doOnNext(ctx -> ctx.response().putHeader("content-type", "text/html"))
        .subscribe(ctx -> {
          ctx.response().end("Hello");
        });

    router.get(API_TOO).handler(handler.toHandler());
  }

The first request to the server, I've got the result Hello as expected. But further request to the server, I've got only sandwatch from the browser.
It seems to be, that is an error in vertx rxjava conversion.
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1692
Fixes Typo by EmadAlblueshi · Pull Request #1692 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes in #1592
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1693
Fixes time unit in doc  by EmadAlblueshi · Pull Request #1693 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1694
Fixes time unit in doc by EmadAlblueshi · Pull Request #1694 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj I don't know what is wrong!!!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1695
Fixes time unit from 'ms' to 'ns' by EmadAlblueshi · Pull Request #1695 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1696
Fixes time unit in doc by EmadAlblueshi · Pull Request #1696 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Emad Alblueshi emad.albloushi@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1697
How to use the "Vert.x Command Line Interface API" · Issue #1697 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have read the doc, but I don't understand how to use the api, this is my code
public class Server extends AbstractVerticle {
    @Override
    public void start() throws Exception {
        CLI cli = CLI.create("copy")
                .setSummary("A command line interface to copy files.")
                .addOption(new Option()
                        .setLongName("directory")
                        .setShortName("R")
                        .setDescription("enables directory support")
                        .setFlag(true))
                .addArgument(new Argument()
                        .setIndex(0)
                        .setDescription("The source")
                        .setArgName("source"))
                .addArgument(new Argument()
                        .setIndex(0)
                        .setDescription("The destination")
                        .setArgName("target"));

        StringBuilder builder = new StringBuilder();
        cli.usage(builder);
    }

}

I created a stage but where can I entering the command like "copy [-R] source target" to tell my program to do sth ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1698
Add support for setting SNI hostname and set for client SSL handler by lulf · Pull Request #1698 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I wasn't sure if this should be put in ClientOptionsBase instead, since I think it only makes sense for clients. But I came to the conclusion that I liked it better along with other ssl options.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1699
Http2 not working from worker verticle · Issue #1699 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Using HTTP_2 from a verticle deployed as a worker verticle causes an internal NullPointerException . The following code throws an exception unless

the MyOtherVerticle is deployed with setWorker(false)
or the setProtocolVersion(HttpVersion.HTTP_2) line is removed

public class MyRawMainVerticle extends AbstractVerticle {

    @Override
    public void start(Future<Void> fut) throws Exception {

        Future<Integer> server = Future.future();
        vertx.createHttpServer()
            .requestHandler(r -> r.response().end("helo"))
            .listen(0, l -> server.complete(l.result().actualPort()));

        server.setHandler(port -> {
            JsonObject config = new JsonObject().put("port", port.result());
            vertx.deployVerticle(new MyOtherVerticle(), new DeploymentOptions()
                .setWorker(true).setConfig(config), done -> fut.complete());
        });
    }

    class MyOtherVerticle extends AbstractVerticle {

        private Logger logger = LoggerFactory.getLogger(MyOtherVerticle.class);

        @Override
        public void start(Future<Void> fut) throws Exception {

            HttpClient httpClient = vertx.createHttpClient(new HttpClientOptions()
                .setProtocolVersion(HttpVersion.HTTP_2)
                .setDefaultHost("localhost")
                .setDefaultPort(config().getInteger("port")));

            httpClient.get("/", response -> {
                response.bodyHandler(body -> {
                    logger.info("received: " + body.toString());
                });
            }).exceptionHandler(ex -> {
                logger.error(ex);
            }).end();

            fut.complete();
        }
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1700
Allow tuning for gzip/deflate compression level (for performance) · Issue #1700 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Allowing Vert.Xers to cofigure their webserver deflater compression level.
Inspired by the nginx equivalent: http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_comp_level
Usage example:
HttpServerOptions()
                .setCompressionSupported(true)
                .setCompressionLevel(1) /* valid range 1-9 (1: fastest, less compression - 9 slower, best (pedantic) compression )*/
Note:
Before this PR the .setCompressionSupported(true) was enabling the netty's HttpCompressor default compression level that is 6.
In my proposal i  set the default compression level to 1 (fastest, not the best size saver but anyway very good compression the modern web usage case (in my experience), less cpu cylce wasting, less http requests stucking in 'waiting state')
Why this PR?

Making vert.x flexible in this configuration too cause in order to demonstrate we have nothing to envy to other webservers like nginx ;)
Saving server resource usage (less cpu time for compression = more cpu time for the event loop, less overwarming ;) )
Reducing latency TTFB for static assets when compression is enabled

A bit more  rationale:
A best practice suggested by any moder site 'speed test' is to enable compression, but - as a drawback - enabling it we consume more cpu cycles at server end, and if we tune up it uncarefully we can end up - paradoxically - to get a worst time-to-first-Byte (TTFB) and even a worst total request time with compression enabled compared to no compression at all.
A best pratice to avoid such issue and achieve the better performance compromise, is to tune  compressor to do the 'bare minimal' work and don't overkillig, in other words, remembering that our target is reducing latency at the very minimum level and not really reducing 'file size'.
From my personal experience with nginx and apache too, and confirmed by many online guides, the best value for gzip compression level is 1 or 2 for a web server. Going higher that than just saves some bits, but pay back it hardly in server resource usages and processing latency (when compression is not cached but done on-the-fly)
Bonus: a further performance improvement can be to implement a compression cache layer in vertx but this is uncommon and complex also in other webservers so not a priority.
See also discussion on closed PR: #1576 (closed due to CLA and master branch  git commit history sync issues)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1701
http compression level  by creativeprogramming · Pull Request #1701 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Now both Http and Http2 is working, with JUnit tests  for compression (check for string equals after http serving compressed and httpclient decompress) and check for byte size (checking if compression level_1 size > compression level_9 size > 0 ), the previous HttpCompressionTest was in my opinion not really checking if compression was working but just the presence of the header in the request
@vietj  Please take another look
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1702
Cannot delay HTTP response · Issue #1702 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I've hit a subtle issue that doesn't allow me to delay a response to the client.
In the real code (this is a simplification) I'm using the RxJava extensions to wait for a particular condition before sending a response to the client, but the problem happen also with the following code.
        // RxJava - vertx
        HttpServer server = vertx.createHttpServer();

        server.requestStream().toObservable()
                //.delay(1, TimeUnit.MILLISECONDS)
                .subscribe(req -> {
                    req.handler(data -> logger.info("RECEIVED " + data)); // Important
                    req.response().setStatusCode(200).setChunked(true).write("Hello World").end();
                });

        server.listen(9000);
The code above works perfectly if you comment the delay. When sending GET or POST requests to port 9000 the body is printed to the console (in the case of POST requests, I'm sending them using Postman) and the message "Hello World" is returned to the client.
If you just put a delay into the observable (any amount of time causes the problem), the issue appears:
Exception in thread "RxComputationScheduler-1" java.lang.IllegalStateException: Exception thrown on Scheduler.Worker thread. Add `onError` handling.
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:57)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: rx.exceptions.OnErrorNotImplementedException: Request has already been read
	at rx.internal.util.InternalObservableUtils$ErrorNotImplementedAction.call(InternalObservableUtils.java:386)
	at rx.internal.util.InternalObservableUtils$ErrorNotImplementedAction.call(InternalObservableUtils.java:383)
	at rx.internal.util.ActionSubscriber.onError(ActionSubscriber.java:44)
	at rx.observers.SafeSubscriber._onError(SafeSubscriber.java:152)
	at rx.observers.SafeSubscriber.onError(SafeSubscriber.java:115)
	at rx.exceptions.Exceptions.throwOrReport(Exceptions.java:205)
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:139)
	at rx.internal.operators.OperatorDelay$1$3.call(OperatorDelay.java:87)
	at rx.internal.schedulers.EventLoopsScheduler$EventLoopWorker$2.call(EventLoopsScheduler.java:189)
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)
	... 7 more
Caused by: java.lang.IllegalStateException: Request has already been read
	at io.vertx.core.http.impl.HttpServerRequestImpl.checkEnded(HttpServerRequestImpl.java:426)
	at io.vertx.core.http.impl.HttpServerRequestImpl.handler(HttpServerRequestImpl.java:206)
	at io.vertx.rxjava.core.http.HttpServerRequest.handler(HttpServerRequest.java:74)
	at io.kubeless.server.VertxBug.lambda$start$1(VertxBug.java:41)
	at rx.internal.util.ActionSubscriber.onNext(ActionSubscriber.java:39)
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:134)
	... 10 more

The problem happens on the first GET request. If I send only POST requests, the problem happens on the second request, while the first works.
The offending line seems to be the one marked as "important" (i.e. reading the content of the request and logging it or doing anything else with it).
I think that this should be solved, but I'm looking also for a workaround (eg. is there a way to buffer the request content to be able to read it multiple times without errors?).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1703
Meaningful Error for Http2 in a WorkerVerticle by jo5ef · Pull Request #1703 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Throw a meaningful exception when using HTTP_2 in a WorkerVerticle to properly signal that this is not supported. Currently, a NullPointerException is thrown somewhere in the netty code. Discussed in issue #1699
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1704
Meaningful Error for Http2 in a WorkerVerticle by jo5ef · Pull Request #1704 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jo5ef can you also test the executeBlocking case ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1705
fix SLF4J/Log4j typo by julianladisch · Pull Request #1705 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1706
fix SLF4J/Log4j typo by julianladisch · Pull Request #1706 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Julian Ladisch eclipse.org-rtn@ladisch.de
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1707
Add an .editorconfig file in this repo? · Issue #1707 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See: https://github.com/vert-x3/wiki/wiki/Vert.x-code-style-guidelines

We recommend that all repos should have a .editorconfig in the root folder with at least the following content:


root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
trim_trailing_whitespace = true
end_of_line = lf
insert_final_newline = true


Why not add it in the root of this repo, so forks can follow rules automatically?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1708
Http compression level + editorconfig guidelines codestyle by creativeprogramming · Pull Request #1708 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Alternate for #1701
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1709
Disabled file caching and multi instance deployment leads to FileAccessException or FileSystemException · Issue #1709 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I made a reproducer using IntelliJ:
https://github.com/leolux/vertx3-issue-accessexception
The exception looks like this:
Nov 10, 2016 12:58:28 PM node.StartupInstance
SCHWERWIEGEND: Uuups: io.vertx.core.file.FileSystemException: java.nio.file.FileSystemException: .vertx\file-cache-f9ed8a3e-fd6b-4ff6-905d-b1b48ed2e71c\cert\wild.vertx.io.jks: Der Prozess kann nicht auf die Datei zugreifen, da sie von einem anderen Prozess verwendet wird.

It means that vertx tries to access a cached filed which is currently blocked by some other process wherease file caching is disabled.
The reproducer shows that FileSystemException or FileAccessException occurs when the the WebServer gets deployed twice or more AND when file caching gets disabled AND when the program gets executed by IntelliJ or Eclipse IDE (by running the main() method of StartupInstance). Executing the fat-jar works without issues.
I tried to solve the issue without success. I changed my file permissions Windows 10 for the .vertx folder and I tried several changes in IntelliJ like disabling indexing, disabling auto compiling, disabling framework detection, adding filter paths for the compiler, cleaning the project, running IDEA as administrator, but nothing helped. I also tried to get information about the process blocking the file using the Sysinternals Process Explorer (procexp). But procexp didn't find any handle or dll for this file.
As the issue occurs only within the IDE there needs to be some influcence from the development environment to the .vertx folder. But the strange thing is that the issue disappears when I change the DeploymentOptions from 2 instances to 1 instance. The IDE cannot be the root cause anymore in my eyes.
Does the reproducer show the same issue on your IDE?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1710
generic return type for get json value by akterstack · Pull Request #1710 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1711
JsonObject: add methods for type checking · Issue #1711 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, JsonObject has multiple getXXX methods for the basic data types (Integer, Long, String...).
public Integer getInteger(String key)
// Default returned when no value present for key
public Integer getInteger(String key, Integer def)

There currently isn't a method to check whether a value holds the expected data type. It can be done by using above methods and catching the ClassCastException, but it seems better to provide methods like:
// Unchanged
public Integer getInteger(String key)

public boolean isInteger(String key)
// Default returned when no value present for key OR value is of different type
public Integer getInteger(String key, Integer def)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1712
JsonObject#mergeIn does not merge recursively · Issue #1712 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JsonObject obj = new JsonObject();
obj.put("hello", new JsonObject().put("a", 0));

JsonObject obj2 = new JsonObject();
obj2.put("hello", new JsonObject().put("b", 1));

obj.mergeIn(obj2);

System.out.println(obj.toString());
// Output: {"hello":{"b":1}}
// Expected output : {"hello":{"a":0, "b":1}}

One can argue about how to deal with lists, but I would also merge those.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1713
Add getOrCreateJsonArray and getOrCreateJsonObject. by DieterDePaepe · Pull Request #1713 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Dieter De Paepe dieter.depaepe@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1714
Added more create* methods httpclientbuilder by paulbakker · Pull Request #1714 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
would you mind to redo a clean PR please @paulbakker thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1715
ClassCastException at ReflectionUtils.getComponentType · Issue #1715 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ClassCastException occurs during startup of my app. I'm using Vert.x 3.3.3.
Exception in thread "main" java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
        at io.vertx.core.cli.impl.ReflectionUtils.getComponentType(ReflectionUtils.java:63)
        at io.vertx.core.cli.annotations.CLIConfigurator.createOption(CLIConfigurator.java:116)
        at io.vertx.core.cli.annotations.CLIConfigurator.define(CLIConfigurator.java:78)
        at io.vertx.core.spi.launcher.DefaultCommandFactory.define(DefaultCommandFactory.java:59)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.register(VertxCommandLauncher.java:127)
        at java.util.ArrayList.forEach(Unknown Source)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.load(VertxCommandLauncher.java:122)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.<init>(VertxCommandLauncher.java:112)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.<init>(VertxCommandLauncher.java:101)
        at io.vertx.core.Launcher.<init>(Launcher.java:41)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1716
Added more create* methods httpclientbuilder by paulbakker · Pull Request #1716 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paul Bakker paul.bakker@luminis.eu
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1717
Added more create* methods httpclientbuilder by paulbakker · Pull Request #1717 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paul Bakker paul.bakker@luminis.eu
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1718
Unable to start vert.x with exploded mode · Issue #1718 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When running vert.x from CLI using command like:
java -cp $MY_CP start  -id e8b0342b-7a65-495a-a58f-88071421e07c org.vertx.demo.SimpleVerticle --launcher-class io.vertx.core.Launcher
The application is refusing to start saying no command by name org.vertx.demo.SimpleVerticle.. but when I do start with same set of options via Launcher.main(args)  form a custom main program from an IDE things run well.
Using vert.x v3.3.3
where $MY_CP is custom classpath which has jars/classes directory etc.,
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1719
Request: Make the ending of the response in HttpServerRespone.sendFile() optional · Issue #1719 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Would you see any problems in extending HttpServerResponse.sendFile() with a flag boolean autoEnd or similar that would allow one to do:
response.sendFile("file", false, (t) -> {
    if (t == null) {
        response.end("\r\nThis file was brought to you by vert.x");
    }
});
? One would naturally have to take care of setting the Content-Length header oneself in this case.
Right now, sendFile() automatically ends the response and trying to write anything in the callback (rightfully) throws an exception.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1720
Socket idle-closed in middle of slowly progressing sendFile() response · Issue #1720 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I tried streaming music to a music player from vertx using sendFile(), but the connection is closed after the time given idleTimeout (I have 60 seconds) set in HttpServerOptions has passed after the request started.
I tracked the socket closing down and it seems this triggers the closing:
channelIdle(ctx, event); in io.netty.handler.timeout.IdleStateHandler.AllIdleTimeoutTask. I guess some other piece of code forgets to mark the connection "busy" while sendFile is active..
vert.x 3.3.3, netty 4.1.1.Final
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1721
Incorrect HTTP-Version should be reported to the HttpClientRequest exceptionHandler · Issue #1721 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1722
Honoring Commandline Quotes during redeploy · Issue #1722 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When starting vert.x application using run with redeploy the arguments with quotes for the option values are treated literally without ignoring the quotes that are passed by the shell.
e.g. when you run a command like io.vertx.core.Launcher run org.vertx.demo.SimpleVerticle --redeploy="target/classes/**/*" --launcher-class="io.vertx.core.Launcher"
the redeploy patterns target/classes/**/* is parsed as literal string with " and application is not able to do the redeploy as needed.
The same command when run without quotes for --redeploy works as expected.
This could be a potential issue when passing paths with spaces or may be in some other scenarios.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1723
Stack overflow when undeploying · Issue #1723 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Happens sometimes

build	23-Nov-2016 10:05:48	    java.lang.StackOverflowError
build	23-Nov-2016 10:05:48	    	at java.util.HashSet.(HashSet.java:118)
build	23-Nov-2016 10:05:48	    	at io.vertx.core.impl.DeploymentManager$DeploymentImpl.doUndeploy(DeploymentManager.java:504)
build	23-Nov-2016 10:05:48	    	at io.vertx.core.impl.DeploymentManager$DeploymentImpl.doUndeploy(DeploymentManager.java:518)
build	23-Nov-2016 10:05:48	    	at io.vertx.core.impl.DeploymentManager$DeploymentImpl.doUndeploy(DeploymentManager.java:518)
build	23-Nov-2016 10:05:48	    	at io.vertx.core.impl.DeploymentManager$DeploymentImpl.doUndeploy(DeploymentManager.java:518)

public synchronized void doUndeploy(ContextImpl undeployingContext, Handler<AsyncResult<Void>> completionHandler) {
  if (undeployed) {
    reportFailure(new IllegalStateException("Already undeployed"), undeployingContext, completionHandler);
    return;
  }
  if (!children.isEmpty()) {                 <------ a concurrent HashMap does not guarantee consistency
    final int size = children.size();
    AtomicInteger childCount = new AtomicInteger();
    boolean undeployedSome = false;
    for (Deployment childDeployment: new HashSet<>(children)) {   
      undeployedSome = true;               <------- never reached because isEmpty said false although it is actually empty
      childDeployment.doUndeploy(undeployingContext, ar -> {
        children.remove(childDeployment);
        if (ar.failed()) {
          reportFailure(ar.cause(), undeployingContext, completionHandler);
        } else if (childCount.incrementAndGet() == size) {
          // All children undeployed
          doUndeploy(undeployingContext, completionHandler);
        }
      });
    }
    if (!undeployedSome) {
      // It's possible that children became empty before iterating
      doUndeploy(undeployingContext, completionHandler);  <------------------- infinite recursion here
    }
  } 

Some excerpt from the ConcurrentHashMap documentation:


Bear in mind that the results of aggregate status methods including
{@code size}, {@code isEmpty}, and {@code containsValue} are typically
useful only when a map is not undergoing concurrent updates in other threads.
Otherwise the results of these methods reflect transient states
that may be adequate for monitoring or estimation purposes, but not
for program control.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1724
Allow to configure maxInitialLineLength and maxHeaderSize in the HttpClient · Issue #1724 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
like we do have on HttpServer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1725
HttpConnection: expose remoteAddress() and localAddress()… by xkr47 · Pull Request #1725 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I added @CacheReturn since I thought it would make sense (they were annotated so also in the NetSocket interface).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1726
Too long initial line results in empty reply instead of 414 response · Issue #1726 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

vert.x core: 3.3.3

Context
If a request is made where the initial line is longer than the max initial line length, an empty reply is returned instead of a 414 response code.  Haven't even been able to find any particular way to implement this myself; best I've been able to do is register an exception handler on the HttpConnection to log it.
Do you have a reproducer?

https://gist.github.com/robkid/65db0cc92c68d7c45d7c751c76a1ce87

Steps to reproduce

Run the main class in the gist
Use curl (or equivalent) to issue a get request to the server that is longer than 4096 bytes (e.g. curl "http://localhost:8080/foo?a=<string of 4096+ characters>").
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1727
Too long max headers results in empty reply instead of 400 response · Issue #1727 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1728
Default http server host and port configurable using system properties · Issue #1728 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1729
Add new CLI arg to support external JSON VertxOptions · Issue #1729 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When starting Vert.x applications with the CLI, you can't point to a JSON file for VertxOptions. This would be useful for users who need to set nested options (e.g, setting custom HTTP headers in Hawkular metrics options).
The launchers classes support a few nested objects, but not deeply nested ones.
As a workaround, Java/Groovy developers packaging apps in fat jars may extend the Launcher class and implement io.vertx.core.impl.launcher.VertxLifecycleHooks#beforeStartingVertx.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1730
ClusteredEventBus should provide Connection Exceptions back to the event bus sender · Issue #1730 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Network errors inevitably occur and it would be really helpful to see connection exceptions returned in the AsyncResult result cause. That way a retry could be attempted by the application writer (which if multiple nodes are available the round robin from subs.choose() will attempt a different node) or alerts could be elevated as appropriate. Currently the ConnectionHolder while calling connect() only calls close() on connection exceptions which doesn't provide any indication that there was a problem except the eventual ReplyException timeout, which really prevents a second attempt since the only indication a problem occurred is after the default 30 second timeout. Could the ConnectionHolder.connect method be modified to provide a way for the caller to reply to the Message if an exception occurred?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1731
Consult vert.x a multithreade problem · Issue #1731 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The program starts with 3 threads, the thread pool is set to 2, but the result is only two threads.
Program code is as follows：
package org.snowball;
import io.vertx.core.DeploymentOptions;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
public class App {
public static void main(String[] args) {
int MAX_WORKER_COUNT = 2;
System.out.println("Hello World!");
VertxOptions vopt = new VertxOptions();
vopt.setWorkerPoolSize(MAX_WORKER_COUNT);
//vopt.setMaxWorkerExecuteTime(10000 * 500);
DeploymentOptions dopt = new DeploymentOptions().setWorker(true);
Vertx vx = Vertx.vertx(vopt);
for (int index = 0; index < 3; index++) {
vx.deployVerticle(new Test(), dopt);
}
try {
Thread.sleep(1000 * 20);
} catch (InterruptedException e) {
e.printStackTrace();
}
vx.close(); // release all workers
}
}


 Test.java



package org.snowball;
import io.vertx.core.AbstractVerticle;
import io.vertx.core.eventbus.EventBus;
import io.vertx.core.eventbus.MessageConsumer;
import java.util.Random;
public class Test extends AbstractVerticle {
public String domain = new Random().nextInt(152) + "";
public int size = 0;

@Override
public void start() throws Exception {
    super.start();
    // sub inner msg
    EventBus eb = getVertx().eventBus();
    MessageConsumer<String> mc = eb.consumer(domain);
    String messageStr = "start job,id:" + domain;
    mc.handler(message -> {
        if (message.body() == messageStr) {
            System.out.println(messageStr);
            try {
                jobDo();
            } catch (Exception e) {
                e.printStackTrace();
            }
            eb.send(domain, messageStr);
        }
    });
    eb.send(domain, messageStr);
}

@Override
public void stop() throws Exception {
    System.out.println("stop callback");
    EventBus eb = getVertx().eventBus();
    MessageConsumer<String> mc = eb.consumer(domain);
    mc.unregister(res -> {
        if (res.succeeded()) {
            System.out.println("The handler un-registration has reached all nodes");
        } else {
            System.out.println("Un-registration failed!");
        }
    });
    super.stop();
}

public void jobDo() throws Exception {
    Thread.sleep(1000);
}

}
connsole prints information:
Hello World!
start job,id:135
start job,id:104
start job,id:104
start job,id:135
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:104
start job,id:135
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:135
start job,id:104
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:135
start job,id:104
start job,id:135
start job,id:104
start job,id:135
start job,id:104
stop callback
stop callback
The handler un-registration has reached all nodes
The handler un-registration has reached all nodes
十二月 05, 2016 9:13:52 上午 io.vertx.core.impl.ContextImpl
严重: Unhandled exception
java.lang.IllegalStateException: Result is already complete: succeeded
at io.vertx.core.impl.FutureImpl.checkComplete(FutureImpl.java:164)
at io.vertx.core.impl.FutureImpl.complete(FutureImpl.java:108)
at io.vertx.core.impl.FutureImpl.handle(FutureImpl.java:135)
at io.vertx.core.impl.FutureImpl.handle(FutureImpl.java:23)
at io.vertx.core.eventbus.impl.EventBusImpl.lambda$callCompletionHandlerAsync$2(EventBusImpl.java:340)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
at io.vertx.core.impl.OrderedExecutorFactory$OrderedExecutor.lambda$new$0(OrderedExecutorFactory.java:94)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
十二月 05, 2016 9:13:52 上午 io.vertx.core.impl.ContextImpl
严重: Unhandled exception
java.lang.IllegalStateException: Result is already complete: succeeded
at io.vertx.core.impl.FutureImpl.checkComplete(FutureImpl.java:164)
at io.vertx.core.impl.FutureImpl.complete(FutureImpl.java:108)
at io.vertx.core.impl.FutureImpl.handle(FutureImpl.java:135)
at io.vertx.core.impl.FutureImpl.handle(FutureImpl.java:23)
at io.vertx.core.eventbus.impl.EventBusImpl.lambda$callCompletionHandlerAsync$2(EventBusImpl.java:340)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
at io.vertx.core.impl.OrderedExecutorFactory$OrderedExecutor.lambda$new$0(OrderedExecutorFactory.java:94)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
Process finished with exit code 0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1732
Test locking on same Vert.x instance by tsegismont · Pull Request #1732 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you have a look please? Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1733
Fix #1718 by cescoffier · Pull Request #1733 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using the start command without an explicit command, use the run command.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1734
Upgrade to Netty 4.1.8.Final · Issue #1734 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1735
Changes the subs map handling for better consistency by rikardscm · Pull Request #1735 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this claims to solve a problem but does not have any tests
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1736
Update boring SSL dependency to 1.1.33.Fork24 · Issue #1736 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1737
Vert.x Cluster Corrupt When 2 or More Members are Shutdown Ungracefully · Issue #1737 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x Version: 3.3.3
Host: OSX
As the title suggests, it looks as though when 2 or more Vert.x instances are killed in an ungraceful manner (ie. SIGKILL instead of SIGINT/TERM), the list of active handlers becomes incorrect and the cluster is corrupt in such a way that is unrecoverable.  I'll start by providing a way to demonstrate the problem.
The way I have been reproducing this is by using the pointtopoint example provided in the Vert.x example (https://github.com/vert-x3/vertx-examples/tree/master/core-examples/src/main/java/io/vertx/example/core/eventbus/pointtopoint)
I edited the receiver slight to provide more information in the failure case.  It looks like this:
import io.vertx.core.AbstractVerticle;
import io.vertx.core.eventbus.EventBus;
import io.vertx.core.json.JsonObject;

public class Receiver extends AbstractVerticle {
  @Override
  public void start() throws Exception {
    EventBus eb = vertx.eventBus();

    eb.consumer("ping-address", message -> {
      System.out.println("Received message: " + message.body());

      // Now send back reply
      JsonObject foo = new JsonObject();
      foo.put("foo","bar");
      message.reply(foo);
    });

    System.out.println("Receiver ready!");
  }
}
Similarly, I changed the Sender slightly:
import io.vertx.core.AbstractVerticle;
import io.vertx.core.eventbus.EventBus;

public class Sender extends AbstractVerticle {
  @Override
  public void start() throws Exception {
    EventBus eb = vertx.eventBus();
    vertx.setPeriodic(1000, v -> {
      eb.send("ping-address", "ping!", reply -> {
        if (reply.succeeded()) {
          System.out.println("Received reply " + reply.result().body());
        } else {
          System.out.println("No reply: " + reply.cause());
        }
      });
    });
  }
}
In all the following experiments, I am running 4 Receivers:
vertx run Receiver.java -cluster
And a single Sender:
vertx run Sender.java -cluster
###Experiments
Gracefully stop 1 Receiver
In this case, I CTRL+C (or send a SIGINT) to a single Receiver.  In this case, the Sender continues to function normally and all is well
Gracefully stop 2+ Receivers
Using kill <PID> <PID> <PID> to kill multiple receivers gracefully at the same time.  In this case, all is well and the Sender continues to behave as expected.  You can see that the each Receiver is not stopped at the same time, but that upon receipt of the signal stops handling messages.  At no point does the Sender ever fail to have a message handled.
Ungracefully stop 1 Receiver
Using kill -9 <PID>, I kill one single Receiver.  Here you will notice that the Sender will receiver some timeouts in it's calls.  This presumably can be attributed to there being messages sent to the downed handler prior to the cluster recognizing that it is gone.  IMO, some failed calls in this case are probably expected as the cluster does recover once things have settled.
Ungracefully stop 2+ Receivers
Here is where the proverbial 💩 hits the fan.  In this case, I kill -9 <PID> <PID> <PID>.  At this point, it appears as though, undeterministically, what the remaining, clustered vertx process think remain versus what it is in the Hazelcast map is sometimes incorrect.  On occasion they are different and sometimes they are the same, but neither are ever correct.  You'll notice that the Sender begins to kill several calls.  This is because it still thinks that handlers that were just killed are still available.  Where it gets more interesting is that if I then check the contents of the Hazelcast map, it sometimes contains the now deleted handle endpoints, but on occasion will be entirely empty.  This means that without completely destroying and remaking the cluster, one cannot recover.  In a system that has many different services, this makes for some massive downtime.
It's worth noting that I do appreciate that kill -9 is a less than desirable thing to occur but the reality is that things do crash and that being able to recover from these crashes is crucial.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1738
Add Official Support For Kotlin · Issue #1738 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x supports some of the JVM languages. Support is missing for Kotlin, which is odd considering that Ceylon is already supported. Would be wise to provide support for Kotlin if Vert.x is going to target Android since Kotlin has a significant presence in Android development.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1739
Vertx Deadlock:  ServerConnection.handleClosed() v. SockJSSession.write() · Issue #1739 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This deadlock is happening on v3.2.1, however it appears that the same lock inversion problem exists on the current v3.3.3.   I will be trying to created a tiny, canned example to repro this soon, but because it involves a 'channel inactive' call I'm thinking this is far more of a timing issue instead of a connection/load issue.
Also, all locking here is OUTSIDE of our 'acme' code, and inside the vertx codebase.  From my understanding of these stack traces and the threading model, this essentially means that any SockJSSession.write() call (regardless of the thread it is called from) can deadlock with a 'ServerConnection.handleClose()' call.
some package names have been changed to 'acme' to protect the innocent:
`
2016-12-09 18:45:36
Full thread dump OpenJDK 64-Bit Server VM (25.111-b15 mixed mode):
....
Found one Java-level deadlock:
"vert.x-eventloop-thread-6":
waiting to lock monitor 0x00007fe2566ab5d8 (object 0x0000000793370080, a io.vertx.ext.web.handler.sockjs.impl.SockJSSession),
which is held by "vert.x-eventloop-thread-4"
"vert.x-eventloop-thread-4":
waiting to lock monitor 0x00007fe20dc395f8 (object 0x000000076fa3d330, a io.vertx.core.http.impl.ServerConnection),
which is held by "vert.x-eventloop-thread-6"
Java stack information for the threads listed above:
"vert.x-eventloop-thread-6":
at io.vertx.ext.web.handler.sockjs.impl.SockJSSession.shutdown(SockJSSession.java:179)
- waiting to lock <0x0000000793370080> (a io.vertx.ext.web.handler.sockjs.impl.SockJSSession)
at io.vertx.ext.web.handler.sockjs.impl.BaseTransport$BaseListener$1.handle(BaseTransport.java:124)
at io.vertx.core.VoidHandler.handle(VoidHandler.java:27)
at io.vertx.core.VoidHandler.handle(VoidHandler.java:24)
at io.vertx.core.http.impl.HttpServerResponseImpl.handleClosed(HttpServerResponseImpl.java:554)
- locked <0x000000076fa3d330> (a io.vertx.core.http.impl.ServerConnection)
at io.vertx.core.http.impl.ServerConnection.handleClosed(ServerConnection.java:341)
- locked <0x000000076fa3d330> (a io.vertx.core.http.impl.ServerConnection)
at io.vertx.core.net.impl.VertxHandler$$Lambda$72/866006627.run(Unknown Source)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:333)
at io.vertx.core.impl.ContextImpl$$Lambda$14/2028784198.run(Unknown Source)
at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:225)
at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:99)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:218)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:204)
at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:332)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:218)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:204)
at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:828)
at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:625)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:358)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357)
at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
at java.lang.Thread.run(Thread.java:745)
"vert.x-eventloop-thread-4":
at io.vertx.core.http.impl.HttpServerResponseImpl.putHeader(HttpServerResponseImpl.java:153)
- waiting to lock <0x000000076fa3d330> (a io.vertx.core.http.impl.ServerConnection)
at io.vertx.core.http.impl.HttpServerResponseImpl.putHeader(HttpServerResponseImpl.java:52)
at io.vertx.ext.web.handler.sockjs.impl.BaseTransport.setJSESSIONID(BaseTransport.java:158)
at io.vertx.ext.web.handler.sockjs.impl.XhrTransport$BaseXhrListener.sendFrame(XhrTransport.java:149)
at io.vertx.ext.web.handler.sockjs.impl.XhrTransport$XhrPollingListener.sendFrame(XhrTransport.java:168)
at io.vertx.ext.web.handler.sockjs.impl.SockJSSession.writePendingMessages(SockJSSession.java:249)
- eliminated <0x0000000793370080> (a io.vertx.ext.web.handler.sockjs.impl.SockJSSession)
at io.vertx.ext.web.handler.sockjs.impl.SockJSSession.write(SockJSSession.java:117)
- locked <0x0000000793370080> (a io.vertx.ext.web.handler.sockjs.impl.SockJSSession)
at acme.collab.FooEventBusBridgeImpl.deliverMessage(FooEventBusBridgeImpl.java:323)
at acme.collab.FooEventBusBridgeImpl.lambda$null$9(FooEventBusBridgeImpl.java:212)
at acme.collab.FooEventBusBridgeImpl$$Lambda$107/1190021858.handle(Unknown Source)
at io.vertx.core.eventbus.impl.HandlerRegistration.handleMessage(HandlerRegistration.java:207)
at io.vertx.core.eventbus.impl.HandlerRegistration.handle(HandlerRegistration.java:201)
at io.vertx.core.eventbus.impl.EventBusImpl.lambda$deliverToHandler$127(EventBusImpl.java:498)
at io.vertx.core.eventbus.impl.EventBusImpl$$Lambda$117/2085642535.handle(Unknown Source)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$18(ContextImpl.java:335)
at io.vertx.core.impl.ContextImpl$$Lambda$14/2028784198.run(Unknown Source)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:358)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:357)
at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:112)
at java.lang.Thread.run(Thread.java:745)
Found 1 deadlock.
Heap
PSYoungGen      total 2024960K, used 1730703K [0x0000000717580000, 0x0000000799900000, 0x00000007c0000000)
eden space 1916416K, 86% used [0x0000000717580000,0x000000077ce193e8,0x000000078c500000)
from space 108544K, 61% used [0x0000000792f00000,0x000000079708aad8,0x0000000799900000)
to   space 108544K, 0% used [0x000000078c500000,0x000000078c500000,0x0000000792f00000)
ParOldGen       total 5527040K, used 188936K [0x00000005c6000000, 0x0000000717580000, 0x0000000717580000)
object space 5527040K, 3% used [0x00000005c6000000,0x00000005d1882148,0x0000000717580000)
Metaspace       used 57781K, capacity 58830K, committed 59284K, reserved 1101824K
class space    used 6771K, capacity 6989K, committed 7060K, reserved 1048576K
`
The only options we see right now to work around this are either (A) reducing the eventloop threadpool size to one, or (B) somehow acquiring and synchronizing on the appropriate ServerConnection instance BEFORE we make a SockJSSession.write() call.  This option (B) must be done before all calls to 'synchronized' SockJSSession methods, not just .write().
The  'bus bridge impl' that we are using is based on the impl at:
https://github.com/vert-x3/vertx-web/blob/master/vertx-web/src/main/java/io/vertx/ext/web/handler/sockjs/impl/EventBusBridgeImpl.java
with minor modifications to support a 'PING' socket data message type.  The ping support just pokes some bean internal state, doesn't do any other socket read/write calls, and it independent of the above stack trace.
rfc.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1740
Provide an insensitive case multimap implementation · Issue #1740 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1741
RecordParser implement ReadStream<Buffer> · Issue #1741 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
That way we can trivially pump files or other ReadStream sources through it.
pump(asyncFile, recordParser)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1742
File caching implementation not thread safe · Issue #1742 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The FileResolver implementation of caching is not thread safe. The problem occurs when the same file (that is about to be cached) is concurrently being read from multiple verticles. This issue can be reproduced with FileSystem#readFileBlocking, however, I believe that async implementation will yield similar results.
The problem here is the following. Consider a use case, when a file is read in multiple verticles in parallel. This file does not reside in a local filesystem, and as such Vert.x will try to cache the file by moving it to the .vertx directory.

First verticle that hits FileResolver#resolveFile will trigger the copying action of the resource to the designated .vertx cache directory. Only after this copy action is finished, the file will be read - thus this verticle will read complete data.
Every other instance that hits FileResolver#resolveFile will find the cached file during resolution - as the file is currently being copied over there - however, it might happen that it will read the cached file before it is copied completely - thus this verticle will read only partial data.

The problem can be reproduced by running supplied verticle in multiple instances. The verticle only reads 10 files from attached jar (all are 1MB in size) and outputs the size of read payload.
vertx-fileread-bug.zip
vertx run -cp data.jar --instances 3 FileLengthVerticle.java
Sample output:
...
file data5: 1024000bytes
file data5: 1024000bytes
file data6: 1024000bytes
file data6: 1024000bytes
file data6: 1024000bytes
file data7: 1024000bytes
file data7: 1024000bytes
file data7: 1024000bytes
file data8: 65516bytes
file data8: 73703bytes
file data8: 1024000bytes
file data9: 646968bytes
file data9: 1024000bytes
file data9: 1024000bytes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1743
Extract a WorkerExecutorInternal interface by tsegismont · Pull Request #1743 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Needed for vert-x3/vertx-rx#46
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1744
Expose send() as part of the Message interface by tobias · Pull Request #1744 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks like my Eclipse CA had expired. I just re-signed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1745
Blocking code is executed in the one thread · Issue #1745 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
My code:
public class BVerticle extends AbstractVerticle {
    @Override
    public void start() throws Exception {
        WorkerExecutor executor = vertx.createSharedWorkerExecutor("worker", 10, 10000);
        executor.executeBlocking(future -> {
            out.printf("start 1, %s \n", Thread.currentThread().getName());
            try {
                Thread.sleep(5_000L);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            future.complete();
        }, result -> {
            out.printf("finish 2, %s \n", Thread.currentThread().getName());
        });
        executor.executeBlocking(future -> {
            out.printf("start 2, %s \n", Thread.currentThread().getName());
            try {
                Thread.sleep(5_000L);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            future.complete();
        }, result -> {
            out.printf("finish 2, %s \n", Thread.currentThread().getName());
        });
    }
}
I got output:

start 1, worker-0
start 2, worker-0
finish 2, vert.x-eventloop-thread-1
finish 2, vert.x-eventloop-thread-1

Why blocking code is executed only in the one thread consequently?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1746
add static method for chain possibility by mystdeim · Pull Request #1746 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what does it buy over new JsonObject().put("foo", "bar") ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1747
Message should have an acknowledge method · Issue #1747 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Message class has a fail method for signalling failure but there is no corresponding method to signal that processing suceeded.
When implementing a MessageConsumer for a Message Broker this is problematic as messages need to be individually acknowledged by the client code in order to implement transactional behaviour.
My current work-around is for handlers to cast the message to an implementation specific message:
ArtemisBridge.create()
        .createConsumer("INBOUND")
        .handler(message -> {
            try {
                // do something useful before acknowledging the message
                ...
                // acknowledge message
                ArtemisMessage artemisMessage = (ArtemisMessage) message;
                artemisMessage.acknowledge();
            } catch (TimeoutException e) {
                // rollback and try again later
                message.fail(ArtemisBridge.TEMPORARY_FAILURE, e.getMessage());
            } catch (Exception e) {
                // send message to DLQ
                message.fail(ArtemisBridge.PERMANENT_FAILURE, e.getMessage());
            }

        });
Introducing an acknowledge() method on the Message interface would avoid the ugly typecast and to me it seems this should be of general interest for all message handling.
Other names are of course possible, e.g. succeed which would match fail or perhaps handled to indicate that the Handler handled the message.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1748
merge new version by zmyer · Pull Request #1748 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what's the point of this PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1749
Traffic shaping support · Issue #1749 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Is there any support for traffic shaping (global or per urls)? For my needs would be enough to some how set netty GlobalTrafficShapingHandler, but I'm not able to find any way how to do it.
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1750
Customization of Netty "initialBufferSize" · Issue #1750 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Would it be possible to add a new configuration options in both HttpClient and HttpServer to allow to customize the initial size (128b default) of the parsing buffer of Netty HttpObjectDecoder.
I see that when handling an high load on my application with requests or responses with multiple headers, the CPU is mostly consumed by netty "AppendableCharSequence.append", which has to always grow and so has to copy char arrays.
Stack Trace	Sample Count	Percentage(%)
io.netty.util.internal.AppendableCharSequence.append(char)	2 160	6,472
   io.netty.handler.codec.http.HttpObjectDecoder$HeaderParser.process(byte)	2 160	6,472
      io.netty.buffer.AbstractByteBuf.forEachByteAsc0(int, int, ByteBufProcessor)	2 160	6,472
         io.netty.buffer.AbstractByteBuf.forEachByte(ByteBufProcessor)	2 160	6,472
            io.netty.handler.codec.http.HttpObjectDecoder$HeaderParser.parse(ByteBuf)	2 160	6,472
               io.netty.handler.codec.http.HttpObjectDecoder.readHeaders(ByteBuf)	2 141	6,415
                  io.netty.handler.codec.http.HttpObjectDecoder.decode(ChannelHandlerContext, ByteBuf, List)	2 141	6,415

Methods involved in vertx:
HttpServerImpl.configureHttp1 -> HttpRequestDecoder
ConnectionManager$ChannelConnector.applyHttp1xConnectionOptions -> HttpClientCodec
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1751
Fragmented websocket frames sent to the SockJS bridge silently close the websocket connection · Issue #1751 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When SockJS messages are sent as fragmented websocket frames, the websocket connection is silently closed.
I post the issue here, because all data handlers of the ServerWebSocket are affected.
For the concrete problem see line 107 in the WebSocketTransport.java:
https://github.com/vert-x3/vertx-web/blob/09a2463262b46b1826c088624f549b3cbb6f4f01/vertx-web/src/main/java/io/vertx/ext/web/handler/sockjs/impl/WebSocketTransport.java#L107
The listener (data handler) does not handle partial JSON messages and rejects them by closing the connection.
Further, the heuristic to detect a valid message might accept a partial message by chance.
Chrome already fragments messages < 3KB, making the bridge unreliable for our use-cases.
The pull request #964 offered a solution for this issue, but was declined because "... dataHandler should only be used for writing/receiving websocketframes if you know they're final binary frames".
This is not the case for the WebSocketTransport.WebSocketListener in vertx-web.
In general, data handlers do not have access to the underlying frames, they can only guess if the frame is a final or a continuation frame.
Could you please reconsider the mentioned pull request?
If it breaks existing code, I could rewrite the pull request to make the frame concatenation optional, e.g. by a configuration parameter.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1752
DNSclient.lookup4 does not return the ip address when a CNAME is used · Issue #1752 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When resolving for example www.yahoo.com or www.msn.de, the result of DNSClient is a CNAME and not the final ip address. This is either caused by the number of consecutive dns operations are used up or only the first address is resolved in general.
import org.junit.Test;
import org.junit.runner.RunWith;

import io.vertx.core.Vertx;
import io.vertx.core.dns.DnsClient;
import io.vertx.core.logging.Logger;
import io.vertx.core.logging.LoggerFactory;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;

@RunWith(VertxUnitRunner.class)
public class DnsClientTest {

  private final static Logger log = LoggerFactory.getLogger(DnsClientTest.class);

  @Test
  public void testDnsClient(TestContext context) {
    Async async=context.async();
    Vertx vertx = Vertx.vertx();
    DnsClient client = vertx.createDnsClient(53, "192.168.178.1"); 

    client.lookup4("www.yahoo.com", res -> {
      if (res.succeeded()) {
        log.info("result "+res.result());
        async.complete();
      } else {
        context.fail(res.cause());
      }
    });
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1753
DNS issue when requesting `moose.rmq.cloudamqp.com` · Issue #1753 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current DNS resolver is unable to resolve: https://moose.rmq.cloudamqp.com. It might be related to #1752.
Here is a test case:
@RunWith(VertxUnitRunner.class)
public class MooseTest {

  @Test
  public void testWithDNS(TestContext tc) {
    Async async = tc.async();
    Vertx vertx = Vertx.vertx();
    vertx.createHttpClient().get(443, "moose.rmq.cloudamqp.com", "/", httpClientResponse -> {
      httpClientResponse.exceptionHandler(tc::fail)
        .bodyHandler(buffer -> {
          tc.assertEquals(httpClientResponse.statusCode(), 400);
          async.complete();
        });
    })
      .exceptionHandler(tc::fail)
      .setTimeout(3000)
      .end();
  }

  @Test
  public void testWithIP(TestContext tc) {
    Async async = tc.async();
    Vertx vertx = Vertx.vertx();

    vertx.createHttpClient()
      .get(443, "54.152.221.139", "/", httpClientResponse -> {
        httpClientResponse.exceptionHandler(tc::fail)
          .bodyHandler(buffer -> {
            // Bad request expected because it's not using SSL, but it's not the goal here.
            tc.assertEquals(httpClientResponse.statusCode(), 400);
            async.complete();
          });
      })
      .exceptionHandler(tc::fail)
      .setTimeout(3000)
      .end();
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1754
Fix race condition in the FileResolver by cescoffier · Pull Request #1754 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix #1472.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1755
DNS client making request to non-existent DNS port returns java.net.PortUnreachableException which has no detail message · Issue #1755 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Example:
vertx.createDnsClient(8053, '127.0.0.1').lookup('www.google.com', { res ->
    if (res.succeeded()) {
        LOG.info('SUCCESS')
    } else {
        LOG.error('FAILURE')
        LOG.error(res.cause().getLocalizedMessage()) // Returns NULL
    }
})
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1756
Support map entry adder in data object converters - fixes #1462 by vietj · Pull Request #1756 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1757
HttpClient leaves connection open on websocket request failure (resource leak) · Issue #1757 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When running this code:
        Vertx vertx = Vertx.vertx();
        vertx.createHttpServer().requestHandler(req -> {
            req.response().setStatusCode(200);
            req.response().headers().set("Connection", "close");
            req.response().end();
        }).listen(44444);
        vertx.createHttpClient().websocket(44444, "localhost", "/", ws -> {
            System.out.println("WS Unexpectedly connected");
        }, t -> {
            System.err.println("WS Connection failed");
            t.printStackTrace();
        });
Then end result is WS Connection failed (as expected) but netstat -natp|grep :44444 (in Linux) shows the connection is still ESTABLISHED. Only closing the java process (naturally) gets rid of the connection.
For a regular GET request:
        Vertx vertx = Vertx.vertx();
        vertx.createHttpServer().requestHandler(req -> {
            req.response().setStatusCode(200);
            req.response().headers().set("Connection", "close");
            req.response().end();
        }).listen(44444);
        vertx.createHttpClient().get(44444, "localhost", "/", c -> {
            System.out.println("GET connected");
        }).end();
then netstat -natp|grep :44444 shows no ESTABLISHED connections, as expected.
I added the Connection: close header so that HttpClient wouldn't pool the connection and leave it open because of that.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1758
IllegalStateException handling multi-part form files · Issue #1758 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@woollybah commented on Tue Oct 18 2016
We have a client that posts a multi-part form containing 3 file attachments to our Linux vert.x 3.3.3 HTTPServer.
The client uses keep-alive to perform a sequence of uploads over a single connection.
In the vast majority of uploads, everything performs as expected.
However, occasionally we get an IllegalStateException within the internal code that handles the form file attachments :
Oct 17, 2016 1:39:32 PM io.vertx.core.impl.ContextImpl
SEVERE: Unhandled exception
java.lang.IllegalStateException: File handle is closed
        at io.vertx.core.file.impl.AsyncFileImpl.checkClosed(AsyncFileImpl.java:450)
        at io.vertx.core.file.impl.AsyncFileImpl.check(AsyncFileImpl.java:445)
        at io.vertx.core.file.impl.AsyncFileImpl.closeInternal(AsyncFileImpl.java:474)
        at io.vertx.core.file.impl.AsyncFileImpl.close(AsyncFileImpl.java:117)
        at io.vertx.core.http.impl.HttpServerFileUploadImpl.handleComplete(HttpServerFileUploadImpl.java
        at io.vertx.core.http.impl.HttpServerFileUploadImpl.resume(HttpServerFileUploadImpl.java:128)
        at io.vertx.core.http.impl.HttpServerFileUploadImpl.resume(HttpServerFileUploadImpl.java:38)
        at io.vertx.core.streams.impl.PumpImpl.lambda$new$0(PumpImpl.java:62)
        at io.vertx.core.file.impl.AsyncFileImpl.checkDrained(AsyncFileImpl.java:285)
        at io.vertx.core.file.impl.AsyncFileImpl.lambda$doWrite$0(AsyncFileImpl.java:151)
        at io.vertx.core.file.impl.AsyncFileImpl$1.lambda$completed$0(AsyncFileImpl.java:394)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:440)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
        at java.lang.Thread.run(Thread.java:745)

This failure occurs before our routing context handler is called, and therefore we appear unable to catch the exception and handle it better (like failing the context, for instance). Instead, the request hangs until the idleTimeout kicks in, and the request fails.
Looking in the "file-uploads" folder, the three files are present, and appear to be complete. And obviously, the files remain there (i.e. not cleaned up) as the process managing them has failed.
The error itself implies that an AsyncFile is being closed twice!
The issue only appears with one particular client of ours. All our other clients have not exhibited this behaviour.
Is there any way for us to catch and handle exceptions from there?
@woollybah commented on Thu Oct 20 2016
Here's a reproducer : https://github.com/woollybah/multipart-upload-reproducer
Running the test generates the exception consistently here. Out in the wilderness, the exception occurs fairly frequently (several times a day), which is somewhat of an issue for us.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1759
Future recovering methods by ruslansennov · Pull Request #1759 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
that seems related a bit to circuit breaker
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1760
The Source with Vert.x binary releases are missing in 3.3.3 · Issue #1760 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
3.3.1 has Sources attached
3.3.3 hasn't
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1761
HttpClient leaves connection open on websocket request failure (resource leak) - fixes #1757 by xkr47 · Pull Request #1761 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you provide the corresponding tests ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1762
Expose the HttpClientRequest in HttpClientResponse by jo5ef · Pull Request #1762 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
+1, this does not harm
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1763
Fixes vert-x3/issues#75 Send messages instantly by tsegismont · Pull Request #1763 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Other PRs in cluster managers coming
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1764
Performance penalty of localConsumer() when in -cluster mode · Issue #1764 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Using vertx 3.3.3
There seems to be a performance penalty when using localConsumer() in clustered mode.
There is cases where you want to mix and match how various verticles are consumed. Some you may only want them as local and others clustered. So a localConsumer() should not incur any performance loss.
See conversation with Julien and Thomas here: https://groups.google.com/forum/#!topic/vertx/HlWmc4ZuLtA
The reproducer code...
http server: http://pastebin.com/hA4T8Nyy
verticle: http://pastebin.com/wwzRiAut
Basically either run the code as:
1- Non clustered: java -jar ....
2- Clsutered: java  -Dvertx.hazelcast.config=cluster.xml -jar ... -cluster -cluster-host xxx.xxx.xxx
Check the performance between the two commands.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1765
NullPointer in sendToSubs · Issue #1765 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Cloned from vert-x3/vertx-hazelcast#52
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1766
Fixes #1765 NullPointer in sendToSubs by tsegismont · Pull Request #1766 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1767
Recursive mergeIn for JsonObject by jo5ef · Pull Request #1767 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good, can you add spaces between keywords like if/for and the following parenthesis ?
for instance: if(depth < 1)  -> if (depth < 1)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1768
When will Vertx add support for BKS keystore/truststore type ? · Issue #1768 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We are using Vertx in our project, I noticed it only supports JKS/PKCS12 format for TLS mode. We are using Bouncy Castle  keystore/truststore, can Vertx add support for BKS format?  If so,  how soon will it take to get in? Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1769
AsyncFile drain handler should not be called after the file is closed · Issue #1769 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1770
AsyncFile drain handler should not be called after the file is closed… by vietj · Pull Request #1770 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont is the up a valid review :-) ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1771
NetServer rework by vietj · Pull Request #1771 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1772
NullPointerException using ClusterManager with Vertx Groovy · Issue #1772 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was making some tests with Vertx, Groovy and Zookeeper, then I got a NullPointerException.
After check it out I realized where is the problem:
VertxOptionsConverter.fromJson

This method is used from groovy to parse the Map -> JsonObject -> VertxOptions, but it does not look for a clusterManager, so it is always null
But my question is: should it be really fixed inside VertxOptionsConverter? Since a JsonObject should be exactly how it sounds and does not contain any complex type?
[]'s
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1773
Need JsonObject(Object) constructor that builds a map from POJO fields · Issue #1773 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The standard way to serialize POJOs into a JsonObject seems to be
JsonObject document = new JsonObject(Json.encode(myPojo));
However, this is inefficient: it serializes the POJO to JSON, then deserializes it again when the JsonObject constructor is called, then re-serializes it once the JsonObject is sent over the wire (or sent to Mongodb).
It would be great to have a constructor
new JsonObject(Object pojo)
which reads the public fields of pojo (and the fields with getters), and builds a Map<String, Object> from these fields, then initializes the JsonObject#map field directly using this map, avoiding the extra serialization and deserialization.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1774
JsonObject POJO mapping by lukehutch · Pull Request #1774 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Will sign the Eclipse CLA if needed, but I'm first submitting this for feedback on the approach.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1775
more toJson() methods by ruslansennov · Pull Request #1775 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
these methods should be tested, there are tests for these classes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1776
Websocket unmasked frame support by stecolet · Pull Request #1776 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
your revert commit is not signed and make the ip-validation fail.
can you provide a new clean PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1777
Added unmasked frame supporting for websocket, client and server both… by stecolet · Pull Request #1777 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…. See https://tools.ietf.org/html/rfc6455#section-5.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1778
Unmasking frame on websocket by stecolet · Pull Request #1778 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As you can see from https://tools.ietf.org/html/rfc6455#section-5.2 websocket protocol supports also unmasked frame while Vetx 3.3.0 not. In this PR I've configured Netty properly to support unmasked frame when unmaskedFrame flasg is enabled in httpServer/client options
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1779
HttpClient follow redirect · Issue #1779 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient request can follow redirect on a 30x status code response.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1780
Http client redirect - fixes #1779 by vietj · Pull Request #1780 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1781
Lack of custom log level support in the Vertx logging abstraction framework · Issue #1781 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Lack of custom log level support in the Vertx logging abstraction framework. JUL might not support this but Log4J2 do support custom log levels but the Vertx logging abstraction does not have support for this when Log4J2 specific logging functions are abstracted away.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1782
Suggestion: Skip blocked worker instance by option · Issue #1782 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently if i run my verticle as a worker with 2 instances (multi-threaded worker launched with --worker --instances 2) then the request handler instance is choosed in simple order regardless of the blocking state of an instance.
And if one of instances is blocked (for example, by debugger) then 50% incoming requests aren't processed.
So in this case i wish to use another strategy - skip blocked instance and choose non-blocked one.
As currently worker instances are coupled with netty channels so one naive idea is to temporarily disable the netty channel corresponding to blocked instance (possibly in io.vertx.core.impl.BlockedThreadChecker) if there is some config option (--multi-threaded-worker-skip-blocked).
Also implement a public method to allow user to mark current instance as blocked. So user can write something like:
if(request.uri().contains("debug")) {
	vertx.setCurrentMultiThreadedWorkerBlocked();
	// set IDE breakpoint here
}
Suppose this will be usefull for production debugging ;)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1783
EventBus interceptors should be able to intercept on both send and receipt · Issue #1783 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, the eventbus interceptor can only inspect and transform messages on send. The interceptor does not have the ability to perform complementary operations on message delivery.
A use-case would be for distributed tracing technologies where tracing of intra-cluster communication is the goal. One would want to "start" a trace on message send and "close" the trace on delivery (or, perform further trace-state management if a response is expected).
PR forthcoming.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1784
feat: Extend EventBus listener to allow for delivery interception by emmanuelidi · Pull Request #1784 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1785
Provide support for EventLoop execution interception · Issue #1785 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
To tie together work done over time, many frameworks (e.g. see log4j MDC) use mechanisms based on thread-local storage. This works well in thread-per-request models of computation, but it fails miserably in event-driven models...like Vertx.
It would be nice to have some interceptor mechanism that could be used to "wrap" chunks of code to be executed and be able to re-establish state around the execution. For example, one could use this type of interceptor to reset the state of a TLS variable to what it was during the last execution and thereby adapt TLS-based mechanisms (e.g. log4j MDC) to the more event-driven Vertx world.
PR forthcoming.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1786
DecodeException used in Json, is missing useful information. · Issue #1786 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Maybe I overlooked something, but why not use the information that the exceptions from Jackson provides? Especially the JsonMappingException gives useful information about the json format (e.g. missing/invalid params), which is useful feedback to provide consumers of a REST api.
For now it seems,  that I have to manually go through the json object to see if the all the params needed are present and valid for a given endpoint.
It would help a lot if the DecodeException contained easy accessible information about the path to the invalid/missing parameters.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1787
feat: extend VertxImpl to allow for Context scheduling interception by emmanuelidi · Pull Request #1787 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1788
Fix typos by srueg · Pull Request #1788 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you amend your commit to sign it off?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1789
Load balancing of datagram servers · Issue #1789 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As of 3.3.3, you can deploy multiple instances of a verticle, and leverage load balancing for HTTP servers and TCP servers.
However, deploying multiple instances of a verticle creating a datagram listener will result in a java.net.BindException: Address already in use.
You can avoid the exception by enabling address reuse:
vertx.createDatagramSocket(new DatagramSocketOptions().setReuseAddress(true))
But only one verticle instance will handle the messages.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1790
Fixes Http*Options serialization by ruslansennov · Pull Request #1790 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj force updated to resolve conflicts
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1791
createHttpServer: io.vertx.core.VertxException: Thread blocked. ver 3.3.3 · Issue #1791 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I followed the example, but an error occurred.
An error does not occur in 3.2.1 but an error occurs in 3.3.3.

build.gradle

plugins {
    id 'application'
    id 'com.github.johnrengelman.shadow' version '1.2.3'
}


repositories {
    jcenter()
}

version = '1.0-SNAPSHOT'
sourceCompatibility = '1.8'
mainClassName = 'io.vertx.core.Launcher'

def vertxVersion = '3.3.3'
def mainVerticleName = 'com.prographer.exam.HelloWorldVerticle'
def watchForChange = 'src/**/*'
def doOnChange = './gradlew classes'

dependencies {
    compile "io.vertx:vertx-core:$vertxVersion"
    compile "io.vertx:vertx-rx-java:$vertxVersion"
    testCompile "io.vertx:vertx-unit:$vertxVersion"
    testCompile "junit:junit:4.12"
}

shadowJar {
    classifier = 'fat'
    manifest {
        attributes "Main-Verticle": mainVerticleName
    }
    mergeServiceFiles {
        include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
    }
}

run {
    args = ['run', mainVerticleName, "--redeploy=$watchForChange", "--launcher-class=$mainClassName", "--on-redeploy=$doOnChange"]
}

task wrapper(type: Wrapper) {
    gradleVersion = '3.1'
}


ServerVerticle.java  code

public class ServerVerticle extends AbstractVerticle {
    @Override
    public void start() throws Exception {
        HttpServer server = vertx.createHttpServer();

        server.requestHandler(request -> {

            // This handler gets called for each request that arrives on the server
            HttpServerResponse response = request.response();
            response.putHeader("content-type", "text/plain");

            // Write to the response and end it
            response.end("Hello World!");
        });

        server.listen(8080);
    }
}


Exception

$ vertx run ServerVerticle.java 
Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 2398 ms, time limit is 2000 
Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 3403 ms, time limit is 2000 
Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 4404 ms, time limit is 2000 
Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 5407 ms, time limit is 2000 
io.vertx.core.VertxException: Thread blocked
        at java.lang.Throwable.fillInStackTrace(Native Method)
        at java.lang.Throwable.fillInStackTrace(Throwable.java:783)
        at java.lang.Throwable.<init>(Throwable.java:287)
        at java.lang.Exception.<init>(Exception.java:84)
        at java.lang.ReflectiveOperationException.<init>(ReflectiveOperationException.java:75)
        at java.lang.ClassNotFoundException.<init>(ClassNotFoundException.java:82)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:411)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:217)
        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:186)
        at com.prographer.exam.ServerVerticle.start(ServerVerticle.java:14)
        at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:111)
        at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:434)
        at io.vertx.core.impl.DeploymentManager$$Lambda$24/33563464.handle(Unknown Source)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
        at io.vertx.core.impl.ContextImpl$$Lambda$25/756936249.run(Unknown Source)
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:418)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:440)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
        at java.lang.Thread.run(Thread.java:745)


It takes a long time here.https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/net/impl/SSLHelper.java#L109
Is this a JDK issue? my jdk version is 1.8.0_73
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1792
Add cause to DecodeException by sorenburon · Pull Request #1792 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM. Have you signed the Eclipse CLA ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1793
Add JsonObject POJO mapping convenience methods by lukehutch · Pull Request #1793 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1794
Add docs for #1793 (JSON<->POJO mapping) by lukehutch · Pull Request #1794 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sorry, not sure why old changes were picked up here. Closing this, will try again.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1795
Add documentation for #1793 (JSON<->POJO mapping) by lukehutch · Pull Request #1795 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj There may need to be some discussion here as to whether the fields need to be public or not to be (de)serialized (or have public getters/setters), depending on how the object mapper is configured.
Also, I'm guessing that the Java class being deserialized needs to have a public default constructor so that it can be instantiated by Jackson.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1796
HttpClient can use SSL/TLS per request · Issue #1796 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1797
When cluster manager fails to join the cluster, VertxImpl discards the error, leaving the caller stuck · Issue #1797 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As evident in https://github.com/eclipse/vert.x/blob/868595511d8c63a6589a260da7cdea585219f20c/src/main/java/io/vertx/core/impl/VertxImpl.java#L165
if the clusterManager.join() call returns a failure, the resultHandler submitted to the VertxImpl constructor is never called (neither success nor failure) resulting in the handler never completing and the caller getting stuck with an unresponsive stack.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1798
notify caller that the cluster manager they requested failed to join by guss77 · Pull Request #1798 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Could you add a test to your PR?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1799
Fixes #1765 NullPointer in sendToSubs by tsegismont · Pull Request #1799 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj rebased on master, can you have a look?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1800
3.4.0.Beta1 with netty-tcnative, NoSuchMethodError · Issue #1800 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We've been using OpenSSL via netty-tcnative-boringssl-static (1.1.33.Fork23), mostly because ALPN doesn't work with JdkSsl. When trying vertx 3.4.0.Beta1, the following exception is thrown when using OpenSSLEngineOptions with HttpClient:
java.lang.NoSuchMethodError: org.apache.tomcat.jni.SSLContext.setCACertificateBio(JJ)Z
	at io.netty.handler.ssl.ReferenceCountedOpenSslServerContext.newSessionContext(ReferenceCountedOpenSslServerContext.java:162)
	at io.netty.handler.ssl.OpenSslServerContext.<init>(OpenSslServerContext.java:349)
	at io.netty.handler.ssl.OpenSslServerContext.<init>(OpenSslServerContext.java:334)
	at io.netty.handler.ssl.SslContext.newServerContextInternal(SslContext.java:414)
	at io.netty.handler.ssl.SslContextBuilder.build(SslContextBuilder.java:402)
	at io.vertx.core.net.impl.SSLHelper.createContext(SSLHelper.java:282)
	at io.vertx.core.net.impl.SSLHelper.getContext(SSLHelper.java:417)
	at io.vertx.core.net.impl.SSLHelper.validate(SSLHelper.java:431)
	at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:258)
	at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:230)

The latest netty-tcnative (2.0.0.Beta1) has the same problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1801
Better exception handling · Issue #1801 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In eclipse/vert.x/src/main/java/io/vertx/core/impl/ContextImpl.java
        log.error("Unhandled exception", t);
should be
        log.error("Unhandled exception" + t);
Otherwise the exception is not logged - which seems to be the point of the original code.
So in my logs I currently see
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception
Feb 07, 2017 5:42:32 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception

which is not as useful as having a message for each exception.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1802
Better failure logging when handleMessage failes · Issue #1802 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In eclipse/vert.x/src/main/java/io/vertx/core/eventbus/impl/HandlerRegistration.java in method deliver there is a catch block which could be improved slightly.
It has been advantageous to me to see the address of the message handler which has failed (for whatever reason)
    } catch (Exception e) {
      log.error("Failed to handleMessage ", e);
      metrics.endHandleMessage(metric, e);
      throw e;

      if (message != null) {
        log.error("Failed to handleMessage '" + message.address() + "'", e);
      } else {
        log.error("Failed to handleMessage ", e);
      }

So now if my event handler "service.releaseaccount" has a failure I am told so by name, which could be quite useful
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1803
Remove deprecated AsyncResultHandler and VoidHandler · Issue #1803 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
These types are leftover of Vert.x 2 and was useful because of the lack of lambdas in Java 7.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1804
Remove unecessary ReadStream sub types · Issue #1804 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ServerWebSocketStream
WebSocketStream
HttpServerRequestStream
NetSocketStream
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1805
Server pausing improvements · Issue #1805 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Current a server can be paused, i.e stop accepting requests, by closing new connections when they arrive.
It would be best if that was done at HandlerManager level : pausing a connection would remove the handler from the list and thus it would work best with redeployments that wants to stop accepting requests and delegate them to other handlers using server scaling.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1806
Avoid class method calls in examples by tsegismont · Pull Request #1806 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closing as we'll update codetrans to skip those methods.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1807
Feature: Support large message framing for text messages in websockets · Issue #1807 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We would like to send and receive large text responses over websockets from our vertx server.  Since the message may be too large for the default websocket frame, the vertx library should split it into multiple frames.
io.vertx.core.http.WebSocketBase already supports sending large binary messages with the writeBinaryMessage function, so I would like to add a new function writeTextMessage.
This would be required to resolve issue 521 in vertx-web (vert-x3/vertx-web#521).  In the pull request (vert-x3/vertx-web#520) for that issue, it was identified that making some changes to WebSocketBase in vertx-core would be the best way forward.
This is similar to Issues #932 and #964.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1808
Issue #1807 - Add support for websocket text framing. by rmelick · Pull Request #1808 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
something on top of my mind with unicode chars : string.length() != string.getByte().length
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1809
Verify pool size against the correct parameter by guss77 · Pull Request #1809 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
OK, Github editing doesn't play nice with Eclipse CLA checker. I'm going to trash this and try again.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1810
VertxImpl.createSharedWorkerExecutor does not verify poolSize correctly · Issue #1810 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In VertxImpl.createSharedWorkerExecutor the poolSize check is performed against maxExecutionTime, likely by mistake.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1811
Verify pool size against the correct parameter by guss77 · Pull Request #1811 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do you guys want a unit test with that ? It seems trivial to me, but let me know.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1812
BlockedThreadChecker treats max execution time as if it is in nanos, though Java API docs claim it to be in millis · Issue #1812 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looking at the JavaDocs for Vertx.createSharedWorkerExecutor , it appears that the max execution time for a task is measured in milliseconds, but BlockedThreadChecker compares this value to VertxThread.startTime() that returns a value in nanoseconds, and indeed, BlockedThreadChecker divides that value by 1000000 to get at a milliseconds value.
All the other entities in the chain from Vertx.createSharedWorkerExecutor to BlockedThreadChecker don't document the meaning of the max execution time value, so I'm not sure which is correct, and I've also failed to locate where that value is being acted upon other than to issue warnings to the logs.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1813
httpclient will always timeout  for one server if it is timeout many times even thoughit is normal now · Issue #1813 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
like the title.i am use httpclient to get file from some server.the server use nginx to be the web server.but,recently i found that if some rqeuest always timeout.
then,i try to find the reason.i found that if httpclient timeout sometimes for one server.httpclient will always timeout even though this server is normal now.when i restart my app,it will be normal.
my core code is:
HttpClientOptions options = new HttpClientOptions().setKeepAlive(false);
		options.setConnectTimeout(2 * 1000);
		options.setPipelining(true);
		options.setKeepAlive(true);
		options.setReceiveBufferSize(64 * 1024);
		httpClient = this.vertx.createHttpClient(options);

httpclient.get(ip,url,res->{
//do something
})..exceptionHandler(t -> {
			LOGGER.error("connect client failed,ip:" + ip + ",url:" + url + ",error:" + t.getMessage());
			serverResponse.setStatusCode(500).putHeader("Content-Type", "text/html").end(Config.SERVER_ERROR + ": Connect Storage failed.");
		}).setTimeout(10 * 1000).end();
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1814
httpclient deadlock · Issue #1814 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
my app locked today,then i print the stack log:
Found one Java-level deadlock:
=============================
"vert.x-eventloop-thread-47":
  waiting to lock monitor 0x000000001a182748 (object 0x00000000da863a70, a io.vertx.core.http.impl.HttpClientRequestImpl),
  which is held by "vert.x-eventloop-thread-0"
"vert.x-eventloop-thread-0":
  waiting to lock monitor 0x000000001e851bb8 (object 0x00000000ff6253f8, a io.vertx.core.http.impl.ClientConnection),
  which is held by "vert.x-eventloop-thread-47"

Java stack information for the threads listed above:
===================================================
"vert.x-eventloop-thread-47":
	at io.vertx.core.http.impl.HttpClientRequestImpl.getLock(HttpClientRequestImpl.java:440)
	- waiting to lock <0x00000000da863a70> (a io.vertx.core.http.impl.HttpClientRequestImpl)
	at io.vertx.core.http.impl.HttpClientRequestBase.handleException(HttpClientRequestBase.java:106)
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleException(HttpClientRequestImpl.java:50)
	at io.vertx.core.http.impl.ClientConnection.handleClosed(ClientConnection.java:410)
	- locked <0x00000000ff6253f8> (a io.vertx.core.http.impl.ClientConnection)
	at io.vertx.core.net.impl.VertxHandler$$Lambda$229/1136370131.run(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:314)
	at io.vertx.core.impl.ContextImpl$$Lambda$9/868737467.run(Unknown Source)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:190)
	at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:97)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:255)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:241)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:234)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:417)
	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:360)
	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:325)
	at io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:256)
	at io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:220)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:255)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:241)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:234)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1329)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:255)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:241)
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:908)
	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:744)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:418)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:440)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
	at java.lang.Thread.run(Thread.java:745)
"vert.x-eventloop-thread-0":
	at io.vertx.core.net.impl.ConnectionBase.writeToChannel(ConnectionBase.java:113)
	- waiting to lock <0x00000000ff6253f8> (a io.vertx.core.http.impl.ClientConnection)
	at io.vertx.core.http.impl.ClientConnection.writeHeadWithContent(ClientConnection.java:476)
	at io.vertx.core.http.impl.HttpClientRequestImpl.writeHeadWithContent(HttpClientRequestImpl.java:700)
	at io.vertx.core.http.impl.HttpClientRequestImpl.connected(HttpClientRequestImpl.java:656)
	- locked <0x00000000da863a70> (a io.vertx.core.http.impl.HttpClientRequestImpl)
	at io.vertx.core.http.impl.HttpClientRequestImpl.access$100(HttpClientRequestImpl.java:50)
	at io.vertx.core.http.impl.HttpClientRequestImpl$2.handleStream(HttpClientRequestImpl.java:600)
	at io.vertx.core.http.impl.ConnectionManager$ConnQueue.deliverStream(ConnectionManager.java:258)
	at io.vertx.core.http.impl.ConnectionManager$ConnQueue.lambda$getConnection$0(ConnectionManager.java:218)
	at io.vertx.core.http.impl.ConnectionManager$ConnQueue$$Lambda$209/2008704175.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
	at io.vertx.core.impl.ContextImpl$$Lambda$9/868737467.run(Unknown Source)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:418)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:440)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
	at java.lang.Thread.run(Thread.java:745)

Found 1 deadlock.

my vertx version is 3.3.3
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1815
TrustManagerFactorySpi not initiated before call · Issue #1815 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When adding TrustOptions with a TrustManagerFactory, the factory is never instantiated by Vert.x despite the init method present.
Relevant forum thread here. Information here: https://groups.google.com/forum/#!topic/vertx/V25r0zc_wPc
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1816
TrustManagerFactorySpi not initiated before call - Tests Added by domhauton · Pull Request #1816 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Apologies - Was trying to get the 'signed-off' section in the commit message
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1817
Fixes #1765 NullPointer in sendToSubs by tsegismont · Pull Request #1817 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you have a look? The problem in CI is not related to fix, so I've implemented the test differently. Sorry for the round-trips.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1818
#1815 - Created tests for trustManagerFactoryFix by domhauton · Pull Request #1818 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@domhauton so looking at it, the TrustOptions should itself initialize the TrustManagerFactory in the getTrustManagerFactory method. That's what the other implementation do. For instance KeyStoreHelper#getTrustMgrFactory:
  public TrustManagerFactory getTrustMgrFactory(VertxInternal vertx) throws Exception {
    TrustManagerFactory fact = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    KeyStore ts = loadStore(vertx);
    fact.init(ts);
    return fact;
  }

They should do it, because the TrustOptions implementation is supposed to have access to the KeyStore and can do it. The SSLHelper cannot.
I will update the documentation to mention that the returned factory is assumed to be initialized.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1819
Patch/thread max execution time setting by guss77 · Pull Request #1819 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1820
SSL server multiple certificates · Issue #1820 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
this is more suggestion for new feature.
These days I was working with OpenShift (Kubernetes) and I noticed quite nice feature called named certificates. You can specify more key/cert pairs and they are used accordingly request target hostname (Server Name Indication, similar to virtual hosting).
This can be quite handy when one need to expose SSL service on multiple endpoints (for example behind multiple load balancers). Also this allows certificate composition instead of regenerating one with alternative subject name.
One key/cert pair should be considered as default and vertx should fall back to this one if request target hostname does not match to any other key/cert pair hostname.
Regards,
N.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1821
Refactored tests unregister while sending/publishing by tsegismont · Pull Request #1821 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Long road to test this :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1822
Removed io.vertx.test.core.EventBusTestBase.testPublishWhileUnsubscribing by tsegismont · Pull Request #1822 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Passes locally but not on CI
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1823
fixes mapper signature in Future.recover() by ruslansennov · Pull Request #1823 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I should have seen it too!!!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1824
Future fail/complete returns boolean instead of throwing an IllegalStateException  · Issue #1824 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation
Future completion methods throw an IllegalStateException when the future is already completed. Vert.x itself does not rely on this behavior.
When a future might be completed several times (for instance a close or a timeout), Vert.x takes the necessary steps with the idiom, in order to propagate the event correctly.
if (!f.isComplete()) {
  f.complete();
}

This change allows to simplify the existing code and use complete the future directly and keep the ability to remain aware of whether the Future was actually completed by the method call or not.
Changes
Future completion returns a boolean indicating whether the Future was completed or not by the method call instead of throwing an exception.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1825
Future fail/complete returns boolean instead of throwing an IllegalSt… by vietj · Pull Request #1825 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
But you have to rebase first.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1826
Future<T> extends Handler<AsyncResult<T>> · Issue #1826 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
It is actually possible to turn a Future<T> into an Handler<AsyncResult<T>> using Future#completer() method. This is actually the polyglot method to achieve it as AsyncResult<T> might not be mapped correctly sometimes (like in JS or Ruby).
The implementations of Future actually implements Handler<AsyncResult<T>> and return this in the completer() method.
When using java-ish languages like Java, Kotlin or Groovy, it should be possible to use directly the represented Future type directly as an Handler<AsyncResult>.
Resolution:
This patch makes Future<T> extend Handler<AsyncResult<T>> (in addition of AsyncResult<T>) and the handle(AsyncResult<T>) is annotated with @GenIgnore.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1827
Future<T> extends Handler<AsyncResult<T>> - fixes #1826 by vietj · Pull Request #1827 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this method relies on this commit https://github.com/vert-x3/vertx-codegen/tree/tolerate-extend-handler-async-result
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1828
Future#future(Handler<Future<T> handler) method to future creation in an expression · Issue #1828 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Allows to write an expression:
return Future.future(f -> server.listen(8080, f));

instead of the three statements:
Future<Void> fut = Future.future();
server.listen(8080, fut);
return fut;
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1829
Websocket cleanup by vietj · Pull Request #1829 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@rmelick can you review this PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1830
HttpServerResponse data was truncated · Issue #1830 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
pom version:

io.vertx
vertx-core
3.3.3


io.vertx
vertx-dropwizard-metrics
3.3.3


io.vertx
vertx-auth-jwt
3.3.3

-------------function-------------
`private void handleHttpAppList(HttpServerRequest req, HttpServerResponse response) {
    String r = "{\"code\":0,\"data\":[{\"password\":\"xx\",\"mobile\":\"db\",\"nickname\":\"数据库广播\",\"usertype\":\"app\",\"username\":\"db\"},{\"password\":\"xx\",\"mobile\":\"system\",\"nickname\":\"系统消息\",\"usertype\":\"app\",\"username\":\"system\"}]}";

    response.putHeader("Content-Length", "" + r.length());
    System.out.println("ResponseString:" + r);
    response.write(r);
    response.end();
}`

-------log on console----
ResponseString:{"code":0,"data":[{"password":"xx","mobile":"db","nickname":"数据库广播","usertype":"app","username":"db"},{"password":"xx","mobile":"system","nickname":"系统消息","usertype":"app","username":"system"}]}
-------response on postman------
{"code":0,"data":[{"password":"xx","mobile":"db","nickname":"数据库广播","usertype":"app","username":"db"},{"password":"xx","mobile":"system","nickname":"系统消息","usertype":"app","use
---------- problem description----
response.write(UrlEncoder.encode(r,"utf-8")),  no response data was truncated
otherwise, the data was truncated.
anyone can help on this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1831
Add a Future#orElse and AsyncResult#orElse  · Issue #1831 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
a recent contribution added Future#recover(Function<Throwable, Future<T>) method, similar to the Future#compose(Function<T, Future<U>>).
compose has a synchronous version : Future#map(Function<T, U>) . Future#map(U), recover currently does not have one.
Changes:
added an orElse method that is the synchronous version of recover : orElse(Function<Throwable,T> / orElse(T). This method is added to AsyncResult and Future like map is.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1832
Added AsyncResult#orElse that is the synchronous version of Future#re… by vietj · Pull Request #1832 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
anyone for reviewing ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1833
Logging troubleshooting section in doc by cescoffier · Pull Request #1833 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add a section in the doc mentioning:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1834
Don't call HttpServer request/ws close handler holding locks · Issue #1834 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
currently the ServerWebSocket and HttpServerRequest close handlers are called under synchronized lock of the connection. This can create deadlocks in SockJSSocket because a SockJSSocket may uses different request/websocket (reconnects) and event loops.
Change:
when processing a Netty close event, call the close handlers in the next tick (i.e scheduled to run on context).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1835
Add tryComplete/tryFail methods that allow to complete/fail Future if not yet completed · Issue #1835 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1836
The JSON File from --conf should be read with the UTF-8 Charset · Issue #1836 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The JSON File from --conf should be read with the UTF-8 Charset (JSON default encoding) and not with the underlying platform's default charset.
In our case we have problems with Verticle's which we are deploying with a json config file (encoded in utf-8). Some characters are not decoded correctly because the default charset of the platform ist not utf-8.
A workaround is to set the default encoding via -Dfile.encoding to utf-8. But this could have other implications in existing code.
The Problem lies in the class io.vertx.core.impl.launcher.commands.RunCommand and possibly other locations.
The Scanner should use UTF-8 as default encoding. Perhaps you could add an option to specify the encoding along the --conf option too.
protected JsonObject getConfiguration() {
    JsonObject conf;
    if (config != null) {
      try (Scanner scanner = new Scanner(new File(config)).useDelimiter("\\A")) {
        String sconf = scanner.next();
        try {
          conf = new JsonObject(sconf);
        } catch (DecodeException e) {
          log.error("Configuration file " + sconf + " does not contain a valid JSON object");
          return null;
        }
      } catch (FileNotFoundException e) {
        try {
          conf = new JsonObject(config);
        } catch (DecodeException e2) {
          // The configuration is not printed for security purpose, it can contain sensitive data.
          log.error("The -conf option does not point to an existing file or is not a valid JSON object");
          e2.printStackTrace();
          return null;
        }
      }
    } else {
      conf = null;
    }
    return conf;
 }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1837
Optimize removeWorker in VertxEventLoopGroup by yunyu · Pull Request #1837 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
not really needed there is no performance issue here
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1838
Fixed issue with overriding handlers by Crokoking · Pull Request #1838 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
resubmitted as #1839
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1839
Fixed issue with overriding handlers by Crokoking · Pull Request #1839 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1840
New HttpServerResponse endHandler to be notified when the HttpServerResponse is disposed · Issue #1840 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
currently the HttpServerResponse#closeHandler is called only if the response is closed abruptly for HTTP/1 and is called whenever the corresponding stream closes for HTTP/2. The behavior is not consistent and also it seems that a new endHandler that will be always called to allow cleanup after the response is disposed in a consistent manner.
Changes:
A new response end handler is added and it is called whenever the current HttpServerResponse becomes unused, wether it is on purpose (i.e calling response end() method) or because the transport (connection for HTTP/1.x and stream for HTTP/2) is closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1841
Change HttpServerResponse#closeHandler to be closed when the HttpServ… by vietj · Pull Request #1841 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…erResponse is disposed in the same manner for HTTP/1 and HTTP/2 - fixes #1840
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1842
Vertx HttpClient - Wait queue does not empty after timeouts · Issue #1842 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
If you create a HttpClient with the maxWaitQueueSize set to a positive number,
and then
if the wait queue fills up, (poolSize for the HttpClient is also a fixed number)
and then
if, subsequently, one or more of the HttpClientRequests being executed in the pool time-out, owing to no response from the server after their set timeout value, I see a strange behavior that all subsequent requests will receive a "Connection pool reached max wait queue size"
Here is a small standalone reproducer:
https://github.com/kpachar/other-issues
Thanks..
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1843
Change HttpServerResponse#closeHandler to be closed when the HttpServ… by vietj · Pull Request #1843 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…erResponse is disposed in the same manner for HTTP/1 and HTTP/2 - fixes #1840
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1844
Don't call HttpServer request/ws close handler holding locks - fixes … by vietj · Pull Request #1844 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…#1834
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1845
Remove Netty's DNS codec fork and reuse Netty's DNS codec in DnsClient · Issue #1845 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1846
Remove Netty's DNS codec fork and reuse Netty's DNS codec in DnsClien… by vietj · Pull Request #1846 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
or anyone else can review too :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1847
Helper for self-signed certificates by jponge · Pull Request #1847 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1848
Fault tolerance for event bus subscription by tsegismont · Pull Request #1848 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you have a look? When we're fine with the changes, I'll update the other cluster managers as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1849
Address resolver should have a retry mechanism · Issue #1849 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In certain network configuration, the DNS server can be located remotely. Therefore, it might be susceptible to a packet drop. When that happens, AddressResolver seems to fail to resolve the DNS name. I would prefer that we have some DNS retry mechanism rather than letting the request fails.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1850
Make it possible to customize DNS behavior · Issue #1850 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Netty 4.1.X, https://netty.io/4.1/api/io/netty/resolver/dns/RoundRobinDnsAddressResolverGroup.html is added so that it can perform the load balancing more properly. It would be nice if we have a mechanism to plug in a different implementation into Vert.x
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1851
KeyStoreHelper just support PKCS8,Not support RSA private key · Issue #1851 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
public PrivateKey loadPrivateKey() throws Exception { if (keyValue == null) { throw new RuntimeException("Missing private key path"); } byte[] value = loadPems(keyValue.get(), "**PRIVATE KEY**").get(0); KeyFactory rsaKeyFactory = KeyFactory.getInstance("RSA"); return rsaKeyFactory.generatePrivate(new PKCS8EncodedKeySpec(value)); }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1852
Remove unnecessary WriteStream sub types · Issue #1852 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
A few synthetic type extending WriteStream have been introduced because code generation only supported type variables as type argument declarations. Since 3.4 we removed that limitation and now we can remove these useless types: PacketWriteStream so far.
Change:
Removal of io.vertx.core.datagram.PacketWriteStream
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1853
Round robin dns server selection for hostname resolution · Issue #1853 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
currently the dns resolver is configured to use the first server from the list and the others for failover. By using instead a rotational server list we can provide round robin.
Changes:
provide configuration to configure the dns server list to be rotational for dns server selection
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1854
Change the default number of dns max queries to 4 · Issue #1854 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
currently the default number of dns max queries is 3. By default the resolver will send 2 queries : A and AAA. When the server does not respond, there is one query left and in case of failover, only the A query is sent. Increasing the value to 4 allow to send A and AAA when failover occurs.
Change:
The default number of max queries is 4 instead of 3.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



https://github.com/eclipse-vertx/vert.x
https://github.com/eclipse-vertx/vert.x/issues/1854
Change the default number of dns max queries to 4 · Issue #1854 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
currently the default number of dns max queries is 3. By default the resolver will send 2 queries : A and AAA. When the server does not respond, there is one query left and in case of failover, only the A query is sent. Increasing the value to 4 allow to send A and AAA when failover occurs.
Change:
The default number of max queries is 4 instead of 3.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1855
Hostname resolver improvements by vietj · Pull Request #1855 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think there are different cases for RoundRobin. RoundRobinDnsAddressResolverGroup actually returns different ip addresses in a round robin fashion if multiple IN A record exists. AFAIK, Your implementation seems to pick a different DNS servers in a round robin fashion instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1856
Should use ResolverConfiguration whenever possible to find DNS configuration · Issue #1856 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On Oracle JVM, I think it is much simpler to use sun.net.dns.ResolverConfiguration to find the DNS configuration. Look at http://dnsjava.org/dnsjava-current/org/xbill/DNS/ResolverConfig.java for an example.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1857
fixes #1752: DNSclient.lookup4 does not return the ip address when a CNAME is used by alexlehm · Pull Request #1857 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
fix and unit test for the CNAME resolve issue
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1858
Default redirect handler: do not fail on URIs without explicit port by tsegismont · Pull Request #1858 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you explain how to reproduce it so we can add tests ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1859
Load the rotate option from /etc/resolv.conf on Linux · Issue #1859 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1860
Load the rotate option from /etc/resolv.conf on Linux by tsegismont · Pull Request #1860 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj I had this in the pipe before you pushed f7c7a87
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1861
Don't get a lock with Hazelcast · Issue #1861 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
i wrote a small class for getting a lock with the Hazelcast Cluster manager.
This code will never get a lock and runs in a timeout.
Why is this happen ?
Thanks
Marcel
public class LockTestCluster {
	public static void main(String[] args) {

		String localIp = "127.0.0.1";

		VertxOptions vertxOptions = new VertxOptions();
		Config hazelcastConfig = new Config();

		hazelcastConfig.getNetworkConfig().getJoin().getMulticastConfig().setEnabled(false);
		hazelcastConfig.getNetworkConfig().getJoin().getTcpIpConfig().setEnabled(true);
		hazelcastConfig.getNetworkConfig().getJoin().getTcpIpConfig().addMember(localIp);

		hazelcastConfig.getNetworkConfig().setPublicAddress(localIp);
		vertxOptions.setClusterPublicHost(localIp);

		ClusterManager mgr = new HazelcastClusterManager(hazelcastConfig);

		vertxOptions.setClusterManager(mgr).setClustered(true);

		DeploymentOptions deployOptions = new DeploymentOptions();

		Vertx.clusteredVertx(vertxOptions, res -> {
			if (res.succeeded()) {
				Vertx vertx = res.result();

				vertx.sharedData().getLockWithTimeout("testLock", 10000L, lockRes -> {

					if (lockRes.succeeded()) {
						Lock lock = lockRes.result();

						lock.release();
					} else {
						System.out.println("Cannot get lock: " + lockRes.cause().getMessage());
					}
				});

				System.out.println("done");

			} else {
				res.cause().printStackTrace();
			}
		});
	}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1862
Handle HTTP/1.1 decode errors · Issue #1862 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation: when the Netty HTTP/1.x decoder finds a protocol error (invalid chunk, initial line too long, etc...), it signals it with an error in the HttpObject. We handle it in a single case (http server invalid request) and we should handle it in all case on server request or in client response and make no further processing of the connection.
Changes: when an HttpObject is received we check there is no decode error. When there is a decode error we signal it to the HttpServerRequest or HttpClientResponse and then we close the connection.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1863
Handle HTTP/1.1 decode errors - fixes 1862 by vietj · Pull Request #1863 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1864
WorkerExecutor callback should run on caller context · Issue #1864 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently it runs on the context which created the WorkerExecutor
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1865
WorkerExecutor callback should run on caller context by tsegismont · Pull Request #1865 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you please review along with the sister PR vert-x3/vertx-rx#79? Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1866
JsonObject.mergeIn(JsonObject other, int depth) does not regard NULL values · Issue #1866 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
i am unsure if it's a imperfection or a design decision by intention:
Using JsonObject.mergeIn() with JSON object keys having NULL values leads to NullPointerException -- the reason for this is that Map.merge() requires the source map to be non-NULL.
Any idea or hint on this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1867
WorkerExecutor must order tasks on the current Context and not on itself · Issue #1867 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1868
WorkerExecutor must order tasks on the current Context and not on itself - fixes #1867 by vietj · Pull Request #1868 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1869
WorkerExecutor must order tasks on the current Context and not on its… by vietj · Pull Request #1869 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1870
In case of NO_HANDLERS, vertx handler executed in wrong context and thread type · Issue #1870 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using 3.4.0
Reproducer in this repo: https://github.com/mhstnsc/vertx-tests
Failing code here: https://github.com/mhstnsc/vertx-tests/blob/master/src/test/java/io/vertx/test/threading/WorkerVerticle.java#L25
Run ThreadConsistencyTest.testNoHandlersReply
Explanation of the test:

clustered vertx
deploy worker verticle
Eventbus.send to some whatever address
completion handler is invoked on wrong context and thread

message before sending
2017-03-10 15:18:10,096 DEBUG [vert.x-worker-thread-0] TimersFiredOnOtherThreads:28 - Thread[vert.x-worker-thread-0,5,main] io.vertx.core.impl.WorkerContext@64b679ea

message from handler
2017-03-10 15:18:10,112 DEBUG [vert.x-eventloop-thread-0] TimersFiredOnOtherThreads:35 - Thread[vert.x-eventloop-thread-0,5,main] io.vertx.core.impl.EventLoopContext@44b5a95a
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1871
Fixes #1870 In case of NO_HANDLERS, vertx handler executed in wrong context and thread type by tsegismont · Pull Request #1871 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1870
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1872
Vert.x 3.4.0 doesn't start with Netty 4.1.9.Final · Issue #1872 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
java.lang.NoSuchMethodError: io.netty.resolver.HostsFileParser.parseSilently()Ljava/util/Map;
	at io.vertx.core.impl.AddressResolver.<init>(AddressResolver.java:156)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:157)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:123)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:119)
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:34)
	at io.vertx.core.Vertx.vertx(Vertx.java:80)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1873
Improve testSendWhileUnsubscribing to avoid intermittent failures by tsegismont · Pull Request #1873 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1874
Fixed issues with the FakeClusterManager by tsegismont · Pull Request #1874 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Also, in ComplexHATest, it's not necessary to use ordering for simulating kill.
Besides as most CM implementations use executeBlocking, they would not be able to process the event until the kill timeout expires.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1875
High Availability mode · Issue #1875 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
The documentation sais that : "When vert.x runs with HA enabled, if a vert.x instance where a verticle runs fails or dies, the verticle is redeployed automatically on another vert.x instance of the cluster"
So, if I have really understood what it means, if any of my vert.x instance dies, another one in the cluster will redeploy the failed instance verticle as a child verticle.
But if the second instance dies itself, the two verticles are then unavailable.
Is there any way to allow instances to die while keeping the application running "forever" ? Something to allow self-healing of the instances ?
Thx in advance for your help.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1876
Improve FaultToleranceTest by tsegismont · Pull Request #1876 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1877
Add json path support to JsonObject by Jotschi · Pull Request #1877 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I prefer to avoid this feature as it introduces a new dependency in Vert.x Core . We want to keep the number of dependency to a minimum.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1878
Removed deprecated Netty code by tsegismont · Pull Request #1878 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
as this has an impact on performance, can you make sure that the new changes are equivalent to the existing usage of ascii strings ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1879
More tests fixes by tsegismont · Pull Request #1879 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1880
Exception cause lost if result already complete. by tsegismont · Pull Request #1880 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So how would you fix it if the result was a success ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1881
Customization of Netty "initialBufferSize" #1750 by leogomes · Pull Request #1881 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR adds the new option suggested here: #1750
@tsegismont mentioned in the issue that performance tests would be a plus, but I haven't put them in place yet. I was thinking of modifying https://github.com/vert-x3/vertx-perf to add a JMH test there to validate performance gains brought by this PR. Is it a good strategy?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1882
Fixed io.vertx.test.core.ClusteredEventBusWithSSLTest by tsegismont · Pull Request #1882 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The FakeCM could complete the execute blocking future twice.
And there was an issue iterating over the nodes map keys, it needs to be synchronized.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1883
Log target address when more than maxBufferedMessages buffered in consumer by jan-zajic · Pull Request #1883 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1884
#1586 Make JsonObject and JsonArray extend a common class by jan-zajic · Pull Request #1884 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
that's something we want to do indeed but with @pmlopes we wanted first to name the parent JsonElement instead (I think it is the name it used to be previously)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1885
how many max connections vertx eventbus can have ? · Issue #1885 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have done multiple projects with vertx so far and quite happy with its performance. Would like to know if it would be suitable for writing a GPS tracking server. My plan is to handle around 100,000 simultaneous connection initially. Can I use eventbus for such loads and would it be possible for vertx server to handle.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1886
Add precision to the AsyncMultiMap javadoc by henri-tremblay · Pull Request #1886 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1887
Shared worker executor serializes taks even if ordered = false · Issue #1887 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1888
Shared worker executor serializes taks even if ordered = false by tsegismont · Pull Request #1888 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1887 Shared worker executor serializes taks even if ordered = false
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1889
Can't run embeded Vert.x under JDK9 · Issue #1889 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I'm currently trying to migrate SlideshowFX to JDK9 (build 161 with Jigsaw).
The application embeds Vert.x in order to provide a WebServer. Until now I have been using Vert.x 3.3.3 and the application was running "well". Now I'm trying to use versions 3.4.0 and 3.4.1 and when starting the application, I've got the following error and the application can't boot:
Error occurred during initialization of boot layer
java.lang.module.FindException: java.io.IOException: Provider class moduleName = io.vertx.ext.web.handler.VirtualHostHandler-module not in module
Caused by: java.io.IOException: Provider class moduleName = io.vertx.ext.web.handler.VirtualHostHandler-module not in module

When looking at the source code of vertx-web, I can see the META-INF/services/org.codehaus.groovy.runtime.ExtensionModule file. As specified by the ServiceLoader class, such files are used in order to define services not developed as JPMS modules but running as JAR files on the classpath. I suppose the addition of this file is intentional by the Vert.x developers but I can't figure out how to be able to start SlideshowFX again.
Have you encountered such issue and were able to fix it?
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1890
Calling resume in an AsyncFile endHandler will cause a new call to the endHandler · Issue #1890 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1891
Calling resume in an AsyncFile endHandler will cause a new call to th… by vietj · Pull Request #1891 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
please review @tsegismont @pmlopes @cescoffier
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1892
Race condition in Future setHandler/completion between threads · Issue #1892 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In one of our projects we have encountered a problem with CompositeFuture.all() when running "outside"
of a verticle (in junit tests). Here is a sample program:
import io.vertx.core.CompositeFuture;
import io.vertx.core.Future;
import io.vertx.core.Vertx;

import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;

public class CompositeFutureTest {
    private static final int NUMBER_OF_LOOPS = 10_000;
    private static final Vertx vertx = Vertx.vertx();

    private static boolean testCompositeFuture() throws InterruptedException, ExecutionException {
        CountDownLatch finished = new CountDownLatch(1);
        AtomicInteger atomicCounter = new AtomicInteger(0);

        for (int i = 0; i < NUMBER_OF_LOOPS; i++) {
            Future<Void> future1 = Future.future();
            Future<Void> future2 = Future.future();

            vertx.runOnContext(future1::complete);
            vertx.runOnContext(future2::complete);

            CompositeFuture.all(future1, future2).setHandler(ar -> {
                if (ar.succeeded()) {
                    if (atomicCounter.incrementAndGet() == NUMBER_OF_LOOPS) {
                        finished.countDown();
                    }
                }
            });
        }

        boolean result = finished.await(10, TimeUnit.SECONDS);

        System.out.println(String.format("%s: %s == %s", result ? "OK": "ERROR", atomicCounter, NUMBER_OF_LOOPS));

        return result;
    }

    public static void main(String[] args) throws InterruptedException, ExecutionException {
        while (testCompositeFuture());
        vertx.close();
    }
}
After a while it prints something like
ERROR: 9985 == 10000

Inside implementation of CompositeFutureImpl.all() the setHandler() function is called upon each future in the composition (in our case two). The problem here is that the completion of futures runs in a different thread than setting the handler. Neither of the functions (setHandler() nor complete()) are atomic and it may result in
a situation when the handler is never called. The problem seems to be more fundamental. The future
implementation (FutureImpl) is not thread safe and using it from different threads may cause difficulties.
When running inside a verticle it's ok because asynchronous callbacks are serialized within the event loop
and should not run concurrently.
I don't know if this is an expected behaviour and Futures (and their compositions) should be used only
within verticles. Our understanding based on looking into the implementation of CompositeFutureImpl is that
the intention was to make it thread safe.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1893
Allow configuration of clustered message buffer initialization size by Minikloon · Pull Request #1893 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1894
Specify ClusterSerializable must be handled by AsyncMaps by henri-tremblay · Pull Request #1894 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@henri-tremblay can you redo a PR with commit that is sign-off ? thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1895
Fixes another NetTest failing sometimes with Connection refused by tsegismont · Pull Request #1895 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1896
FIX #1802 - Better failure logging when handleMessage failes by jan-zajic · Pull Request #1896 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I fix issue #1802 from @rscorer. Message can't be null at catch as being dereferenced 9 lines earlier.
Signed-off-by: jzajic jan.zajic@corpus.cz
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1897
Fix issue #1851 by jan-zajic · Pull Request #1897 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a step in ssl.txt that describes how to generate the key with openssl CLI ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1898
Move to build-helper-maven-plugin 3.0.0 by fbricon · Pull Request #1898 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It makes importing the Vert.x project in Eclipse/m2e (and VS Code) work OOTB.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1899
Timers should be cancellable until they are fired · Issue #1899 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: timers are scheduled by the event loop and executed on its context, during the time between a timer callback is scheduled and its actual execution, the timer cannot be cancelled although it could still be. Such situation can happen easily with worker contexts where timer tasks can be delayed due to blocking.
change: uses an atomic boolean cancelled to allow a timer to be cancelled when it has been scheduled for execution on the context. The atomic boolean guarantees the visibility across threads and also the timer can be marked as cancelled once.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1900
Timers should be cancellable until they are fired - fixes #1899 by vietj · Pull Request #1900 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1901
Make Future thread safe by vietj · Pull Request #1901 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
please review @pmlopes @tsegismont
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1902
Type Matching Event Bus Messages? · Issue #1902 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think it would be quite valuable to support an overloaded method for the EventBus consumer to allow specifying the type of the message:
EventBus eb = vertx.eventBus();
eb.consumer(address, Type<? extends Serializable>, handler);

This would allow for type-safe message handling and allow for matching different consumers to different types. I'll try to look into what it would take to make this possible. It obviously wouldn't easily apply to some of the dynamic languages though...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1903
Retrieved Buffer byte array size not correct. · Issue #1903 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the length of the buffer does not match the initialized size.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1904
Test case showing retrieved buffer does not match created size. by whitingjr · Pull Request #1904 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1905
EventBus interceptor does not get message body when clustered · Issue #1905 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
From David Klotz on the forum
Hi, 

I'm currently a bit confused by the differing behavior of event bus interceptors in a non-clustered and a clustered vert.x environment (currently on 3.2.1, can test again in 3.4.x if something in that area has changed since then). When run in a non-clustered environment, the interceptor has access to both the message body and the message headers, but when run in a clustered environment, the message body is always null. Is this behavior by design or a bug?

Cheers, 
David
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1906
Cannot process buffer in worker NetClient on channel inactive · Issue #1906 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the new version 3.4.1, I get the following exception when I send an email through an non-shared client and a AWS SES server:
java.lang.NullPointerException
io.vertx.core.net.impl.NetClientImpl$1.handleMsgReceived(NetClientImpl.java:197)
io.vertx.core.net.impl.VertxNetHandler.lambda$channelRead$0(VertxNetHandler.java:64)
io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:335)
io.vertx.core.impl.TaskQueue.lambda$new$0(TaskQueue.java:60)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
java.lang.Thread.run(Thread.java:745)

I think the problem is this: in the line 197 of NetClientImpl, the attribute conn can be null because of the method removeConnection has been called in the VertxNetHandler, so it causes a null pointer exception.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1907
Fixes #1905 EventBus interceptor does not get message body when clustered by tsegismont · Pull Request #1907 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you have a look again? I've reverted the ClusteredMessage#body changes and added SendContext#sentMessage
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1908
Cannot process buffer in worker NetClient on channel inactive - fixes… by vietj · Pull Request #1908 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1909
VertxException for already timed out HttpClientRequest if HTTP server closes connection. · Issue #1909 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I’ve seen during my tests, that if I send a HTTP request that is timed out, and after that I send another one which gets a response, and then the connection on the server side is closed – then the first request (the one that timed out) calls its exceptionHandler with a VertxException with a message Connection was closed.
EDIT: I am seeing this behaviour with Vert.x 3.4.1.
At first I thought that it is due to the client trying to keepAlive its connections and reacts with an exception when closed from outside  – but then the exception should rather be thrown on the vertx object itself, not on a request that supposedly finished time ago. And then it seems it does not matter if I set setKeepAlive(true) or setKeepAlive(false).
Here is a gist with a test replicating this behaviour.
And here is a log I get from that test:
11:38:52.629 [vert.x-eventloop-thread-0] INFO  VertxHttpClientTimeoutTest - Sending request 0.
11:38:52.965 [vert.x-eventloop-thread-0] INFO  VertxHttpClientTimeoutTest - Exception thrown for request 0.
java.util.concurrent.TimeoutException: The timeout period of 300ms has been exceeded while executing GET /test for host localhost
	at io.vertx.core.http.impl.HttpClientRequestBase.timeout(HttpClientRequestBase.java:183) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.http.impl.HttpClientRequestBase.handleTimeout(HttpClientRequestBase.java:168) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.http.impl.HttpClientRequestBase.lambda$setTimeout$0(HttpClientRequestBase.java:126) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:803) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:774) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:337) ~[vertx-core-3.4.1.jar:?]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
11:38:52.971 [vert.x-eventloop-thread-0] INFO  VertxHttpClientTimeoutTest - Sending request 1.
11:38:52.982 [vert.x-eventloop-thread-0] INFO  VertxHttpClientTimeoutTest - Received response, status: 200, msg: OK, headers: [X-Req-Num=1, Content-Length=0]
11:38:53.015 [vert.x-eventloop-thread-0] INFO  VertxHttpClientTimeoutTest - Exception thrown for request 0.
io.vertx.core.VertxException: Connection was closed
	at io.vertx.core.http.impl.ClientConnection.handleClosed(ClientConnection.java:408) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:335) ~[vertx-core-3.4.1.jar:?]
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:193) [vertx-core-3.4.1.jar:?]
	at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:97) [vertx-core-3.4.1.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:417) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:360) [netty-codec-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:325) [netty-codec-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:256) [netty-codec-http-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:220) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1329) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:908) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:744) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445) [netty-transport-4.1.8.Final.jar:4.1.8.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) [netty-common-4.1.8.Final.jar:4.1.8.Final]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]

Also, if I comment out the 66th line in the gist (closing the HttpServer), and I close HttpClient on line 101 instead, the same issue appears.
I would expect that if the request has already timed out, it is closed and won’t call its exception nor response handlers anymore. Am I doing something wrong, understanding something wrong, or is it a bug?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1910
FailedFuture should always have a cause even when the provided cause is null · Issue #1910 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since https://vertx.ci.cloudbees.com/job/vert.x3-core/5477/
java.lang.NullPointerException: null
	at io.vertx.test.core.FutureTest.testCreateFailedWithNullFailure(FutureTest.java:242)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1911
Fixes intermittent failure in io.vertx.test.core.Http2ClientTest.test100Continue by tsegismont · Pull Request #1911 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We know the body handler should be called after both the request handler and the continue handler have been called.
But we don't know which one will be called first: in Http2ServerConnection.onHeadersRead, we write continue headers to the response then schedule the request handler execution.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1912
Fixes intermittent failure in io.vertx.test.core.NamedWorkerPoolTest.testOrdered by tsegismont · Pull Request #1912 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The submitted latch must be updated after all blocking tasks have been submitted, not after the test task has been scheduled for execution on context.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1913
Add repliedAddress to failure message in case of reply timeout by jan-zajic · Pull Request #1913 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In HandlerRegistration, sendAsyncResultFailure is logged only when timeout != -1, which is only set in createReplyHandlerRegistration (tj handler is reply handler). But it logs only field address, which is mostly useless to log for reply handler. It print us usually something like:
Timed out after waiting  for a reply. address: 82
So we must put breakpoint here and see what repliedAddress is (it's that more interesting address in that case).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1914
Vert.x HttpServerResponse serialization · Issue #1914 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have 1 Verticle which receives HttpRequests. This Verticle sends the data on to a processing verticle which in itself sends it on to a processing verticle  and so on untill all processing is done. At the end I would like to to send a response...
And this is my problem: I cannot send the RoutingContext or the HttpResponse over the EventBus to the next Verticles otherwise I will loose the Vert.X Clustering capabilities since that object is not serializable.
I tried saving the same object to a Apache Ignite Cache with the same result.
In the beginning I had an architecture which involved Orchestrator Objects in order to reply and so always return to the original Rest Verticle, but this is not scalable as I would like.
Any information on such a possibility would be appreciated.
Tim fox wrote in an older response to a similar question the following

You could serialize it to a byte[] and deserialize it at the other end. Vert.x 3.0 supports custom serializers on the event bus, so you could create one for HttpServerRequest.

I would very much like to know how to do this as I am unsuccessful to do this.
Thank you in advance
Yoav
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1915
Meaningful Future toString() by jponge · Pull Request #1915 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what format is that :-) !
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1916
3.4.1: Eventbus can only eat max 50% CPU  · Issue #1916 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Clustered vertx, core i7.
The test is about send and reply between verticles and then measure rate.
The test has a bunch of eventloop verticles doing send to a bunch of worker/eventloop consumer verticles. When the senders receive a reply they send again (a kind of async/reactive busy loop)
The observed behavior is that i can never increase the CPU usage to more than 50%. I doubled the number of eventloop pool size and no effect.
Reproducer can be found here: https://github.com/mhstnsc/vertx-tests
Exact test is here: https://github.com/mhstnsc/vertx-tests/blob/master/src/test/java/io/vertx/test/performance/EventBusTest.java
You can run it with:
gradle :test --tests io.vertx.test.performance.EventBusTest.testWorkerConsumer -i
As a control test you can run another test which can load the CPU 100% by doing md5 computations in 200 worker verticles (can also be event loop verticles)
gradle :test --tests io.vertx.test.performance.EventBusTest.testMaxCpuLoad -i
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1917
Codegen does not work · Issue #1917 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi all
I am trying to generate a service proxy but it does not work at all.
The code does not get generated.
You can find the project on the attachment.  Please help me.
microservice1.zip
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1918
Javadoc enhancement for JsonObject and JsonArray by EmadAlblueshi · Pull Request #1918 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1919
Add support for BigInteger/BigDecimal in JsonObject · Issue #1919 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
My primary use case here is that the default way that Jackson serializes/deserializes java.time.Instant is as a BigDecimal for the seconds since epoch plus nanos (or whatever the most accurate clock time it can convert to). Thus, when I try to use JsonObject normally, I can't deserialize what was serialized before without disabling the timestamp as nanos options in Jackson ahead of time.
Adding a gamut of methods like getBigInteger(String) et al. would be useful, too, but I think this would be more appropriately implemented via better dynamic conversion so that, for example, calling json.getBigDecimal("foo") would still work if the foo field was stored as a Double instead. Similarly, calling json.getDouble("foo") would likely call Number::doubleValue or similar to do an auto conversion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1920
Future.setHandler() emits unpredictable behaviour if called multiple times · Issue #1920 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Given a simple test class:
import io.vertx.core.Future;

public class Foo {
    public static void main(String... args) throws Exception {
        Future<Void> fut1 = Future.future();
        attach(fut1, "fut1");
        fut1.complete();

        Future<Void> fut2 = Future.succeededFuture();
        attach(fut2, "fut2");
    }

    private static void attach(Future<Void> fut, String name) {
        fut.setHandler(h1 -> System.out.println(name + " completed h1"));
        fut.setHandler(h2 -> System.out.println(name + " completed h2"));
    }
}
The output is:
fut1 completed h2
fut2 completed h1
fut2 completed h2

Thus, if you call setHandler() multiple times for any reason, directly or indirectly, you can't be sure of whether one or more of the given handlers will be called unless you know for sure when the future will get completed.
In order to not encourage writing code with potentially unpredictable behaviour, I can think of at least the following potential changes to the Future interface:

Allow calling setHandler() just once, throwing IllegalStateException on successive calls.
Replace setHandler() with addHandler() which would allow multiple listeners of a single future. All  map(), compose() etc metods would also start using the new method instead of the old.

What do you think?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1921
Fixed doc by tsegismont · Pull Request #1921 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes vert-x3/vertx-web-site#207
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1922
minor javadoc fix by ruslansennov · Pull Request #1922 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Ruslan Sennov ruslan.sennov@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1923
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1924
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1925
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1926
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1927
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1928
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1929
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1930
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1931
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1932
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1933
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1934
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1935
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1936
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1937
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1938
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1939
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1940
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1941
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1942
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1943
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1944
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1945
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1946
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1947
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1948
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1949
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1950
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1951
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1952
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1953
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1954
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1955
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1956
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1957
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1958
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1959
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1960
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1961
Improve the redeploy documentation by cescoffier · Pull Request #1961 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1962
Add support for jackson-modules-java8 · Issue #1962 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, can support for these modules be added or at least the Date/Time one?
https://github.com/FasterXML/jackson-modules-java8
When using Json.decodeValue(someString, SomePojo.class) or someJsonObject.mapTo(SomePojo.class) and we have Java 8 Instant type we get an exception.
See here: https://groups.google.com/forum/?fromgroups#!searchin/vertx/Instant%7Csort:relevance/vertx/uKeiQLMOR3I/FZApiU37AwAJ
JsonObject has getInstant() but that does a direct mapping with return new Instant(someDateString);
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1963
JSON spec states that JSON is UTF-8 encoded, not platform dependent by pmlopes · Pull Request #1963 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1964
Add support for RFC-7493 to Json by pmlopes · Pull Request #1964 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1965
Json Creation | DataObject Annotation | Setting Java 8 LocalDateTime object returns null · Issue #1965 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Team,
I am creating a Java 8/JodaTime LocalDateTime class variable in one of my value objects annotated with DataObject. When I set the variable using setter methods as LocalDateTime.now() and try to get the json, it does not set anything to the variable in json. Also the variable is missing from the json. Any ideas why this is failing. After looking at the different examples, I saw that everywhere Date is represented by Long type and at none place Date, LocalDateTime, LocalDate is used.
Any help is appreciated.
Thanks
Piyush
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1966
Add editorconfig file as per wiki by pmlopes · Pull Request #1966 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1967
Fix the CompletionHandler in AsyncFileImpl#writeInternal · Issue #1967 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
public void failed(Throwable exc, Object attachment) {
        if (exc instanceof Exception) {
          context.runOnContext((v) -> handler.handle(Future.succeededFuture()));
        } else {
          log.error("Error occurred", exc);
        }
      }

should be a failed future, a test should be added
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1968
Make the logic of NetClientImpl reusable in NetClientBase by vietj · Pull Request #1968 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1969
Elaborating dependencies in the build.gradle by chengenzhao · Pull Request #1969 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1970
Elaborating dependencies in the build.gradle by chengenzhao · Pull Request #1970 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1971
Elaborating dependencies in the build.gradle by chengenzhao · Pull Request #1971 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1972
Extend VertxLifecycleHooks to support shutdown · Issue #1972 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The VertxLifecycleHooks class does not notify the Launcher when the vertx instance is shutdown. We should add (ideas):

beforeStoppingVertx - called during the close method of vert.x (CloseHook)
afterStoppingVertx - called once vert.x has been closed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1973
Base64 was not properly handled when dealing with POJOs by pmlopes · Pull Request #1973 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1974
Fix #1972 by cescoffier · Pull Request #1974 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont that's the PR to add shutdown hooks (discussed on the mailing list). Can you review?
(related issue if #1972)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1975
Faster json parsing · Issue #1975 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
We can speed up json parsing provide in Buffer.
In fact, Jackson is a bit more efficient when the parsing is based on byte[] or InputStream (Jackson-Performance).
In addition, this will reduce intermediate String allocation.
We can use the underlying netty ByteBuf to achieve this.
Modification:
We need to add a method in Json to be able to decodeValue from Buffer.
And then we can modify toJsonObject and toJsonArray implementation in Buffer.
Result:
Better performance for json parsing based on Buffer.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1976
Faster json parsing #1975 by amannocci · Pull Request #1976 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1977
Add support for max lifetime on HttpClient pool connections · Issue #1977 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add support to HttpClient pooled connections such that a keep-alive connection is only used up to a specified maximum amount of time before being closed and recycled.  This would allow for clean recycling of IP by first removing it from DNS, such that you only need to wait for DNS TTL + HttpClient max connection life time.
The connection could either be checked when the connection is obtained from the pool or an existing/new background maintenance thread could scan through existing connections and closing any any that are too old.  While checking when obtaining the connection from the pool is sufficient, proactively closing would allow the server side to detect that all connections are closed, and thus could recycle itself earlier if it detected it didn't have any current active connections.
This is in support for thread here: https://groups.google.com/forum/#!topic/vertx/4J0RW_buAtU
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1978
Support minimum idle connections for HttpClient · Issue #1978 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the keep-alive pool within HttpClient is only increased when there is an active request and there are no extras in the pool.  When using Vertx HttpClient in a SSL WAN deployment, keeping the TCP and TLS handshake out of the way of a customer request is preferable.
In such the same way that HikariCP (https://github.com/brettwooldridge/HikariCP) supports a minimum number of idle connections.  I think ideally this is more of a percentage with a defined minimum and maximum that is dynamic in the middle.
Even if you didn't support this full model in the beginning, just supporting an easy mechanism for someone on the outside to create additional connections (w/out having to do some kind of fake request to a real URL) would allow someone to implement this entirely on their own.  This would also allow for situations where you know you are going to start failing over a ton of requests to a remote location, you could start to warm up connections.  So that when you do the switch, the first few hundred customers aren't paying all the handshake penalties.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1979
Added support for doing recursion DNS queries by jasoncopeland · Pull Request #1979 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1980
Faster json parsing by pmlopes · Pull Request #1980 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Maybe we can directly write into a buffer ?
  public static Buffer encodeToBuffer(Object obj) throws EncodeException {
    try {
      Buffer buf = Buffer.buffer();
      mapper.writeValue(new ByteBufOutputStream(buf.getByteBuf()), obj);
      return buf;
    } catch (Exception e) {
      throw new EncodeException("Failed to encode as JSON: " + e.getMessage());
    }
  }
We need also to remove the method decodeValue based on InputStream.
public static <T> T decodeValue(InputStream stream, Class<T> clazz) throws DecodeException {
I will attempt to do a little jmh benchmark to confirm performance improvement before merge.
Refer to #1975
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1981
Log4j2LogDelegateFactory and Log4jLogDelegateFactory · Issue #1981 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to use log4j2 instead of JUL.
According to
http://vertx.io/docs/apidocs/
I have to set (version 1)
vertx.logger-delegate-factory-class-name=io.vertx.core.logging.Log4jLogDelegateFactory
and according to
http://vertx.io/docs/vertx-core/java/#_using_another_logging_framework
I have to set (version 2)
vertx.logger-delegate-factory-class-name=io.vertx.core.logging.Log4j2LogDelegateFactory
which one should I take?
Please update the api-doc.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1982
Avoid NPE and call handler with Failed Future by pmlopes · Pull Request #1982 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can we have a test ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1983
MessageCodec for CollectionTypes? · Issue #1983 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have this:
public class UserCodec  implements MessageCodec<Set<User>, Set<User>> {
..
}

and want to use this codec:
vertx.eventBus().registerDefaultCodec(HashSet.class, new UserCodec());
However, I get this error:
 The method registerDefaultCodec(Class<T>, MessageCodec<T,?>) in the type EventBus is not applicable for the arguments (Class<HashSet>, UserCodec)
Are Collection-Types (Set/Map) not allowed?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1984
Mapping between JSON objects and Java objects by Codec · Issue #1984 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
According to docs we can map between json and java object by using Jackson’s ObjectMapper#convertValue():
request.bodyHandler(buff -> {
  JsonObject jsonObject = buff.toJsonObject();
  User javaObject = jsonObject.mapTo(User.class);
});

However, I have a "MessageCodec" for "User.class" so the conversion between json and object can be handled by "vertx" instead of "jackson" (faster?). I can not find a method where I can convert it explicitly by using this MessageCodec:
Actually I have do something like this:
UserCodec c = new UserCodec();
String json = c.encodeToWire(Buffer.buffer(), d);
User user =  c.decodeFromWire(0, Buffer.buffer());

Would be nice if vetx can provide something like this:

// use static method of my custom MessageCodec to get JsonObject
JsonObject jsonObject = UserCodec.toJson(User);

// use my custom MessageCodec for conversion
User javaObject = UserCodec.fromJson(json);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1985
Customize a server WebSocket's idle timeout · Issue #1985 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It would be useful if Vert.x permitted the idle timeout to be set on a per WebSocket basis.
Currently, the idle timeout for a server WebSocket can only be set via io.vertx.core.http.HttpServerOptions#setIdleTimeout, but because this is an HTTP server option it applies to all server WebSockets.  This prevents someone from specifying different WebSocket idle timeouts based on things like the URI, path, or headers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1986
HttpServer no-body responses with Transfer-Encoding: chunked · Issue #1986 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When we are trying to respond to HEAD request using HttpServer and specify Transfer-Encoding: chunked then single zero chunk is written. While RFC says:

The HEAD method is identical to GET except that the server MUST NOT
send a message body in the response (i.e., the response terminates at
the end of the header section).  The server SHOULD send the same
header fields in response to a HEAD request as it would have sent if
the request had been a GET, except that the payload header fields
(Section 3.3) MAY be omitted.  This method can be used for obtaining
metadata about the selected representation without transferring the
representation data and is often used for testing hypertext links for
validity, accessibility, and recent modification.

I tried following:
request.response()
    .setChunked(true)
    .end();

HTTP/1.1 200 OK
Transfer-Encoding: chunked

0


And:
request.response()
    .putHeader("Transfer-Encoding", "chunked")
    .end();

HTTP/1.1 200 OK
Transfer-Encoding: chunked
Content-Length: 0

0


Also I suppose Transfer-Encoding: chunked similarly can be applied to 304 (Not Modified) responses.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1987
Clustered vertx blocking vertx.eventBus().send · Issue #1987 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx-core version 3.4.1
vertx-hazelcast version 3.4.1
Here is a little example
import io.vertx.core.AbstractVerticle;
import io.vertx.core.DeploymentOptions;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;

public class MainTest {

    public static void main(String[] args) throws Exception {
        VertxOptions options = new VertxOptions();
        deploy(Vertx.vertx(options));
        // Vertx.clusteredVertx(options, res -> {
        // deploy(res.result());
        // });
    }

    public static void deploy(Vertx vertx) {
        vertx.deployVerticle(new ReceiveVerticle(), new DeploymentOptions().setInstances(1).setWorker(true), e -> {
            // when ReceiveVerticle is deployed, deploy SendVerticle
            vertx.deployVerticle(new SendVerticle(), new DeploymentOptions().setInstances(1).setWorker(true));
        });
    }

    public static class SendVerticle extends AbstractVerticle {
        @Override
        public void start() throws Exception {
            // start executing some job
            for (int i = 0; i < 5; i++) {
                // send some partial result asynchronously to ReceiveVerticle
                String message = String.valueOf(i);
                System.out.println("Sending message " + message);
                vertx.eventBus().send("receive_address", message);
                Thread.sleep(1000l);
            }
        }
    }

    public static class ReceiveVerticle extends AbstractVerticle {
        @Override
        public void start() throws Exception {
            vertx.eventBus().consumer("receive_address", e -> {
                System.out.println("Receive message " + e.body());
            });
        }
    }

}

Here is and output of this example:
Sending message 0
Receive message 0
Sending message 1
Receive message 1
Sending message 2
Receive message 2
Sending message 3
Receive message 3
Sending message 4
Receive message 4

Everything is totally fine in non clustered vertx instance.
But when I do the same with clustered vertx
        // deploy(Vertx.vertx(options));
        Vertx.clusteredVertx(options, res -> {
            deploy(res.result());
        });

I have a totally different result
Sending message 0
Sending message 1
Sending message 2
Sending message 3
Sending message 4
Receive message 0
Receive message 1
Receive message 2
Receive message 3
Receive message 4

Messages have been sent just after SendVerticle execution finish. Seems like clustered vertx blocking eventBus().send from sending messages.
So the question is: How can I achieve in clustered vertx exactly the same result as in non clustered? I need this messages to be send asynchronously.
P.S. Also the interesting thing is that: If I use .setMultiThreaded(true) to the SendVerticle.class everything is fine... But it seems like a hack and may be there is a better way to achieve what I need because it is not working exactly in clustered vertx instance. And also my SendVerticle is really not multithreaded.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1988
Add Rocker template support. · Issue #1988 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/fizzed/rocker
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1989
AsyncFileImpl.writeInternal swallows op failures by tsegismont · Pull Request #1989 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1990
Parameterized logging is not portable and may not be supported by tsegismont · Pull Request #1990 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Updated the docs to indicate that parameterized logging:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1991
Minor connection holder creation optimization by nolequen · Pull Request #1991 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Using #computeIfAbsent requires less actions and code.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1992
spelling post -> port by Sammers21 · Pull Request #1992 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thank you  @Sammers21 ! Have you signed the Eclipse CLA?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1993
spelling post -> port by Sammers21 · Pull Request #1993 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can someone suggest what is wrong in my commit?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1994
Correct java generics in CompositeFuture.all by jan-zajic · Pull Request #1994 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
CompositeFuture.any(List) and CompositeFuture.join(List) methods could also be modified
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1995
Fix all places where stackTrace was discarded by jan-zajic · Pull Request #1995 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was just about to make a very similar pull request, after an SSL exception with no stack trace got me.
I chose slightly different messages of course. My version is here: master...seanf:log-stack-traces (seanf@468dcea)
@jan-zajic I found one extra log call which had been missing its stack trace, in src/main/java/io/vertx/core/Starter.java.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1996
Calling ServerWebSocket reject is documented to return a 404, but returns 502 instead · Issue #1996 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ServerWebSocket.reject() is documented to return a HTTP 404, but we observe that it returns a 502 instead, and the source code indicates 502 as well:
      if (!ws.isRejected()) {
        // ....
      } else {
        ch.writeAndFlush(new DefaultFullHttpResponse(HTTP_1_1, BAD_GATEWAY));
      }

404 seems better than 502 to me, but certainly the docs and code should agree, and I think ideally the reject() should provide an obvious means of setting the status code.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1997
HttpServerRequestImpl Reject unfriendly Request URL · Issue #1997 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I call a url running on Vertx like:
http://localhost:8080/test?p={PARAM1}
It will cause an exception and not work. I think it should be accept the invalid charactars like "{", "}"
Refer to Jersey, jersey servlet container handle this as:
uri = new URI(ContainerUtils.encodeUnsafeCharacters(req.uri()));
So back to vertx, I suppose the io.vertx.core.http.impl.HttpUtils should adapter the unexcepted charactars.
My solution is:
HttpUtils.absoluteURI -> line#96
URI uri = new URI(req.uri());
changed to ->  URI uri = new URI(encodeUnsafeCharacters(req.uri()));
for the compatibility
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1998
Configure file resolver caching per Vertx instance · Issue #1998 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation:
Currently Vertx file resolver caching is configured globally. It is desirable to have a finer grained configuration per Vertx instance instead of a global static initialization that is defined for all Vertx instances of the JVM at the JVM initialization time.
changes:
Provide a new VertxOption that configures the file resolver caching. The default value is true unless the system property vertx.disableFileCaching is set.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/1999
Configure file resolver caching per Vertx instance - fixes #1998 by vietj · Pull Request #1999 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2000
Clarified behavior of CompositeFuture on JavaDoc by emmanuele-abbenante · Pull Request #2000 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@emmanuele-abbenante can you sign the contributor agreement and provide a sign-off PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2001
timeout wrapper for Future · Issue #2001 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I often use this method to limit future execution time.
public static <T> Future<T> withTimeOut(Vertx vertx, long millis, 
                               Future<T> future, Supplier<Future<T>> onTimeOut) {
        Future<Void> timeout = Future.future();
        vertx.setTimer(millis, l -> timeout.complete());
        return CompositeFuture.any(future, timeout).compose(cf -> {
            if (cf.succeeded(0)) {
                return Future.succeededFuture(cf.resultAt(0));
            } else {
                return onTimeOut.get();
            }
        });
}
Does it make sense to add something like this in Future interface?
interface Future<T> {
    // ...
        
    Future<T> withTimeout(Vertx vertx, long millis, Supplier<Future<T>> onTimeOut);

    // ...
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2002
Fixed typos in CONTRIBUTING.md by mithunsasidharan · Pull Request #2002 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj : I've signed the ECA after submitting the PR. Should I close this and create a new PR again ? These are typo fixes. Kindly advice. Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2003
Fixed typos in CONTRIBUTING.md by mithunsasidharan · Pull Request #2003 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj : Can you review this PR ? Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2004
#1996 Fixed ServerWebSocket reject to return 404 by mithunsasidharan · Pull Request #2004 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Also, imported the few HttpResponseStatus and single HttpVersion from netty handler instead of all (*)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2005
provide "putHeader" for HttpClientOptions and RequestOptions · Issue #2005 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
With "HttpClientOptions" we can set for example "setKeepAlive" or "setTryUseCompression" which results in putting appropriate headers for all requests . Would be nice to provide a  "putHeader"-Method to put common headers for all requests.
For example, I want to set this:
RequestOptions reqOpt = new RequestOptions().setHeader("Connection", "keep-alive").setHeader("Accept-Encoding", "gzip, deflate").setHeader("DNT", "1");
or this:
HttpClientOptions options = new HttpClientOptions()
				.setKeepAlive(true)
.setHeader("Accept-Encoding", "gzip, deflate").setHeader("DNT", "1");

With this I can reuse my headers for different requests.
Both, "HttpClientOptions" and "RequestOptions" has no "putHeader"-Method. So I am forced to write my headers within each "HttpClientRequest" which can not be reused.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2006
Clarified behavior of CompositeFuture on JavaDoc. by emmanuele-abbenante · Pull Request #2006 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thank you  @emmanuele-abbenante
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2007
Packet lost in Http1xOrHttp2Handler · Issue #2007 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If we send an http request beginning with "P" (i.e. a POST, PATCH or PUT) split across two packets where the first packet has data length of 1 byte and the second packet contains the rest of the request, then the Http1xOrHttp2Handler reads the 1 byte packet, and then throws it away.
When the second packet comes in it does not aggregate the 1 byte that it previously read with the second packet, resulting in the method being received as "OST", "ATCH", or "UT".
A workaround is to disable the Http1xOrHttp2Handler with:
System.setProperty("vertx.disableH2c", "true");
Reproducer:
  @Test
  public void test1BytePost() throws Exception {

    // The test will pass if we disable the http2 decoder:
    //  System.setProperty("vertx.disableH2c", "true");


    CountDownLatch latch1 = new CountDownLatch(1);
    server.requestHandler(req -> {
      assertEquals("POST", req.rawMethod());
      latch1.countDown();
    });

    String fullRequest = "POST /whatever HTTP/1.1\r\n\r\n";

    CountDownLatch latch2 = new CountDownLatch(1);
    server.listen(onSuccess(s -> {
      latch2.countDown();
    }));
    latch2.await();

    try (Socket sock = new Socket("localhost", 8080)) {

      byte[] rawData = fullRequest.getBytes();
      System.out.println("total Len = " + rawData.length);

      // send 1 byte packet
      sock.getOutputStream().write(rawData, 0, 1);
      sock.getOutputStream().flush();

      Thread.sleep(750);

      // send the rest
      sock.getOutputStream().write(rawData, 1, rawData.length - 1);
      sock.getOutputStream().flush();
    }

    latch1.await();

  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2008
Packet lost in Http1xOrHttp2Handler - fixes #2007 by vietj · Pull Request #2008 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks for reporting !
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2009
Handle response for head method by vietj · Pull Request #2009 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you resolve the conflicts? Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2010
Enable `permessage-deflate` and `deflate-frame` compression on WebSockets · Issue #2010 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Enabling compression on WebSockets is a very desirable feature for applications with a lot of repetitive data over WS. And modern browsers support WS compression.
Vert.x uses Netty 4.1 which has support for permessage-deflate and deflate-frame compression extensions for WebSockets for its WS implementation, yet Vert.x does not give one any mean to enable them (or at least I haven’t seen a way to do it).
Is Vert.x using Netty’s implementation of WebSocket, or does it make its own implementation? Would it be possible to use Netty’s compression extensions?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2011
better error reporting of application logic within stacktrace · Issue #2011 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have some code executed within a vertx:
@Override
public void start(Future<Void> fut) throws IOException {

vertx.setPeriodic(period, l -> {
httpClient
.requestAbs(HttpMethod.GET, uri)
.handler(response -> {
  response.bodyHandler(totalBuffer -> {
// in this place I call my application logic
..
.exceptionHandler(e -> {		
log.error("Received exception: {} | {}", e.getMessage(), e.getCause());
e.printStackTrace();
})
.end();
});

and when starting the vertx then this stacktrace occurs:
[INFO] (20:03:06.377) vert.x-eventloop-thread-0 (MyVertx:151) | Received exception: Connection was closed | null
[INFO] io.vertx.core.VertxException: Connection was closed
[INFO] 	at io.vertx.core.http.impl.ClientConnection.handleClosed(ClientConnection.java:408)
[INFO] 	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:335)
[INFO] 	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:193)
[INFO] 	at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:97)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225)
[INFO] 	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75)
[INFO] 	at io.netty.handler.codec.http.HttpContentDecoder.channelInactive(HttpContentDecoder.java:205)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225)
[INFO] 	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:417)
[INFO] 	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:360)
[INFO] 	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:325)
[INFO] 	at io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:256)
[INFO] 	at io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:220)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225)
[INFO] 	at io.netty.handler.logging.LoggingHandler.channelInactive(LoggingHandler.java:167)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225)
[INFO] 	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:360)
[INFO] 	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:325)
[INFO] 	at io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:861)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:225)
[INFO] 	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1329)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:246)
[INFO] 	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:232)
[INFO] 	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:908)
[INFO] 	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:744)
[INFO] 	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
[INFO] 	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:379)
[INFO] 	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:354)
[INFO] 	at io.netty.util.concurrent.SingleThreadEventExecutor.confirmShutdown(SingleThreadEventExecutor.java:678)
[INFO] 	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:455)
[INFO] 	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
[INFO] 	at java.lang.Thread.run(Thread.java:745)

After searching, I found the reason why my vertx throws this stacktrace: Within my application logic, I have called MyEnums.valueOf("TEST") which should return "MyEnums.TEST". However, I did not have the Enum "TEST" declared before, so vertx closed with a stacktrace. After putting the Enum "TEST" within my MyEnums, vertx starts normal and it works.
The bad thing is, why does the stacktrace does not show the error of my application logic?
Because of the event-loop? Would be nice if I can trace my errors within the stacktrace.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2012
Race condition in AsyncFileImpl writesOutstanding · Issue #2012 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If an AsyncFileImpl is written to from a thread different to the context that created then the long counter writesOutstanding can get into an invalid state. This is because the counter is updated from both the caller's thread and also on the context when a write is complete.
Fix is to use an AtomicLong for writesOutstanding:
https://gist.github.com/purplefox/723fa69a1330fb4f4f74d4a5dd5e6658
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2013
H2C upgrade failure HTTP/1.x response should not be processed by the server handler · Issue #2013 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2014
H2C upgrade should set the HTTP/1.x host header · Issue #2014 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2015
H2c fixes by vietj · Pull Request #2015 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks for checking
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2016
Handle message that's throwable by bbyk · Pull Request #2016 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think the user should always give a message in addition of the throwable rather, or the Logger method should be overloaded with a Throwable parameter.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2017
Fix race condition with writesOutstanding when is used from non Vert.… by vietj · Pull Request #2017 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
one of you or anyone else is fine for review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2018
provide new property for sequential work of "CompositeFuture.all" · Issue #2018 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Please provide a optional property for "CompositeFuture.all" which makes the Composite of a list to run sequential (from first index to last index of the list) or in parallel (default).
For example:
CompositeFuture.all(listOfFutures, Composite.SEQUENTIAL)
.setHandler(r->{
			log.debug("step 1 completed: {}", step1.isComplete());
			log.debug("step 2 completed: {}", step2.isComplete());
	    });;


This eliminates the burden to use chaining compose with callback hell..
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2019
Missing Test for AsyncMap<X,Buffer> in ClusterWideMapTest.java by tsegismont · Pull Request #2019 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1409
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2020
Expose AsyncMap keys, values and entries · Issue #2020 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, AsyncMap lets you get/put/remove/replace entries asynchronously.
In some cases, you also need the ability to get the keys, values or entries (see @cescoffier 's comment in vert-x3/vertx-infinispan#35 (comment))
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2021
Expose AsyncMap keys, values and entries by tsegismont · Pull Request #2021 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Please do not merge yet
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2022
Exception running project with 3.4.2 · Issue #2022 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was just running a vertx project we have with the new 3.4.2 version and I got this exception:
startup failed:
General error during class generation: io.vertx.groovy.core.VertxPropertiesModuleFactory cannot be cast to org.codehaus.groovy.runtime.m12n.PropertiesModuleFactory
java.lang.ClassCastException: io.vertx.groovy.core.VertxPropertiesModuleFactory cannot be cast to org.codehaus.groovy.runtime.m12n.PropertiesModuleFactory
at org.codehaus.groovy.runtime.m12n.StandardPropertiesModuleFactory.newModule(StandardPropertiesModuleFactory.java:41)
at org.codehaus.groovy.runtime.m12n.ExtensionModuleScanner.scanExtensionModuleFromProperties(ExtensionModuleScanner.java:79)
at org.codehaus.groovy.runtime.m12n.ExtensionModuleScanner.scanExtensionModuleFromMetaInf(ExtensionModuleScanner.java:74)
at org.codehaus.groovy.runtime.m12n.ExtensionModuleScanner.scanClasspathModules(ExtensionModuleScanner.java:56)
at org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport$ExtensionMethodCache.getExtensionMethods(StaticTypeCheckingSupport.java:1984)
at org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport.findDGMMethodsForClassNode(StaticTypeCheckingSupport.java:208)
at org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport.findDGMMethodsForClassNode(StaticTypeCheckingSupport.java:194)
at org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport.findDGMMethodsByNameAndArguments(StaticTypeCheckingSupport.java:923)
at org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport.findDGMMethodsByNameAndArguments(StaticTypeCheckingSupport.java:910)
at org.codehaus.groovy.transform.sc.transformers.BooleanExpressionTransformer$OptimizingBooleanExpression.visit(BooleanExpressionTransformer.java:155)
at org.codehaus.groovy.classgen.asm.StatementWriter.writeIfElse(StatementWriter.java:284)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitIfElse(AsmClassGenerator.java:586)
at org.codehaus.groovy.ast.stmt.IfStatement.visit(IfStatement.java:43)
at org.codehaus.groovy.classgen.asm.StatementWriter.writeBlockStatement(StatementWriter.java:85)
at org.codehaus.groovy.classgen.asm.sc.StaticTypesStatementWriter.writeBlockStatement(StaticTypesStatementWriter.java:65)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitBlockStatement(AsmClassGenerator.java:570)
at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:71)
at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:104)
at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:115)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitStdMethod(AsmClassGenerator.java:434)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructorOrMethod(AsmClassGenerator.java:387)
at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructor(ClassCodeVisitorSupport.java:122)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructor(AsmClassGenerator.java:506)
at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1077)
at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:53)
at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:233)
at org.codehaus.groovy.control.CompilationUnit$17.call(CompilationUnit.java:825)
at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1065)
at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:603)
at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:581)
at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:558)
at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:537)
at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:167)
at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:54)
at org.gradle.api.internal.tasks.compile.daemon.CompilerDaemonServer.execute(CompilerDaemonServer.java:55)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:364)
at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)
at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:748)
1 error
Is there any breaking change in the new version?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2023
Remove LICENSE file with MIT license text. by jpopelka · Pull Request #2023 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think the file licensed under MIT is https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/cgbystrom/FlashPolicyHandler.java#L45, borrowed from https://github.com/cgbystrom/netty-tools.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2024
minor connection holder creation optimization by nolequen · Pull Request #2024 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No useless allocation, when trying to put connection holder to the connections map.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2025
minor connection holder creation optimization by nolequen · Pull Request #2025 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No useless allocation, when trying to put connection holder to the connections map.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2026
Http2Settings.hashCode() does not conform to contract. · Issue #2026 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx Version -- 3.4.2
The implementation of Http2Settings.hashCode() does not conform to the contract where if 2 instances return true from equals they must have the same hash code value.
The primary issue is that it uses Object.hashCode() as its base value.  It also does not include a hash of headerTableSize in its value (this property is checked by equals), though strictly speaking the contract does not require this.
The following groovy script shows the issue (the second assert fails):
import io.vertx.core.http.Http2Settings

def settings1 = new Http2Settings()
def settings2 = new Http2Settings()
assert settings1.equals(settings2)
assert settings1.hashCode() == settings2.hashCode()
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2027
HttpServerRequest exception handler is not called when the connection is closed · Issue #2027 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpServerRequest extends ReadStream<Buffer>. When there is an ongoing file upload and the connection closes abruptly, the exception handler on the HttpServerRequest should be called to signal that the stream an error occured
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2028
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2029
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2030
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2031
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2032
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2033
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2034
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2035
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2036
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2037
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2038
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2039
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2040
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2041
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2042
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2043
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2044
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2045
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2046
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2047
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2048
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2049
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2050
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2051
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2052
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2053
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2054
Vertx-web-js : SockJSHandler error while calling bridge function · Issue #2054 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm on Windows and tried to launch a server.js in command line and in IDE with maven dependencies, but both failed with the same error.
Here is the server:
var Router = require("vertx-web-js/router");
var SockJSHandler = require("vertx-web-js/sock_js_handler");
var router = Router.router(vertx);

var options = {};
var sockJSHandler = SockJSHandler.create(vertx).bridge(options);
router.route("/eventbus/*").handler(sockJSHandler.handle);
The command lines (using vertx 3.4.2 full version):
>java -version
java version "1.8.0_40"
Java(TM) SE Runtime Environment (build 1.8.0_40-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25, mixed mode)

>vertx run server.js
javax.script.ScriptException: TypeError: Cannot call undefined in vertx-web-js/sock_js_handler.js at line number 87
        at jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:455)
        at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:439)
        at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptE
ngine.java:401)
       ...

The server is perfectly working until I use .bridge(options);.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2055
Trivial javadoc corrections in AbstractVerticle by oldmud0 · Pull Request #2055 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
applied thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2056
Build cleanups by jponge · Pull Request #2056 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
generated converters should not be removed from SCM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2057
Build maven cleanups by jponge · Pull Request #2057 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2058
CompositeFuture forces you to use raw types · Issue #2058 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There are currently three methods in CompositeFuture which force you to use raw types:

io.vertx.core.CompositeFuture.all(List<Future>)
io.vertx.core.CompositeFuture.any(List<Future>)
io.vertx.core.CompositeFuture.join(List<Future>)

The causes compiler warnings to appear all over the place:

It should be possible to rewrite the method signature to e.g. io.vertx.core.CompositeFuture.all(List<Future<?>>), which solves the raw types warning, but is not compatible with the previous declaration and this would break compatibility.
However there could be be a set of workarounds. One could be simply adding new methods like e.g. allOf. Or putting everything in a new interface TypedCompositeFuture, which would avoid the collision.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2059
WebSocket request options not honored · Issue #2059 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient client = vertx.createHttpClient(new HttpClientOptions());

    RequestOptions options = new RequestOptions()
      .setHost("ws.cex.io")
      .setPort(443)
      .setSsl(true)
      .setURI("/ws");

    client.websocket(options, ws -> {
    });
Connection fails with because HTTP upgrade request is sent as clear text.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2060
ConnectionManager: Connection pool always reached max wait queue size · Issue #2060 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
My project use webclient to make http request.  When under a large number of request running for hours, it's always reach a wrong state at end, that no request will send indeed while always logs with: Connection pool reached max wait queue size.
here is my code:
Node.java
I dumped the stack and found the connCount is equals maxPoolSize while no connect available. so I think maybe the Http1xPool can‘t create new connection because connCount is not really response to the connection pool size.
here is some stacktrace:
116310 [vert.x-eventloop-thread-2] INFO  org.etagate.app.node.Node - auth, GET http://172.21.9.26:8080/auth/shortstring
116310 [globalEventExecutor-1-1] WARN  i.n.util.concurrent.DefaultPromise - An exception was thrown by io.vertx.core.net.impl.ChannelProvider$$Lambda$85/1186466417.operationComplete()
java.lang.IllegalStateException: Uh oh! Event loop context executing with wrong thread! Expected null got Thread[globalEventExecutor-1-1,5,main]
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:316)
        at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:193)
        at io.vertx.core.http.impl.ConnectionManager$ConnQueue.connectionFailed(ConnectionManager.java:373)
        at io.vertx.core.http.impl.ConnectionManager$ConnQueue.access$1600(ConnectionManager.java:197)
        at io.vertx.core.http.impl.ConnectionManager$ChannelConnector.lambda$connect$2(ConnectionManager.java:549)
        at io.vertx.core.net.impl.ChannelProvider.lambda$connect$0(ChannelProvider.java:42)
        at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:507)
        at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:481)
        at io.netty.util.concurrent.DefaultPromise.access$000(DefaultPromise.java:34)
        at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:431)
        at io.netty.util.concurrent.GlobalEventExecutor$TaskRunner.run(GlobalEventExecutor.java:233)
        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)
        at java.lang.Thread.run(Thread.java:745)

The reason cause the fail of create connection.
116230 [vert.x-acceptor-thread-0] WARN  i.n.channel.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in t
he pipeline did not handle the exception.
java.io.IOException: Too many open files
        at sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:422)
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:250)
        at io.netty.util.internal.SocketUtils$5.run(SocketUtils.java:110)
        at io.netty.util.internal.SocketUtils$5.run(SocketUtils.java:107)
        at java.security.AccessController.doPrivileged(Native Method)
        at io.netty.util.internal.SocketUtils.accept(SocketUtils.java:107)
        
The following is my guess.
When call createNewConnection, the connCount++， but the connection create failed，then function connectionFailed was called where connectionClosed() will be executed in context.executeFromIO, so connCount can decrease back.
context.executeFromIO will check the current Thread ，if not VertxThread， cause an exception， that may lead to a result: the connectionClose would not be called and connCount can not decrease back，This means that the connCount will increased without add a new connection in the connection pool, at last, no connection can be poll, no connection will be create, all waiter go to the queue.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2061
Remove useless classes by vietj · Pull Request #2061 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
removing a bunch of unfinished classes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2062
overriding clusterHost and clusterPort on start by zyclonite · Pull Request #2062 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can we get this documented ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2063
Let users connect with absolute websocket urls · Issue #2063 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As a matter of usability, the HttpClient should let users connect with absolute websocket urls (ws:// or wss://)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2064
HttpServerRequest exception handler is not called when conn closed by vietj · Pull Request #2064 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it's a small PR, quick to review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2065
Vert.x ReadStream hangs in paused if WriteStream fails · Issue #2065 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have the following usecase for a vert.x aplication:

write a REST handler for a GET request
in this handler copy data from a ReadStream onto the response

This looked straight forward, in the handler I would create the ReadStream and then use a Pump to pipe the stream onto the response (WriteStream).
I noticed however that it can happen that the client closes the HTTP connection to my handler while the pump is still active. In this situation I had expected an exception on the WriteStream instance to occurs. However this is not the case, instead the WriteStream#writeQueueFull method returns "true" which sets the ReadStream into paused mode. It now waits for a drain event, but this event is never sent, because the write connection has been closed. The result is that over time the number of open (paused) ReadStreams grows, eventually generating a leak.
What is the correct way to handle this situation?
The first aspect that looks strange is that there is no exception on the write stream. But even if I were able to figure out the error situation (e.g. by listening on the close event on the response), what am I supposed to do with the ReadStream? It cannot be canceled but it also cannot stay open. The approach I can think of is to pump its content into a nil stream (i.e. consume it but ignore its content).
Overall this makes the complete pumping process pretty complicated.
The example below shows a simple testcase to reproduce the issue. The main method makes a request against a verticle and closed the connection immediately.
On the server (i.e. in the verticle) no exception is triggered, instead the ReadStream is locked in paused state.
The output of the sample code is:
request
false
starting to pipe ... false
response closed: false
writeQueueFull false
closed ...
writeQueueFull true
pause: 1
response is closed

Any suggestions are highly appreciated.

package com.ibm.wps.test.vertx;

import java.io.File;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.concurrent.CompletableFuture;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.core.Handler;
import io.vertx.core.Vertx;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.file.AsyncFile;
import io.vertx.core.file.OpenOptions;
import io.vertx.core.http.HttpServer;
import io.vertx.core.http.HttpServerResponse;
import io.vertx.core.streams.Pump;
import io.vertx.core.streams.ReadStream;
import io.vertx.core.streams.WriteStream;

public class CancellationTest {

private static final class ReadStreamProxy implements ReadStream<Buffer> {

	private int countPause;

	private final ReadStream<Buffer> delegate;

	private ReadStreamProxy(final ReadStream<Buffer> aDelegate) {
		delegate = aDelegate;
	}

	@Override
	public ReadStream<Buffer> endHandler(final Handler<Void> endHandler) {
		delegate.endHandler(endHandler);
		return this;
	}

	@Override
	public ReadStream<Buffer> exceptionHandler(final Handler<Throwable> handler) {
		delegate.exceptionHandler(handler);
		return this;
	}

	@Override
	public ReadStream<Buffer> handler(final Handler<Buffer> handler) {
		delegate.handler(handler);
		return this;
	}

	@Override
	public ReadStream<Buffer> pause() {
		countPause++;
		delegate.pause();
		System.out.println("pause: " + countPause);
		return this;
	}

	@Override
	public ReadStream<Buffer> resume() {
		countPause--;
		delegate.resume();
		System.out.println("resume: " + countPause);
		return this;
	}

}

private static final class TestVerticle extends AbstractVerticle {

	private HttpServer server;

	@Override
	public void start(final Future<Void> startFuture) throws Exception {

		final String data = new File(CancellationTest.class.getResource("data.txt").toURI()).getCanonicalPath();
		System.out.println("data " + data);

		server = vertx.createHttpServer();
		server.requestHandler(req -> {
			System.out.println("request");

			final HttpServerResponse resp = req.response();
			System.out.println(resp.closed());
			resp.exceptionHandler(th -> {
				System.out.println("exception from response " + th);
			});
			resp.closeHandler(v -> {
				System.out.println("response is closed");
			});
			resp.setChunked(true);

			vertx.setTimer(100, l -> {
				System.out.println("starting to pipe ... " + resp.closed());

				final OpenOptions opts = new OpenOptions();
				opts.setWrite(false);
				opts.setRead(true);
				vertx.fileSystem().open(data.toString(), opts, fileRes -> {
					final AsyncFile file = fileRes.result();
					file.exceptionHandler(ex -> {
						System.out.println("file exception " + ex);
					});
					file.endHandler(v -> {
						System.out.println("file ended");
					});
					
					System.out.println("response closed: " + resp.closed());

					pipe(file, resp);
				});
			});
		});

		server.listen(8080, result -> {
			if (result.failed()) {
				startFuture.fail(result.cause());
			} else {
				startFuture.complete();
			}
		});
	}
}

private static final class WriteStreamProxy implements WriteStream<Buffer> {

	private final WriteStream<Buffer> delegate;

	private WriteStreamProxy(final WriteStream<Buffer> aDelegate) {
		delegate = aDelegate;
	}

	@Override
	public WriteStream<Buffer> drainHandler(final Handler<Void> handler) {
		delegate.drainHandler(handler);
		return this;
	}

	@Override
	public void end() {
		delegate.end();
	}

	@Override
	public WriteStream<Buffer> exceptionHandler(final Handler<Throwable> handler) {
		delegate.exceptionHandler(handler);
		return this;
	}

	@Override
	public WriteStream<Buffer> setWriteQueueMaxSize(final int maxSize) {
		delegate.setWriteQueueMaxSize(maxSize);
		return this;
	}

	@Override
	public WriteStream<Buffer> write(final Buffer data) {
		delegate.write(data);
		return this;
	}

	@Override
	public boolean writeQueueFull() {
		final boolean result = delegate.writeQueueFull();
		System.out.println("writeQueueFull " + result);
		return result;
	}

}

public static void main(final String[] args) throws Exception {
	
	System.out.println(System.getProperties());


	final CompletableFuture<Void> sync = new CompletableFuture<Void>();

	final Vertx vertx = Vertx.vertx();
	vertx.deployVerticle(new TestVerticle(), result -> {
		try {
			final URL url = new URL("http://localhost:8080/");
			final HttpURLConnection conn = (HttpURLConnection) url.openConnection();
			conn.connect();
			final InputStream is = conn.getInputStream();
			is.close();
			conn.disconnect();
			System.out.println("closed ...");
			sync.complete(null);
		} catch (final Throwable th) {
			sync.completeExceptionally(th);
		}
	});

	sync.get();
	vertx.close();
}

private static final void pipe(final ReadStream<Buffer> aRead, final WriteStream<Buffer> aWrite) {
	
	aWrite.exceptionHandler(ex -> {
		new Exception().printStackTrace();
		System.out.println("write stream exception " + ex);
	});

	
	Pump.pump(new ReadStreamProxy(aRead), new WriteStreamProxy(aWrite)).start();
}

}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2066
A few improvements in websocket rejection: the ServerWebSocket#reject… by vietj · Pull Request #2066 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2067
HttpClientResponseImpl doesnt log when no handler is set · Issue #2067 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When HttpClientResponseImpl#handleException is called while treating a http response, if an handler was not set, the exception is completely hidden from the user. Please compare
io.vertx.core.http.impl.HttpClientRequestBase#handleException
    synchronized (getLock()) {
      cancelOutstandingTimeoutTimer();
      exceptionOccurred = t;
      if (exceptionHandler != null) {
        exceptionHandler.handle(t);
      } else {
        log.error(t);
      }
    }
  }

with
io.vertx.core.http.impl.HttpClientResponseImpl#handleException
    synchronized (conn) {
      if (exceptionHandler != null) {
        exceptionHandler.handle(e);
      }
    }
  }

please see this repo for a test case:
https://github.com/j040p3d20/vertx-response-handler-test
In our case, after the body handler has completed we continue with another future to do more work but
there is a nullpointer exception and we dont reach that code and couldnt understand why because there was no trace of the exception anywhere.
Other than this, thank you for the great work, we love to work with vertx at Akio.com :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2068
A couple of fixes on http exception handler called on close · Issue #2068 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Make the HttpServerResponse#exceptionHandler is called when the response is closed before the end of the stream.
Avoid the HttpClientRequest#exceptionHandler to be notified twice when connection is closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2069
A couple of fixes on http exception handler called on close - fixes #… by vietj · Pull Request #2069 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2070
Setting number of requests sent from an HTTP handler to the event bus · Issue #2070 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
can you please help me figure out how to increase the number of requests processed in parallel by a particular HTTP handler? In all my tests it seems to be limited to 5 regardless of the size of the event loop or the worker pool.
I have an http server:
public class MyHttpServer {
	
	private static final String DESTINATION = "destination";

	static class MyVerticle extends AbstractVerticle {
		public void start() throws Exception {
			vertx.eventBus().consumer(DESTINATION, message -> {
				try {
					Thread.currentThread().sleep(300);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
				message.reply("response to " + message.body());				
			});
		}
	}

	public static void main(String[] args) {
		Vertx vertx = Vertx.vertx(new VertxOptions().setWorkerPoolSize(20));
		
		final DeploymentOptions deploymentOptionsAuth = new DeploymentOptions().setWorkerPoolName("mypool")
	            .setWorkerPoolSize(20).setWorker(true).setMultiThreaded(true);
		vertx.deployVerticle(new MyVerticle(), deploymentOptionsAuth);
		
		Router restAPI = Router.router(vertx);		
		restAPI.get("/*").handler(rc -> {
			System.out.println("sending to event bus");
			vertx.eventBus().send(DESTINATION, rc.request().path(), ar -> {
				System.out.println("received response from event bus");
				rc.response().setStatusCode(200).end("---myhttp-response---" + ar.result().body() + " ** " + rc.request().path() + "---myhttp-response---");
			});			
		});
		vertx.createHttpServer().requestHandler(restAPI::accept).listen(8084);
		System.out.println("listening");
	}
}
When sending many requests in parallel I see that at most 5 of them are dispatched to the verticle via the event bus in parallel. It seems like a first response from the verticle/event bus must be received before the next request will be sent to the event bus/verticle. I.e. I see the output like this:
listening
sending to event bus
sending to event bus
sending to event bus
sending to event bus
sending to event bus
received response from event bus
received response from event bus
received response from event bus
received response from event bus
received response from event bus
sending to event bus
sending to event bus
sending to event bus
sending to event bus
sending to event bus
received response from event bus
sending to event bus

The client used to run the test is like this:
Vertx vertx = Vertx.vertx();
 
final WebClient wc = WebClient.create(vertx,
	new WebClientOptions().setDefaultHost("localhost").setDefaultPort(8084));

for (int i = 0; i < 100; i++) {
	new Thread(() -> {
		System.out.println("sending");
		wc.get("/abc").send(ar -> {
			if (ar.succeeded()) {
				HttpResponse<Buffer> response = ar.result();
				System.out.println(response.bodyAsString());
			} else {
				ar.cause().printStackTrace();
			}				
		});
	}).start();			
}
Thanks a lot in advance
Boris
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2071
Remove some constraints on context data for module implementers by tsegismont · Pull Request #2071 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The user API for context data is unchanged.
However module implementers will be able to use:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2072
Added a toJson method to DeliveryOptions by tsegismont · Pull Request #2072 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1502
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2073
Allow AsyncFile's to be opened in append mode by tsegismont · Pull Request #2073 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1486
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2074
Vertx.clusteredVertx() handler not called if cannot bind to address by tsegismont · Pull Request #2074 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #1375
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2075
HttpClientResponseImpl doesnt log when no handler is set by tsegismont · Pull Request #2075 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #2067
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2076
Remove ExtendedClusterManager interface by tsegismont · Pull Request #2076 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a note about the deprecation, i.e what the developer should be aware of to migrate from this interface, also please specify when (version) the interface will be removed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2077
Mismatch between documentation and implementation for LocalMap by tsegismont · Pull Request #2077 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
👍
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2078
SSLSession accessor support to get access to SSL session information by dachaac · Pull Request #2078 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Should Vert.x use the @Deprecated annotation (in addition to the doclet) ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2079
JSON message codecs creates unnecessary intermediate String · Issue #2079 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JsonObjectMessageCodec and JsonArrayMessageCodec use intermediate String for encoding and decoding. They should directly encode to and decode from Buffer.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2080
JSON message codecs creates unnecessary intermediate String by tsegismont · Pull Request #2080 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #2079
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2081
[Feature] Propagating stack traces through the event loop and worker threads by fzakaria · Pull Request #2081 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2082
Deploy verticles with a supplier or a class by tsegismont · Pull Request #2082 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2083
WebSocket request options not honored by tsegismont · Pull Request #2083 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #2059
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2084
Let users connect with absolute websocket urls by tsegismont · Pull Request #2084 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Resolves #2063
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2085
BufferImpl should have a public noarg constructor to be used in AsyncMap by tsegismont · Pull Request #2085 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Otherwise cluster managers can't create an instance after deserializing.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2086
Weird connection state if response body sent with NO_CONTENT · Issue #2086 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Here is some snippet of example code
response.setStatusCode(HttpResponseStatus.NO_CONTENT);
                JsonObject json = new JsonObject();
                json.put("hello", "world");
                response.end(json.encodePrettily());

This seems to make subsequent connections hang or unexpected results.
Vert.x should probably just throw an exception if a body is sent to the response when the status code is NO_CONTENT ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2087
Add error log output for cluster connection failures by Jotschi · Pull Request #2087 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM, @tsegismont WDYT ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2088
IllegalStateException when using sendStream · Issue #2088 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Vert.x 3.4.2 with WebClient
I've got issue with using sendStream to forward request to another service. It results in IllegalStateException: Request has already been read
Code to reproduce:
public class Service1 extends AbstractVerticle {
    @Override
    public void start() throws Exception {
        Router router = Router.router(vertx);
        router.post("/").handler(routingContext -> {
            WebClient webClient = WebClient.create(vertx);
            webClient.postAbs("http://localhost:10001/")
                    .sendStream(routingContext.request(), ar -> System.out.println("R: "+ar.result()));
        });
        vertx.createHttpServer()
                .requestHandler(router::accept)
                .listen(10000);
    }
}

Result:
Aug 03, 2017 5:04:23 PM io.vertx.core.impl.ContextImpl
SEVERE: Unhandled exception
java.lang.IllegalStateException: Request has already been read
 at io.vertx.core.http.impl.HttpServerRequestImpl.checkEnded(HttpServerRequestImpl.java:426)
 at io.vertx.core.http.impl.HttpServerRequestImpl.handler(HttpServerRequestImpl.java:206)
 at io.vertx.ext.web.impl.HttpServerRequestWrapper.handler(HttpServerRequestWrapper.java:42)
 at io.vertx.ext.web.impl.HttpServerRequestWrapper.handler(HttpServerRequestWrapper.java:19)
 at io.vertx.core.streams.impl.PumpImpl.stop(PumpImpl.java:97)
 at io.vertx.core.streams.impl.PumpImpl.stop(PumpImpl.java:42)
 at io.vertx.ext.web.client.impl.HttpRequestImpl.lambda$send$12(HttpRequestImpl.java:342)
 at io.vertx.core.http.impl.HttpServerRequestImpl.handleEnd(HttpServerRequestImpl.java:406)
 at io.vertx.core.http.impl.ServerConnection.handleEnd(ServerConnection.java:297)
 at io.vertx.core.http.impl.ServerConnection.processMessage(ServerConnection.java:441)
 at io.vertx.core.http.impl.ServerConnection.handleMessage(ServerConnection.java:131)
 at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:673)
 at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:580)
 at io.vertx.core.http.impl.VertxHttpHandler.lambda$channelRead$0(VertxHttpHandler.java:71)
 at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:335)
 at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:193)
 at io.vertx.core.http.impl.VertxHttpHandler.channelRead(VertxHttpHandler.java:71)
 at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:122)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
 at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341)
 at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293)
 at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
 at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341)
 at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
 at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)
 at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:129)
 at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)
 at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:565)
 at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:479)
 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)
 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
 at java.lang.Thread.run(Thread.java:748)

Link to post at Google Group: https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!msg/vertx/srXkOOK8tj0/SXPuo7J8AAAJ
Thanks,
Maciek.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2089
Improve the CPU core detection on linux when executed in cgroups (Doc… by cescoffier · Pull Request #2089 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think actually we need a CQ for this contribution
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2090
Deploy verticles with a supplier or a class by tsegismont · Pull Request #2090 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj reworked after your review. PTAL
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2091
Allow to set null handlers on Http(Client/Server)(Request/Response) objects after completion · Issue #2091 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: setting an handler on these objects after they are ended will throw an exception to signal an error, however it can be desirable to set a null handler after completion (for instance stopping a pump will set null handlers) and in this situation we should be more tolerant and accept setting null handlers.
changes: update various handler setter method to accept null values after completion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2092
Are there any plans on supporting Clojure in Vert.x 3? · Issue #2092 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello!
I have some Clojure code that I would like to do some basic web stuff with.  I seem to recall in the past Vert.X supported it as a first class citizen...Is there a plan to bring that back?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2093
FutureSequence · Issue #2093 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I found it arduous to get the result from a call to CompositeFuture.all.
I've written a class in kotlin which allows me to easily get a result out of a list of futures (similar to scala Future.sequence).  The main feature I wanted here was to be able to call .map(mapper: List<T> -> R) or .compose(mapper: List<T> -> Future<R>) on a future created from a list of Future<T>, rather than  .map(mapper: CompositeFuture -> R).
Is this something for which it would be worthwhile for me formalize, test, convert from kotlin, and create an MR?  I find this functionality extremely useful, but I imagine it may have been intentionally foregone due to performance and memory implications.
source
Kotlin snippet:
class FutureSequence<T>(val futures: List<Future<T>>): Future<List<T>>, Handler<AsyncResult<List<T>>> {
    ...
    init { //mostly copied from CompositeFuture.java
          futures.forEachIndexed { i: Int, f: Future<T> ->
              f.setHandler { ar ->
                  var handler: Handler<AsyncResult<List<T>>>? = null
                  println("completed future $i")
                  if(ar.succeeded())  {
                      synchronized(this) {
                          count ++
                          results.set(i, Option.Some(ar))
                          if(!isComplete && count == futures.size) {
                              handler = setComplete()
                          }
                      }
                  } else {
                      synchronized(this) {
                          if(!isComplete) {
                              handler = setFailed(ar.cause())
                          }
                      }
                  }

                  println("ar $i, succeeded: ${ar.succeeded()}, handler: $handler, completed: $completed")
                  handler?.let{ it.handle(resultsToResult()) }
              }
          }
        if(futures.isEmpty()) {
            setComplete()
        }
    }

    //This method is the real meat
    private fun resultsToResult(): AsyncResult<List<T>>? {
        return results.fold<Option<AsyncResult<T>>, Option<AsyncResult<List<T>>>>(Option.None as Option<AsyncResult<List<T>>>) {
            aggOpt: Option<AsyncResult<List<T>>>, arOpt: Option<AsyncResult<T>> ->
            when(aggOpt) {
                is Option.None -> arOpt.map { it.map { listOf(it)}}
                else -> aggOpt.filter { it.succeeded() }
                        .flatMap { aggRes ->
                            arOpt.filter { it.succeeded()}
                                    .map { ar -> aggRes.map { it + ar.result() } }
                                    .orElse { arOpt.map {it.map{it -> emptyList<T>()}} } }
                        .orElse { aggOpt }

            }
        }.orNull()
    }

    companion object {
        fun <T> noHandler(): Handler<AsyncResult<List<T>>> = Handler { }
    }

    override fun result(): List<T>? {
        return if(completed && cause == null) resultsToResult()?.result() else null
    }
    //most methods copy + paste CompositeFuture besides signature
    ....
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2094
Getting corresponding sharred map by nolequen · Pull Request #2094 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it looks ok to me, however I think we should honour the TTL with a timer and make sure it works correctly.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2095
Add the possibility to read forms atrributes on the fly · Issue #2095 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
it could be usefull to retrieve forms attributes before the whole read of the request for doing server side validation.
For exemple if you a html forms whih mixed file and simple field, we need to wait the whole read of the request (field + file) before acces simple field (via getFormAttribute), so if the user upload a big file and for some reason the validation of one field is bad the server need to retrieve the whole file before begin the validation.
i have started a discussion with some example on google groups :
https://groups.google.com/forum/#!topic/vertx/Y8977Oeu14g
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2096
queryString key should be case sensitive · Issue #2096 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
given url /test?key=v1&Key=v2&KEY=v3 it should return different value as below, but now it all returns v3
rc.request.getParam("key") //should return v1
rc.request.getParam("Key") //should return v2
rc.request.getParam("KEY") //should return v3


6.2.2.1. Case Normalization
When a URI uses components of the generic syntax, the component syntax equivalence rules always apply; namely, that the scheme and host are case-insensitive and therefore should be normalized to lowercase. For example, the URI is equivalent to http://www.example.com/.
The other generic syntax components are assumed to be case-sensitive unless specifically defined otherwise by the scheme (see Section 6.2.3).

The code causing issue is HttpUtils.params , it should not use CaseInsensitiveHeaders
  static MultiMap params(String uri) {
    QueryStringDecoder queryStringDecoder = new QueryStringDecoder(uri);
    Map<String, List<String>> prms = queryStringDecoder.parameters();
    MultiMap params = new CaseInsensitiveHeaders();
    if (!prms.isEmpty()) {
      for (Map.Entry<String, List<String>> entry: prms.entrySet()) {
        params.add(entry.getKey(), entry.getValue());
      }
    }
    return params;
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2097
Add pipe functionality to stream by justinlucas3342 · Pull Request #2097 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2098
Terminating vertx under Windows · Issue #2098 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When launched as a background process, the vertx application cannot be gracefully terminated under Windows. For some reason only killing the process works, but that skips any shutdown hooks. This means that the Launcher start/stop commands cut major parts of the functionality described in the core manual.
The run command allows to gracefully quit the process by issuing ctrl+c within the cmd window it was run from. However, the process spawned by it is also not terminable from outside, e.g. taskkill /pid.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2099
Api on AsyncResult.map is wrong · Issue #2099 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The documentation on AsyncResult.map contains the following passage:

If the {@code mapper} throws an exception, the returned future will be failed with this exception.
When this async result is failed, the failure will be propagated to the returned future and the {@code mapper}     will not be called.

This is simply not true, throwing an exception in the Mapper results in an asyncresult that never completes and therefore breaks the complete flow. This passage should probably be removed from the docs or map should offer the advertised behavior.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2100
HttpClient allow dangerous header values · Issue #2100 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Vert.x http client accepts header values that contains LF in it. If a program were to add an extra header based on user input without proper data sanitation this could allow an attacker to perform header injection.
Here is a working example:
@RunWith(VertxUnitRunner.class)
public class TestInjection {

  @ClassRule
  static public RunTestOnContext vertxRule = new RunTestOnContext();

  @Test
  public void testHttpHeader(TestContext context) {
    Vertx vertx = vertxRule.vertx();

    vertx.createHttpServer()
      .requestHandler(request -> {
        System.out.println(request.headers().entries().stream()
          .map(e -> e.getKey() + ": <" + e.getValue() +">").collect(Collectors.joining("\n")));
        request.response().end();
      })
      .listen(0, context.asyncAssertSuccess(server -> {
        Async async = context.async();
        vertx.createHttpClient()
          .getAbs("http://localhost:" + server.actualPort(), request -> async.complete())
          .putHeader("Content-Type", "text/plain\nX-EvilHeader: horrible injection")
          .end();
      }));
  }

}
This will produce the following input:
Content-Type: <text/plain>
X-EvilHeader: <horrible injecton>
Host: <localhost:xxxxx>

It seems that Vert.x does't ask Netty to perform header validation:
https://github.com/eclipse/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/ClientConnection.java#L451
When passing true in the validateHeaders parameter to DefaultHttpRequest's constructor an exception is then raised:
java.lang.IllegalArgumentException: only ' ' and '\t' are allowed after '\n': [...]

Is there any reason why Vert.x is not asking Netty to validate the header of the client request?
If not, I'll create a PR to fix this issue that we consider to be a SSRF vulnerability.
What do think?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2101
HTTP client connections should be pools per host and per virtual host · Issue #2101 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using an HttpClient for requests to different IPs with the same host header set, the connection pool only establishes one connection to one IP because the ConnectionKey for pooling only includes the host header (as peerHost). Also see this mailing list conversation.
To allow for connections to multiple IPs using the same host header, the peerHost could be e.g. IP + hostname.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2102
#2100 Add validateHeaderValues option to detect malformed HTTP header values by mguillet · Pull Request #2102 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks @mguillet this is now done by default in vertx and there is an system property to disable validation
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2103
Fixed docs by kerko · Pull Request #2103 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2104
Problem handling SSL Exceptions with ClientAuth.REQUIRED · Issue #2104 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If one set NetServer instance to require SSL Client Certificate authentication and client does not send it netty throws exception that vert.x does not handle cleanly even if one registers exception handler for NetSocket.
Initially encountered this issue while writing SSL test cases for vertx-mqtt.
If one changes code snippet to use ClientAuth.REQUEST then you can see openssl's s_client nicely connected.
What I would have expected:

No exception shown in logs
Ability to catch failure case for unit tests
Socket closed is kinda OK but now it was completely invisible for application thus hard to make unit tests for it

Code snippet:
        NetServerOptions netServerOptions = new NetServerOptions()
                .setPfxKeyCertOptions(new PfxOptions()
                        .setPath("server.p12")
                        .setPassword("password"))
                .setTrustOptions(new PemTrustOptions()
                        .addCertPath("ca.crt"))
                .setSsl(true)
                .setClientAuth(ClientAuth.REQUIRED)
                ;
        NetServer server = vertx.createNetServer(netServerOptions);
        server.connectHandler(socket -> {
            socket.closeHandler(v -> {
                System.out.println("The socket has been closed");
            });
            socket.handler(buffer -> {
                System.out.println("I received some bytes: " + buffer.length());
            });
            socket.exceptionHandler(e -> {
                System.out.println("got exception\r\n");
            });
            System.out.println("Client connected: " + socket.remoteAddress() + "\r\n");
            socket.write("Welcome to the Service\r\n");
        });

        server.listen(1234, "localhost", res -> {
            if (res.succeeded()) {
                System.out.println("Server is now listening!");
            } else {
                System.out.println("Failed to bind!");
            }
        });

Test command with openssl:
$ openssl s_client -connect localhost:1234 -tls1
CONNECTED(00000003)
depth=0 /C=FI/O=Something/CN=localhost
verify error:num=20:unable to get local issuer certificate
verify return:1
depth=0 /C=FI/O=Something/CN=localhost
verify error:num=27:certificate not trusted
verify return:1
depth=0 /C=FI/O=Something/CN=localhost
verify error:num=21:unable to verify the first certificate
verify return:1
31628:error:14094412:SSL routines:SSL3_READ_BYTES:sslv3 alert bad certificate:/BuildRoot/Library/Caches/com.apple.xbs/Sources/OpenSSL098/OpenSSL098-64.50.6/src/ssl/s3_pkt.c:1145:SSL alert number 42
31628:error:1409E0E5:SSL routines:SSL3_WRITE_BYTES:ssl handshake failure:/BuildRoot/Library/Caches/com.apple.xbs/Sources/OpenSSL098/OpenSSL098-64.50.6/src/ssl/s3_pkt.c:566:

Note: had to add -tls1 otherwise following was generated:
$ openssl s_client -connect localhost:1234
CONNECTED(00000003)
31681:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:/BuildRoot/Library/Caches/com.apple.xbs/Sources/OpenSSL098/OpenSSL098-64.50.6/src/ssl/s23_clnt.c:618:

And in log:
Aug 26, 2017 9:10:11 AM io.netty.channel.DefaultChannelPipeline onUnhandledInboundException
WARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
io.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: SSLv2Hello is disabled
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:442)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:248)
...

Test snippet log:
Starting vert.x application...
Aug 26, 2017 12:02:03 AM io.vertx.core.impl.launcher.commands.Watcher
fb9ae8fe-4e51-42f5-9f08-21b375509244-redeploy
INFO: User command terminated with status 0
Aug 26, 2017 12:02:03 AM io.vertx.core.impl.launcher.commands.Watcher
INFO: Redeployment done in 1426 ms.
Server is now listening!
Aug 26, 2017 12:02:03 AM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
INFO: Succeeded in deploying verticle
Aug 26, 2017 12:03:44 AM io.vertx.core.net.impl.NetServerImpl
SEVERE: Client from origin /127.0.0.1:61390 failed to connect over ssl: javax.net.ssl.SSLHandshakeException: null cert chain
Aug 26, 2017 12:03:44 AM io.netty.channel.DefaultChannelPipeline onUnhandledInboundException
WARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
io.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: null cert chain
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:442)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:248)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:129)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:565)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:479)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at java.lang.Thread.run(Thread.java:748)
Caused by: javax.net.ssl.SSLHandshakeException: null cert chain
	at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1478)
	at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:535)
	at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:813)
	at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)
	at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
	at io.netty.handler.ssl.SslHandler$SslEngineType$2.unwrap(SslHandler.java:223)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1117)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1039)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:411)
	... 15 more
Caused by: javax.net.ssl.SSLHandshakeException: null cert chain
	at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
	at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1666)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:292)
	at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1862)
	at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:233)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1026)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:966)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:963)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1416)
	at io.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1256)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1169)
	... 17 more
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2105
Call the MessageConsumer end handler on explicit unregistration by vietj · Pull Request #2105 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently the MessageConsumer end handler is called only when consumer is unregistered during an event bus close. When the consumer is explicitly unregistered it is not called. This handler is mainly used by RxJava and Kotlin coroutines and it seems it would be best to call the end handler in all case to give an opportunity to end the treatment. In RxJava it would call the complete handler and in Kotlin it would close the underlying channel (so a for-each iteration on the channel would terminate and execute the code after).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2106
Non blocking JSON parser by vietj · Pull Request #2106 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
+1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2107
Add Websocket Ping/Pong API methods and fix ping response (Issue #290) by dgoetsch · Pull Request #2107 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2108
RecordParser implement ReadStream<Buffer> - fixes #1741 by vietj · Pull Request #2108 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2109
Fail explicitly when a client HTTP request is made with H2 and ALPN disabled · Issue #2109 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2110
DnsResolverProvider fails on Android · Issue #2110 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Note: I originally posted this in vert-x3/vertx-proton#54, but was told that issues with DnsResolverProvider should go here.  Note further that I'm using io.vertx:vertx-proton:3.4.2.

The following code (extracted from my test app)
    File cache = new File(ctx.getCacheDir(), ".vertx");
    cache.mkdirs();
    System.setProperty(CACHE_DIR_BASE_PROP_NAME, cache.getAbsolutePath());

    //System.setProperty("vertx.disableDnsResolver", "true");

    Vertx vertx = Vertx.vertx();
    Context vCtx = vertx.getOrCreateContext();

    vCtx.runOnContext(x -> {
        ProtonClient client = ProtonClient.create(vertx);

        // Connect, then use the event loop thread to process things thereafter
        client.connect(new ProtonClientOptions().setSsl(true),"images.google.com", 5671, connectResult -> {
             System.out.println("Inside");
        });
    });

never reaches the println.  (This should perhaps be a separate issue, but note that CACHE_DIR_BASE_PROP_NAME needs to be set, on Android, or things fail, too.  Note further that I'm using "images.google.com" as an example - it produces the same errors as I see when I give the hostname of our company's test server.  Port 5671 is not open on images.google.com, but since the failure of the DNS resolution is the issue I'd like to point out, it doesn't matter.)
Instead, it yields the following error:
08-31 16:43:13.351 9040-9493/com.example.android.amqptest W/DnsNameResolver: [id: 0xc6cfbf96, L:/:::49431] Unexpected exception: 
                                                                         io.netty.handler.codec.DecoderException: java.lang.IllegalArgumentException: Invalid input to toASCII: .
                                                                             at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341)
                                                                             at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)
                                                                             at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)
                                                                             at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93)
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:565)
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:479)
                                                                             at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)
                                                                             at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
                                                                             at java.lang.Thread.run(Thread.java:762)
                                                                          Caused by: java.lang.IllegalArgumentException: Invalid input to toASCII: .
                                                                             at java.net.IDN.toASCII(IDN.java:112)
                                                                             at java.net.IDN.toASCII(IDN.java:134)
                                                                             at io.netty.handler.codec.dns.AbstractDnsRecord.<init>(AbstractDnsRecord.java:72)
                                                                             at io.netty.handler.codec.dns.DefaultDnsRawRecord.<init>(DefaultDnsRawRecord.java:61)
                                                                             at io.netty.handler.codec.dns.DefaultDnsRecordDecoder.decodeRecord(DefaultDnsRecordDecoder.java:101)
                                                                             at io.netty.handler.codec.dns.DefaultDnsRecordDecoder.decodeRecord(DefaultDnsRecordDecoder.java:71)
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decodeRecords(DatagramDnsResponseDecoder.java:110)
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decode(DatagramDnsResponseDecoder.java:68)
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decode(DatagramDnsResponseDecoder.java:33)
                                                                             at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341) 
                                                                             at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349) 
                                                                             at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) 
                                                                             at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:565) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:479) 
                                                                             at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441) 
                                                                             at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) 
                                                                             at java.lang.Thread.run(Thread.java:762) 
                                                                          Caused by: Found zero length lable after NamePrep.. line:  0. preContext:  . postContext: 
                                                                         
                                                                             at android.icu.impl.IDNA2003.convertToASCII(IDNA2003.java:185)
                                                                             at android.icu.impl.IDNA2003.convertIDNToASCII(IDNA2003.java:275)
                                                                             at android.icu.text.IDNA.convertIDNToASCII(IDNA.java:652)
                                                                             at java.net.IDN.toASCII(IDN.java:110)
                                                                             at java.net.IDN.toASCII(IDN.java:134) 
                                                                             at io.netty.handler.codec.dns.AbstractDnsRecord.<init>(AbstractDnsRecord.java:72) 
                                                                             at io.netty.handler.codec.dns.DefaultDnsRawRecord.<init>(DefaultDnsRawRecord.java:61) 
                                                                             at io.netty.handler.codec.dns.DefaultDnsRecordDecoder.decodeRecord(DefaultDnsRecordDecoder.java:101) 
                                                                             at io.netty.handler.codec.dns.DefaultDnsRecordDecoder.decodeRecord(DefaultDnsRecordDecoder.java:71) 
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decodeRecords(DatagramDnsResponseDecoder.java:110) 
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decode(DatagramDnsResponseDecoder.java:68) 
                                                                             at io.netty.handler.codec.dns.DatagramDnsResponseDecoder.decode(DatagramDnsResponseDecoder.java:33) 
                                                                             at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:341) 
                                                                             at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:363) 
                                                                             at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349) 
                                                                             at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) 
                                                                             at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:565) 
                                                                             at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:479) 
                                                                             at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441) 
                                                                             at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) 
                                                                             at java.lang.Thread.run(Thread.java:762) 

along with thousands of repetitions of
08-31 13:45:18.988 21273-21301/com.example.android.amqptest W/NioEventLoop: Selector.select() returned prematurely 512 times in a row; rebuilding Selector sun.nio.ch.PollSelectorImpl@cc2ffa4.
08-31 13:45:18.989 21273-21301/com.example.android.amqptest I/NioEventLoop: Migrated 2 channel(s) to the new Selector.

Something about the ADDITIONAL DNS section only having a period for the name, or something.
Now, when I comment out that line near the top of the code:
    System.setProperty("vertx.disableDnsResolver", "true");

things work fine.  (In the case of Google, the connection eventually times out, as expected.  On our test server, the connection succeeds, and everything works great.)  I therefore suspect that something is wrong with your DnsResolverProvider when used on Android.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2111
error NoClassDefFoundError when running verticle from command line · Issue #2111 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
i tried to run my verticle from command line
vertx run TestVerticle.java

but i got an error saying NoClassDefFoundError:
Exception in thread "main" java.lang.NoClassDefFoundError: io/vertx/core/spi/VerticleFactory
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:411)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:348)
        at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:370)
        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)
        at java.util.ServiceLoader$1.next(ServiceLoader.java:480)
        at java.util.Iterator.forEachRemaining(Iterator.java:116)
        at io.vertx.core.ServiceHelper.loadFactories(ServiceHelper.java:61)
        at io.vertx.core.ServiceHelper.loadFactories(ServiceHelper.java:47)
        at io.vertx.core.impl.DeploymentManager.loadVerticleFactories(DeploymentManager.java:55)
        at io.vertx.core.impl.DeploymentManager.<init>(DeploymentManager.java:51)
        at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:178)
        at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:143)
        at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:42)
        at io.vertx.core.Vertx.vertx(Vertx.java:90)
        at io.vertx.core.impl.launcher.commands.ClasspathHandler.create(ClasspathHandler.java:118)
        at io.vertx.core.impl.launcher.commands.BareCommand.startVertx(BareCommand.java:206)
        at io.vertx.core.impl.launcher.commands.BareCommand.run(BareCommand.java:145)
        at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:253)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:230)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:365)
        at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:328)
        at io.vertx.core.Launcher.main(Launcher.java:49)
Caused by: java.lang.ClassNotFoundException: io.vertx.core.spi.VerticleFactory
        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)

here's my TestVerticle.java:
package id.stroom.micros;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;

public class TestVerticle extends AbstractVerticle {

    @Override
    public void start(Future<Void> startFuture) throws Exception {
        System.out.println("verticle running");
        startFuture.complete();
    }

    @Override
    public void stop(Future<Void> stopFuture) throws Exception {
        System.out.println("Verticler stopped");
        stopFuture.complete();
    }
}


any idea what's wrong ? thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2112
Added run context close hooks when verticle deployment fails. by bhowell2 · Pull Request #2112 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the PR and the CLA ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2113
Added run context close hooks when verticle deployment fails. by bhowell2 · Pull Request #2113 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Done
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2114
Fix issue 293 (https://github.com/vert-x3/issues/issues/293) by ylemoigne · Pull Request #2114 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2115
WebClient: downloading url to file signals completion prematurely · Issue #2115 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I download file using BodyCodec.pipe(file) and try to read it right after completion, I sometimes read empty file (the data is not here).
Following code reproduces bug (it's not 100% reproducible, for me it fails only on heavily loaded CI):
    @Test
    fun `download file`() {
        val random = Random()
        val tmpDir = Files.createTempDir()
        tmpDir.deleteOnExit()
        val srcFile = tmpDir.toPath().resolve("${random.nextLong()}.jpg").toFile()
        val dstFile = tmpDir.toPath().resolve("${random.nextLong()}.jpg").toFile()
        val content = ByteArray(random.nextInt(100) + 50).apply { random.nextBytes(this) }
        srcFile.writeBytes(content)

        val socket = ServerSocket(0)
        val port = socket.localPort
        socket.close()

        val vertx = Vertx.vertx()
        val options = DeploymentOptions().setConfig(JsonObject().put("http.port", port))
        val router = Router.router(vertx)
        router.route("/file").handler { it.response().sendFile(srcFile.absolutePath) }
        
        val serverFuture = Future.future<String>()
        vertx.deployVerticle(TestVerticle(router), options, serverFuture::handle)
        serverFuture.block()

        val client = WebClient.create(vertx)
        val vertxReq = client.request(HttpMethod.GET, port, "localhost", "/file")

        val clientFuture = Future.future<Void>()
        vertx.fileSystem().open(dstFile.absolutePath, OpenOptions()) { res ->
            if (res.succeeded()) {
                val file = res.result()
                vertxReq.`as`(BodyCodec.pipe(file)).send {
                    if (it.succeeded()) {
                        val statusCode = it.result().statusCode()
                        if (statusCode == 200) {
                            clientFuture.complete()
                        } else {
                            clientFuture.fail("Unexpected status code: $statusCode")
                        }
                    } else {
                        clientFuture.fail(it.cause())
                    }
                }

            } else {
                clientFuture.fail(res.cause())
            }
        }
        clientFuture.block()

        val downloadedContent = dstFile.readBytes()
        assertArrayEquals(content, downloadedContent)
    }

    fun <A> Future<A>.block(): A {
        val latch = CountDownLatch(1)
        val atomic = AtomicReference<AsyncResult<A>>()
        setHandler { res ->
            atomic.set(res)
            latch.countDown()
        }
        latch.await()
        val res = atomic.get()
        return if (res.succeeded()) res.result() else throw res.cause()
    }
(this code is in Kotlin)
Vertx version: 3.4.1
I believe the problem is in io.vertx.ext.web.codec.impl.StreamingBodyCodec:
      public void end() {
        stream.end();
        if (!fut.isComplete()) {
          fut.complete();
        }
      }
It calls stream.end() which underneath calls AsyncFileImpl.close() and then signals completion right away, without waiting for close to finish. In fact this creates race condition between handler and file closing. So code which listens for completion event may receive this event before close() takes place (which means the data in file will be truncated).
I fixed it locally by making my own copy of StreamingBodyCodec which signals completion to my code after file is closed via separate future (which is very hacky). After this fix bug stopped reproducing. But it would be nice to have it fixed in master as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2116
allow overriding cluster host and post in launcher by beforeStartingVertx() by zyclonite · Pull Request #2116 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
testing the branch locally
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2117
Fix Map Lookup feature for Log4j 2 by spodin · Pull Request #2117 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Based on discussion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2118
Feature request: Expose netty's SSL Handshake Timeout to the Vertx user · Issue #2118 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
This is a feature request; it will be nice to be able to set the ssl handshake timeout.
Thank you!
https://github.com/eclipse/vert.x/blob/38a19afe50917de3783bdd1512f2314b71cc1750/src/main/java/io/vertx/core/net/impl/NetClientImpl.java#L208
https://netty.io/4.0/api/io/netty/handler/ssl/SslHandler.html#setHandshakeTimeout-long-java.util.concurrent.TimeUnit-
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2119
bug: second part of the test was always true by pmlopes · Pull Request #2119 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2120
Add type parameter to JsonArray.stream() by jo5ef · Pull Request #2120 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm not so much a fan of this as it is a free cast, i.e it prevents the user to check first the type of the object and leads to class cast exception although the compiler said "ok fine" it's safe
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2121
add idle timeout for sockets to leak by dinstone · Pull Request #2121 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@dinstone can you explain how you experience the issues ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2122
WriteStream is missing callback for asynchronous end() completion · Issue #2122 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So far WriteStream has only  synchronous 'end()` methods:
 void end();
 void end(T t) {

I.e. after I called end() it is safe to assume that stream is actually closed.
This means that AsyncFile cannot properly implement this interface cause in order to end asyncfile's writestream you need to close file, which is asynchronous operation. This causes troubles when you download url to file and try to use file immediately after receiving download completion callback: web-client #691
Suggestion:

Add method void end(Handler<AsyncResult<Void>> handler) to WriteStream interface (with default implementation to not break existing code).
Make AsyncFile use this method for asynchronously closing underlying file.

This will open a way to actually fix problem with web-client (by enabling StreamingBodyCodec to wait for actual end() completion event.
I made aforementioned changes locally. Can open a PR. Need a comment from maintainers whether it's a proper fix or I am missing something.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2123
#2122 add WriteStream.end(Handler)  by mkulak · Pull Request #2123 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2124
Httpserver added idle timeout, but the channel also may not be closed · Issue #2124 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We found this problem in a production environment, and frequent under the mobile client.In positioning, we can easily simulate and reconstruct the problem, steps are as follows:

The service side httpserver add idle timeout : new HttpServerOptions () setIdleTimeout (180);
Clients use Telnet connect http server : Telnet 10.25.76.170 8802
To disable the client network card, this time the telent service disconnected, and then enable the client network card;
After 180 seconds, on the server can also see a link from the client, for example :
TCP 0 0 10.25.76.170:8802 10.25.76.15:61703 ESTABLISHED

Problems occurred in the HttpServerImpl, in support of h2c process, the risk of connection timeout does not shut down. Now, we disabled H2c (Settings - Dvertx disableH2c = true) to circumvent this problem, the effect is very obvious in mobile wireless environment.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2125
Issue 2096: queryString key should be case sensitive by jsight · Pull Request #2125 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this should have the same implementation than CaseInsensitiveHeaders and only change the equality check somehow.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2126
FileSystem readDir does not list all entries when resolving from Classpath · Issue #2126 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
final FileSystem fs = vertx.fileSystem();
fs.propsBlocking("test/one,txt");
fs.readDirBlocking("test/");    // Bump: Only lists "one.txt" - even if there are more files on test/

Problem is: FileResolver copies-out resources from Classpath to a temporary directory in filesystem (i.e. .vertx/file-cache-[uuid]/... seen as a cache).
If you first access a single file, then only this one file is copied-out. A dir-listing hereafter then only lists this single file. Vertx seems to rely on the cache content here.
If you do list the directory contents before accessing a single file, i.e:
final FileSystem fs = vertx.fileSystem();
fs.readDirBlocking("test/");    // Yeah - this now lists all files in test/

then you see the the whole subtree copied-out of the classpath.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2127
mysql connection aborted  · Issue #2127 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I has test with that code:
        Async async = context.async();
        accountService.retrieveAllAccounts()
                      .subscribe((accounts) -> {
                          if(accounts.size()!=0) {
                              async.complete();
                          }else context.fail();

                      },context::fail);
        async.awaitSuccess(5000);

Connection closed automatically after unsubscribe:
 
 public  Single<SQLConnection> getConnection() {
    return client.rxGetConnection().flatMap(conn -> {
      Single<SQLConnection> connectionSingle = Single.just(conn);
      return connectionSingle.doOnUnsubscribe(conn::close);
    });
  }

I see  "Aborted connection" in console after  async.complete(), but if i don`t use   async.complete(); than connections closed normally.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2128
Provide an exception handler on HttpServer and NetServer to process uncaught connection errors · Issue #2128 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently the HttpServer forwards connection errors to the HttpConnection associated with the channel. It happens that the channel can fail before an HttpConnection is created, e.g SSL handshake failure. Application can have an interest to handle such failures for auditing purposes. In addition an existing internal handler already exists for testing purposes. The same can be done for NetServer.
changes: add an exception handler on HttpServer to process channel errors before an HttpConnection is created. Make sure also that HttpConnection is created after the SSL handshake for HTTP/1 as it was for HTTP/2 due to ALPN (the ALPN negotiation defers the creation of HtppConnection after the SSL handshake when the negotiated protocol is determined), which implements a consistent behavior. The same for NetServer.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2129
Provide an exception handler on HttpServer and NetServer to process uncaught connection errors by vietj · Pull Request #2129 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2130
SLF4J location aware logger parameters are ignored · Issue #2130 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I would like to refer to a possible issue concerning logging in vert.x. This has already been discussed in similar issue #1243 and #1280 . I'm trying to use SLF4J logging with {} parameters, but instead of parameters, logger logs parenthesis.
Example:
logger.error("Message : {}", "foo"); // logs "Message : {}" instead of "Message : foo"
I created vert.x Logger instance by passing an SLF4J delegate to the constructor.
The flow is as follows: Logger.error (using error call in this example, could be something else) calls delegate.error, which in turn calls error method in SLF4JLogDelegate. This method calls log(int level, Object message, Throwable t, Object... params) which check if logger instanceof LocationAwareLogger (line 173 in io.vertx.core.logging.SLF4JLogDelegate)  .
For this case, this is true and l.log(null, FQCN, level, msg, parameters, t) is invoked in org.slf4j.impl.Log4jLoggerAdapter (line 579 for 1.7.25) and this is a method that receives parameters (as Object[] argArray), but ignores them (apparently a bug in SLF4j). I believe this method should not be invoked when parameters are present. Instead, an appropriate method should be called for each separate level, since each has a MessageFormatter that includes parameters.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2131
add support for sslHandshakeTimeout in NetServer and NetClient Options by BillyYccc · Pull Request #2131 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
10 seconds is a big long for this test
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2132
Log4j2 varargs parameters not logged anymore as list · Issue #2132 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2133
Netty upgrade to 4.1.15.Final · Issue #2133 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2134
Native transport support · Issue #2134 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x can run with native transport for Linux and BSD.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2135
Domain socket supports for the io.vertx.core.net package · Issue #2135 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Supports for domain sockets for io.vertx.core.net package.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2136
Netty 4.1.15.final by vietj · Pull Request #2136 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
note, for merging this PR, the dependencies pom.xml should be updated to contain the new version and the native transport artifacts.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2137
SharedData#getMap() feature that provides LocalMap wrapped as AsyncMap when not clustered · Issue #2137 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently SharedData provides methods for dealing with locks, counters and maps. Locks and Counters can be easily aquired with getLock() and getCounter(). Vertx decides if you get the local or clustered version. For Maps we have no such feature. We have to know if our Vertx is clustered and use the appropriate method getLocalMap() or getClusterWideMap(). I think it will be nice to have also a method called getMap() which is similar to getLock() and getCounter().
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2138
Server Idle timeout does not apply to connection that are HTTP/1.x / H2C ambiguous · Issue #2138 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently when a client connects and has not sent enough data to distinguish between an HTTP/1.x or H2C protocol, the server idle timeout does not apply.
change: configure the idle timeout handler to support this case
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2139
Get NullPointerException when create shared JDBCClient with vertx core 3.4.2 · Issue #2139 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When creating a shared JDBCClient in vertx core 3.4.2 version with:
JDBCClient jdbcClient = JDBCClient.createShared(vertx, new JsonObject()
                        .put("url", "jdbc:mysql://localhost:3306/mydb")
                        .put("user", "user")
                        .put("password", "pwd")
                        .put("driver_class", "com.mysql.cj.jdbc.Driver")
                        .put("max_pool_size", 30));

I got the exception:
java.lang.NullPointerException
	at io.vertx.ext.jdbc.impl.JDBCClientImpl$DataSourceHolder.ds(JDBCClientImpl.java:213)
	at io.vertx.ext.jdbc.impl.JDBCClientImpl.<init>(JDBCClientImpl.java:88)
	at io.vertx.ext.jdbc.JDBCClient.createShared(JDBCClient.java:79)
	at com.obietel.upp.db.LcrDBController.init(LcrDBController.java:47)
	at com.obietel.upp.db.LcrDBController.<init>(LcrDBController.java:33)
	at com.obietel.upp.callplan.CallPlanManageVerticle.init(CallPlanManageVerticle.java:80)
	at com.obietel.upp.BaseVerticle.start(BaseVerticle.java:33)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:477)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:344)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at java.lang.Thread.run(Thread.java:745)

But it runs well in vertx core 3.4.1.
Anybody has idea about how to fix it for 3.4.2 ? Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2140
Upgrade to the Eclipse Public License version 2.0 by jponge · Pull Request #2140 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Don't merge right now, some tests are fragile with HTML files that I need to fix.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2141
ProxyErrorTest.testProxyHostUnknown() depends on normal dns, which may not work · Issue #2141 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The test uses unknown.hostname to get a dns resolution error, this will not work when the providers dns returns an ad page for unknown hosts.
We will set up a fakedns instead
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2142
Expose the selected sub protocol negotiated by the websocket client and server · Issue #2142 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently the HttpClient allows to define the set of sub protocols supported by the client and server, that are then negotiated. However it is not possible for applications that uses it, the selected sub protocol.
change: WebSocketBase provides a subProtocole() method that returns the selected sub protocol. The ServerWebSocket also now allows to explicitly accept the socket and perform the handshake so the selected sub protocol can be determined during the server websocket handler invocation
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2143
Java 9 CommandBuilder incompatibilty · Issue #2143 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
after upgrading to Java9 jdk vertx startup throws:
java.lang.IncompatibleClassChangeError: Method io.vertx.ext.shell.command.CommandBuilder.command(Ljava/lang/String;)Lio/vertx/ext/shell/command/CommandBuilder; must be InterfaceMethodref constant (c.m.w.l.LauncherVerticle#?)
13:11:10.287 ERROR# - Future{cause=Method io.vertx.ext.shell.command.CommandBuilder.command(Ljava/lang/String;)Lio/vertx/ext/shell/command/CommandBuilder; must be InterfaceMethodref constant} (c.m.w.l.LauncherVerticle#?)
Is it some kind of java 9 incompatibilty? How can I fix it?
Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2144
Options generated converter should be package private · Issue #2144 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is no value to have the currently generated converter to be public classes as they are meant to be used by data objects.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2145
Serialize messages sent to the connection in the order of the synchronization monitor · Issue #2145 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently the ConnectionBase class does not  serialize the messages written with writeToChannel to the underlying channel when a message is written outside of the event loop followed by a message written from the event loop thread. This can cause out of order issues when ordering is assumed by the Vert.x code using ConnectionBase, for instance calling HttpClientRequest#end() outside of the event loop sends an last HttpContent message to the channel then release the connection to the pool (with pipelining), this connection might be provided then to a waiter that uses it and send pipelined messages, e.g an HttpRequest message.
changes: change the implementation of writeToChannel and write the message to the channel when the current thread is the event loop or there are no asynchronous message write in progress otherwise a write task is scheduled causing further messages to be scheduled as well. Two sequential calls to writeToChannel (the method is synchronized) will have their messages in the same order the synchronization monitor (the class) allowed. In particular an asynchronous task calling writeToChannel started after a call to writeToChannel will have its message sent after.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2146
Serialize messages sent to the connection in the order of the synchronization monitor by vietj · Pull Request #2146 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2147
SNI for TrustOptions by theoweiss · Pull Request #2147 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it looks good from my perspective, I need to make a more thorough review before merging.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2148
Install plugin with Eclipse IDE? · Issue #2148 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Are there instructions on how to install the plugin with the Eclipse IDE?
newb here.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2149
Ability to reload CRL files/buffers at runtime by manish-panwar · Pull Request #2149 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2150
Can Router expose vertx? · Issue #2150 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The RouterImpl already has a method that would expose vertx() but only to the default classes.  Is there a reason why it was not exposed on the Router level?
The reason I am asking is I am trying to build a simple API that would help me build routes, but I would need vertx on construction to use the executeBlocking for long initialization sequences.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2151
IllegalStateException in ClientConnection#beginRequest · Issue #2151 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 3.4.2
I am using a verticle to send HTTP GET requests to an endpoint. It seems that the traffic is growing and the requests (when writing the header) are overlapping, causing an exception.
java.lang.IllegalStateException: Connection is already writing a request
	at io.vertx.core.http.impl.ClientConnection.beginRequest(ClientConnection.java:543)
	at io.vertx.core.http.impl.HttpClientRequestImpl.connected(HttpClientRequestImpl.java:756)
	at io.vertx.core.http.impl.HttpClientRequestImpl.access$100(HttpClientRequestImpl.java:51)
	at io.vertx.core.http.impl.HttpClientRequestImpl$2.handleStream(HttpClientRequestImpl.java:719)
	at io.vertx.core.http.impl.ConnectionManager$ConnQueue.deliverStream(ConnectionManager.java:277)
	at io.vertx.core.http.impl.ConnectionManager$ConnQueue.lambda$getConnection$0(ConnectionManager.java:237)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:337)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at java.lang.Thread.run(Thread.java:748)

public class MyVerticle extends AbstractVerticle {
  private HttpClient client;

  public void start() {
    ...
    client = vertx.createHttpClient(options);
    ...
  }
}
I don't have too much control of this, the question is what to do?

Increase the number of verticle instances? So in this case the client instance will be different, so the race condition will be vanish? Or at least have a lower probability.
Set bigger connection pool that the default of the http client? How can I do that?
Implement queueing of writing request in ClientConnection.

One things is missing for me: if it is happening inside a verticle how it can happen that a request is being written, but another request is coming in? It is a standard verticle, not a worker.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2152
applied varargs in some files where it was possible. by trosemberg · Pull Request #2152 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since Java 5, we can use varargs , so I changed some files to update them to that functionality.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2153
applied varargs in some files where it was possible. by trosemberg · Pull Request #2153 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since Java 5, we can use varargs , so I changed some files to update them to that functionality.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2154
applied varargs in some files where it was possible by trosemberg · Pull Request #2154 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since Java 5, we can use varargs , so I changed some files to update them to that functionality.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2155
JsonParser fails to handle floating point numbers in buffering mode · Issue #2155 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
To reproduce, create a JsonParser, switch to object value mode and push a buffer of JSON with at least one floating point value. Parsing fails with UnsupportedOperationException: Not implemented
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2156
JsonParser fails to handle floating point numbers in buffering mode by tsegismont · Pull Request #2156 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #2155
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2157
issue #2141: use fakedns to avoid resolving unknown.hostname by alexlehm · Pull Request #2157 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thank you
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2158
AsyncResult improvements · Issue #2158 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I believe AsyncResult.map() must handle exceptions in mapper function.
Also it seems that AsyncResult.succeededAsyncResult() and AsyncResult.failedAsyncResult() static factories will be useful.
If these proposals makes sense I can provide PR
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2159
Properly fail the Verticle deployment for a verticle factory resolves with failing options · Issue #2159 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the DeploymentManager will be invoked asynchronously by a VerticleFactory and upon resolution the new deployment can throw an exception, this exception should be properly routed to the original deployment completion handler and not to the VerticleFactory itself.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2160
changes AsyncResult.map() and .otherwise() contracts  by ruslansennov · Pull Request #2160 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
please only keep the AsyncResult implementation and not add new factory method to not provide two ways of doing the same thing. People are used to the idiom Vertx.succeededFuture() to build an immutable AsyncResult and that's fine this way.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2161
weird problem in clustered mode of Hazelcast · Issue #2161 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
an IllegalStateException occurred when accessing url http://localhost:8080/ .
Unexpected exception in route
java.lang.IllegalStateException: Request has already been read
at io.vertx.core.http.impl.HttpServerRequestImpl.checkEnded(HttpServerRequestImpl.java:426)
at io.vertx.core.http.impl.HttpServerRequestImpl.handler(HttpServerRequestImpl.java:206)
at io.vertx.ext.web.impl.HttpServerRequestWrapper.handler(HttpServerRequestWrapper.java:42)
at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:66)
at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:40)
at io.vertx.ext.web.impl.RouteImpl.handleContext(RouteImpl.java:217)
at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:78)
at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:118)
at io.vertx.ext.web.handler.impl.SessionHandlerImpl.lambda$handle$0(SessionHandlerImpl.java:127)
at io.vertx.ext.web.handler.impl.SessionHandlerImpl.lambda$doGetSession$2(SessionHandlerImpl.java:155)
at io.vertx.ext.web.sstore.impl.ClusteredSessionStoreImpl.lambda$null$0(ClusteredSessionStoreImpl.java:73)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:81)
at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:287)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:337)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
at java.lang.Thread.run(Unknown Source)
the issue could be reproduced by the following code:
private Future createWebServer() {
Future cwsFuture = Future.future();
    Router router = Router.router(vertx);
    
    router.route().handler(CookieHandler.create());
    **SessionStore ss = ClusteredSessionStore.create(vertx);
    SessionHandler sh = SessionHandler.create(ss);
    router.route().handler(sh);
    router.route().handler(BodyHandler.create());**

    // home page
    router.get("/").handler(this::Index);

    // static resources
    router.route("/public/*").handler(StaticHandler.create("webroot/static"));

    vertx
            .createHttpServer()
            .requestHandler(router::accept)
            .listen(config().getInteger("http.port", 8080), wsRes -> {
                if(wsRes.succeeded()) {
                    LOGGER.info("WebServerVerticle has been started successfully.");
                    cwsFuture.complete();
                }else{
                    LOGGER.error("Failed to createHttpServer.");
                    cwsFuture.fail(wsRes.cause());
                }
            });

    return cwsFuture;
}

private void Index(RoutingContext rc) {
    System.out.println("in index. " + Thread.currentThread().getName());
    rc.response().sendFile("webroot/index.html");
}

please pay attention in above bold code. the web service seems good and could work when I put the router.route().handler(BodyHandler.create()); in front of router.route().handler(CookieHandler.create()); .
the web service works very well, no exception occurs.
is there anyone who could tell me why? I could not find any suggestion in the document that the BodyHandler.create() should be called before calling SessionHandler.create().
thanks in advance.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2162
Setting a drain handler on a drained MessageProducer should call it · Issue #2162 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the MessageProducer#drainHandler only set the drain handler on the producer. It can happen that an application using the producer outside of the event loop sets a drain handler because MessageProducer#writeQueueFull() returned true and concurrently the producer has been fully refund from all its credits before the drain handler is set:
if (producer.writeQueueFull()) {
   // Fully refund in the mean time, drain handler won't be called at all
   producer.drainHandler(v -> { ... });
}

When setting a drain handler on a producer we should call it when the queue is in drained state.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2163
Overlapping classes with shade plugin · Issue #2163 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi
the shade plugin is giving the following warning when i build my application
[WARNING] vertx-web-common-3.4.2.jar, vertx-web-3.4.2.jar define 3 overlapping classes: 
[WARNING]   - io.vertx.ext.web.package-info
[WARNING]   - io.vertx.groovy.ext.web.VertxPropertiesModuleFactory
[WARNING]   - io.vertx.groovy.ext.web.VertxPropertiesModuleFactory$1
[WARNING] vertx-service-proxy-3.4.2.jar, vertx-service-proxy-3.4.2-processor.jar define 6 overlapping classes: 
[WARNING]   - io.vertx.serviceproxy.ProxyHandler
[WARNING]   - io.vertx.serviceproxy.ServiceExceptionMessageCodec
[WARNING]   - io.vertx.serviceproxy.ServiceException
[WARNING]   - io.vertx.serviceproxy.ServiceProxyProcessor
[WARNING]   - io.vertx.serviceproxy.package-info
[WARNING]   - io.vertx.serviceproxy.ProxyHelper

my dependency tree is like this
[INFO] me.sample:sample-backend:jar:1.0-SNAPSHOT
[INFO] +- io.vertx:vertx-web:jar:3.4.2:compile <-------------------- here
[INFO] |  +- io.vertx:vertx-auth-common:jar:3.4.2:compile
[INFO] |  \- io.vertx:vertx-core:jar:3.4.2:compile
[INFO] |     +- io.netty:netty-common:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-buffer:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-transport:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-handler:jar:4.1.8.Final:compile
[INFO] |     |  \- io.netty:netty-codec:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-handler-proxy:jar:4.1.8.Final:compile
[INFO] |     |  \- io.netty:netty-codec-socks:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-codec-http:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-codec-http2:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-resolver:jar:4.1.8.Final:compile
[INFO] |     +- io.netty:netty-resolver-dns:jar:4.1.8.Final:compile
[INFO] |     |  \- io.netty:netty-codec-dns:jar:4.1.8.Final:compile
[INFO] |     +- com.fasterxml.jackson.core:jackson-core:jar:2.7.4:compile
[INFO] |     \- com.fasterxml.jackson.core:jackson-databind:jar:2.7.4:compile
[INFO] |        \- com.fasterxml.jackson.core:jackson-annotations:jar:2.7.0:compile
[INFO] +- com.progressoft.brix.domino.api:domino-api-client:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |  +- com.progressoft.brix.domino.api:domino-api-shared:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |  +- com.progressoft.brix.domino.api:domino-api-shared:jar:sources:1.0-rc.2-SNAPSHOT:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.7.25:compile
[INFO] +- com.progressoft.brix.domino.api:domino-api-server:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |  +- com.progressoft.brix.domino:domino-service-discovery:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |  |  +- io.vertx:vertx-service-discovery:jar:3.4.2:compile
[INFO] |  |  +- io.vertx:vertx-web-client:jar:3.4.2:compile
[INFO] |  |  |  \- io.vertx:vertx-web-common:jar:3.4.2:compile <----------------------- here
[INFO] |  |  +- io.vertx:vertx-service-proxy:jar:3.4.2:compile <-------------------- here
[INFO] |  |  |  \- io.vertx:vertx-lang-js:jar:3.4.2:compile
[INFO] |  |  +- io.vertx:vertx-codegen:jar:3.4.2:compile
[INFO] |  |  |  \- org.mvel:mvel2:jar:2.2.8.Final:compile
[INFO] |  |  +- io.vertx:vertx-service-proxy:jar:processor:3.4.2:compile <-------------------------- here
[INFO] |  |  +- io.vertx:vertx-jdbc-client:jar:3.4.2:compile
[INFO] |  |  |  +- io.vertx:vertx-sql-common:jar:3.4.2:compile
[INFO] |  |  |  \- com.mchange:c3p0:jar:0.9.5.2:compile
[INFO] |  |  |     \- com.mchange:mchange-commons-java:jar:0.2.11:compile
[INFO] |  |  +- io.vertx:vertx-redis-client:jar:3.4.2:compile
[INFO] |  |  \- io.vertx:vertx-mongo-client:jar:3.4.2:compile
[INFO] |  |     \- org.mongodb:mongodb-driver-async:jar:3.4.1:compile
[INFO] |  |        +- org.mongodb:mongodb-driver-core:jar:3.4.1:compile
[INFO] |  |        \- org.mongodb:bson:jar:3.4.1:compile
[INFO] |  \- io.vertx:vertx-config:jar:3.4.2:compile
[INFO] +- com.progressoft.brix.domino:domino-remote-logging:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |  +- com.google.gwt:gwt-servlet:jar:2.8.1:compile
[INFO] |  +- com.google.code.gson:gson:jar:2.6.2:compile
[INFO] |  +- org.apache.logging.log4j:log4j-api:jar:2.8.2:compile
[INFO] |  \- org.apache.logging.log4j:log4j-core:jar:2.8.2:compile
[INFO] +- me.sample:logme-backend:jar:1.0-SNAPSHOT:compile
[INFO] |  \- com.progressoft.brix.domino.apt:apt-server:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |     \- com.progressoft.brix.domino.apt:apt-commons:jar:1.0-rc.2-SNAPSHOT:compile
[INFO] |        +- commons-io:commons-io:jar:1.3.2:compile
[INFO] |        \- commons-lang:commons-lang:jar:2.6:compile
[INFO] +- me.sample:logme-shared:jar:1.0-SNAPSHOT:compile
[INFO] |  \- com.google.gwt:gwt-user:jar:2.8.1:compile
[INFO] |     +- com.google.jsinterop:jsinterop-annotations:jar:1.0.1:compile
[INFO] |     +- com.google.jsinterop:jsinterop-annotations:jar:sources:1.0.1:compile
[INFO] |     +- javax.validation:validation-api:jar:sources:1.0.0.GA:compile
[INFO] |     +- javax.servlet:javax.servlet-api:jar:3.1.0:compile
[INFO] |     \- org.w3c.css:sac:jar:1.3:compile
[INFO] +- me.sample:sample-frontend:war:1.0-SNAPSHOT:runtime
[INFO] +- junit:junit:jar:4.12:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test
[INFO] +- javax.validation:validation-api:jar:1.1.0.Final:compile
[INFO] +- org.assertj:assertj-core:jar:3.7.0:test
[INFO] \- com.google.auto.service:auto-service:jar:1.0-rc3:provided
[INFO]    +- com.google.auto:auto-common:jar:0.3:provided
[INFO]    \- com.google.guava:guava:jar:19.0:provided


Why do vertx jars have these classes duplication that makes them overlap?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2164
Enable websocket compression by disparlure · Pull Request #2164 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@disparlure the easiest way to get around the individual commits would be to just combine all your changes into a single commit like this:
https://stackoverflow.com/questions/17354353/git-squash-all-commits-in-branch-without-conflicting
it will take the state of this branch, reset to current master leaving all your changes as unstaged. then you can commit them in one commit.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2165
Enable websocket compression by CodingFabian · Pull Request #2165 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Trying to help out. I squashed #2164 for @disparlure - hope the double signing is correct ;)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2166
Share the same DNS cache between event loop · Issue #2166 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, each event loop has its own DNS cache when using the DNS address resolver, the current DNS cache implementation is concurrent and can be easily shared between event loop to reduce memory consumption.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2167
RunCommand overrides deployment options set through system properties even if those arguments were not passed to the command · Issue #2167 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/eclipse/vert.x/blob/65a1050b0922de38329cdbe90c5ecd8094a93a04/src/main/java/io/vertx/core/impl/launcher/commands/RunCommand.java#L258-L260
I'm not sure if this is a bug or a feature.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2168
Got a NullPointerException when event bus was under heavy load · Issue #2168 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Oct 06, 2017 10:14:49 PM io.vertx.core.impl.ContextImpl
SEVERE: Unhandled exception
java.lang.NullPointerException
at io.vertx.core.eventbus.impl.clustered.ConnectionHolder.connected(ConnectionHolder.java:125)
at io.vertx.core.eventbus.impl.clustered.ConnectionHolder.lambda$connect$0(ConnectionHolder.java:58)
at io.vertx.core.net.impl.NetClientImpl.lambda$connect$1(NetClientImpl.java:67)
at io.vertx.core.net.impl.NetClientBase.lambda$connected$6(NetClientBase.java:242)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:335)
at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:193)
at io.vertx.core.net.impl.NetClientBase.connected(NetClientBase.java:240)
at io.vertx.core.net.impl.NetClientBase.lambda$doConnect$5(NetClientBase.java:212)
at io.vertx.core.net.impl.ChannelProvider.lambda$connect$0(ChannelProvider.java:40)
at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:507)
at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:481)
at io.netty.util.concurrent.DefaultPromise.access$000(DefaultPromise.java:34)
at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:431)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2169
Fix multiple handler completion on deploy fail by sschmittBt · Pull Request #2169 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test and sign the commit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2170
Request Timeout should start after the connection is stabilished · Issue #2170 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx suppot a timeout in the request, but that timeout start as soon as the method i invoked.
I believe that Vertx should support a 'requestTimeout'.
This means the timeout should apply only after the connection is stablished and the request starts.
To illustrate this, the following snipet will describe it:
final HttpClientRequest req = client.request(HttpMethod.GET, 80, "localhost", "/");
        req.connectionHandler(context -> System.out.println("connection id -> " + context.hashCode()));
        req.setTimeout(timeout); // timer started
        vertx.setTimer(timeout * 2, id -> { // waiting before requesting the data to trigger the timeout above
            req.toObservable().
                    flatMap(resp -> {
                        if (resp.statusCode() != 200) {
                            throw new RuntimeException("Wrong status code " + resp.statusCode());
                        }
                        return resp.toObservable();
                    }).
                    subscribe(data -> System.out.println(data.toString()),
                            error -> System.out.println("handled error: " + error.getMessage())); // I except this error in case of a timeout
            req.end();
        });
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2171
SockJSSession needs to use the transport thread when using the transport · Issue #2171 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the SockJSSession uses the transport for write/close operations from any thread. This can cause deadlocks when used from external threads or because the transport thread has changed (for instance a session reconnection with an scaled http server).
It can be fixed by recording the transport context when the transport is associated with the session (register method) and doing a runOnContext when the current context is not the same. This shall also prevent race conditions for instance a write operation is scheduled from a non vertx thread, the register method is called and gives a new transport to the session. In this case the write will be rescheduled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2172
Java 9: java.lang.IllegalStateException: failed to create a new resolver · Issue #2172 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If i create an new NetServer and start it, the server doesnt start and i get the following log:
Okt. 15, 2017 12:15:38 VORM. io.netty.util.internal.PlatformDependent <clinit>
INFORMATION: Your platform does not provide complete low-level API for accessing direct buffers reliably. Unless explicitly requested, heap buffer will always be preferred to avoid potential system unstability.
Okt. 15, 2017 12:15:38 VORM. io.netty.resolver.dns.DnsServerAddresses <clinit>
WARNUNG: Default DNS servers: [/8.8.8.8:53, /8.8.4.4:53] (Google Public DNS as a fallback)
Okt. 15, 2017 12:15:39 VORM. io.netty.channel.DefaultChannelId defaultProcessId
WARNUNG: Failed to find the current process ID from ''; using a random value: 1525904935
Couldnt start network server: java.lang.IllegalStateException: failed to create a new resolver

System Details
Java Version: 1.9
OS: Windows 10
Vert.x Version: 3.4.2 (newest)
Reproduction Code
package com.jukusoft.vertx.server;

import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
import io.vertx.core.net.NetServer;
import io.vertx.core.net.NetServerOptions;

public class Server {

    //vert.x options
    protected VertxOptions vertxOptions = null;

    //instance of vert.x
    protected Vertx vertx = null;

    //vert.x network server
    protected NetServer netServer = null;

    public void start() {
        //create new vertx.io options
        this.vertxOptions = new VertxOptions();

        //create new instance of vertx.io
        this.vertx = Vertx.vertx(this.vertxOptions);

        //create options for TCP network server
        NetServerOptions netServerOptions = new NetServerOptions();

        //TODO: replace this later
        int port = 2200;

        //set port
        netServerOptions.setPort(port);

        //create new instance of TCP network server
        this.netServer = this.vertx.createNetServer(netServerOptions);

        //add connection handler
        netServer.connectHandler(socket -> {
            System.out.println("new connection accepted, ip: " + socket.remoteAddress().host() + ", port: " + socket.remoteAddress().port());

            //TODO: do something with socket, for example send an message
        });

        //start network server
        this.netServer.listen(res -> {
            if (res.succeeded()) {
                System.out.println("ERP Server is now listening on port " + res.result().actualPort());
            } else {
                System.err.println("Couldnt start network server: " + res.cause());
            }
        });
    }

    public void stutdown() {
        //close network server
        netServer.close(res -> {
            if (res.succeeded()) {
                System.out.println("Server was shutdown now.");

                //close vertx.io
                vertx.close();
            } else {
                System.out.println("Server couldnt be closed.");
            }
        });
    }

}

module-info.java:
module erp.server {
    requires java.base;

    //dependencies
    requires vertx.core;

    requires jdk.unsupported;

    //exports
    exports com.jukusoft.erp.server;
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2173
added assertion to check if correct content-encoding header was set a… by st-h · Pull Request #2173 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
as discussed in the google group, setting content-encoding to identity should skip compression of the response. By checking the content-encoding header we can make sure that compression was actually skipped, as the content is already decompressed when it is asserted.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2174
Fix typos by BillyYccc · Pull Request #2174 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: BillyYccc billy112487983@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2175
exception message is incorrect by teaey · Pull Request #2175 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the ECA + commit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2176
exception message is incorrect by teaey · Pull Request #2176 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2177
exception message is incrrect by teaey · Pull Request #2177 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
exception message is incrrect
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2178
exception message is incorrect by teaey · Pull Request #2178 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
exception message is incorrect
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2179
The default SSL engine enabled protocols should not prevent to use protocols declared by options · Issue #2179 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
SSLHelper has:
  private static final String[] DEFAULT_ENABLED_PROTOCOLS = {"SSLv2Hello", "TLSv1", "TLSv1.1", "TLSv1.2"};

However later builds up the enabled protocol list with:
protocols.retainAll(Arrays.asList(engine.getEnabledProtocols()));

And since netty by default does not enable SSLv2Hello (ref ), SSLv2Hello in fact is not enabled, and I believe it is not possible to enable any protocols other than TLSv1/1.1/1.2.
This could be regarded as a feature as it prevents developers selecting insecure protocols, however is confusing that addEnabledSecureTransportProtocol will only actually work if its  TLSv1/1.1/1.2.
Could be fixed by removing SSLv2Hello from the default list to make it less confusing, and maybe documenting what protocols are available. Or by re-enabling all protocols by changing
protocols.retainAll(Arrays.asList(engine.getEnabledProtocols()));

to
protocols.retainAll(Arrays.asList(engine.getSupportedProtocols()));
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2180
Can eventbus support message route? · Issue #2180 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to send the same user message to same verticle,can eventbus support message route?
eg:
user a->verticle a
user b->verticle a
user c->verticle b
user d->verticle b
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2181
Writing on HttpServerResponse does not throw when closed · Issue #2181 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the client closes the connection, I can keep on calling HttpServerResponse.write forever without any indication of an error, I don't even get an exception in my exception handler.
It would be better to throw something.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2182
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2183
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2184
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2185
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2186
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2187
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2188
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2189
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2190
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2191
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2192
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2193
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2194
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2195
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2196
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2197
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2198
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2199
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2200
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2201
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2202
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2203
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2204
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2205
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2206
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2207
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2208
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2209
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2210
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2211
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2212
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2213
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2214
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2215
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2216
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2217
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2218
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2219
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2220
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2221
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2222
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2223
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2224
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2225
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2226
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2227
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2228
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2229
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2230
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2231
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2232
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2233
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2234
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2235
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2236
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2237
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2238
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2239
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2240
Switch to the EPL v2 license by jponge · Pull Request #2240 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2241
Default configuration for vertx dns client by Sammers21 · Pull Request #2241 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj , do we actually should have a test for that?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2242
More accurate documentation for DatagramSocketOptions.setBroadcast() by hjames9 · Pull Request #2242 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@hjames9 thanks. Have you signed the Eclipse CLA? Have you signed-off your commit?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2243
add methods for byte arrays to rx lib · Issue #2243 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
according to this thread, methods for byte arrays are lacked in rx library. This cause lots of migration effort. Any plan to add this lost methods?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2244
Getting corresponding shared map by nolequen · Pull Request #2244 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it would be simpler if LocalMapImpl implements directly AsyncMap
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2245
how much memory is being used when i open a new verticle? · Issue #2245 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In a project, I started four verticle, is it normal to used 680+M memory?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2246
About Service Discovery ,I think there is a bug. · Issue #2246 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the following source,the findAny () method returns the first element of the set forever, unable to achieve the load balance.

Do you need to achieve your own load balancing?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2247
JsonObject as payload in class · Issue #2247 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a class that can have additional payload field as JsonObject. When i try decode my class i am getting DecodeException. I can avoid this if field are simple Object and my getter return payload like new JsonObject((Map<String, Object>) payload).  JsonObject misses deserializer. Are that intended behavior?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2248
Wrong parameter name in PortBuilder · Issue #2248 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm referring to the securityGroup(String groupName) method in the org.openstack4j.model.network.builder.PortBuilder interface (and subsequently to the only implementing class org.openstack4j.openstack.networking.domain.NeutronPort).
The only parameter is String groupName and this is incorrect and misleading because the underlying OpenStack REST requires security group ID, as is seen in the following link https://developer.openstack.org/api-ref/network/v2/ under the POST /v2.0/ports create Port method.
I believe this is only a naming issue because the method produced a desired result when provided with the group ID instead of a group name.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2249
Local async map by tsegismont · Pull Request #2249 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2250
Netty 4.1.19.Final upgrade · Issue #2250 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2251
Jackson 2.9.3 upgrade · Issue #2251 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
waiting for CQ resolution.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2252
Let's Encrypt ecc 256 can not listen port but none-ecc can listen port · Issue #2252 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
question 1
I use debian linux, and Let's Encrypt ecc 256 with command:
acme.sh --issue -w /www/demo.com -d demo.com --keylength ec-256

it's should ec-256 (prime256v1, "ECDSA P-256"), but i can not listen port with this cert(but vertx is running without error), code as
package com.example.demo;

import java.util.*;
import io.vertx.core.*;
import io.vertx.core.http.*;
import io.vertx.core.net.*;
import io.vertx.core.json.*;
import io.vertx.ext.web.*;
import io.vertx.ext.web.handler.*;

public class MainVerticle extends AbstractVerticle {

    @Override
    public void start() throws Exception {

        Router router = Router.router(vertx);

        router.route().handler(VirtualHostHandler.create("a.demo.com", req -> {
              req.response().putHeader("content-type", "text/plain").end("a.demo.com");
        }));

        router.route().handler(VirtualHostHandler.create("b.demo.com", req -> {
              req.response().putHeader("content-type", "text/plain").end("b.demo.com");
        }));

        HttpServerOptions options = new HttpServerOptions()
            .setSsl(true)
            .setSni(true)
            .setUseAlpn(true)
            .setOpenSslEngineOptions(new OpenSSLEngineOptions())

            .addEnabledCipherSuite("ECDHE-RSA-AES128-SHA256")
            .addEnabledCipherSuite("ECDHE-RSA-AES128-GCM-SHA256")
            .addEnabledCipherSuite("ECDHE-RSA-AES256-SHA256")
            .addEnabledCipherSuite("ECDHE-RSA-AES256-GCM-SHA256")
            .addEnabledCipherSuite("ECDHE-ECDSA-AES128-SHA256")
            .addEnabledCipherSuite("ECDHE-ECDSA-AES128-GCM-SHA256")
            .addEnabledCipherSuite("ECDHE-ECDSA-AES256-SHA256")
            .addEnabledCipherSuite("ECDHE-ECDSA-AES256-GCM-SHA256")

            //.addEnabledSecureTransportProtocol("TLSv1.1")
            .addEnabledSecureTransportProtocol("TLSv1.2")
            //.addEnabledSecureTransportProtocol("TLSv1.3")

            .setPemKeyCertOptions(new PemKeyCertOptions()
                    .setKeyPaths(Arrays.asList(
                            "/path/to/file.key"
                    ))
                    .setCertPaths(Arrays.asList(
                            "/pat/to/file.cer"
                    )));

        vertx.createHttpServer(options).requestHandler(router::accept).listen(8080);

    }
}

gradle dependencies
def vertxVersion = '3.5.0'

dependencies {
//  compile "io.netty:netty-tcnative:2.0.0.Final:linux-x86_64"
     compile "io.netty:netty-tcnative-boringssl-static:2.0.7.Final"
//  compile "io.netty:netty-tcnative:1.1.33.Fork16"
//  compile "io.netty:netty-tcnative:2.0.0.Final"
     compile "io.vertx:vertx-core:$vertxVersion"
     compile "io.vertx:vertx-web:$vertxVersion"
//  compile "io.vertx.ext.web.handler:$vertxVersion"

  testCompile "junit:junit:4.12"
  testCompile "io.vertx:vertx-unit:$vertxVersion"
}


but, when i not use ecc cert with acme.sh command:
acme.sh --issue -w /www/demo.com -d demo.com

all thing is ok, https 8080 can work.
question 2
openssl can not work, show error "openssl not found"
but netty-tcnative-boringssl-static can work, as gradle dependencies comment.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2253
Provide system property for native transport · Issue #2253 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, it seems the only way is programmatically. It would be very convenient to have system property to enable that
Vertx vertx = Vertx.vertx(new VertxOptions().
  setPreferNativeTransport(true)
);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2254
Improve host address resolution · Issue #2254 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
DnsResolverProvider loads hosts file when only in constructor of DnsResolverProvider. The problem is that when hosts file is modified, vertx does not recognize it because of no load of hosts file(except in the constructor).
I think there is no way to dynamically load it again while vertx is running. Is there any way to solve it?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2255
The WebSocket should check there is a handler for pong before delivering the pong event · Issue #2255 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We recently upgraded to vertx 3.5 and are seeing this exception in our logs
Stack Trace:
java.lang.NullPointerException: null
    at io.vertx.core.http.impl.WebSocketImplBase.handleFrame(WebSocketImplBase.java:266)
    at io.vertx.core.http.impl.ServerConnection.handleWsFrame(ServerConnection.java:336)
    at io.vertx.core.http.impl.ServerConnection.processMessage(ServerConnection.java:452)
    at io.vertx.core.http.impl.ServerConnection.handleMessage(ServerConnection.java:156)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandlerWithWebSockets.handleMessage(HttpServerImpl.java:671)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandlerWithWebSockets.handleMessage(HttpServerImpl.java:614)
    at io.vertx.core.net.impl.VertxHandler.lambda$channelRead$1(VertxHandler.java:150)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:342)
    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:200)
    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:148)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
    at java.lang.Thread.run(Thread.java:745)

We don't have (or need) a pong handler attached to the ServerWebSocket instance but have clients that will send pong frames to our websocket servers, so we see this exception being logged.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2256
NullPointerException -> SockJSSession.writePendingMessages() on high load · Issue #2256 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vert.x core: 3.5.0
vert.x web: 3.5.0
Description
Intermittent erro generated when  there are too many concurrency connections.
Trace
java.lang.NullPointerException
        at io.vertx.ext.web.handler.sockjs.impl.SockJSSession.writePendingMessages(SockJSSession.java:269)
        at io.vertx.ext.web.handler.sockjs.impl.SockJSSession.lambda$write$1(SockJSSession.java:124)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:344)
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
        at java.lang.Thread.run(Thread.java:745)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2257
There's no notification of a bind exception · Issue #2257 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There's no way for a user to discover a bind exception occurred, except to crawl through the log.
See line 347 in   io.vertx.core.http.impl.HttpServerImpl.java
344          bindFuture = AsyncResolveConnectHelper.doBind(vertx, SocketAddress.inetSocketAddress(port, host), bootstrap);
345          bindFuture.addListener(res -> {
346            if (res.failed()) {
347              vertx.sharedHttpServers().remove(id);  <-------
348            } else {
If a BindException occurs, the server is removed, but the caller isn't notified.
The exceptionHandler(new BindException(host+":"+port)) should be called.
Yes, a BindException is thrown and caught already,
but there's no way for the caller to discover it...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2258
Provide user-friendly way to test an HTTP header value · Issue #2258 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is no easy way to test that an HTTP header is present and has a given value:
    String value = HttpHeaders.WEBSOCKET.toString();
    boolean upgrade = headers.getAll(HttpHeaders.UPGRADE).stream()
      .anyMatch(val -> val.equalsIgnoreCase(value));
Drawbacks:

Testing a header value is a common task, especially if you write edge services or API gateways
The header value in this example should be tested in a case-insensitive way; so the HttpHeaders constant must be first converted to String (no equalsIgnoreCase on CharSequence)
A list of all headers needs to be created before testing
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2259
Provide user-friendly way to test an HTTP header value by tsegismont · Pull Request #2259 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you please take a look? I split the change so that each commit message explains the motivation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2260
small fix to exception logging by kurtostfeld · Pull Request #2260 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2261
small fix to exception logging by kurtostfeld · Pull Request #2261 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you describe what it fixes ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2262
Use new SniCompletionEvent from Netty by Sammers21 · Pull Request #2262 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2263
HttpClientImple DEFAULT_HANDLER uses uri.getQuery instead of getRawQuery when extract redirection uri from response location header    · Issue #2263 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I found that Vertx HttpClient DEFAULT_HANDLER uses java.net.URI.getQuery instead of getRawQuery when extracts a redirection uri from response location header.
Even Vertx HttpUitls.resolveURIReference uses java.net.URI.getQuery and then redirects it with decoded query.
java.net.URI.getQuery returns decoded query according to documents.
String java.net.URI.getQuery()

Returns the decoded query component of this URI.

The string returned by this method is equal to that returned by the getRawQuery method except that all sequences of escaped octets are decoded.

In my case, there are many cases that location header value includes URIEncoded query because my service covers not only english alphabet but also ascii unsafe language.
Redirection target server still needs URIEncoded query for ascii unsafe language.
I've made a patch for that referring to Apache httpClient where uses getRawQuery and then applied it with HttpClient.setRedirectinHandler.
I guess this issue not only for mine.
I think java.net.URI.getRawQuery is proper rather than getQuery.
Do you have any reason for using getQuery I'm not aware of?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2264
Name resolver always fallback to original name or search domain · Issue #2264 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Until in some situation, either the original name or the search domain resolved name was used in a resolution. Now both are always used, the only difference is in the resolution order according to the ndots value. This behavior change comes with Netty 4.1.19.Final version, Vert.x integration tests are updated accordingly to the new behavior.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2265
Dependencies upgrade · Issue #2265 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
to

Netty 4.1.19.Final        : https://dev.eclipse.org/ipzilla/show_bug.cgi?id=15280
Jackson Core 2.9.3        : https://dev.eclipse.org/ipzilla/show_bug.cgi?id=15282
Jackson Databind 2.9.3    : https://dev.eclipse.org/ipzilla/show_bug.cgi?id=15283
Jackson Annotations 2.9.3 : https://dev.eclipse.org/ipzilla/show_bug.cgi?id=15284
Works-with                : https://dev.eclipse.org/ipzilla/show_bug.cgi?id=15285
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2266
Stop chunked response when client disconnects · Issue #2266 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm playing around with vertx and vertx-web. I have a simple endpoint that produces a chunked response by endlessly printing "hello" once a second.
How do I detect when the client disconnects? Vertx doesn't seem to throw an exception when attempting to write to a disconnected client, and routingContext.response().closed() keeps returning false long after the client is gone.
Here's a minimal example, I'm using curl as the client:
public static void main(String[] args) {
	Vertx vertx = Vertx.vertx();
	HttpServer server = vertx.createHttpServer();
	Router router = Router.router(vertx);
	router.route("/hello").handler(rc -> {
		rc.response().setChunked(true).putHeader("Content-Type", "text/plain");
		vertx.setPeriodic(1000, l -> {
			if (rc.response().closed()) {
                System.out.println("Stopping"); //Doesn't happen
				vertx.cancelTimer(l);
			}
			try {
				System.out.println("hello"); // Keeps printing long after the client disconnects
				rc.response().write("hello\n");
			} catch (Exception e) {
				e.printStackTrace(); // Doesn't happen
				rc.response().close();
			}
		});

	});
	server.requestHandler(router::accept).listen(8080);
}

I'm using Vert.x 3.5.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2267
Documentation for "Asynchronous Verticle start and stop" unclear · Issue #2267 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The documentation for the "Asynchronous Verticle start and stop" section in the core documentation does not clearly explain what is necessary to make the verticle deloyment work asynchronously making initial use of vertx more frustrating than need be, especially because it uses verticle deployment in the example making it self referencing.
I would suggest adding some vertx.executeBlocking() code to the start method in the example code and referencing the "Running blocking code" section to show how it is done to make it clearer to first time users.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2268
fix java doc error in MessageConsumer by boliza · Pull Request #2268 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@boliza thanks. Looks good to me but it seems you haven't signed the Eclipse CLA. Can you do it?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2269
3.5.0 JDBCClient querySingle IndexOutOfBoundsException · Issue #2269 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2270
Add a close method to AsyncMultiMap by tsegismont · Pull Request #2270 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj PTAL
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2271
Improve Http1xServerConnection back-pressure handling - fixes #2230 by vietj · Pull Request #2271 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2272
Fix typo in `setMaxWorkerExecuteTime` method by jahanzebbaber · Pull Request #2272 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you signe the Eclipse Contributor Agreement ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2273
LocalMap computeIfPresent, compute, merge incorrect behavior by Sammers21 · Pull Request #2273 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2274
correct claim io.vertx.core.http.HttpClient#websocketStream to be fluent by wu-lee · Pull Request #2274 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@wu-lee thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2275
wip #2230 refactor buffer Http1xServerConnection  by st-h · Pull Request #2275 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Actually  I do have code for that and I would like rather for 3.6 (I can push the code I have).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2276
WebSocket API close frame payload · Issue #2276 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The WebSocket API should allow to set and receive the close frame payload.
ws.close(1000); // Close with a status code
ws.close(1000, "some reason");

Close frame should be propagated on the client, i.e before calling the close handler the websocket should forward a close frame with the status and reason.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2277
Properly log the exception, showing the trace by ctron · Pull Request #2277 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2278
Clarify that classloading isolation not compatible with Java 9 in documentation · Issue #2278 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/eclipse/vert.x/blob/5eb55e8478fbe9ca1cb14aaef783a40857fee602/src/main/java/io/vertx/core/impl/DeploymentManager.java#L384
This line cause incompatibility with Java 9 , when combined with attempt to use isolation group.
Java 9

Java 8

As can bee seen, 8 v 9 uses different classloader while launching jar. Java 8 one is extending URLClassloader, Java 9 one is not
Can be tested by following project
vertx-test.zip
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2279
Harmonizing SSL/TLS protocol options by PhilLehmann · Pull Request #2279 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2280
Websocket close payload by slinkydeveloper · Pull Request #2280 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2281
3.5.0: WebSocket is closed exception when socket closed under load · Issue #2281 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version: 3.5.0
We are using the SockJS support and specifically the part that allows you to send data to an open websocket via an event bus address.  When there is a socket which is under heavy load (lots of data being written over the bus) and that socket is closed, we sometimes see the following exceptions:
23:44:59.237 [vert.x-eventloop-thread-2] ERROR i.v.c.e.impl.HandlerRegistration - Failed to handleMessage. address: 43552bcc-57e8-42fc-91c6-26d5028aaa25
java.lang.IllegalStateException: WebSocket is closed
        at io.vertx.core.http.impl.WebSocketImplBase.checkClosed(WebSocketImplBase.java:253)
        at io.vertx.core.http.impl.WebSocketImplBase.writeBinaryMessage(WebSocketImplBase.java:156)
        at io.vertx.core.http.impl.ServerWebSocketImpl.writeBinaryMessage(ServerWebSocketImpl.java:43)
        at io.vertx.ext.web.handler.sockjs.impl.RawWebSocketTransport$RawWSSockJSSocket.write(RawWebSocketTransport.java:86)
        at io.vertx.ext.web.handler.sockjs.impl.SockJSSocketBase.lambda$new$0(SockJSSocketBase.java:70)
        at io.vertx.core.eventbus.impl.HandlerRegistration.deliver(HandlerRegistration.java:212)
        at io.vertx.core.eventbus.impl.HandlerRegistration.handle(HandlerRegistration.java:189)
        at io.vertx.core.eventbus.impl.EventBusImpl.lambda$deliverToHandler$3(EventBusImpl.java:538)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:344)
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
        at java.lang.Thread.run(Thread.java:745)
23:44:59.237 [vert.x-eventloop-thread-2] ERROR io.vertx.core.impl.ContextImpl - Unhandled exception
java.lang.IllegalStateException: WebSocket is closed
        at io.vertx.core.http.impl.WebSocketImplBase.checkClosed(WebSocketImplBase.java:253)
        at io.vertx.core.http.impl.WebSocketImplBase.writeBinaryMessage(WebSocketImplBase.java:156)
        at io.vertx.core.http.impl.ServerWebSocketImpl.writeBinaryMessage(ServerWebSocketImpl.java:43)
        at io.vertx.ext.web.handler.sockjs.impl.RawWebSocketTransport$RawWSSockJSSocket.write(RawWebSocketTransport.java:86)
        at io.vertx.ext.web.handler.sockjs.impl.SockJSSocketBase.lambda$new$0(SockJSSocketBase.java:70)
        at io.vertx.core.eventbus.impl.HandlerRegistration.deliver(HandlerRegistration.java:212)
        at io.vertx.core.eventbus.impl.HandlerRegistration.handle(HandlerRegistration.java:189)
        at io.vertx.core.eventbus.impl.EventBusImpl.lambda$deliverToHandler$3(EventBusImpl.java:538)
        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:344)
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
        at java.lang.Thread.run(Thread.java:745)

These are benign and we think due to the timing of processing in-flight events and the closing of the socket (that close does unregister the event bus consumer, but obviously not in a way that guarantees that no further messages will be processed by the handler).
Unfortunately for our deployed server this results in a near constant spam of these error messages (it doesn't happen all the time, but often enough that at scale we are getting at least one every few seconds).  We'd rather not turn the logger off entirely since sometimes errors like this indicate an actual problem.
Possible solutions:

Wrap the write to the socket at line 70 in SockJSSocketBase.java with a try/catch to consume the exception in this case.
Provide a way for us to replace the write handler used by the Socks code with our own so we can catch/consume the exception.
Guarantee that no data will be delivered to the handler after a close has occurred (not sure if that's possible/a good idea).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2282
Why not find a template is an exception Why not 404 · Issue #2282 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
一月 18, 2018 7:19:00 下午 io.vertx.ext.web.impl.RoutingContextImplBase
严重: Unexpected exception in route
freemarker.template.TemplateNotFoundException: Template not found for name "templates.ftl".
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2283
About service discovery using zookeeper connection timeout problem · Issue #2283 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I use zookeeper as a service storage, the application has just started running no problem, but the operation of the period of time the following error:

I think it is not connected in the source code is not caused by the release?
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2284
WebClient.rxSendStream(file) cause AsyncFile OutOfMemoryError · Issue #2284 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm using WebClient.rxSendStream method to upload a large file(2GB) to remote server. The upload speed is normal in the beginning. But it became slower and slower, finally the OutOfMemoryError was thrown.
Vert.x version 3.5.0
Below is my code causing problem, I can consistently reproduce it:
Vertx vertx = Vertx.vertx();
WebClient client = WebClient.create(vertx, new WebClientOptions()
               .setDefaultHost("localhost")
               .setDefaultPort(3000));

vertx.fileSystem().rxOpen("largefile.tar", new OpenOptions())
               .flatMap(file ->client.put("/upload/largefile.tar").rxSendStream(file))
               .subscribe(resp -> {
                   System.out.println("response received: " + resp.statusCode());
               });
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2285
 SQLConnection  batchWithParams did not work · Issue #2285 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx-mysql-postgresql-client(3.5.0 version)
OS: windows 10;
List batch = new ArrayList<>();
JsonArray params = new JsonArray().add("val1").add("val2").add("val3");
batch.add(params);
SQLConnection connection = connect.result();
connection.batchWithParams("SQLQuery", batch, create -> {
System.out.println("batchWithParams");
connection.close();
});
As soon as the 'batchWithParams; method is called on SQLConnection, the event loop gets hanged, and no statements inside the handler are executed, and no exceptions are thrown. I'm facing similar issue while calling the 'batch' method of SQLConnection class as well.
I tried finding similar queries on this group, but couldn't find any relevant ones
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2286
JsonObject: mapFrom misses some fields if the PoJo extends a Hashtable · Issue #2286 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Using swagger codegen to generate POJOs from an OpenAPI spec file, I obtain some objects of the following type:
...
public class MyClass extends HashMap<String, String> implements Serializable {
  private static final long serialVersionUID = 1L;

  @JsonProperty("name")
  private String name = null;

  public MyClass name(String name) {
    this.name = name;
    return this;
  }
...

When converting this particular object into a Vertx JsonObject (i.e. JsonObject json = JsonObject.mapFrom(obj);), only the key/value "fields" present in the hashtable are kept and not the extra fields present in my class e.g. name in the above example.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2287
Best practice when writing tests that require deployed verticles and access to the verticle context · Issue #2287 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there,
Just curious if there is a recommended way to run a test on the context a verticle is using. Currently, I've solved it in by creating a super class method for integration type tests (https://github.com/pitchpoint-solutions/sfs/blob/master/sfs-server/src/test/java/org/sfs/integration/java/BaseTestVerticle.java) that contains a runOnServerContext method. A rule is responsible for deploying the verticles.
Here's an example of a test that uses the runOnServerContext method https://github.com/pitchpoint-solutions/sfs/blob/master/sfs-server/src/test/java/org/sfs/integration/java/test/blob/RemoteBlobActionsTest.java.
If I don't do this I run into deadlock issues when pumping (write/drain/resume calls) involves http client request/response instances and http server request/response instances since either the readstream or writestream context differs from the context used by the verticle.
In the case of the RemoteBlobActionsTest the test generates a file then attempts to pump it to a remote node using an httpclient associated with the SfsServer verticle. If the AsyncFile isn't opened in the server verticle context the pump deadlocks against the http client request.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2288
httpclient allows request to be created in a context other than the one an httpclient was instantiated in resulting in a deadlock on pumping. · Issue #2288 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there,
Here's a reproducer for #2287. Perhaps it would make sense to bind an http client request to the context in which it is created (like AyncFile) instead of the context in which it's first used or throw an exception. In my case this is only an issue in tests since I need to access some of the internal sfs api associated with a verticle instance. Another option could enhance the vertx unit artifact by creating a rule to deploy a verticle and allow a test to be run in the context of a verticle instead of the context of the RunTestOnContext rule so that resources initialized for a test (AsyncFile) could be pumped to an http client request that made an initial connection using a verticle context. The example below is trivial... in a more complex application, it becomes difficult to manage the current behavior during test execution. A non trivial example of an api might look like volumeReplicaGroup.consume(size, newArrayList(MD5, SHA512), asyncFile) and the http clients used internally by the volume replica group may or may not already be bound to the verticle context instead of the test context asycFile is bound to (it would depend on if the verticle had attempted to use the client).
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Context;
import io.vertx.core.Future;
import io.vertx.core.Handler;
import io.vertx.core.Vertx;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.file.AsyncFile;
import io.vertx.core.file.OpenOptions;
import io.vertx.core.http.HttpClient;
import io.vertx.core.http.HttpClientOptions;
import io.vertx.core.http.HttpClientRequest;
import io.vertx.core.http.HttpHeaders;
import io.vertx.core.http.HttpServer;
import io.vertx.core.http.HttpServerOptions;
import io.vertx.core.streams.Pump;
import io.vertx.core.streams.WriteStream;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.RunTestOnContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import java.io.IOException;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.nio.file.Files;
import java.nio.file.Path;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;


@RunWith(VertxUnitRunner.class)
public class Reproducer {

    @Rule
    public RunTestOnContext runTestOnContext = new RunTestOnContext();

    @Test
    public void testClientVerticlePumpsToServerVerticle(TestContext testContext) throws IOException, NoSuchAlgorithmException {
        final byte[] data = new byte[256];
        SecureRandom.getInstanceStrong().nextBytes(data);
        int dataSize = 256 * 1024 * 1024;


        final Path tempFile = Files.createTempFile("", "");

        int bytesWritten = 0;
        try (OutputStream out = Files.newOutputStream(tempFile)) {
            while (bytesWritten < dataSize) {
                out.write(data);
                bytesWritten += data.length;
            }
        }

        Async async = testContext.async();
        Vertx vertx = runTestOnContext.vertx();

        TestVerticleClient testVerticleClient = new TestVerticleClient();
        TestVerticleServer testVerticleServer = new TestVerticleServer();

        OpenOptions openOptions = new OpenOptions();
        openOptions.setRead(true);
        AsyncFile asyncFile = vertx.fileSystem().openBlocking(tempFile.toString(), openOptions);

        vertx.deployVerticle(testVerticleServer, serverDeployment -> {
            if (serverDeployment.failed()) {
                testContext.fail(serverDeployment.cause());
            }
            vertx.deployVerticle(testVerticleClient, clientDeployment -> {
                if (clientDeployment.failed()) {
                    testContext.fail(clientDeployment.cause());
                }
                try {
                    HttpClient clientVerticleHttpClient = testVerticleClient.getHttpClient();
                    HttpClientRequest httpClientRequest = clientVerticleHttpClient.post("/", httpClientResponse -> {
                        testContext.assertEquals(200, httpClientResponse.statusCode());
                        async.complete();
                    }).exceptionHandler(testContext::fail)
                            .putHeader(HttpHeaders.CONTENT_LENGTH, String.valueOf(dataSize))
                            .setTimeout(10000);

                    asyncFile.endHandler(aVoid -> httpClientRequest.end());
                    asyncFile.exceptionHandler(testContext::fail);

                    Pump pump = Pump.pump(asyncFile, httpClientRequest);
                    pump.start();
                } catch (Throwable e) {
                    testContext.fail(e);
                }
            });
        });
    }

    public static class TestVerticleClient extends AbstractVerticle {

        private HttpClient httpClient;

        @Override
        public void start(Future<Void> startFuture) {
            HttpClientOptions httpClientOptions = new HttpClientOptions();
            httpClientOptions.setDefaultHost("127.0.0.1");
            httpClientOptions.setDefaultPort(9999);
            httpClient = getVertx().createHttpClient(httpClientOptions);
            httpClient.post("/", event -> {
                System.out.println("Quick ping to associate connection to this context. If this is not done then no deadlock happens");
                startFuture.complete();
            }).setTimeout(20000)
                    .exceptionHandler(startFuture::fail)
                    .end();
        }

        public HttpClient getHttpClient() {
            return httpClient;
        }

        public Context getContext() {
            return context;
        }
    }

    public static class TestVerticleServer extends AbstractVerticle {

        @Override
        public void start(Future<Void> startFuture) {
            HttpServerOptions httpServerOptions = new HttpServerOptions();
            HttpServer httpServer = getVertx().createHttpServer(httpServerOptions).requestHandler(httpServerRequest -> {
                System.out.println("Server Received Request");
                httpServerRequest.pause();
                httpServerRequest.endHandler(event -> {
                    System.out.println("Server Ended Request");
                    httpServerRequest.response()
                            .setStatusCode(HttpURLConnection.HTTP_OK)
                            .end();
                });
                Pump pump = Pump.pump(httpServerRequest, new NullWriteStream());
                pump.start();
                httpServerRequest.resume();
            });
            httpServer.listen(9999, "127.0.0.1", event -> {
                if (event.failed()) {
                    startFuture.fail(event.cause());
                } else {
                    System.out.println("Server is listening on 127.0.0.1:9999");
                    startFuture.complete();
                }
            });
        }

        public Context getContext() {
            return context;
        }
    }

    public static class NullWriteStream implements WriteStream<Buffer> {

        private boolean dirty = false;
        private boolean ended = false;
        private Handler<Void> drainHandler;
        private Handler<Void> endHandler;

        public NullWriteStream() {
        }


        @Override
        public NullWriteStream write(Buffer data) {
            dirty = true;
            handleDrain();
            return this;
        }

        @Override
        public NullWriteStream exceptionHandler(Handler<Throwable> handler) {
            return this;
        }

        @Override
        public NullWriteStream setWriteQueueMaxSize(int maxSize) {
            return this;
        }

        @Override
        public boolean writeQueueFull() {
            return false;
        }

        @Override
        public NullWriteStream drainHandler(Handler<Void> handler) {
            this.drainHandler = handler;
            handleDrain();
            return this;
        }

        @Override
        public void end(Buffer buffer) {
            ended = true;
            handleEnd();
        }

        @Override
        public void end() {
            ended = true;
            handleEnd();
        }

        protected void handleDrain() {
            if (dirty) {
                dirty = false;
                Handler<Void> handler = drainHandler;
                if (handler != null) {
                    drainHandler = null;
                    handler.handle(null);
                }
            }
        }

        protected void handleEnd() {
            if (ended) {
                Handler<Void> handler = endHandler;
                if (handler != null) {
                    endHandler = null;
                    handler.handle(null);
                }
            }
        }
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2289
Provide a link to documentation for older versions of Vert.x · Issue #2289 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am working in Red Hat OpenShift Application Runtimes and thus limited to using certain APIs in version 3.4.2 and earlier. There does not appear to be a simple way to view the older versions of the Documentation from the Vert.x web site. It would be awesome if we could view documentation from older versions of Vert.x easily.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2290
About AsyncMap · Issue #2290 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hello,
io.vertx.reactivex.core.shareddata.AsyncMap.This class does not provide the values method, is it a problem?
thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2291
ServerHandler throws NPE when shutdown is in progress · Issue #2291 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
While HTTP requests are fired against a vertx based HTTP server and a shutdown is initiated the following exceptions start appearing in the logs:
14:10:05.743 [vert.x-eventloop-thread-0] WARN  i.n.c.AbstractChannelHandlerContext - An exception '{}' [enable DEBUG level for full stacktrace] was thrown by a user handler's exceptionCaught() method while handling the following exception:
io.netty.channel.ChannelPipelineException: io.vertx.core.http.impl.HttpServerImpl$ServerHandlerWithWebSockets.handlerAdded() has thrown an exception; removed.
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:626)
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:235)
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:201)
	at io.vertx.core.http.impl.HttpServerImpl.configureHttp1(HttpServerImpl.java:461)
	at io.vertx.core.http.impl.HttpServerImpl.access$700(HttpServerImpl.java:109)
	at io.vertx.core.http.impl.HttpServerImpl$1$1.configure(HttpServerImpl.java:319)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:48)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:27)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.NullPointerException: null
	at io.vertx.core.http.impl.ServerHandler.handlerAdded(ServerHandler.java:47)
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:606)
	... 21 common frames omitted
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2292
Possible race condition with chunked responses after upgrading to 3.5.0 (now with reproducer) · Issue #2292 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
after upgrading to vert.x 3.5.0 we've been seeing a consistent problem with one of our service APIs: when replying with chunked responses over SSL, clients are reporting encoding errors when processing the response.
The problem is that after a certain load threshold (not sure if the number of such chunks of their size but I can consistently repro it in our service with >4000 chunks) the client will receive invalid chunks and break the connection.
On the server side the problem surfaces with a long list of ClosedChannelException instances which for me I believe was a red herring as a root cause. Trying to debug the service, I noticed that the exceptions are legitimate and caused by a Connection reset by peer exception which is swallowed by netty:
this = {SslHandler@4076}

ctx = {DefaultChannelHandlerContext@4077} "ChannelHandlerContext(ssl, [id: 0x09b97b73, L:/127.0.0.1:8444 - R:/127.0.0.1:63298])"

cause = {IOException@4081} "java.io.IOException: Connection reset by peer"

detailMessage = "Connection reset by peer"

The channel will then be closed and triggering the large number of ClosedChannelException instances when the originally scheduled zrange commands complete.
But there is no symptom on the server-side to describe an encoding problem so my hypothesis is that the client breaks the connection when it receives the first bad chunk thus triggering the Connection reset by peer which in turn surfaces the ClosedChannelException. So I think this is a symptom of a more delicate problem.
When this happens, curl -raw on the web server's endpoint will display some chunks but then stop with one of the following errors:
(...)
curl: (56) Malformed encoding found in chunked-encoding

(...)
curl: (56) Illegal or missing hexadecimal sequence in chunked-encoding

Other clients (see JavaScript below) report the same type of error:
      "name": "RequestError",
      "message": "Error: Parse Error",
      "cause": {
        "bytesParsed": 3,
        "code": "HPE_INVALID_CHUNK_SIZE",
        "cert": {}
      },
      "error": {
        "bytesParsed": 3,
        "code": "HPE_INVALID_CHUNK_SIZE",
        "cert": {}
      },

Also, comparing the payload observed by curl with what the server should provide, the chunk size appears to be correct every time but the chunk content is truncated at random points along the way.
All of the above leads me to believe that the response is indeed corrupted but I can't figure out why/when/how or by whom the chunked response is corrupted in the stack:
 at io.netty.handler.codec.http.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:165)
	  at io.netty.handler.codec.http.HttpObjectEncoder.encode(HttpObjectEncoder.java:138)
	  at io.vertx.core.http.impl.VertxHttpResponseEncoder.encode(VertxHttpResponseEncoder.java:35)
	  at io.netty.handler.codec.MessageToMessageEncoder.write(MessageToMessageEncoder.java:88)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:738)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:730)
	  at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:816)
	  at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:723)
	  at io.netty.handler.stream.ChunkedWriteHandler.doFlush(ChunkedWriteHandler.java:304)
	  at io.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:137)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:768)
	  at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:749)
	  at io.netty.channel.ChannelDuplexHandler.flush(ChannelDuplexHandler.java:117)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	  at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:802)
	  at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:814)
	  at io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:794)
	  at io.vertx.core.net.impl.ConnectionBase.write(ConnectionBase.java:100)
	  at io.vertx.core.net.impl.ConnectionBase.writeToChannel(ConnectionBase.java:110)
	  - locked <0xfd0> (a io.vertx.core.http.impl.ServerConnection)
	  at io.vertx.core.http.impl.ServerConnection.writeToChannel(ServerConnection.java:217)
	  at io.vertx.core.net.impl.ConnectionBase.writeToChannel(ConnectionBase.java:127)
	  at io.vertx.core.http.impl.HttpServerResponseImpl.write(HttpServerResponseImpl.java:611)
	  at io.vertx.core.http.impl.HttpServerResponseImpl.write(HttpServerResponseImpl.java:303)
	  at io.vertx.core.http.impl.HttpServerResponseImpl.write(HttpServerResponseImpl.java:58)

Other observations:

the problem is isolated to versions above 3.5.0 (does not repro in 3.5.0.Beta1 or below and the service code which triggers this behavior hasn't been changed in a while)
it only appears with https and toggling OpenSSL has no effect
for low number of chunks (less than 1000) it rarely reproduces on a cold service start but consistently reproduces afterwards
the actual payload (string content) does not affect it. Considering that there are times in which it does not reproduce with the same content, I believe it behaves like a race condition and not like an input validation bug
debugging appears to be adding synchronization and changes the behavior. I never succeeded in reproducing it while trying to observe this breakpoint. What I did was to condition the breakpoint to fire when contentLength == 0 (marking the end of the response). With the breakpoint enabled, it never reproduces. With the breakpoint muted, it always reproduces.
looking at the change history, my initial idea was that the change which added this behavior was due to this issue (Serialize messages sent to the connection in the order of the synchronization monitor) which was closed with these changes. But after confirming that all messages are written from the event-loop thread, I think it's not relevant.
HttpServerOptions.setMaxChunkSize has no effect.
HttpServerResponse.setWriteQueueMaxSize has no effect.

A reproducer can be consulted here.
Any pointers/help to get to the root cause of this issue would be greatly appreciated.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2293
Use LinkedHashSet in json to data object conversion · Issue #2293 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2294
The data object converter should prefer to use the setter over the adder when a data object declares both · Issue #2294 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2295
Remove SSLv2Hello from the default list of enabled protocols · Issue #2295 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
SSLv2Hello was already removed by the JDK7 enabled algorithms filtering applied, the patch #2279 makes it enabled by default - it should be disabled by default as this is what Java does since JDK7
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2296
Thread blocked · Issue #2296 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 3.5.0 issue
public static void main(String[] args) {
Vertx vertx = Vertx.vertx();
log.debug("start call");
vertx.executeBlocking(f->{
try {
for (int i =0 ; i< 10; i++){
Thread.sleep(10000);
}
f.complete();
}catch (Exception e){
f.fail(e);
}
},ar->{
log.debug("start end {}",ar.succeeded());
});
}
13:12:01.907 [vertx-blocked-thread-checker] WARN  i.v.c.i.BlockedThreadChecker - Thread Thread[vert.x-worker-thread-4,5,main] has been blocked for 61988 ms, time limit is 60000
io.vertx.core.VertxException: Thread blocked
but use 3.3.3 version is ok
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2297
How can I get the *.ttf file？ · Issue #2297 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
in my project, I can't get ttf file.
the response state is 403.
how can i do?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2298
Make LogDelegateFactory configurable via VertxOptions to avoid classloading issues in ContextClassLoader sensitive environments such as OSGi · Issue #2298 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The use of:
String className = System.getProperty("vertx.logger-delegate-factory-class-name");
Thread.currentThread().getContextClassLoader().loadClass(className);
in io.vertx.core.logging.LoggerFactory can be problematic in "context ClassLoader sensitive environments", such as OSGi (but this could also affect use of Vert.x within other environments that do funky class loading); here are some links with background about why that is so:

http://njbartlett.name/2010/08/30/osgi-readiness-loading-classes.html
http://wiki.eclipse.org/Context_Class_Loader_Enhancements
https://helpx.adobe.com/experience-manager/kb/OsgiClassLoading3Party.html
https://issues.apache.org/jira/browse/FELIX-2951

I've actually run into this problem myself, see the detailed error below (which probably won't really make all that sense, without more context ; it's from https://github.com/vorburger/minecraft-storeys-maker/ running under https://github.com/vorburger/ch.vorburger.minecraft.osgi ... but ignore that).
I was able to work-around this in my code by instead of doing this:
System.setProperty("vertx.logger-delegate-factory-class-name", SLF4JLogDelegateFactory.class.getName());
vertx = Vertx.vertx(new VertxOptions().setWorkerPoolSize(23));
using this beauty:
ClassLoader tccl = Thread.currentThread().getContextClassLoader();
Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());
try {
    System.setProperty("vertx.logger-delegate-factory-class-name", SLF4JLogDelegateFactory.class.getName());
    vertx = Vertx.vertx(new VertxOptions().setWorkerPoolSize(23));
} finally {
    Thread.currentThread().setContextClassLoader(tccl);
}
but in an ideal world... this kind of hand-stand should not be required?
One possible solution to this could be to offer an alternative to the system property and ClassLoader mess by simply letting users of Vert.x specify an instance of their desired io.vertx.core.spi.logging.LogDelegateFactory programmatically - I guess this would naturally fit into the io.vertx.core.VertxOptions.VertxOptions ?
Another solution, less flexible and IMHO best combined with above, would be to let io.vertx.core.logging.LoggerFactory try both (first) the getContextClassLoader() (as well as, if NOK) the LoggerFactory.class.getClassLoader().
Would a Pull Request proposing this via code be a welcome contribution to the Vert.x project?
Full background:
[00:07:57 ERROR] [ch.vorburger.osgi.builder.internal.SourceInstallServiceImpl]: Problem reading/installing bundle JAR: /home/vorburger/dev/Minecraft/git/minecraft-storeys-maker/web/build/libs/web-1.0.0-SNAPSHOT.jar
org.osgi.framework.BundleException: Activator start error in bundle web [30].
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2276) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at ch.vorburger.osgi.builder.internal.SourceInstallServiceImpl.lambda$installSourceBundle$0(SourceInstallServiceImpl.java:69) ~[4_ch.vorburger.osgi.gradle-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.osgi.builder.internal.SourceInstallServiceImpl.lambda$installSourceBundle$1(SourceInstallServiceImpl.java:102) ~[4_ch.vorburger.osgi.gradle-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.fswatch.DirectoryWatcherBuilder.firstListenerNotification(DirectoryWatcherBuilder.java:86) [4_ch.vorburger.osgi.gradle-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.fswatch.FileWatcherBuilder.build(FileWatcherBuilder.java:53) [4_ch.vorburger.osgi.gradle-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.osgi.builder.internal.SourceInstallServiceImpl.installSourceBundle(SourceInstallServiceImpl.java:117) [4_ch.vorburger.osgi.gradle-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.minecraft.osgi.dev.BundleManagerPersistence.installAndStartAll(BundleManagerPersistence.java:71) [5_ch.vorburger.minecraft.osgi.dev-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.minecraft.osgi.dev.BundleManager.<init>(BundleManager.java:50) [5_ch.vorburger.minecraft.osgi.dev-1.0.0-SNAPSHOT.jar:?]
	at ch.vorburger.minecraft.osgi.dev.internal.Activator.start(Activator.java:38) [5_ch.vorburger.minecraft.osgi.dev-1.0.0-SNAPSHOT.jar:?]
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) [ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2226) [ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) [ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) [ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984) [ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at ch.vorburger.minecraft.osgi.OSGiFrameworkWrapper.installBundles(OSGiFrameworkWrapper.java:158) [OSGiFrameworkWrapper.class:?]
	at ch.vorburger.minecraft.osgi.OSGiFrameworkWrapper.installBundles(OSGiFrameworkWrapper.java:134) [OSGiFrameworkWrapper.class:?]
	at ch.vorburger.minecraft.osgi.OSGiFrameworkWrapper.installBootBundles(OSGiFrameworkWrapper.java:123) [OSGiFrameworkWrapper.class:?]
	at ch.vorburger.minecraft.osgi.Bootstrap.bootstrapMinecraftOSGi(Bootstrap.java:50) [Bootstrap.class:?]
	at ch.vorburger.minecraft.osgi.MinecraftSpongePlugin.onGameStartingServerEvent(MinecraftSpongePlugin.java:52) [MinecraftSpongePlugin.class:?]
	at org.spongepowered.common.event.listener.GameStartingServerEventListener_MinecraftSpongePlugin_onGameStartingServerEvent3.handle(Unknown Source) [?:?]
	at org.spongepowered.common.event.RegisteredListener.handle(RegisteredListener.java:95) [RegisteredListener.class:1.12.2-7.1.0-BETA-13]
	at org.spongepowered.common.event.SpongeEventManager.post(SpongeEventManager.java:403) [SpongeEventManager.class:1.12.2-7.1.0-BETA-13]
	at org.spongepowered.common.event.SpongeEventManager.post(SpongeEventManager.java:430) [SpongeEventManager.class:1.12.2-7.1.0-BETA-13]
	at org.spongepowered.common.SpongeImpl.postEvent(SpongeImpl.java:213) [SpongeImpl.class:1.12.2-7.1.0-BETA-13]
	at org.spongepowered.common.SpongeImpl.postState(SpongeImpl.java:221) [SpongeImpl.class:1.12.2-7.1.0-BETA-13]
	at org.spongepowered.server.SpongeVanilla.onServerStarting(SpongeVanilla.java:162) [SpongeVanilla.class:1.12.2-7.1.0-BETA-13]
	at net.minecraft.server.dedicated.DedicatedServer.handler$callServerStarting$zpk000(SourceFile:1258) [nz.class:?]
	at net.minecraft.server.dedicated.DedicatedServer.func_71197_b(SourceFile:233) [nz.class:?]
	at net.minecraft.server.MinecraftServer.run(SourceFile:434) [MinecraftServer.class:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_151]
Caused by: java.lang.ExceptionInInitializerError
	at io.vertx.core.impl.VertxImpl.<clinit>(VertxImpl.java:99) ~[?:?]
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:42) ~[?:?]
	at io.vertx.core.Vertx.vertx(Vertx.java:92) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.VertxStarter.start(VertxStarter.java:49) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.StoreysWebPlugin.start(StoreysWebPlugin.java:66) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.Activator.start(Activator.java:44) ~[?:?]
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2226) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	... 32 more
Caused by: java.lang.IllegalArgumentException: Error instantiating transformer class "io.vertx.core.logging.SLF4JLogDelegateFactory"
	at io.vertx.core.logging.LoggerFactory.initialise(LoggerFactory.java:59) ~[?:?]
	at io.vertx.core.logging.LoggerFactory.<clinit>(LoggerFactory.java:37) ~[?:?]
	at io.vertx.core.impl.VertxImpl.<clinit>(VertxImpl.java:99) ~[?:?]
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:42) ~[?:?]
	at io.vertx.core.Vertx.vertx(Vertx.java:92) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.VertxStarter.start(VertxStarter.java:49) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.StoreysWebPlugin.start(StoreysWebPlugin.java:66) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.Activator.start(Activator.java:44) ~[?:?]
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2226) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	... 32 more
Caused by: java.lang.ClassNotFoundException: io.vertx.core.logging.SLF4JLogDelegateFactory
	at net.minecraft.launchwrapper.LaunchClassLoader.findClass(LaunchClassLoader.java:191) ~[launchwrapper-1.12.jar:?]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[?:1.8.0_151]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:1.8.0_151]
	at io.vertx.core.logging.LoggerFactory.initialise(LoggerFactory.java:56) ~[?:?]
	at io.vertx.core.logging.LoggerFactory.<clinit>(LoggerFactory.java:37) ~[?:?]
	at io.vertx.core.impl.VertxImpl.<clinit>(VertxImpl.java:99) ~[?:?]
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:42) ~[?:?]
	at io.vertx.core.Vertx.vertx(Vertx.java:92) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.VertxStarter.start(VertxStarter.java:49) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.StoreysWebPlugin.start(StoreysWebPlugin.java:66) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.Activator.start(Activator.java:44) ~[?:?]
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2226) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	... 32 more
Caused by: java.lang.NullPointerException
	at net.minecraft.launchwrapper.LaunchClassLoader.findClass(LaunchClassLoader.java:182) ~[launchwrapper-1.12.jar:?]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[?:1.8.0_151]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:1.8.0_151]
	at io.vertx.core.logging.LoggerFactory.initialise(LoggerFactory.java:56) ~[?:?]
	at io.vertx.core.logging.LoggerFactory.<clinit>(LoggerFactory.java:37) ~[?:?]
	at io.vertx.core.impl.VertxImpl.<clinit>(VertxImpl.java:99) ~[?:?]
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:42) ~[?:?]
	at io.vertx.core.Vertx.vertx(Vertx.java:92) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.VertxStarter.start(VertxStarter.java:49) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.StoreysWebPlugin.start(StoreysWebPlugin.java:66) ~[?:?]
	at ch.vorburger.minecraft.storeys.web.Activator.start(Activator.java:44) ~[?:?]
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2226) ~[ch.vorburger.minecraft.osgi-1.0.0-SNAPSHOT-all.jar:?]
	... 32 more
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2299
make LoggerFactory try its own ClassLoader if TCCCL fails, see #2298 by vorburger · Pull Request #2299 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2300
 add setLogDelegateFactory() to LoggerFactory, fixes #2298 by vorburger · Pull Request #2300 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2301
Allow separate classloading for netty by Marssmart · Pull Request #2301 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This restriction would prevent features/protocols that use netty
in different version and are out of vertx scope
to be started inside vertx stack.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2302
Upgrade Jetty ALPN agent to 2.0.7  · Issue #2302 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
so the tests can run with the latest Oracle JDK.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2303
Improve default dns client configuration · Issue #2303 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the default dns client host is localhost.
It could be changed to null which means to use the value used by the address resolver which would be more consistent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2304
HttpClient should not cache request body for redirection purpose · Issue #2304 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently the http client redirection following feature will cache the sent body along with the request, this may is not desirable
change: remove the request body cache
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2305
Limit the size of the cached request body for following redirections … by vietj · Pull Request #2305 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj I'm not comfortable with this. As a default, we should follow the W3C recommendations:

If the 301 status code is received in response to a request other than GET or HEAD, the user agent MUST NOT automatically redirect the request unless it can be confirmed by the user, since this might change the conditions under which the request was issued.


If the 302 status code is received in response to a request other than GET or HEAD, the user agent MUST NOT automatically redirect the request unless it can be confirmed by the user, since this might change the conditions under which the request was issued.


If the 307 status code is received in response to a request other than GET or HEAD, the user agent MUST NOT automatically redirect the request unless it can be confirmed by the user, since this might change the conditions under which the request was issued.

https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html
This is what other HTTP clients do (I checked Apache and OkHttp)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2306
The HttpClient websocket connect method should call the error handler at most once · Issue #2306 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: currently connecting from the client may invoke the error handler more than one time (the errors are reported from the underlying websocket stream).
change: use an future in the implementation to guarantee at most one callback
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2307
Fix HttpClient default redirection policy · Issue #2307 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation: the current redirection policy does not follow strictly https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html. It performs a redirection on any HTTP method for the 301, 302 and 307 status instead of only GET and HEAD. In addition for 301 and 302 status it changes the method to GET
change: perform redirection for 301, 302 and 307 status code only when the method is GET or HEAD and do not change the method
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2308
HttpClient redirection fixes - fixes #2307 - fixes #2304 by vietj · Pull Request #2308 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
yes I planned to do so
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2309
Redirect handler should not decode query params by tsegismont · Pull Request #2309 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj please review
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2310
Investigate adding the protocol in HTTP RequestOptions · Issue #2310 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2311
With Netty Epoll throw readAddress(..) failed: Connection timed out · Issue #2311 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
env
Java : 1.8.0_144
vertx: 3.5.0 with cluster manager Hazelcast
netty: netty-all:4.1.19.Final
os: ubuntu 16.04
I use vertx to create tcp server and set setPreferNativeTransport = true  ,NetServerOptions
NetServerOptions ops = new NetServerOptions();
        ops.setReceiveBufferSize(32 * 1024)
                .setSendBufferSize(32 * 1024)
                .setIdleTimeout(timeoutSecond)
                .setPort(port)
                .setHost(host)
                .setTcpFastOpen(true)
                .setTcpQuickAck(true)
                .setUsePooledBuffers(true)
                .setTcpNoDelay(true);
client will send 3 kinds package

< 38B  every 1 second ,server just receive then send to kafka
1.2KB  every 1 second ,server just receive then send to kafka
heartbeat 35B every 5 seconds , server send ack

 log.info("write data to client...[{}]", StringUtil.toHexString(cmd.getBytes()));
        if (Objects.isNull(client)) {
            return false;
        }
        client.write(cmd);
        if (client.writeQueueFull()) {
            client.pause();
            client.drainHandler(done -> client.resume());
        }

with 1000 clients after a few hours netty will throw readAddress(..) failed: Connection timed out
2018-02-01 07:36:59,545 [ERROR] [vert.x-eventloop-thread-9] 
DataHubBroker [DataHubBroker.java : 154] device error io.netty.channel.unix.Errors$NativeIoException: readAddress(..) failed: Connection timed out
 at io.netty.channel.unix.Errors.newIOException(Errors.java:122)
 at io.netty.channel.unix.Errors.ioResult(Errors.java:146)
 at io.netty.channel.unix.FileDescriptor.readAddress(FileDescriptor.java:178)
 at io.netty.channel.epoll.AbstractEpollChannel.doReadBytes(AbstractEpollChannel.java:347)
 at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:786)
 at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404)
 at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304)
 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 at java.lang.Thread.run(Thread.java:748)

I find   netty  issues.but it close at 4.0.26 .Any ideas for help?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2312
Use nanoTime for LocalAsyncMap expiration instead of currentTimeMillis by tsegismont · Pull Request #2312 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes, the Vert.x timer was fired but the value still looked valid (because of currentTimeMillis).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2313
spring-boot-maven-plugin and 'Main-Verticle' are not working together. · Issue #2313 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Launcher is not using the Main-Verticle manifest header in case the Main-Class does not match with itself. I'm not certain about the intent of this check, but this causes this issue:
As spring-boot has its own JarLauncher, therefore it won't see itself there.
Why use the spring-boot plugin?
Shade puts everything together into to root. If there are some clashes, eg. resource files, then you need transformers. SB plugin creates a jar classloader for each embedded jars, multiple resources can be found without magic.
After creating the classloaders, the class under "Start-Class" will be started.
I'm certain, that vert.x should not be concerning about this in the Launcher. "Start-Class" is an implementation detail of a different world.
Maybe Laucher could be more lax about the main class/verticle when a manifest entry instructs it to do so. Or a vertx specific manifest entry would be able to override the checks for "Main-Class" to something else.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2314
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2315
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2316
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2317
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2318
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2319
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2320
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2321
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2322
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2323
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2324
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2325
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2326
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2327
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2328
Document that VertxOptions.setClustered is for internal usage · Issue #2328 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The javadoc explains almost nothing about VertxOptions.setClustered(boolean clustered) or EventBusOptions.setClustered(boolean clustered).
In fact, this option is not for public usage, as clustered mode has to be enabled by calling Vertx.clusteredVertx.
You should either lower the access to setClustered to "package" or add some explanations in the javadoc.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2329
Use plain asciidoc file instead of package-info file · Issue #2329 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2330
Implemented RFC6901 - Json Pointer including tests and docs by slinkydeveloper · Pull Request #2330 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@slinkydeveloper don't forget file headers (license, etc)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2331
bug report: sometimes deploy verticle future not invoked. · Issue #2331 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx version: 3.5.0
create a verticle:
public void start(Future<Void> startFuture) throw Exception{
  super.start();

  HttpServerOptions options = new HttpServerOptions();
  options.setKeyStoreOptions(new JksOptions().setPath("notExistPath"));
  options.setSsl(true);

  then use options to create a http server
  and httpServer.listen will throw a exception caused by SSLHelper.validate
}

deploy the verticle:
  vertx.deployVerticle(the verticle class, new DeploymentOptions(), ar->{
    this future will not be invoked.
  });

in other conditions, eg: port already binded or directly throw exception from verticle.start, deploy future is no problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2332
Launcher setClustered invalid · Issue #2332 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
my VxApiLauncher is extends Launcher
in beforeStartingVertx i setting Clustered is true
but in afterStartingVertx or myVerticle clustered is false

vert.x version 3.5.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2333
Provide a bit more context to the exception by ctron · Pull Request #2333 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ok, I think there is a bug in the logger implementation of vertx. Or I didn't understand it correctly. The change results in the following exception output:
11:57:39.488 [vert.x-eventloop-thread-3] ERROR i.vertx.core.net.impl.ConnectionBase - Unhandled exception for connection: {}
java.io.IOException: Connection reset by peer
	at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1106)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:373)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:123)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at java.lang.Thread.run(Thread.java:748)

I would have expected {} to be replaced with the first entry of the parameters. But it looks like it is empty.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2334
Feature: Add Pkcs11Options like Keystore · Issue #2334 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the HCE context, we need to store the private key in an HSM. I tested this naive implementation :)
Main.java
vertx.createHttpServer(
    new HttpServerOptions()
    .setSsl(true)
    .setPkcs11KeyOptions(new Pkcs11Options())
);
io.vertx.core.net.impl.KeyStoreHelper
else if (options instanceof Pkcs11Options) {
      KeyStore ks = KeyStore.getInstance("PKCS11");
      ks.load(null, null);
      return new KeyStoreHelper(ks, null);
}
Configuration example
JVM
-Djava.security.properties=/hsm/java.security.pkcs11
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2335
Support setting local address when using tcp based clients · Issue #2335 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
My friend was using vertx webclient as a crawling client, while the SA of his company require him to specify the local port for some security reasons.
I read the source code of vertx and found out that the current version vertx doesn't support specifying local address when making tcp connections or creating udp sockets.
However I think it's not difficult to achieve such thing:
I walked through the code and found that when using http client, the connection is setup in ChannelProvider, where bootstrap.connect is invoked with one argument (the remote address). I think it's not hard to add an arguemnt to ChannelProvider#connect like this:
public void connect(VertxInternal vertx, Bootstrap bootstrap, ProxyOptions options, SocketAddress remoteAddress,
      SocketAddress localAddress,
      Handler<Channel> channelInitializer, Handler<AsyncResult<Channel>> channelHandler) {
then call bootstrap.connect with two arguments (the remote addres and the local address).
And some fields could be added to NetworkOptions or TCPSSLOptions to store the local address info.
And ofcause, the related code would all be modified.
I would like to make a pr but before that I would like to check whether this fixing method is ok and why it's not supported for now ...
Also, I saw that the argument ProxyOptions options is not used in connect method, is it safe to be removed?
Looking forward to your reply~
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2336
Support setting local port for http and tcp clients by wkgcass · Pull Request #2336 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
any news about this on going PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2337
Http client request timeout with hashedWheelTimer by pifuant · Pull Request #2337 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you explain what is the benefit to use this instead of vert.x timer ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2338
Continuous IOException when WebSocket write fails due to a closed socket · Issue #2338 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
We are using version 3.5.0, to build a websocket server. At times, when a client's websocket is closed, the EventLoop is still trying to write to the netty Channel, ignoring the closed state. This might be something internal to netty, but I want to ask your team first to understand if there is any known issue.
A result of this, is repeated IOExeptions being thrown on the ExeptionHandler of the WebSocket.
java.io.IOException: Connection reset by peer
at sun.nio.ch.FileDispatcherImpl.writev0(Native Method)
at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51)
at sun.nio.ch.IOUtil.write(IOUtil.java:148)
at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)
at io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:433)
at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:875)
at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.forceFlush(AbstractNioChannel.java:368)
at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:639)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580))
During this time, the application grinds to a halt and the main event loop stops processing other tasks.
This usually happens when the application is writing lots of messages to a client socket, and the socket gets disconnected (while some messages still held in the socket/channel's write queue). I am not familiar with the internal acrchitecture of netty, but it looks like the following code in Netty's AbstractChannel's flush0() method is not closing the channel appropriately causing further writes to happen
        try {
            doWrite(outboundBuffer);
        } catch (Throwable t) {
            if (t instanceof IOException && config().isAutoClose()) {
                /**
                 * Just call {@link #close(ChannelPromise, Throwable, boolean)} here which will take care of
                 * failing all flushed messages and also ensure the actual close of the underlying transport
                 * will happen before the promises are notified.
                 *
                 * This is needed as otherwise {@link #isActive()} , {@link #isOpen()} and {@link #isWritable()}
                 * may still return {@code true} even if the channel should be closed as result of the exception.
                 */
                close(voidPromise(), t, FLUSH0_CLOSED_CHANNEL_EXCEPTION, false);
            } else {
                outboundBuffer.failFlushed(t, true);
            }
        } finally {
            inFlush0 = false;
        }

I am not sure if there is a designated way to properly close vert.x's websocket in order to avoid this.
Thanks in advance.
Udai.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2339
HttpClient send form with file upload · Issue #2339 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Creating an HTTP server to receive multipart/form-data requests with file uploads is as easy as adding the BodyHandler.create() handler to a Router's route(). It would be great to just as easily to create an HTTP client request that  sends multipart/form-data with (one or more) file uploads.
This would be helpful for:

Unit testing HTTP servers that can accept file uploads
Uploading files to external services that require them to be sent using multipart/form-data

Currently, uploading files like this can be done with the HttpClient, but it takes much more work than writing an HTTP server that can accept file uploads. Thankfully, Vert.x has test code that can help users understand how to do this: https://github.com/eclipse/vert.x/blob/7798d8931f63bd4321a89e5d1349aa7f2d2f3bdd/src/test/java/io/vertx/test/core/HttpTest.java#L2542
This topic has also been briefly discussed on the Google user group:

https://groups.google.com/forum/#!searchin/vertx/httpclient$20file$20upload%7Csort:date/vertx/IPBIRQkaM2w/mpfd4PAmAQAJ
https://groups.google.com/forum/#!searchin/vertx/httpclient$20file$20upload%7Csort:date/vertx/yWqCleIg52E/eVE6ZAQKAwAJ
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2340
Unable to read SSL certificates from jar · Issue #2340 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Sometimes we want to use key files provided by jar balls, but vertx cannot handle the path.
It'll be cool if vertx allows to look for resources by relative paths in classloader (and use them for SSL certificates in this case).
More information :
Version

vert.x core: 3.5.1
vert.x web: 3.5.1
openjdk version "1.8.0_151" with 64-Bit Server VM (build 25.151-b12, mixed mode)

Steps to reproduce

Package key files *.pem in jar :


ssl/privKey.pem
ssl/cert_fullchain.pem
ssl/AddTrustExternalCARoot.pem


Add them to options

        PemKeyCertOptions pemKeyCertOptions = new PemKeyCertOptions()
            .addKeyPath(ClassLoader.getSystemResource("ssl/privKey.pem").toExternalForm())
            .addCertPath(ClassLoader.getSystemResource("ssl/cert_fullchain.pem").toExternalForm());
        PemTrustOptions pemTrustOptions = new PemTrustOptions()
            .addCertPath(ClassLoader.getSystemResource("ssl/AddTrustExternalCARoot.pem").toExternalForm());

        HttpServerOptions httpsOptions =
                new HttpServerOptions()
                        ...
                        .setSsl(true)
                        .setKeyCertOptions(pemKeyCertOptions)
                        .setTrustOptions(pemTrustOptions)
                        ...



Create a server and listen to HTTPS port

HttpServer server = vertx.createHttpServer(httpsOptions);
server.listen(443);

Extra

ClassLoader.getSystemResource("ssl/*.pem").getPath() doesn't work either

The problem begins from io.vertx.core.file.impl.FileSystemImpl#readFileInternal line 736 byte[] bytes = Files.readAllBytes(target); it seems this one cannot handle zip file systems
ClassLoader.getResourceAsStream(...) works for this special case

Error message

io.vertx.core.file.FileSystemException: java.nio.file.NoSuchFileException: /home/bmwcmw/dev/projects/application/jar:file:/home/bmwcmw/dev/projects/application/build/libs/fatJar.jar!/ssl/ssl_trust_file.pem
io.vertx.core.VertxException: io.vertx.core.file.FileSystemException: java.nio.file.NoSuchFileException: /home/bmwcmw/dev/projects/application/jar:file:/home/bmwcmw/dev/projects/application/build/libs/fatJar.jar!/ssl/AddTrustExternalCARoot.crt
	at io.vertx.core.net.impl.SSLHelper.getContext(SSLHelper.java:455)
	at io.vertx.core.net.impl.SSLHelper.validate(SSLHelper.java:482)
	at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:254)
	at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:222)
	at com.demo.WebServer.start(WebServer.java:230)
	at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:106)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:483)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: io.vertx.core.file.FileSystemException: java.nio.file.NoSuchFileException: /home/bmwcmw/dev/projects/application/jar:file:/home/bmwcmw/dev/projects/application/build/libs/fatJar.jar!/ssl/AddTrustExternalCARoot.crt
	at io.vertx.core.file.impl.FileSystemImpl$13.perform(FileSystemImpl.java:740)
	at io.vertx.core.file.impl.FileSystemImpl$13.perform(FileSystemImpl.java:732)
	at io.vertx.core.file.impl.FileSystemImpl.readFileBlocking(FileSystemImpl.java:296)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1357)
	at java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:294)
	at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206)
	at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:161)
	at java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:300)
	at java.util.stream.Streams$ConcatSpliterator.tryAdvance(Streams.java:728)
	at java.util.Spliterators$1Adapter.hasNext(Spliterators.java:681)
	at io.vertx.core.net.impl.KeyStoreHelper.loadCA(KeyStoreHelper.java:330)
	at io.vertx.core.net.impl.KeyStoreHelper.create(KeyStoreHelper.java:124)
	at io.vertx.core.net.TrustOptions.getTrustManagerFactory(TrustOptions.java:43)
	at io.vertx.core.net.impl.SSLHelper.getTrustMgrFactory(SSLHelper.java:322)
	at io.vertx.core.net.impl.SSLHelper.getContext(SSLHelper.java:453)
	... 14 common frames omitted
...
Caused by: java.nio.file.NoSuchFileException: /home/bmwcmw/dev/projects/application/jar:file:/home/bmwcmw/dev/projects/application/build/libs/fatJar.jar!/ssl/AddTrustExternalCARoot.crt
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.Files.readAllBytes(Files.java:3152)
	at io.vertx.core.file.impl.FileSystemImpl$13.perform(FileSystemImpl.java:736)
	... 30 common frames omitted

Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2341
App Id in the start command doc is wrong · Issue #2341 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the doc mentions -Dvertx-id instead of —vertx-id
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2342
HttpClient: wrong poolSize option · Issue #2342 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
in HttpChannelConnector, pool sizes are swapped between HTTP1/HTTP2:
this.http1Weight = client.getOptions().getHttp2MaxPoolSize();
this.http2Weight = client.getOptions().getMaxPoolSize();
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2343
Created andThen methods for Future by slinkydeveloper · Pull Request #2343 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think this code does not compile with maven
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2344
Add missing VertxGen annotation on JsonEventType by pmlopes · Pull Request #2344 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2345
About file uploading · Issue #2345 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When uploading files directly into the file-uploads directory, can I intercept it?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2346
Make HttpClientRequest#host() returns the actual server origin of the request instead of the host header · Issue #2346 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was looking into metrics and wanted to group HTTP client request metrics by host. Unfortunately the original host is not easily accessible and before I PR something I wanted to point out that the whole host handling is somewhat confusing right now and start a discussion about naming.
So HttpClientRequestBase has a host field, that will be populated in the constructor by the default host or the host from the actual request depending on the use case. Albeit it does not have a direct access method for it.
There is a protected hostHeader() method, that does depending on the ssl type of the request return the host or the host plus port. Otherwise the field is completely encapsulated and only used for the absoluteURI method.
To make things a little confusing the HttpClientRequestImpl has a getHost() method that returns the content of the hostHeader field in that class. Furthermore it overrides the hostHeader() method to give precedence to this field, but that is still protected.
My naive approach would have been to add a getRawHost() or getBaseHost() to HttpClientRequestBase but that feels fishy at least. Any suggestions?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2347
HttpServerRequest provides a bytesRead() method by fzakaria · Pull Request #2347 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it owuld be better to keep it as you are doing and make it an utility ReadStream, the bytesRead is a detail implementation and it does not even exists in HTTP/2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2348
Allow access to host() field by marcust · Pull Request #2348 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse Contributor Agreement?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2349
Measuring the event-loop  · Issue #2349 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So I stumbled upon
    // No metrics, we are on the event loop.
and was wondering what one has to do with the other? Why shouldn't I want to measure my eventloop throughput?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2350
Clustering tests: let cluster managers decide how to tear down clustered nodes · Issue #2350 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, the base test class stops all nodes at the same time.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2351
vertx reactive route debugging loosing information. · Issue #2351 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following is a debug statement from the router
Route matches: Route[ path:/internal/locationservice/v1/location/upload pattern:null handlers:[io.vertx.reactivex.ext.web.Route$1@6eb5570f] failureHandlers:[io.vertx.reactivex.ext.web.Route$4@472a4fc4] order:21 methods:[POST]]@1207255076
Note that the context of the handlers are totally lost so the debug statements are pointless.
This is due to the delegate mapping from io.vertx.reactivex.ext.web in io.vertx.reactivex.ext.web.Route.handler. The anonymous class removes the toString of the handler.
To make this relevant in the wrapping either

remove the delegate wrapping here and put the handler directly into the router.
Or
make the anonymous class decorate the toString with the relevant handler.

This was found in the 3.5.2 release.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2352
Remove timer callbacks from the metrics SPI · Issue #2352 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the upcoming vertx-micrometer-metrics module, timer metrics are not implemented. They were not implemented either in the Hawkular module.
If this metric is not relevant / not seen as useful, it should probably be deprecated. The related API methods are:

VertxMetrics.timerCreated
VertxMetrics.timerEnded

As far as I know they're only implemented in vertx-dropwizard-metrics
In the opposite way, if it is decided to keep them, we should probably open an issue in vertx-micrometer-metrics to implement it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2353
There is no proper way to store mutable objects in a local map · Issue #2353 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It is possible only for JsonObject, byte array and some other copyable objects known to vert.x.
It would be usefull to have mechanism to store mutable user objects in a local map if they can be copied.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2354
Allow to store mutable objects in local map by nolequen · Pull Request #2354 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello @vietj,
could you please review the PR and merge it if possible?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2355
Adding metrics SPI methods for the event loop by marcust · Pull Request #2355 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
monitoring does not seem available for native transports :-( (because classes are final)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2356
HTTP client connection keep alive timeout support by vietj · Pull Request #2356 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
rebased on master
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2357
Remove timer callbacks from the metrics SPI by tsegismont · Pull Request #2357 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closes #2352
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2358
Set SO_REUSEPORT to ServerBootstrap instead of child options by guoyu511 · Pull Request #2358 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
good catch, is there any practical way to test this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2359
Context improvements · Issue #2359 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A few improvements and simplifications can be done in Vert.x Context

remove the internal ContextTask functional interface (which is a Runnable that can throw) as we can use Handler<Void> in practice which unified the internal Context#wrapTask method
remove the internal Action functional interface (which is similar to a Callable) as we can use the Handler<Future<T>> idiom instead
add a ContextInternal#executeFromIO(T,Handler<T>) so an handler task can be passed an argument
decompose the implementation of ContextImpl#wrapTask so the logic can be reused by executeFromIO without creating a unnecessary lambda
handle the worker task metric in WorkerContext instead of ContextImpl#wrapTask
avoid unnecessary lambda captures in VertxHandler when handling a message from Netty
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2360
Vertx context improvements by vietj · Pull Request #2360 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj looks good to me. Have you prepared PRs for cluster managers?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2361
Json#decodeValue cannot deserialize a JSON null/number/boolean from a Buffer · Issue #2361 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

vert.x core: 3.5.1

Context
An EOFException is unexpectedly thrown when deserializing a JSON primitive (null, Integer, String) from a vert.x Buffer. Unrolling the buffer into a String prior to deserialization works as expected.
Do you have a reproducer?

https://github.com/GeorgeMH/vertx-json-eof-bug

Steps to reproduce

Call Json.encodeToBuffer(42)
Call Json.decodeValue(buffer, Integer.class) on the buffer created in step 1.

Extra

N/A
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2362
HTTP/2 via HTTP/1.1 connection upgrade does not respect the protocol · Issue #2362 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, the upgrade implementation assumes that the HTTP/1.1 request should not be treated as an HTTP/2 stream and only send an HTTP/1.1 response.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2363
java.lang.NoClassDefFoundError · Issue #2363 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/eclipse/vert.x/blob/354abf0332a5218959c32f237b622bdfcd26faae/src/main/java/io/vertx/core/impl/DeploymentManager.java#L205
Need to catch as Throwable.
Explain: MavenVerticleFactory resolve "compile" scope only. MavenVerticleFactory will missing some runtime dependencies, NoClassDefFoundError will throw and this block can not catch it.
Console prints only "INFO: Resolving xxxxx.xxx"
and nothing happen after that.No way know why application not run without debuging
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2364
EventBus message fail method overload without error code · Issue #2364 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For now class "Message" have only one way to report about failure on consumer side:
void fail(int failureCode, String message);
Maybe this is useful for proxy services, but for simple message passing it is redundant. I need to define some list of error codes and maintain it on clients. But I just want to send a simple message to some address and get simple response (OK or NOT).
What was the reason for such design decision?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2365
HTTP server connection keeps processing pending pipelined requests when connection closed · Issue #2365 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP server keeps processing pipelined HTTP messages when the connection is closed during the processing of a request and there are pending HTTP request in the server pipeline (i.e the response has not been sent). This is due to a bug that when a message has not been processed during a check, the connection redo the check and it must not do it.
Changes: we only trigger an message processing check from the message check itself when a message has been effectively processed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2366
HTTP server connection keeps processing pending pipelined requests by vietj · Pull Request #2366 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont the server connections receives pipelined requests messages (HttpRequest, HttpLastContent, HttpRequest, etc...)
The first requests does not end the first response so the field pendingResponse remains assigned and it closes the connection.
When the second requests arrives (it arrives in the same channel read operation since it's pipelined and aggregated at the TCP level) then processMessage(Object) returns false and the request object is enqueued. The first processing  message triggered a call to checkNextTick(), when the asynchronous checkNextTick() runs it tries to process the message and fails since pendingResponse  is still assigned, the message is put back on the queue and since the queue is not empty checkNextTick() is called again and so on.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2367
Http improvements by vietj · Pull Request #2367 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
rebased on master
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2368
Exception in DefaultChannelPipeline: it reached at the tail of the pipeline · Issue #2368 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Today I received a lot of exceptions every millisecond for hours looking like an infinite loop in the log file:
2018-04-04 01:16:38,513 �[31mWARN�[0;39m [vert.x-eventloop-thread-2] [i.n.c.DefaultChannelPipeline] - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception. java.lang.IllegalArgumentException: invalid version format: (T H I S  I S   J U S T  A  S U R V E Y !)
	at io.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:121)
	at io.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:76)
	at io.netty.handler.codec.http.HttpRequestDecoder.createMessage(HttpRequestDecoder.java:87)
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:219)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:60)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:38)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:141)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)


What does this come from? Does i thappen during request or response handling or during SSL handshake?
Where to add a exception handler to catch this exception
Where does T H I S  I S  J U S T  A  S U R V E Y ! come from?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2369
WARNING: An illegal reflective access operation has occurred · Issue #2369 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When running a Vert.x instance, the following warnings will be output to stdout:
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by io.netty.util.internal.ReflectionUtil (file:/…/io.netty/netty-common/4.1.19.Final/b281916c11d3eeec5e839677ec4f2eb9d7586928/netty-common-4.1.19.Final.jar) to constructor java.nio.DirectByteBuffer(long,int)
WARNING: Please consider reporting this to the maintainers of io.netty.util.internal.ReflectionUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations

These warnings were fixed by netty/netty#7650 and are available in release 4.1.21.Final and later
Upgrading the Netty dependency to that version should fix that problem
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2370
HttpClient pool gets inconsistent on a synchronous connection failure · Issue #2370 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClient pool assumes that the underlying ConnectionProvider will make an asynchronous callback, which is the case with the asynchronous DNS resolver but not with the JVM synchronous resolver when the host cannot be resolved.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2371
How does the BlockedThreadChecker work? · Issue #2371 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
where BlockedThreadChecker call registerThread（VertxThread）?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2372
Clustered event bus traffic security [doc issue] · Issue #2372 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I'm new to Vert.x and going through documentation. Not sure where to report doc issues.
I m going through 'Security notes' (https://vertx.io/docs/vertx-core/java/#_clustered_event_bus_traffic), and it is mentioned:

Clustered event bus traffic
When clustering the event bus between different Vert.x nodes on a network, the traffic is sent un-encrypted across the wire, so do not use this if you have confidential data to send and your Vert.x nodes are not on a trusted network.

But in 'Configuring the event bus' (https://vertx.io/docs/vertx-core/java/#_configuring_the_event_bus) section, it is mentioned we can provide keystore for secure communication.

Configuring the event bus
...

VertxOptions options = new VertxOptions()
    .setEventBusOptions(new EventBusOptions()
        .setSsl(true)
        .setKeyStoreOptions(new JksOptions().setPath("keystore.jks").setPassword("wibble"))
        .setTrustStoreOptions(new JksOptions().setPath("keystore.jks").setPassword("wibble"))
        .setClientAuth(ClientAuth.REQUIRED)
    );


The previous snippet depicts how you can use SSL connections for the event bus, instead of plain TCP connections.

So, which is correct? I can confirm this by running Vert.x in cluster mode with keystore and see the traffic over the wire myself. But wanted to get the confirmation from the experienced users/authors. Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2373
Don't route connection write promise failures in the pipeline · Issue #2373 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the ConnectionBase#writeToChannel(Object) method uses the channel void promise for the channel write. When an error occurs, the channel void promise will invoke the pipeline exception handling. This can create undesired loop where an API exception handling performs a write operations that fails and invoke the same exception handler again for its own failure.
Instead we create our own void promise that won't fire the exception.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2374
Uncaught exception in Netty pipeline · Issue #2374 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
While running servers with vert.x 3.5.1 (vertx + vertx web), I got
"An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception."
The exception itself is an java.lang.IllegalArgumentException thrown by io.netty.handler.codec.http.HttpVersion either for empty version or invalid version.
So far I was not able torreproduce this error with a simple example, but here some observations :
If I send a valid HTTP request (with keep alive) and then an invalid HTTP request (like GET / HTTP/dummy), I got the IllegalArgumentException, but it is actually catched and logged by vertx ConnectionBase.
In the case where I got  "An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.", it is actually not caught by vert.x at all, and it is looping forever (like the error is not "consumed" from the event loop).
Here the stack trace
An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
java.lang.IllegalArgumentException: invalid version format: (LINUX; U; ANDROID 4.3; RU-RU; GT-I9300I BUILD/JLS36C) APPLEWEBKIT/534.30 (KHTML, LIKE GECKO) VERSION/4.0 MOBILE SAFARI/534.30 
 at io.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:121)
 at io.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:76)
 at io.netty.handler.codec.http.HttpRequestDecoder.createMessage(HttpRequestDecoder.java:87)
 at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:219)
 at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
 at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
 at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
 at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
 at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
 at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
 at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
 at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:141)
 at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
 at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
 at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 at java.lang.Thread.run(Thread.java:745)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2375
Http1xOrH2CHandler should remove itself before firing the buffer · Issue #2375 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Http1xOrH2CHandler removes itself after firing the buffer which leads the Http1xOrH2CHandler to process a decoded error (that is fired in the pipeline to be treated like a network error). It should should remove itself before, since once the protocol has been identified, it should not interact anymore with the pipeline
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2376
net client idle in ms · Issue #2376 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I am using vertx redis and I need to idle timeout in less than a seconds. I am using Redis vertx and I have checked that NetClientImpl always call IdleStateHandler in a way that it will idle in seconds.
Do you support only TimeUnit.SECONDS for a specific reason ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2377
The http server request exception handler should observe the response as closed on a close event · Issue #2377 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2378
Fix @return documentation of JsonArray.getJsonObject by julianladisch · Pull Request #2378 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@julianladisch thanks, nice catch!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2379
Typo prevents configuration of EpollTransport · Issue #2379 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Inside of Transport.java, the configure method has the following:
    setOption("TCK_CORK", options.isTcpCork(), setter);
    setOption("TCK_QUICKACK", options.isTcpQuickAck(), setter);
    setOption("TCK_FASTOPEN", options.isTcpFastOpen(), setter);

But inside EpollTransport.java it is looking for:
      case "TCP_QUICKACK":
        return EpollChannelOption.TCP_QUICKACK;
      case "TCP_CORK":
        return EpollChannelOption.TCP_CORK;
      case "TCP_FASTOPEN":
        return EpollChannelOption.TCP_FASTOPEN;
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2380
The HTTP server should always resume the request when the last chunk is processed · Issue #2380 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version 3.5.1
fun main(args: Array<String>) {

    val vertx = Vertx.vertx()

    val router = Router.router(vertx)
    router.route().handler { context ->
        context.request().isExpectMultipart = true
        context.request().uploadHandler { upload ->
            val uploadedFileName = File.createTempFile("test", ".txt").path
            upload.streamToFileSystem(uploadedFileName)
            upload.exceptionHandler { t -> context.fail(t) }
            upload.endHandler { context.response().end() }
        }
    }
    vertx.createHttpServer().requestHandler(router::accept).listen(8080)
}
The code was taken from the BodyHandler. Using the following code and a small file (2 byte) causes the problem
[xxx@smu ~]$ cat empty.txt
x
[xxx@smu ~]$ curl -v 'http://localhost:8080/[1-2]' -H 'Expect:' -F "file=@empty.txt"

[1/2]: http://localhost:8080/1 --> <stdout>
--_curl_--http://localhost:8080/1
*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8080 (#0)
> POST /1 HTTP/1.1
> Host: localhost:8080
> User-Agent: curl/7.58.0
> Accept: */*
> Content-Length: 189
> Content-Type: multipart/form-data; boundary=------------------------abce4460631f57f4
> 
< HTTP/1.1 200 OK
< Content-Length: 0
< 
* Connection #0 to host localhost left intact

[2/2]: http://localhost:8080/2 --> <stdout>
--_curl_--http://localhost:8080/2
* Found bundle for host localhost: 0x561ca934a440 [can pipeline]
* Re-using existing connection! (#0) with host localhost
* Connected to localhost (::1) port 8080 (#0)
> POST /2 HTTP/1.1
> Host: localhost:8080
> User-Agent: curl/7.58.0
> Accept: */*
> Content-Length: 189
> Content-Type: multipart/form-data; boundary=------------------------abce4460631f57f4
> 

The second request is stuck and the vert.x handler is never called. Problem is associated with HttpServerFileUploadImpl.streamToFileSystem.
        Pump p = Pump.pump(HttpServerFileUploadImpl.this, ar.result());
        p.start();
        resume();
The resume() Method sometimes instantly calls the endHandler (without another eventloop iteration). When this happens the HTTP connection cannot be used for further requests.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2381
CONTENT_LENGTH should be set in the end method not write · Issue #2381 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I encountered a behaviour which looks weird when I was trying to create a seperate Handler that ends a Response. [For a reason!].
As a solution, I think we should write the headers only in the end method and if we're trying to and not while writing.
If you agree, let me know to create a PR.
Cheers
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2382
HTTP Download Server takes very long to open large file · Issue #2382 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I tried to setup two HTTP Servers.
Server1 is user facing, accepting REST request to download large file. Server1 then forward request to Server2 to get file.
Server2 will open file from filesystem and send it back.
Results:
100MB file -> It takes 2 ~ 5 seconds to start download.
1GB file -> It takes 5 ~ 10 seconds to start download.
10GB file -> It takes 70 ~ 100 seconds to start download.
Code: vertx 3.5.1
Server1:
 public HttpVerticle() {
        vertx = Vertx.vertx();
        Router router = Router.router(vertx);

        WebClient webClient = WebClient.create(vertx,
                new WebClientOptions().setDefaultPort(8081).setDefaultHost("localhost"));

        router.route("/").handler(routingContext ->
                routingContext.response().end("server1")
        );

        router.get("/file").handler(ctx -> {

            HttpServerResponse response = ctx.response();
            response.setChunked(true);
            response.putHeader("Content-Type", "application/octet-stream");
            response.putHeader("Content-Disposition", "attachment; filename=test.tar");

            webClient.get("/file2").as(BodyCodec.pipe(response))
                    .followRedirects(false)
                    .timeout(600000)
                    .rxSend()
                    .subscribe(ctx1 -> {
                        System.out.println("subscribed");
                    });
        });

        vertx.createHttpServer().requestHandler(router::accept).listen(8080);
    }
Server2
public HttpVerticle() {
        vertx = Vertx.vertx();
        Router router = Router.router(vertx);

        router.route("/").handler(routingContext ->
                routingContext.response().end("server2")
        );
        router.get("/file2").handler(ctx -> {
            HttpServerResponse response = ctx.response();
            String path = "test.jar";

            vertx.fileSystem()
                    .rxOpen(path, new OpenOptions().setRead(true))
                    .doOnSuccess(file -> {
                        response.setChunked(true);
                        Pump pump = Pump.pump(file, response);
                        pump.start();
                        file.endHandler(h -> response.end());
                    })
                    .subscribe(v -> {
                        System.out.println("Completed");
                    });
        });

        vertx.createHttpServer().requestHandler(router::accept).listen(8081);

    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2383
The HTTP client uses a LIFO strategy for connection pooling instead of a FIFO strategy by michaelpog · Pull Request #2383 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2384
can Future restore？ · Issue #2384 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I had a method as:
public Function<JsonArray, Future<Void>> dbUpdate(String sql) {

        return params -> {
            return Future.<Void>future(ft -> {
                PGConnector.getAsyncClient().updateWithParams(sql, params, res -> {
                    if (res.failed() || res.result().getUpdated() != 1) {
                        ft.fail("db fail");
                    } else {
                        try {
                            ft.complete();
                        } catch (Throwable t) {
                            ft.fail("has exception");
                        }
                    }
                });
            });
        };
    }
When catch a exception， happend:



how can i do? or is there any better way to write it?


This will solve the problem, but it will be so bad
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2385
public interface VertxInternal exposes package private classes WorkerPool and WorkerExecutorImpl · Issue #2385 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to implement a wrapper for Vertx instance that would do some custom stuff before delegating to actual instance. Implementing only Vertx interface would not work(in some cases Vertx instance is casted to VertxInternal inside vertx libs).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2386
Provide a value version of runOnContext on ContextInternal · Issue #2386 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes we write this idiomatic code:
context.runOnContext(v -> callback.handle(result));

Having a value version:
public interface ContextInternal {
   <T> void runOnContext(T value, Handler<T> handler);
}

would allow to simply write instead:
context.runOnContext(result, callback);

without an extra capturing lambda and be more concise and remains readable.
I'm targetting ContextInternal to avoid overloading Context with an extra method that would create unnecessary API noise.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2387
HTTP client requests should always prefix request URI with / for absolute queries by hradecek · Pull Request #2387 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
From the RFC:
Request-URI    = "*" | absoluteURI | abs_path | authority

* means does not apply to a resource so it won't be handled by vertx-web
absoluteURI | abs_path these must start with /
authority this is authN feature that we don't support on web either
So when you do:
http://127.0.0.1:8080?test=something

The path is not valid as the part: ?test=something would probably be handled as an authority
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2388
Http1xServerConnection's processMessage seems to hang one of my event-loops · Issue #2388 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Our server is using Vertx 3.5.1, it handles thousands of request/sec from thousands of JS clients. Those JS clients sometimes create rubbish request with strange chars
ar.bids%±FÌo���¥out=false&

When processing query parameters with invalid chars like the one above we don't have problems because Http1xServerConnection's processMessage always return true, this can be check with the following stack trace
java.lang.IllegalArgumentException: unterminated escape sequence at index 510 of: /someurl?ar.bids%5B2%5D.tout=false
    at io.netty.handler.codec.http.QueryStringDecoder.decodeComponent(QueryStringDecoder.java:349)
    at io.netty.handler.codec.http.QueryStringDecoder.addParam(QueryStringDecoder.java:257)
    at io.netty.handler.codec.http.QueryStringDecoder.decodeParams(QueryStringDecoder.java:245)
    at io.netty.handler.codec.http.QueryStringDecoder.parameters(QueryStringDecoder.java:180)
    at io.vertx.ext.web.impl.RouteImpl.matches(RouteImpl.java:298)
    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:110)
    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:120)
    at io.vertx.ext.web.impl.RouterImpl.accept(RouterImpl.java:79)
    at io.vertx.core.http.impl.Http1xServerConnection.processMessage(Http1xServerConnection.java:433)
    at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:141)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandlerWithWebSockets.handleMessage(HttpServerImpl.java:683)
    at io.vertx.core.http.impl.HttpServerImpl$ServerHandlerWithWebSockets.handleMessage(HttpServerImpl.java:636)
    at io.vertx.core.net.impl.VertxHandler.lambda$channelRead$1(VertxHandler.java:146)
    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:337)
    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:195)
    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:144)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:141)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
    at java.lang.Thread.run(Thread.java:748)

But when request.decoderResult().isFailure() returns true (from Http1xServerConnection's processMessage) and after invoking handleError method, the request is queued again (Http1xServerConnection's  handleMessage), so event loop will handle it again later
Actually I am "quite sure" about this because now this machine does not receive any request, it has been disconnected from the load balancer, and this event-loop is still using lots of resources
I attach some stack traces of the problematic event-loop
Stack Trace
ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus line: 373 
   ch.qos.logback.classic.Logger.warn line: 692 
   io.netty.util.internal.logging.Slf4JLogger.warn line: 151 
   io.netty.channel.DefaultChannelPipeline.onUnhandledInboundException line: 1158 
   io.netty.channel.DefaultChannelPipeline$TailContext.exceptionCaught line: 1241 
   io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught line: 285 
   io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught line: 264 
   io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught line: 256 
   io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught line: 1326 
   io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught line: 285 
   io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught line: 264 
   io.netty.channel.DefaultChannelPipeline.fireExceptionCaught line: 923 
   io.vertx.core.http.impl.Http1xServerConnection.handleError line: 409 
   io.vertx.core.http.impl.Http1xServerConnection.processMessage line: 420 
   io.vertx.core.http.impl.Http1xServerConnection.lambda$checkNextTick$3 line: 489 
   io.vertx.core.http.impl.Http1xServerConnection$$Lambda$81/1471778344.handle line: not available 
   io.vertx.core.impl.ContextImpl.lambda$wrapTask$2 line: 339 
   io.vertx.core.impl.ContextImpl$$Lambda$33/1449263511.run line: not available 
   io.netty.util.concurrent.AbstractEventExecutor.safeExecute line: 163 
   io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks line: 404 
   io.netty.channel.nio.NioEventLoop.run line: 463 
   io.netty.util.concurrent.SingleThreadEventExecutor$5.run line: 886 
   io.netty.util.concurrent.FastThreadLocalRunnable.run line: 30 
   java.lang.Thread.run line: 748 

Stack trace
io.vertx.core.impl.EventLoopContext.executeAsync line: 39 
io.vertx.core.impl.ContextImpl.runOnContext line: 204 
io.vertx.core.impl.VertxImpl.runOnContext line: 337 
io.vertx.core.http.impl.Http1xServerConnection.checkNextTick line: 483 
io.vertx.core.http.impl.Http1xServerConnection.lambda$checkNextTick$3 line: 504 
io.vertx.core.http.impl.Http1xServerConnection$$Lambda$81/1471778344.handle line: not available 
io.vertx.core.impl.ContextImpl.lambda$wrapTask$2 line: 339 
io.vertx.core.impl.ContextImpl$$Lambda$33/1449263511.run line: not available 
io.netty.util.concurrent.AbstractEventExecutor.safeExecute line: 163 
io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks line: 404 
io.netty.channel.nio.NioEventLoop.run line: 463 
io.netty.util.concurrent.SingleThreadEventExecutor$5.run line: 886 
io.netty.util.concurrent.FastThreadLocalRunnable.run line: 30 
java.lang.Thread.run line: 748
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2389
change WorkerPool visibility to public, replace WorkerExecutorImpl usages  - resolves #2385 by diliuskh · Pull Request #2389 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2390
Netty upgrade to 4.1.22.Final · Issue #2390 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
Im using JDK 10 and have encountered an issue with the version of netty being used(netty/netty#7768, where the owner said on the 4th of may, "Upgrade to latest Netty version as it was fixed there")
Language: Kotlin
JDK: 10
OS: Windows 10
IDE: Intellij Idea ultimate
Stack trace
13:15:33.467 [main] DEBUG io.netty.util.internal.PlatformDependent0 - direct buffer constructor: available
13:15:33.467 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true
13:15:33.468 [main] DEBUG io.netty.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable
java.lang.IllegalAccessException: class io.netty.util.internal.PlatformDependent0$6 cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module @59d016c9
	at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:360)
	at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:589)
	at java.base/java.lang.reflect.Method.invoke(Method.java:556)
	at io.netty.util.internal.PlatformDependent0$6.run(PlatformDependent0.java:312)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at io.netty.util.internal.PlatformDependent0.<clinit>(PlatformDependent0.java:303)
	at io.netty.util.internal.PlatformDependent.isAndroid(PlatformDependent.java:208)
	at io.netty.util.internal.PlatformDependent.<clinit>(PlatformDependent.java:79)
	at io.netty.util.ConstantPool.<init>(ConstantPool.java:32)
	at io.netty.util.Signal$1.<init>(Signal.java:27)
	at io.netty.util.Signal.<clinit>(Signal.java:27)
	at io.netty.util.concurrent.DefaultPromise.<clinit>(DefaultPromise.java:43)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:36)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:58)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:47)
	at io.netty.channel.MultithreadEventLoopGroup.<init>(MultithreadEventLoopGroup.java:59)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:77)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:72)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:59)
	at io.vertx.core.net.impl.transport.Transport.eventLoopGroup(Transport.java:125)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:166)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:145)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:141)
	at io.vertx.core.impl.VertxFactoryImpl.vertx(VertxFactoryImpl.java:30)
	at io.vertx.core.Vertx.vertx(Vertx.java:78)
	at io.github.johnfg10.MainKt.main(Main.kt:8)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2391
Time values can be specified with a time unit · Issue #2391 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/eclipse/vert.x/blob/ed75286d4e6a206244829fdbd01775d9516f6a70/src/main/java/io/vertx/core/Vertx.java#L557-L562
https://github.com/eclipse/vert.x/blob/ed75286d4e6a206244829fdbd01775d9516f6a70/src/main/java/examples/CoreExamples.java#L95-L104
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2392
Fix race condition in handler registration update by vietj · Pull Request #2392 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2393
closed by okou19900722 · Pull Request #2393 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj sorry , it commit by a wrong email, and i have delete it, you can close this pr, i will create new later
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2394
fix typo of comment and support custom time unit of max execute time by okou19900722 · Pull Request #2394 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2395
Hydrate vert.x cache for directory on first access by fzakaria · Pull Request #2395 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2396
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2397
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2398
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2399
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2400
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2401
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2402
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2403
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2404
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2405
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2406
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2407
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2408
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2409
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2410
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2411
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2412
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2413
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2414
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2415
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2416
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2417
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2418
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2419
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2420
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2421
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2422
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2423
Unable to disable file caching in 3.5.1 in intelliJ IDEA · Issue #2423 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Static files in the JAR are not being "re-read" after they've been changed during development, while the app/server is running. The server has to be restarted after each change instead.
Inside my public static void main(String[] args) method, before any vert.x code, I have System.setProperty("vertx.disableFileCaching", "true");
Storing my static files on a file system path instead would be cumbersome due to this project's needs.
I have consulted Link #1514 and Link #1528, but I am not having success so far.
My development environment:
Vert.x 3.5.1
JRE Oracle Java 1.8.0_171
IntelliJ IDEA 2018.1.2
Ubuntu 18.04
Here is the main method:
    public static void main(String[] args) {

        System.setProperty("vertx.disableFileCaching", "true");

        Vertx vertx = Vertx.vertx();
        vertx.deployVerticle(new VerticleOne(), asyncResult -> {
            if(asyncResult.failed()) {
                LOGGER.error("VerticleOne experienced an issue: " + asyncResult.cause());
            }
            else {
                LOGGER.info("VerticleOne deployed");
            }

        });

    }

Here is the start method of the Verticle:
    @Override
    public void start(Future<Void> startFuture) throws Exception {

        StaticHandler staticHandler = StaticHandler.create()
                .setWebRoot("net/rprpx/static")
                ;

        Router router = Router.router(vertx);
        router.route("/static/*").handler(staticHandler);

        HttpServer httpServer = vertx.createHttpServer()
                .requestHandler(router::accept)
                .listen(8080, asyncResult -> {

                    if(asyncResult.failed()) {
                        LOGGER.error("Could not start the HTTP server", 
                            asyncResult.cause());
                        startFuture.fail(asyncResult.cause());
                    }
                    else {
                        LOGGER.info("HTTP server now running on port " 
                            + asyncResult.result().actualPort());
                        startFuture.complete();
                    }

                });

    }

Thank you!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2424
Showstopper: NoSuchMethodError during bootstrap · Issue #2424 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When calling either "vertx.clusteredVertx(...);" or "vertx.Vertx.vertx();" the following exception gets thrown in 3.5.1:
Exception in thread "main" java.lang.NoSuchMethodError: io.netty.util.internal.ReflectionUtil.trySetAccessible(Ljava/lang/reflect/AccessibleObject;Z)Ljava/lang/Throwable;
	at io.netty.channel.nio.NioEventLoop$5.run(NioEventLoop.java:217)
	at java.security.AccessController.doPrivileged(Native Method)
	at io.netty.channel.nio.NioEventLoop.openSelector(NioEventLoop.java:210)
	at io.netty.channel.nio.NioEventLoop.<init>(NioEventLoop.java:149)
	at io.netty.channel.nio.NioEventLoopGroup.newChild(NioEventLoopGroup.java:127)
	at io.netty.channel.nio.NioEventLoopGroup.newChild(NioEventLoopGroup.java:36)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:84)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:58)
	at io.netty.util.concurrent.MultithreadEventExecutorGroup.<init>(MultithreadEventExecutorGroup.java:47)
	at io.netty.channel.MultithreadEventLoopGroup.<init>(MultithreadEventLoopGroup.java:59)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:77)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:72)
	at io.netty.channel.nio.NioEventLoopGroup.<init>(NioEventLoopGroup.java:59)
	at io.vertx.core.net.impl.transport.Transport.eventLoopGroup(Transport.java:125)
	at io.vertx.core.impl.VertxImpl.<init>(VertxImpl.java:166)
	at io.vertx.core.impl.VertxFactoryImpl.clusteredVertx(VertxFactoryImpl.java:45)
	at io.vertx.core.Vertx.clusteredVertx(Vertx.java:100)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2425
io.vertx.core.buffer.Buffer tightly coupled with io.netty.buffer.ByteBuf · Issue #2425 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Buffer interface is tightly coupled with the netty ByteBuf. IMO this is an unfortunate design and the Buffer should be completely third-party classes agnostic.
The default implementation offered by Vert.x could rely on the netty ByteBuf (essentially wrapping it), but other implementations should be allowed without using the ByteBuf
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2426
Add support for listening on a SocketAddress to HttpServer. This by tcataldo · Pull Request #2426 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This is the same PR as before, cherry-picked on top of master.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2427
Behavior when clustered Vertx instance crashes and Lock is acquired · Issue #2427 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm using Vertx with Hazelcast as the cluster manager and I am stuck with a problem on how to deal with the situation where a Vertx node acquires a lock and crashes right after it. As no body else will be able to acquire that Lock, there is no way to release it with without recycling the cluster. Is that the expected behavior or am I missing something? Will Hazelcast deal with a crashing node that's holding a Lock?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2428
Decouple the FileResolver from a Vertx instance · Issue #2428 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motiviation: currently the FileResolver is in the io.vertx.core.impl package and owns a Vertx instance. The only reason it needs this instance is to delete the cache dir when it is closed, because it actually needs to schedule a blocking file deletion (via the filesystem instance).
Change: decouple the FileResolver from the Vertx instance and the FileSystem implementation so it can be used without Vertx or FileResolver. The close operation is now blocking and the callers run it in an execute internal blocking operation (Vert.x close) or a thread (at JVM shutdown).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2429
Decouple the FileResolver from a Vertx instance - fixes #2428 by vietj · Pull Request #2429 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this will require changes in some projects (like vertx-web or vertx-dropwizard-metrics) that will break upon this change.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2430
Metrics SPI should not be exposed measured instances · Issue #2430 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation : currently the Metrics SPI expose the measured instances to the SPI implementation when at creation of the corresponding metrics instance. This instance is actually not really used by the implementations (Vertx instance was used by micrometer metrics instance to create an HTTP server but in practice it can start its own embedded instance as there is no much gain to create a new one). One issue providing the Vertx instance is that the provided instance was a racy publication of the Vertx instance complicated to solve (because the MetricsFactory needs to be called early for creating the pool metrics). The metrics event bus initialised callback is also not used in practice (it used to be by hawkular implementation), only by micrometer metrics as a signal to initialise the backend which can be replaced by a simple initialisation in the micrometer metrics factory.
Change : do not provide measured instances when calling the SPI for creating a metrics implementation. Callback methods have also been renamed to contain the type of the metrics created (i.e createMetrics -> createEventBusMetrics, etc...). The event bus initialised callback is removed as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2431
Use cases for multithreaded worker verticles · Issue #2431 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MultiThreaded worker verticles are an extension to worker verticles. Like with usual worker verticles, events are handled on worker pool threads. But they can be executed by different threads concurrently, which means the verticle must manage its own state to be visible between threads.
There are many parts of Vert.x which simply doesn't support them. For example, you can't create an HTTP server on a MT worker verticle.
Also, we have seen many new users, in particular those experienced with Spring or Java EE, starting directly with MT worker verticles and adding as many threads as possible with the impression it would help get the best performance results. But this is really counter-productive.
We are looking for relevant use cases for MT worker verticles. If you are using them, can you please describe in a comment to this issue what you are doing and why you couldn't do with standard (event loop) or usual worker verticles?
We want to determine if MT worker verticles do more harm than good. Ultimately, if they are simply an anti-pattern, we could deprecate and remove them after a few releases.
Looking forward to your feedback, thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2432
Support for Consumer Groups · Issue #2432 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
First of all great work on vert.x, it is really enjoyable to work with and such a powerful tool in such a small package. But recently I came across a missing vert.x feature that if implemented would make the appeal of vert.x's event bus much greater.
As far as I can see there is no direct support for Consumer Groups in vert.x, and this is a real pity.
By consumer groups I mean a set of consumers that would listen to published messages on a same address but with only at most one of these consumers getting the message. This would allow us to do load balancing for published messages. Load balancing already works out of the box for send messages (point-to-point), and without it published messages have only limited useful use cases.
Without this, published message processing does not scale horizontally as all messages must be processed by every single verticle register as consumer (i.e. no load balancing).
Having Consumer Groups would make the event bus allot more powerful and should not be that hard to implement. I suppose that it would be possible to set this up with existing tools, but it would require to

hand craft an API for subscribing to consumer groups,
have verticles that manage these groups subscription and message distribution
hold the subscription information in a distributed data structure.

All possible but better provided by a vert.x api.
In code, I am looking for something like that
vertx.eventBus.consumer("order.completed.event", ProductStatsVerticle.class, message->{
    /* do some great things*/
})
Where the name of ProductStatsVerticle.class is used as the name of the consumer group. Variants with a String consumer group name should also exist.
I'd like to have some opinions on this. Maybe there are already 3rd party implementation that could be inspiring, or a pattern that easily permits this feature?
Best regards,
Thim.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2433
Question-How can i contribute to this repository · Issue #2433 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello Vert.x,
This is a great repository , i would like to work as contributor, Can you please help me to become contributor.Or suggest me the way.

I have read readme for contributor, but so far i have not seen any need help tasks or issues which i can pick up.
You guys are instantly responding on issues, so i do not have any chance to look into it.
I tried commenting on one but later i got comment stating that it is already closed.
I have pulled the repository and looking into the code
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2434
Missing @Nullable annotations · Issue #2434 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Building this list so that we can track any missing @Nullable annotation until 3.6 is released
[ ] Vertx.executeBlocking
[ ] Context.executeBlocking
[ ] WorkerExecutor.executeBlocking
[ ] AsyncMap.get
[ ] AsyncMap.putIfAbsent
[ ] AsyncMap.remove
[ ] AsyncMap.replace
------ Original comment
Currently, the executeBlocking result handler type is not annotated with @Nullable.
As a result, the generated Rxified API returns a Single<T>. But it's quite common to use Future<Void> for a blocking task which does not need to return any result.
Then if the user simply invoke future.complete(), the program fails at runtime.
As a workaround, the user can use a Future<Object> and invoke complete() with any non-null value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2435
Invalid SSL configuration does not callback the server listen method handler · Issue #2435 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When HTTP server is initialized with invalid SSL configuration (e.g. invalid path to keystore file), it does not call the listen handler, breaking the async calls chain.
Example:
import io.vertx.core.AbstractVerticle
import io.vertx.kotlin.core.net.JksOptions
import io.vertx.kotlin.core.http.HttpServerOptions

class RestVerticle : AbstractVerticle() {
    override fun start(startFuture: Future<Void>) {
        val jksOptions = JksOptions(path = "invalid_path", password = "somePassword")
        val httpServer = vertx.createHttpServer(HttpServerOptions(ssl = true, keyStoreOptions = jksOptions))
        httpServer.requestHandler({}).listen(8083, "127.0.0.1", {
            // This handler is never called
            if (it.succeeded())
                startFuture.complete()
            else
                startFuture.fail(it.cause())
        })
    }
}
In addition to that, the verticle deployment code does not call the deployment completion handler.
Example:
import io.vertx.core.AbstractVerticle
import io.vertx.kotlin.core.net.JksOptions
import io.vertx.kotlin.core.http.HttpServerOptions

class MainVerticle : AbstractVerticle() {
    override fun start(startFuture: Future<Void>) {
        Future.future<String>().also { future ->
            // Future completer is never called
            vertx.deployVerticle(RestVerticle(), DeploymentOptions(worker = true), future.completer())
        }.compose({ startFuture.complete() }, startFuture)
    }
}
So far I see that the problem might be caused by the fact that actualServer is not set to anything at the point of this check, but listening is already set to true, so executeCloseDone above is not called either.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2436
Move the data object converter generator to codegen · Issue #2436 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2437
Improve connection exception logging · Issue #2437 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the connection base will log every error to a connection when an exception handler is not set, in particular connection RST. Let's only log the message like previously (pre 3.5.1) and the full stack trace when debug is enabled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2438
ClusteredEventBus racy initialization · Issue #2438 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
It seems as if there is a case in the ClusteredEventBus (3.5.1) where a NPE can appear. After trying out some different cluster manager implementations the following NPE appear from time to time on a new instance when it is being launched. This is the NPE that appears:
2018-05-11 16:14:32:531 +0200 [vert.x-eventloop-thread-1] ERROR ContextImpl - Unhandled exception
java.lang.NullPointerException
	at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.lambda$setClusterViewChangedHandler$9(ClusteredEventBus.java:283)
	at io.vertx.core.impl.HAManager.lambda$checkSubs$10(HAManager.java:516)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$11(HAManager.java:525)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

Looking at the code for the ClusteredEventBus it seems as if the member "subs" can be null when the view changed handler is called before the ClusteredEventBus has started completely. The view changed handler is set in the constructor but the "subs" member is only given a value in the method "start(...)". I briefly looked at previous versions of the ClusteredEventBus and there has previously been a null-check in the view changed handler.
Regards
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2439
Vertx clustered racy initialization · Issue #2439 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation
Vertx clustered instances are not properly initialised in cluster mode.
Changes
Rework the creation of Vertx that leads to a non racy initialisation. Add init methods that allow to properly bootstrap the clustered vertx instance.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2440
ClusteredEventBus racy initialization - fixes #2438 - fixes #2439 by vietj · Pull Request #2440 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Will review this one early next week.

2018-05-11 21:03 GMT+02:00 Julien Viet <notifications@github.com>:
…
 @vietj <https://github.com/vietj> requested your review on:
 eclipse-vertx/vert.x#2440 <#2440>
 ClusteredEventBus racy initialization - fixes #2438
 <#2438> - fixes #2439
 <#2439>.

 —
 You are receiving this because your review was requested.
 Reply to this email directly, view it on GitHub
 <#2440 (comment)>, or mute
 the thread
 <https://github.com/notifications/unsubscribe-auth/ABbltrFBDk0lMZnILn6ltUnOkJZiWGNyks5txeCdgaJpZM4T7690>
 .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2441
DNS requests are always sent with the flag 'RecursionDesired' set to true · Issue #2441 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We should probably add a property to the class DnsClientOptions to support sending non recursive DNS requests. something like DnsClientOptions.isRecursionDesired() and DnsClientOptions.setRecursionDesired(boolean newValue)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2442
the class DnsClientOptions now supports the property recursionDesired by stephanebastian · Pull Request #2442 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this PR implements #2441
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2443
implements #2441 - the class DnsClientOptions now supports the property recursionDesired by stephanebastian · Pull Request #2443 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
implements #2441
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2444
implements #2441 - DnsClientOptions now supports the property recursionDesired by stephanebastian · Pull Request #2444 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is a weird issue with my ECA. I'll check this out tomorrow
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2445
DnsClient: There is no option to enable the netty logger · Issue #2445 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2446
VertxHttpHeaders#add(CharSequence,CharSequence) does not used AsciiString cached hashcode value · Issue #2446 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation
It prevents AsciiString based headers to be used efficiently (using the cached
change
Replace the method body by the body of VertxHttpHeaders#add(CharSequence,Object) and have VertxHttpHeaders#add(CharSequence,Object) delegate to VertxHttpHeaders#add(CharSequence,CharSequence)
Microbenchmarks shows a significant improvement when optimised headers are used (hint before the optimization was only partially used). Note the benchmark is not used to justify the change, the change itself is very obvious. This was reported also with Java Flight Recorder hot methods showing a unusual call to AsciiString#hashCode(CharSequence) that calls PlatformDependent.hashCodeAscii(CharSequence ) instead of casting to AsciiString and using the cached value since the AsciiString was converted to String.

Before

Benchmark                             Mode  Cnt      Score      Error   Units
HttpServerHandlerBenchmark.vertx     thrpt   10    666.131 ±   14.881  ops/ms
HttpServerHandlerBenchmark.vertxOpt  thrpt   10    734.061 ±   19.262  ops/ms


After

Benchmark                             Mode  Cnt    Score     Error   Units
HttpServerHandlerBenchmark.vertx     thrpt   10  727.892 ±  10.855  ops/ms
HttpServerHandlerBenchmark.vertxOpt  thrpt   10  798.006 ±  18.767  ops/ms
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2447
Refactor VertxHttpHeaders to remove duplicate code and delegate to CharSequence based methods · Issue #2447 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation
Currently VertxHttpHeaders has lot of duplicate code and not always uses the CharSequence based methods performing unnecessary work.
Changes
Refactor methods so the overloaded methods always delegate to the CharSequence version, this will keep only a single implementation and it will be the optimal version.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2448
Vertx http headers refactor by vietj · Pull Request #2448 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont no implementation changed, only shuffled the methods and rearranged code, but it's better to have another pair of eyes validating this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2449
Correlate block thread checker with GC pauses · Issue #2449 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The block thread checker sometimes reports GC pauses as misbehaving blocking application.
http://www.fasterj.com/articles/gcnotifs.shtml
The GC mbean emits notification about GC pauses (start time / end time) that could be used to mitigate this and avoid false positive.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2450
Return null for JsonObject.mapFrom(null) · Issue #2450 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2451
DnsClient: no option to enable the netty logger - fixes #2445 by stephanebastian · Pull Request #2451 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2452
Use of system properties to configure cluster settings is not documented · Issue #2452 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using the command line or launcher API to launch vertx, it is possible to use system properties to configure values for the cluster properties found on the VertxOptions class, but there is no public documentation describing the naming convention for these properties.
There is a brief sentence indicating that it is possible to use system properties, but with no description of what the property names are:

You can also set system properties using: -Dkey=value
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2453
Missing @Nullable in AsyncMap, Context, Vertx and WorkerExecutor by tsegismont · Pull Request #2453 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
did you try with vertx-lang-ceylon ? this is the most impacted module it would be good to validate it with it
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2454
Use Http2Headers.contains instead of default MultiMap implementation by tsegismont · Pull Request #2454 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In netty/netty#7633, a method was added to check if a HTTP/2 header is present and has a given value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2455
Dns client recursion desired - fixes #2441 by stephanebastian · Pull Request #2455 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
forgot to mention in the comment that it fixes #2441
(there is no PR showing up in the issue, just the commit I made)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2456
DNS client should support calling a DNS server over IpV6 · Issue #2456 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Step to reproduce:
vertx.createDnsClient(53, "2001:4860:4860::8888").lookup4("vertx.io", res -> {}); 
=> the result fails with the following exception: 'java.net.SocketException: Address family not supported by protocol'
Expected: The DnsClient should be able to call a Dns server over IpV4 or IpV6
As a sidenote, I also tried using the full IpV6 address "2001:4860:4860:0:0:0:0:8888" but it doesn't work as well.
If time permits, I'll investigate this issue and provide a fix for it
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2457
Incorrect VertxHttp2Stream checkNextTick implementation · Issue #2457 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm building a HTTP2 proxy with Vert.x 3.5.1, when I try to migrate to 3.5.2.CR1, NullPointerException may happen when requests come
May 16, 2018 2:40:21 PM io.vertx.core.impl.ContextImpl
 SEVERE: Unhandled exception
 java.lang.NullPointerException
 	at io.vertx.core.http.impl.VertxHttp2Stream.checkNextTick(VertxHttp2Stream.java:104)
 	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
 	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
 	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
 	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309)
 	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
 	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 	at java.lang.Thread.run(Thread.java:748)


I guess this might be caused when pending deque is empty, see https://github.com/eclipse/vert.x/blob/47d15d66dcd56381ee07754545258d3c48537784/src/main/java/io/vertx/core/http/impl/VertxHttp2Stream.java#L103
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2458
DnsClient throws an exception when calling a Dns server over IpV6 by stephanebastian · Pull Request #2458 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2459
ClosedChannelException occurs when writing · Issue #2459 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm building a server with Vert.x 3.5.1, after I use setIdleTimeout() to setup a idle timeout for some sockets, sockets will be closed by timeout. I keep writing to the sockets continuously,  some sockets may throw java.nio.channels.ClosedChannelException.
五月 17, 2018 10:33:08 下午 io.vertx.core.net.impl.ConnectionBase
严重: Unhandled exception
java.nio.channels.ClosedChannelException
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(...)(Unknown Source)

Here's what I have tried, the exception may be thrown.

I wrote to sockets by write() method from other workers continuously, stop when endHandler or closeHandler invoked.
I tried to send buffer to WriteHandlerId through EventBus. When a socket is closed, the WriteHandlerId will automatically unregisterd.
I tried with WebSocket and Socket, they both throw the exception.

How to avoid this exception?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2460
Proxy multipart/form-data with API-Gateway · Issue #2460 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sorry for bad English.
I made simple solution dealing with multipart.
My reference is vertx-blueprint-microservice which use MSA.
I got problem How can I handle multipart.
PROBLEM IS HANGING RESPONSE.
Simple summary until now I found is
CLIENT ------ API_GATEWAY ----- SERVICE (multipart X, json O)
CLIENT ------ SERVICE (multipart O, json O)
In ApiGateway source,
if (context.getBody() == null) {
  toReq.end();
} else {
  toReq.end(context.getBody());
}

hanging point is  toReq.end(context.getBody());
after 10sec, it timeout.
I don't know how can I solve this.
I doubt that SERVICE can't accept multipart, however
CLIENT ------ SERVICE (multipart O, json O)
this is succeed. it's wierd.
Is there any more example how can I handle multipart proxying?
PS
vertx-blueprint-microservice
I saw this repo in vertx homepage.
I think this means quite important reference for understanding vertx.
However this repo looks dead. There is no response at all.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2461
WebSocket end handler should be called immediately to signal stream ended · Issue #2461 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In NetSocketImpl:
  @Override
  protected synchronized void handleClosed() {
    checkContext();
    if (endHandler != null) {
      endHandler.handle(null);
    }
    super.handleClosed();
    if (vertx.eventBus() != null) {
      registration.unregister();
    }
  }

In WebSocketImplBase:
  void handleClosed() {
    synchronized (conn) {
      cleanupHandlers();
      if (endHandler != null) {
        conn.getContext().runOnContext(endHandler);
      }
      if (closeHandler != null) {
        conn.getContext().runOnContext(closeHandler);
      }
    }
  }

I set a closed flag in the endHandler. I will stop write to the socket, if the socket has the closed flag. However IllegalStateException: WebSocket is closed will be thrown by WebSocket sometimes. I modify the code snippet in WebSocketImplBase according to NetSocketImpl, Then the IllegalStateException never occurs again :
  void handleClosed() {
    synchronized (conn) {
      cleanupHandlers();
      if (endHandler != null) {
        endHandler.handle(null);
      }
      if (closeHandler != null) {
        conn.getContext().runOnContext(closeHandler);
      }
    }
  }

Is it a proper fix?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2462
Invoke endHandler immediately when a webSocket connection is closed. by jg513 · Pull Request #2462 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2463
Invoke endHandler immediately when a webSocket connection is closed. by jg513 · Pull Request #2463 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have signed the ECA. What should I do to pass the check?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2464
WorkExecutorImpls are not removed from closeHooks when they are closed · Issue #2464 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a WorkExecutor is created via a vertx.createSharedWorkerExecutor(...) call, a reference to the WorkExecutor is added to the closeHooks for the current Context:
    ContextImpl context = getOrCreateContext();
    WorkerExecutorImpl namedExec = new WorkerExecutorImpl(this, sharedWorkerPool, true);
    context.addCloseHook(namedExec);
    return namedExec;

However, when the WorkerExecutor is closed, the reference is not removed from closeHooks, resulting in a leak:
  public void close() {
    synchronized (this) {
      if (!closed) {
        closed = true;
      } else {
        return;
      }
    }
    if (releaseOnClose && pool instanceof VertxImpl.SharedWorkerPool) {
      ((VertxImpl.SharedWorkerPool)pool).release();
    }
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2465
Add ability to set queueing strategy for WorkerPool · Issue #2465 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
At the moment the workerPool in VertxImpl is initialized as follows:
ExecutorService workerExec = Executors.newFixedThreadPool(options.getWorkerPoolSize(),
        new VertxThreadFactory("vert.x-worker-thread-", checker, true, options.getMaxWorkerExecuteTime()));
This creates an underlying ThreadPoolExecutor with an unbounded LinkedBlockingQueue
When our HTTP server is under immense load the queue grows which causes our latencies to grow unbounded.
We would prefer to fail fast or at least set a fixed size for the worker queue.
How do you feel about a new VertxOptions#workerPoolQueueCapacity ?
I could provide the accompanying PR as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2466
Invoke endHandler immediately when a webSocket connection is closed. by jg513 · Pull Request #2466 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
#2461
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2467
Invoke endHandler immediately when a webSocket connection is closed. by jg513 · Pull Request #2467 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
#2461
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2468
Invoke endHandler immediately when a webSocket connection is closed. by jg513 · Pull Request #2468 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
#2461
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2469
Add VertxOption to specify worker pool queue capacity by fzakaria · Pull Request #2469 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jponge yes it would be better as the developer has to care about this result more than an runtime exception in the execute blocking call
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2470
Http header CR / LF validation · Issue #2470 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
motivation
Currently HttpClientRequest and HttpServerResponse don't check wether header name or value contain \r or \n chars. Of course developers are fully responsible for http headers set and
such incorrect value is likely unintended. Forbidding it prevents HTTP header injection for application that omit to check headers.
change
throw an IllegalArgumentException when a header name or value contains \r or \n char
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2471
OSGi support for issue 2126 by cescoffier · Pull Request #2471 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2472
Issue 368 - Allow to set connection exception handler for all request from HttpClientImpl by michaelpog · Pull Request #2472 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2473
Http header CR / LF validation - fixes #2470 by vietj · Pull Request #2473 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2474
vert.x 3.5.1 co.paralleluniverse.fibers.instrument.UnableToInstrumentException · Issue #2474 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I update vert.x from version 3.5.0 to 3.5.1,project run with errors,  this is my shell
java -javaagent:/Users/xxx/.m2/repository/co/paralleluniverse/quasar-core/0.7.9/quasar-core-0.7.9.jar=b -Dvertx.zookeeper.config=./zookeeper.json -jar target/aaa-fat.jar   -conf application-conf.json -cluster
[quasar] ERROR: Unable to instrument class io/vertx/core/impl/DeploymentManager$DeploymentImpl
co.paralleluniverse.fibers.instrument.UnableToInstrumentException: Unable to instrument io/vertx/core/impl/DeploymentManager$DeploymentImpl#lambda$rollback$1(Ljava/lang/Throwable;Lio/vertx/core/impl/ContextImpl;Lio/vertx/core/Handler;Lio/vertx/core/impl/ContextImpl;Lio/vertx/core/AsyncResult;)V because of synchronization
at co.paralleluniverse.fibers.instrument.InstrumentMethod.dumpCodeBlock(InstrumentMethod.java:720)
at co.paralleluniverse.fibers.instrument.InstrumentMethod.accept(InstrumentMethod.java:415)
at co.paralleluniverse.fibers.instrument.InstrumentClass.visitEnd(InstrumentClass.java:265)
at co.paralleluniverse.asm.ClassReader.accept(Unknown Source)
at co.paralleluniverse.asm.ClassReader.accept(Unknown Source)
at co.paralleluniverse.fibers.instrument.QuasarInstrumentor.instrumentClass(QuasarInstrumentor.java:120)
at co.paralleluniverse.fibers.instrument.QuasarInstrumentor.instrumentClass(QuasarInstrumentor.java:88)
at co.paralleluniverse.fibers.instrument.JavaAgent$Transformer.transform(JavaAgent.java:187)
at sun.instrument.TransformerManager.transform(TransformerManager.java:188)
at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:428)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:760)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
at io.vertx.core.impl.DeploymentManager.doDeploy(DeploymentManager.java:465)
at io.vertx.core.impl.DeploymentManager.lambda$doDeployVerticle$2(DeploymentManager.java:203)
at io.vertx.core.impl.DeploymentManager$$Lambda$45/1076984738.handle(Unknown Source)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:76)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:171)
at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:143)
at io.vertx.core.impl.DeploymentManager.deployVerticle(DeploymentManager.java:131)
at io.vertx.core.impl.VertxImpl.deployVerticle(VertxImpl.java:665)
at io.vertx.core.Starter.runVerticle(Starter.java:328)
at io.vertx.core.Starter.run(Starter.java:138)
at io.vertx.core.Starter.main(Starter.java:96)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2475
Vert.x Memory Leak, first pass, Some tests are failing by michaelpog · Pull Request #2475 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Michael Pogrebinsky smichpog2@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2476
Launcher system properties are not propagated when the verticle runs as background process (start) · Issue #2476 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The file.encoding setting is valid when the trial java -jar command starts, but it does not work with the start parameter.(Vert.x 3.5.1) Here is an example:
This is the MainVerticle:
package com.longruan;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.logging.Logger;
import io.vertx.core.logging.LoggerFactory;

public class TestVerticle extends AbstractVerticle {

    Logger logger = LoggerFactory.getLogger(TestVerticle.class);

    @Override
    public void start() {
        logger.info(System.getProperty("file.encoding"));
    }
}

Execute the following command in a Chinese windows server:
java  -jar gateway-1.0-SNAPSHOT-fat.jar
java -Dfile.encoding=UTF-8 -jar gateway-1.0-SNAPSHOT-fat.jar
java -Dfile.encoding=UTF-8 -jar gateway-1.0-SNAPSHOT-fat.jar start

the Log is
2018-05-25 11:57:30.617 [ vert.x-eventloop-thread-0 ] - [ INFO  ] [ com.longruan.TestVerticle : 162 ] - GBK
2018-05-25 11:57:49.007 [ vert.x-eventloop-thread-0 ] - [ INFO  ] [ com.longruan.TestVerticle : 162 ] - UTF-8
2018-05-25 11:58:00.556 [ vert.x-eventloop-thread-0 ] - [ INFO  ] [ com.longruan.TestVerticle : 162 ] - GBK
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2477
Don't keep a reference in the HTTP pool connection listener to the connection waiter · Issue #2477 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2478
Ssl cert refactoring by dachaac · Pull Request #2478 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Used following helper script to auto-create certs:
echo "set -xe" > recreate-ssl.sh
echo "rm -rf root-ca int-ca other-ca | true" >> recreate-ssl.sh
echo "rm *.p12 *.jks *.pem *.crt *.key | true" >> recreate-ssl.sh
cat ssl.txt | grep -v -e ^# | grep -v -e ^[1-5T\(] | grep -v -e ^\- >> recreate-ssl.sh
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2479
Provide implementation for issue #2376 by KowalczykBartek · Pull Request #2479 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I just signed Eclipse Contributor Agreement.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2480
Windows redeploy does not provide valid inline verticle configuration · Issue #2480 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
env : Windows 10 pro.
The Java process builder now removes double quotes in process arguments (https://bugs.openjdk.java.net/browse/JDK-8131908) to conform to Windows CLI parsing https://msdn.microsoft.com/en-us/library/17w5ykft.aspx
This affects the Vert.x redeploy mode with inline configuration which contains double quotes and the JSON will not be parsed by the process created by the launcher, the Verticle will not get the expected configuration.
On Windows we should escape this differently by surrounding with double quotes and using a \ char to escape inner double quotes (A double quotation mark preceded by a backslash (") is interpreted as a literal double quotation mark character (").)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2481
Windows test fixes by vietj · Pull Request #2481 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont can you check this commit f908ef9 (test fix) ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2482
Test acquiring different locks on same event loop by tsegismont · Pull Request #2482 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj here is the test in Vert.x core. There are PRs for all cluster managers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2483
some dependence does not contain version such as netty in pom.xm · Issue #2483 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
clone project down my local,but some dependence dose not have contain version suan as netty in pom.xml
[ERROR]     'dependencies.dependency.version' for io.netty:netty-common:jar is missing. @ line 77, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-buffer:jar is missing. @ line 81, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-transport:jar is missing. @ line 85, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-handler:jar is missing. @ line 89, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-handler-proxy:jar is missing. @ line 93, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-codec-http:jar is missing. @ line 97, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-codec-http2:jar is missing. @ line 101, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-resolver:jar is missing. @ line 105, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-resolver-dns:jar is missing. @ line 109, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-transport-native-epoll:jar is missing. @ line 113, column 17
[ERROR]     'dependencies.dependency.version' for io.netty:netty-transport-native-kqueue:jar is missing. @ line 118, column 17
[ERROR]     'dependencies.dependency.version' for com.fasterxml.jackson.core:jackson-core:jar is missing. @ line 125, column 17
[ERROR]     'dependencies.dependency.version' for com.fasterxml.jackson.core:jackson-databind:jar is missing. @ line 129, column 17
[ERROR]     'dependencies.dependency.version' for io.vertx:vertx-codegen:jar is missing. @ line 161, column 17
[ERROR]     'dependencies.dependency.version' for io.vertx:vertx-docgen:jar is missing. @ line 166, column 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2484
Internal references to local Locks taken using SharedData.getLock() are not cleaned up · Issue #2484 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Every time a unique lock name is taken via SharedData.getLock(...), it gets added to a Map inside of SharedDataImpl. Currently, entries added to this Map are never removed, even if all references to the lock have been released, and there are no pending waiters. This means the Map can grow infinitely if an application takes locks using generated names, rather than hard-coded ones. To avoid this, entries could be removed from the internal map at the point the lock is released, as long as there are no pending waiters.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2485
 zookeeper service discovery is not working in ECS Dockers · Issue #2485 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I am trying to deploy my micro services through docker in AWS ECS cluster, I am able to deploy the containers and services are registered with Zookeeper. Once registration is happend, microservices are not talking each other with the help of zookeeper. Can you please help on that.
Regards
2018-06-06 13:23:09,809 [myid:] - INFO [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@215] - Accepted socket connection from /172.31.17.121:52002
2018-06-06 13:23:09,812 [myid:] - INFO [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@948] - Client attempting to establish new session at /172.31.17.121:52002
2018-06-06 13:23:09,813 [myid:] - INFO [SyncThread:0:ZooKeeperServer@693] - Established session 0x10001caa9350007 with negotiated timeout 20000 for client /172.31.17.121:52002
2018-06-06 13:23:18,675 [myid:] - INFO [SessionTracker:ZooKeeperServer@354] - Expiring session 0x10001caa9350005, timeout of 20000ms exceeded
2018-06-06 13:23:18,676 [myid:] - INFO [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x10001caa9350005
Here is the log from Zookeeper, which shows connection established from docker containers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2486
Websocket client and server don't send back close frame in closing handshake  · Issue #2486 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue
While using vertx to implement a websocket server, certain websocket client library (okhttp) got failure callback when closing the websocket from its side.
Finding
After doing a package capture, I found vertx didn't respond a CLOSE frame after receiving one. This behavior doesn't follow the RFC.
https://github.com/eclipse/vert.x/blob/e69a81a039400af76b256a55b38d8b65c3b07ca1/src/main/java/io/vertx/core/http/impl/HttpServerImpl.java#L695-L703
I checked vertx source code, and did some debug. I believe there is a bug at Line 699. From the comment, these lines of code intend to Echo back close frame.
Actually the Line 699 would always fail.
ch.writeAndFlush(wsFrame).addListener(ChannelFutureListener.CLOSE); 

After adding some debug code there, it actually throws the following exception. The wrFrame cannot be passed to writeAndFlush directly.
java.lang.UnsupportedOperationException: unsupported message type: WebSocketFrameImpl (expected: ByteBuf, FileRegion)
	at io.netty.channel.nio.AbstractNioByteChannel.filterOutboundMessage(AbstractNioByteChannel.java:266)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:877)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1371)

Solution
Change Line 699 to the following code solves the issue.
ch.writeAndFlush(new CloseWebSocketFrame(wsFrame.closeStatusCode(), 
    wsFrame.closeReason())).addListener(ChannelFutureListener.CLOSE);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2487
Event Bus: ability to set discard handler on MessageConsumer · Issue #2487 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version - 3.5.1
The underlying implementation class (HandlerRegistration) has a discard handler, but setting this is not exposed (the method has a comment about it being for test use only).  Having the ability to find out when messages are discarded is actually useful when managing workloads at scale.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



https://github.com/eclipse-vertx/vert.x
https://github.com/eclipse-vertx/vert.x/issues/2487
Event Bus: ability to set discard handler on MessageConsumer · Issue #2487 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version - 3.5.1
The underlying implementation class (HandlerRegistration) has a discard handler, but setting this is not exposed (the method has a comment about it being for test use only).  Having the ability to find out when messages are discarded is actually useful when managing workloads at scale.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2488
Event Bus: ability to set discard handler on MessageConsumer · Issue #2488 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version - 3.5.1
The underlying implementation class (HandlerRegistration) has a discard handler, but setting this is not exposed (the method has a comment about it being for test use only).  Having the ability to find out when messages are discarded is actually useful when managing workloads at scale.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2489
Event Bus:  "Handlers.choose()" should deprioritize paused handlers · Issue #2489 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version -- 3.5.1
Currently when a message is handled by the bus the "choose" code will simply pick the next handler in line.  If it turns out that handler is paused, the message will get dropped on the pending queue and possibly discarded, even if there are other handlers on the same address that are available to process the message.  It would be preferable if it gave preference to handlers that are not paused over those that are when making this choice.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2490
FutureImpl shall release the handler after completion · Issue #2490 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently FutureImpl keeps a reference on the handler after it has been completed. As side effect it can promote objects to survivor spaces. Since the future is completed there is no need to keep the reference onto the handler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2491
FutureImpl shall release the handler after completion - fixes #2490 by vietj · Pull Request #2491 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2492
Deploying HelloWorld Verticle in OpenShift v3.7.46 ThreadDumps · Issue #2492 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thought I would start with this group, but it may be more of an OpenShift issue.
We are seeing threads block deploying the simplest of applications.  We are new to Vertx, so it could be how we have something configured in the Dockerfile.  Attached is the console dump from the OpenShift pod, and the Dockerfile we use to build the image (we do not use fabric8 yet to deploy to our main OpenShift clusters).
OpenShift Master: v3.7.46
Kubernetes Master: v1.7.6+a08f5eeb62
Vertx Maven Version: 3.5.2.CR3
I can run the same, generated container locally in Docker (version 18.03) on CentOs without seeing these issues.
Thanks for any help.
threaddump-20180608.txt
Dockerfile.txt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2493
DnsException improvements · Issue #2493 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
shall not capture stack trace
provide a meaningful to string
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2494
Can I use vert.x only with memory in JVM heap? · Issue #2494 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I build a gateway application with vert.x,version is 3.5.1
Use eventBus between application comunication.
Use vert.x core httpclient for visit out API .
I find some problem as follow:
1.When application transfer about 130MBit/s in eventBus,sometimes ping check timeOut,and reconnect,
then the receive rate in vert.x metrics (eventbus messages oneMinuteRate) going unstable,and many
connection established between both ends of eventBus port.
2.HttpClient used in my application for visit out restful API. I set the timeout param as 3s like
httpClient.get(host,address,v->{ //dosomething }.setTimeout(3000).end;
,but I set a variable now as Instant.now().toEpochMilli(),then when respone, Instant.now().toEpochMilli()- now =gap, this gap large than 3s.Sometimes this gap go to 10s.
Here is my question:
1.eventBus use netty direct memory ,I set the propertity io.netty.noUnsafe=true, but it doesn't
work,so i met a PooledUnsafeDirectByteBuf out of memory.Is there any propertity can work?
2.When timeoutHandler called , this httpRequest throw an TimeoutException
(logic in io.vertx.core.http.impl.HttpClientRequestBase#timeout), then may this request is over.
When there is a response back after timeout, where can it be cached or handled?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2495
Java 10 issue: java.lang.IncompatibleClassChangeError: Method io.vertx.core.Future.succeededFuture()Lio/vertx/core/Future; must be InterfaceMethodref constant  · Issue #2495 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
FWIW im using some compiled groovy inside a java project, but not vertx-lang-groovy
$ java --version
openjdk 10.0.1 2018-04-17
OpenJDK Runtime Environment (build 10.0.1+10-Ubuntu-3ubuntu1)
OpenJDK 64-Bit Server VM (build 10.0.1+10-Ubuntu-3ubuntu1, mixed mode)
java.lang.IncompatibleClassChangeError: Method io.vertx.core.Future.succeededFuture()Lio/vertx/core/Future; must be InterfaceMethodref constant
        at net.iowntheinter.kvdn.server.impl.HTTPServer.init(HTTPServer.groovy:83)
        at vr.VRServer.lambda$start$2(VRServer.java:51)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2496
eventBus.send blocks in for loop · Issue #2496 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Just found that eventBus.send blocks when using for loop, it will finish all the send, then process the reply.
Send.java
for(int i = 0 ; i < 5 ; i++){
System.out.println("sending");
eventBus.send("addr", message, re -> {
System.out.println("done");
});
}
Consumer.java
vertx.eventBus().consumer("addr", e -> {
System.out.println("Receive message " + e.body());
});
The above code produces this output:
sending
sending
sending
sending
sending
Receive message
Receive message
Receive message
Receive message
Receive message
Is there a way I can have interleave send/receive when usingh for loop?
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2497
vertx-jdbc-client  · Issue #2497 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi,  Today I went to see  vertx-jdbc-client and found a problem,  all get connectin and execute sql in the same thread，especially only one thread.
code in theJDBCClientImpl  302 line，version 3.5.1
synchronized ExecutorService exec() {
if (exec == null) {
exec = new ThreadPoolExecutor(1, 1,
1000L, TimeUnit.MILLISECONDS,
new LinkedBlockingQueue<>(),
(r -> new Thread(r, "vertx-jdbc-service-get-connection-thread")));
}
return exec;
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2498
NetServer bootstrap should set SO_LINGER option on the child channel instead of the server channel · Issue #2498 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello.
If we use setSoLinger we only get:
WARN i.n.b.ServerBootstrap [vert.x-eventloop-thread-7] Unknown channel option 'SO_LINGER' for channel
Code right now is:
https://github.com/eclipse/vert.x/blob/357af84886367ef31dc61f00a646e6455f1ac8c8/src/main/java/io/vertx/core/net/impl/transport/Transport.java#L214-L216
According to https://github.com/mrniko/netty-socketio/issues/481 it looks like that it should be like this:
if (options.getSoLinger() != -1) {
      bootstrap.childOption(ChannelOption.SO_LINGER, options.getSoLinger());
}
Hope somebody can help on this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2499
Provide implementation for issue #2376 by KowalczykBartek · Pull Request #2499 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2500
Provide implementation for issue #2376 by KowalczykBartek · Pull Request #2500 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
signing test
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2501
Internal references to local Locks taken using SharedData.getLock() are not cleaned up by tsegismont · Pull Request #2501 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
here is the initial feedback after a first pass:
1/ there is a race condition with timedOut / acquired in timeout() / acquire(AsyncLock lock) methods so that the handler can be called twice with a lock granted and an acquisition.
It should be exclusive and if you are using a volatile synchronization, the best would be a single status (waiting, timedOut, acquired) atomic field with a CAS operation.
2/ AsyncLock should not implement Lock directly and instead should provide a delegating Lock implementation that has a field preventing misuse of the Lock,
i.e release() can be called only once otherwise throw an IllegalStateException
3/ in forNextWaiter() the list filtering with timed out waiter can lead to a race condition (filter(LockWaiter::notTimedOut)).

waiter 1 acquires the lock from a non event loop thread with a timeout, is the first in the AsyncLock list and gets its AsyncLock view
thread waiter 1 is unscheduled
waiter 1 timer fires on the random event loop thread (obtained from setTimer() from non vertx thread) and update the waiter 1 state to be timedOut
waiter 2 acquires the lock and filters the view, it gets an AsyncLock view that is itself (because of filtering) and will call AsyncLock#acquire() because firstWaiter() returns true
waiter 1 thread is now rescheduled it will call also acquire(), as it is timed out, it will call release() and call AsyncLock#acquire() a second timed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2502
Fix minor typos and grammar by tychobrailleur · Pull Request #2502 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2503
Add a IterableMessageCodec for eventbus by jo5ef · Pull Request #2503 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj Hello. Will this feature be implemented? It is very necessary to optimize the operation of Vertx Service Proxy
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2504
Fix BlockedThreadChecker intervals for benchmarks by jo5ef · Pull Request #2504 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ran into this today :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2505
Remove deprecation warnings by tsegismont · Pull Request #2505 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2506
Hard-coded HTTPS scheme regardless of SSL usage · Issue #2506 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/eclipse/vert.x/blob/a6114607b00cf584fc149e9f687019f4af182925/src/main/java/io/vertx/core/http/impl/Http2ClientConnection.java#L325
The https scheme is passed even if ssl is not used, should be easy to fix by checking via isSsl() then use "http" or "https" accordingly
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2507
Add instant deserializer by EmadAlblueshi · Pull Request #2507 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I understand the PR as we support instant at the JsonObject/JsonArray level, but there it is only a read operation that converts from text to Instant to be used in code. If we allow this (and then probably the same with the bas64 strings) we could avoid many parsing/encoding cycles as we would keep data in the right type in memory (not the text representations).
I think in order to make sure this works, we need to see how would this work with eventbus/clustering serialization. I know for example on vertx-web sessions this would fail as it is quite strict with the json types and they are hardcoded to the basic json types + cluster serializable.
Question for @vietj should we go this way and avoid encode/decode and probably have to adapt web session data to be a pure JSON object? or do you have a good reason not to go?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2508
HttpServer connection lifecycle rework · Issue #2508 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Http1xServerConnection class handles all HTTP messages in a single queue. This refactoring removes the global queue and instead uses a buffer queue in each HttpServerRequest implementation. Pipelined requests are now handled in the connection as a linked queue of HttpServerRequest where the head is the request sending a response and the tail is the request receiving the HTTP content buffers. In normal case the head and tail are the same request, in pipelined case a request may have been fully received but the response not yet sent and thus head → tail.
This refactor is required by https://github.com/vert-x3/wiki/wiki/Vert.x-Roadmap#stream-improvements .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2509
HttpServer connection lifecycle rework - fixes #2508 by vietj · Pull Request #2509 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2510
Use Netty's HTTP header constants by tsegismont · Pull Request #2510 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj this is the separate PR you wanted we test in the perf lab
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2511
AsyncFile.read allocate two buffer to read the data · Issue #2511 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
AsyncFile.read allocate two buffers to read the data makes it very inefficient.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2512
Initial Connection Pool on HttpClient · Issue #2512 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, Vertx HttpClientOptions  only has a max limit on a HttpClient pool (both HTTP/1 and HTTP/2). Connections are opened only under a certain load. Is it possible to start the HttpClient with a initial number of connections?
The motivation for this comes from running applications in a Kubernetes environment where the HttpClient is trying to hit a service cluster. In my case only one of the pods is getting connected to while the rest sit idle.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2513
OAuth2Auth does not extend AuthProvider in Scala dialect · Issue #2513 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Vertx version 3.5.2
I am trying to build social login with GithubAuth using Scala dialect of the Vertx.
To avoid repetitive authentication calls to the server i want to use session.
According to the docs code should look like this:
    val router = Router.router(vertx)
    router.route.handler( CookieHandler.create )
    val store1 = LocalSessionStore.create(vertx)
    val sessionHandler = SessionHandler.create(store1)
    router.route().handler(sessionHandler)

    val authProvider: OAuth2Auth = GithubAuth.create(vertx, "XXX", "YYY")
    router.route.handler(UserSessionHandler.create(authProvider))


The last line however does not compile as OAuth2Auth does not extend AuthProvider
I managed to make it work by using the following trick:
router.route.handler(UserSessionHandler.create(AuthProvider(authProvider.asJava.asInstanceOf[JAuthProvider]))) 
It looks like the Scala API is incomplete.
Thanks,
Jakub
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2514
HttpClient should behave according to the HTTP version returned by the server and not sent by the client · Issue #2514 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Full discussion with Gists is available here.
The problem goes as follows: vert.x http client submits 2 sequential requests to a http1.0 server.
First requests receives a response as expected, second one fails with VertxException.
The issue seems to be introduced in 3.5.2 and didn't exist in 3.5.1.
Fixing When the response does not contain Connection: Keep-alive in HTTP/1.0, the client has to assume Connection: close.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2515
Websocket queue not respected in timer/periodic/blocking · Issue #2515 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello everyone, I'm building a client/server process to benchmark some databases. The server basically sends out data at a given rate, and clients need to consume that data at the best of their abilities. I've chosen websockets to achieve this, and made a vertx implementation.
I've now reached a problem: the server does not seem to discard messages when I expect them to. For example: one fast DB and one slow DB are consuming the same stream. As I set the queue size small, I would expect the small DB's client to trigger some dropped messages, however, the fast and the small DB's clients are both consuming the data at the same rate.
I've made a small MWE and the following caught my eye: when I use the webSocket variable within a setPeriodic, setTimer or executeBlocking, the queue seems  to be ignored. I guess I'm misusing vertx in some way, but in the case I'm not, hopefully I'll get an answer through here. Does anyone have an idea? Should I implement this 'huge stream of unending data' in a different way (i'm doing it in batches now, through setPeriodic)?
import io.vertx.core.Vertx;
import io.vertx.core.http.ServerWebSocket;
import io.vertx.core.json.JsonObject;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.atomic.AtomicInteger;

public class ServerClientMWE {

    public static final int QUEUE_MAX_SIZE = 500;
    public static final int LOOP_SIZE = 10;
    public static final int CLIENT_DELAY = 100;

    public static AtomicInteger theNumber = new AtomicInteger(0);
    public static Vertx vertx = Vertx.vertx();

    public static void main(String[] args) {
        // This method will have the server write all the data, seemingly ignoring the queue
        // period();
        // This method does the same as the one above. Expectation: the same result as straight()
        // blocking();
        // This method hits the queue as expected, deterministic
        // straight();
    }

    private static void straight() {
        //set up the server: websocket
        vertx.createHttpServer()
                .websocketHandler(webSocket -> {
                    //limit the queue to something really small
                    webSocket.setWriteQueueMaxSize(QUEUE_MAX_SIZE);
                    //start sending information to the client
                    List<Integer> droppedNumbers = writeBatch(webSocket);
                    //after this batch, print the dropped numbers
                    System.out.println("droppedNumbers (size " + droppedNumbers.size() + ") = " + droppedNumbers);
                })
                .listen(1234, "localhost");

        //set up a client: this one reads one element and then hangs for a while
        startClient();
    }


    public static void blocking() {
        AtomicInteger amountOfBatches = new AtomicInteger(0);
        //set up the server: websocket
        vertx.createHttpServer()
                .websocketHandler(webSocket -> {
                    //limit the queue to something really small
                    webSocket.setWriteQueueMaxSize(QUEUE_MAX_SIZE);

                    //the period could be 1 or 1000 here, does not matter, all messages get through
                    vertx.executeBlocking(future -> {
                        //don't do anything if we've reached our maximum batch
                        //we do this 5 times, natural limit
                        if (amountOfBatches.incrementAndGet() > 5) {
                            return;
                        }
                        //start sending information to the client
                        List<Integer> droppedNumbers = writeBatch(webSocket);
                        //after this batch, print the dropped numbers
                        System.out.println("droppedNumbers (size " + droppedNumbers.size() + ") = " + droppedNumbers);
                        future.complete();
                    }, false, result -> {
                    });

                })
                .listen(1234, "localhost");

        //set up a client: this one reads one element and then hangs for a while
        startClient();
    }


    public static void period() {
        AtomicInteger amountOfBatches = new AtomicInteger(0);
        //set up the server: websocket
        vertx.createHttpServer()
                .websocketHandler(webSocket -> {
                    //limit the queue to something really small
                    webSocket.setWriteQueueMaxSize(QUEUE_MAX_SIZE);

                    //the period could be 1 or 1000 here, does not matter, all messages get through
                    vertx.setPeriodic(2000, timerID -> {
                        //don't do anything if we've reached our maximum batch
                        //we do this 5 times, natural limit
                        if (amountOfBatches.incrementAndGet() > 5) {
                            return;
                        }
                        //start sending information to the client
                        List<Integer> droppedNumbers = writeBatch(webSocket);
                        //after this batch, print the dropped numbers
                        System.out.println("droppedNumbers (size " + droppedNumbers.size() + ") = " + droppedNumbers);
                    });

                })
                .listen(1234, "localhost");

        //set up a client: this one reads one element and then hangs for a while
        startClient();
    }

    private static void startClient() {
        vertx.createHttpClient().websocket(1234, "localhost", "", webSocket -> {
            webSocket.handler(buffer -> {
                System.out.println("got number from server: " + buffer.toJsonObject().getInteger("number"));
                try {
                    Thread.sleep(CLIENT_DELAY);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            });
        });
    }

    //this method writes a batch of numbers, given the LOOP_SIZE, on the web socket, if the queue is not full
    private static List<Integer> writeBatch(ServerWebSocket webSocket) {
        List<Integer> droppedNumbers = new ArrayList<>();
        for (int i = 0; i < LOOP_SIZE; i++) {
            theNumber.incrementAndGet();
            if (!webSocket.writeQueueFull()) {
                webSocket.writeTextMessage(new JsonObject().put("number", theNumber.get()).encode());
            } else {
                droppedNumbers.add(theNumber.get());
            }
        }
        return droppedNumbers;
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2516
Add discriminator to internal eventbus addresses by jotak · Pull Request #2516 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2517
Disable HttpClient TCP idle timeout when connection is in the pool · Issue #2517 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I noticed that in a corner case, we have a lot of test failure where the connection is not used very often. For example, I make a timeout to be of 10 seconds and I make a call every 10 seconds exactly. Every once in while, my request fails with VertxException (Connection is closed) since the checkout connection is closed right after the connection is polled from the connection pool. I only noticed this in 3.5.2 but not in 3.4.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2518
Disable HttpClient TCP idle timeout when connection is in the pool - … by vietj · Pull Request #2518 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
will be back-ported to 3.5.x
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2519
HttpServer does not clean the channel pipeline after HTTP/1 upgrade to H2C · Issue #2519 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently after an HTTP/1 to H2C upgrade the HTTP server does not actually remove the codecs from the channel pipeline leading the HTTP decoder to decode H2.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2520
The Kotlin documentation for vert.x has errors in it. · Issue #2520 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I checked the documentation for Kotlin on this page and it has some errors in it where code blocks should have been:

This is the same part from the Java docs:

I did not find the repo for the docs so I'm not sure this is the right place to mention this. This problem persisted for at least a year so I thought it might worth mentioning. I'd love to have good Kotlin docs.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2521
MultiMap with putIfAbsent method · Issue #2521 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
The MultiMap interface could implement the method putIfAbsent like the Map interface. It's been needed in the PR 960 of vertx-web and I think it could be a very util method in more cases.
I could implement it if the enhancement is approved.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2522
HttpClient response chunk handling rework · Issue #2522 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Rework the HttpClient request chunk handling that is split between HttpClientResponse and HttpClientStream so it is fully managed by the stream. The logic is now encapsulated in the stream and it simplifies the logic of the client response that does not care anymore of paused trailers and paused end chunk (that was only used by HTTP/1).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2523
HttpClient response chunk handling rework by vietj · Pull Request #2523 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2524
There should be a handler which is guaranteed to be called when the request is done · Issue #2524 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There should be a handler which is guaranteed to be called when the request is done so that we can perform the resource cleanup. Currently, there are some hooks but it is hard to deal with.
On the server side, you have .addBodyEndHandler() and .closeHandler(). On the client side, it is even more confusing since you have to hook both to the HttpClientRequest.exceptionHandler() and HttpClientResponse.exceptionHandler(), HttpClientResponse.endHandler() while it does not even have an analogous .closeHandler().
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2525
acceptEventLoopGroup · Issue #2525 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Why didn't netServer use the acceptEventLoopGroup ？
and  I looked acceptEventLoopGroup only use for httpServer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2526
Feature/substratevm support by pmlopes · Pull Request #2526 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@Jotschi would you mind to have a look to this PR? I think it will make your experiments a bit simpler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2527
Added helper method for merging json in object by mystdeim · Pull Request #2527 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Method mergeIn(T object) can be helpfull when we pass json in the object constructor, for example:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2528
JsonObject.mergeIn helping method by mystdeim · Pull Request #2528 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Method JsonObject.mergeIn(T object) can be helpfull when we pass json in the object constructor, for example:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2529
MergeIn method for the object updating by mystdeim · Pull Request #2529 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Method mergeIn(T object) can be helpfull when we pass json in the object constructor, for example:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2530
problem with vertx-config-yaml · Issue #2530 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I added  vertx-config-yaml and vertx-config in my pom.xml,
and it worked when I run my tests.
but when I package this project to a fatjar and run ,
it throws Exception:
java.lang.IllegalArgumentException: unknown configuration format: yaml (supported formats are: [json, raw, properties]
at io.vertx.config.impl.ConfigRetrieverImpl.(ConfigRetrieverImpl.java:119)
at io.vertx.config.ConfigRetriever.create(ConfigRetriever.java:49)
at cn.cookie.common.config.Config.getConfig(Config.java:24)
at cn.cookie.MainVerticle.start(MainVerticle.java:15)
at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:106)
at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:483)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2531
Use of wildcards in Pump · Issue #2531 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The declaration of static pump function from Pump class should be changed to allow use of wildcards.
Instead of
static <T> Pump pump(ReadStream<T> rs, WriteStream<T> ws)
it should be
static <T> Pump pump(ReadStream<? extends T> rs, WriteStream<? super T> ws)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2532
HttpClient idle state handler should be added first when the connection is borrowed from the pool · Issue #2532 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient adds the IdleStateHandler before the handler, relying on the handler presence. With HTTP/2 clear text upgrade the handler name cannot be preserved and therefore adding the idle state handler fails.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2533
HttpClient must use the http scheme for non SSL connections · Issue #2533 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently when the HttpClient sends an HTTP/2 request, it uses the https scheme unconditionally. The scheme decision should look whether the connection uses TLS or not.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2534
Event loop context executing with wrong thread · Issue #2534 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Code to reproduce the error: https://gist.github.com/emmx/52e672b4f163d471ed36fed9fae8b93a
I'm running it on a AWS instance, it shouldn't matter but maybe network performance is important in case this is caused by a race condition.
Vert.x 3.5.2
Java 10.0.1
java.lang.IllegalStateException: Uh oh! Event loop context executing with wrong thread! Expected null got Thread[globalEventExecutor-1-1,5,main]
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:318)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:195)
	at io.vertx.core.http.impl.HttpClientRequestImpl.lambda$connect$10(HttpClientRequestImpl.java:639)
	at io.vertx.core.http.impl.ConnectionManager.lambda$getConnection$5(ConnectionManager.java:166)
	at io.vertx.core.http.impl.pool.Pool.lambda$createConnection$4(Pool.java:315)
	at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:165)
	at io.vertx.core.http.impl.HttpChannelConnector.connectFailed(HttpChannelConnector.java:280)
	at io.vertx.core.http.impl.HttpChannelConnector.lambda$doConnect$2(HttpChannelConnector.java:181)
	at io.vertx.core.net.impl.ChannelProvider.lambda$connect$0(ChannelProvider.java:54)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:507)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:481)
	at io.netty.util.concurrent.DefaultPromise.access$000(DefaultPromise.java:34)
	at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:431)
	at io.netty.util.concurrent.GlobalEventExecutor$TaskRunner.run(GlobalEventExecutor.java:240)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:844)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2535
Access to no existing routing · Issue #2535 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Access to no existing routing,return Resource not found ,why not Get into failureHandler !
Such as default access / or access that does not exist
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2536
Create common interface for executeBlocking methods · Issue #2536 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The executeBlocking methods are common between the interfaces WorkerExecutor and Context. It would be an API convenience to have WorkerExecutor and Context be extensions of a common interface that supplies the two executeBlocking methods.
Then something like the following could be done:
// given:
public interface Context extends ExecuteBlockingInterface { /* ... */ }
public interface WorkerExecutor extends Measured, ExecuteBlockingInterface { /* ... */ }

// when:
public static void makeManyBlockingCalls(ExecuteBlockingInterface ebi, Future allDone) {
    // call `ebi.executeBlocking` many times, complete allDone when all blocking calls finish
}

// then: call it on the current Context
makeManyBlockingCalls(vertx.getOrCreateContext(), future)

// then: call it on a WorkerExecutor
WorkerExecutor exec = vertx.createSharedWorker("tmp-worker-pool");
makeManyBlockingCalls(exec, Future.future().setHandler(event -> exec.close()))
Currently, makeManyBlockingCalls needs to be overloaded to accept a Context or WorkerExecutor.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2537
PostgreSQL message/record size · Issue #2537 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In BaseSQLClient.class package io.vertx.ext.asyncsql.impl  dependency there is a limit for a record size set to 16777216. The internal config parameter name is maximumMessageSize.
When trying to download a large file from the database, the server produces an error:
com.github.mauricio.async.db.postgresql.exceptions.MessageTooLongException: Message of type 68 has size 38080055, higher than the limit 116777216.
Unfortunately there is no way to change the limit without the code modification (which I temporarily did)
It would be useful to be able to set that limit up in JsonObject config (additional configuration key)
How can I get large files from the database?
Best regards
ldvhome
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2538
is there any way to implement actors model with vertx? · Issue #2538 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I know Akka and it's acotrs is very powerful.
My question is know how to implement actors model with vertx?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2539
Update to netty 4.1.25.Final and netty-tcnative 2.0.8.Final · Issue #2539 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2540
mock websocket client connect, but throw NullPointException · Issue #2540 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj
`package com.cloudyoung.wx.test.base;
import java.util.concurrent.CountDownLatch;
import org.junit.Test;
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpClient;
public class VertxWebSocketServerTest extends BaseTest {
private CountDownLatch latch = new CountDownLatch(1);

@Test
public void initWebSocketConnection() throws Exception {
    WebSocketVerticle verticle = new WebSocketVerticle();
    verticle.start();
    latch.await();
}

class WebSocketVerticle extends AbstractVerticle {
    
    private int port = 9090;

    private String host = "localhost";

    private String requestURI = "webSocketServer?appId=wxdc55ca89d7d4d1b8&module=WX_WEBSOCKET_DIALOGUE_MODULE&clientSign=7ab2c148-5bdb-4786-ad36-37ada47bb613";

    private int clientNum = 20;

    private int connectionNum = 60000;

    private Vertx vertx = Vertx.vertx();
    
    @Override
    public void start() throws Exception {
        for (int i = 1; i <= clientNum; i++) {
            HttpClient httpClient = vertx.createHttpClient();
            for(int j=1; j<= connectionNum; j++) {
                httpClient.websocket(port, host, requestURI, webSocket -> {
                    webSocket.handler(buffer -> {
                        System.out.println("got number from server: " + buffer.toJsonObject().getInteger("number"));
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    });
                });
            }
        }
    }
}

}
`
exception info:
19:24:30 [main] DEBUG io.netty.util.internal.logging.InternalLoggerFactory - Using SLF4J as the default logging framework
19:24:30 [main] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.level: simple
19:24:30 [main] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.targetRecords: 4
19:24:30 [main] DEBUG io.netty.channel.MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 16
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - Platform: MacOS
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - Java version: 8
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.Buffer.address: available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - direct buffer constructor: available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable prior to Java9
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.(long, int): available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - sun.misc.Unsafe: available
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.tmpdir: /var/folders/m3/27h81r2d4815l01bbfsfj4fh0000gn/T (java.io.tmpdir)
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: 3817865216 bytes
19:24:30 [main] DEBUG io.netty.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1
19:24:30 [main] DEBUG io.netty.util.internal.CleanerJava6 - java.nio.ByteBuffer.cleaner(): available
19:24:30 [main] DEBUG io.netty.channel.nio.NioEventLoop - -Dio.netty.noKeySetOptimization: false
19:24:30 [main] DEBUG io.netty.channel.nio.NioEventLoop - -Dio.netty.selectorAutoRebuildThreshold: 512
19:24:31 [main] DEBUG io.netty.util.internal.PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available
19:24:31 [main] DEBUG io.netty.resolver.dns.DefaultDnsServerAddressStreamProvider - Default DNS servers: [/192.168.30.100:53, /202.106.0.20:53] (sun.net.dns.ResolverConfiguration)
19:24:31 [main] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv4Stack: false
19:24:31 [main] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv6Addresses: false
19:24:31 [main] DEBUG io.netty.util.NetUtil - Loopback interface: lo0 (lo0, 0:0:0:0:0:0:0:1)
19:24:31 [main] DEBUG io.netty.util.NetUtil - Failed to get SOMAXCONN from sysctl and file /proc/sys/net/core/somaxconn. Default: 128
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numHeapArenas: 16
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numDirectArenas: 16
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.pageSize: 8192
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxOrder: 11
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.chunkSize: 16777216
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.tinyCacheSize: 512
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.smallCacheSize: 256
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.normalCacheSize: 64
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxCachedBufferCapacity: 32768
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.cacheTrimInterval: 8192
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.buffer.PooledByteBufAllocator - -Dio.netty.allocator.useCacheForAllThreads: true
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024
19:24:31 [vert.x-eventloop-thread-0] DEBUG io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096
19:24:36 [vert.x-eventloop-thread-13] DEBUG io.netty.channel.DefaultChannelId - -Dio.netty.processId: 5803 (auto-detected)
19:24:36 [vert.x-eventloop-thread-13] DEBUG io.netty.channel.DefaultChannelId - -Dio.netty.machineId: ac🇩🇪48:ff:fe:00:11:22 (auto-detected)
19:24:36 [vert.x-eventloop-thread-10] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.allocator.type: pooled
19:24:36 [vert.x-eventloop-thread-10] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.threadLocalDirectBufferSize: 65536
19:24:36 [vert.x-eventloop-thread-10] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.maxThreadLocalCharBufferSize: 16384
19:24:36 [vert.x-eventloop-thread-7] DEBUG io.netty.buffer.AbstractByteBuf - -Dio.netty.buffer.bytebuf.checkAccessible: true
19:24:36 [vert.x-eventloop-thread-7] DEBUG io.netty.util.ResourceLeakDetectorFactory - Loaded default ResourceLeakDetector: io.netty.util.ResourceLeakDetector@35f3bcab
19:24:36 [vert.x-eventloop-thread-7] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: DCBugaCiw81NPWbpEClurQ==, expected response: jH2EtzeVP+k+rAJ0AjrwbuFadfM=
19:24:36 [vert.x-eventloop-thread-1] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: A4CwX+3VzVRbPOwpH2bqyA==, expected response: RsORCshbiUjp6/1UkHjoZ17VBo8=
19:24:36 [vert.x-eventloop-thread-14] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: rz29DcMc7WYz/hLSygPOiQ==, expected response: XP94LxqAOM/Bn3eMVTOnYMbqU5I=
19:24:36 [vert.x-eventloop-thread-8] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: namdWLhsBcn1SwSl+IrPUw==, expected response: 23w6+CWGIoLzfoXkb3I47e7KiMs=
19:24:36 [vert.x-eventloop-thread-4] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: 6jBb1K326SvGsmPFsvoHUA==, expected response: XmVxmdhuYdRZXNEWknOCLrTzAeI=
19:24:36 [vert.x-eventloop-thread-12] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: CfbYqKNEjAy0xmaxGvqKbQ==, expected response: HcK38aDk2ONaP1/SZDVO2E/f48U=
19:24:36 [vert.x-eventloop-thread-9] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: zQ1IFdb5feHhMlv5Aj+v6g==, expected response: sxiDkUJJFVw870241E0ryhf7rjM=
19:24:36 [vert.x-eventloop-thread-15] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: 0Jc72nZa+MskfAWVmwkFPg==, expected response: M6Mw4C2gENEyc4oXsN6BekgtSFE=
19:24:36 [vert.x-eventloop-thread-13] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: ct5UNZGkkinrPdPnMy5IOQ==, expected response: 3Rmnnhy9AKkYjogeKsYojdCWK6Y=
19:24:36 [vert.x-eventloop-thread-0] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: oppjdFJOWMziI8RzYwyl3w==, expected response: rY+bRyhcDyRXuOpUldCfqJ7GlA8=
19:24:36 [vert.x-eventloop-thread-3] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: Ibgk/MIeZzY+xQV3EcgsUA==, expected response: YIEdcu0C9YUK38sW0zwaYGfFZCI=
19:24:36 [vert.x-eventloop-thread-10] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: +NaoBLPOLly80PXBU6aU1A==, expected response: T4CSH8LrkJBO0r+PBYrW0pT4bLg=
19:24:36 [vert.x-eventloop-thread-6] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: S5CpXs+zk24yNBJLWIkZlw==, expected response: YDUujFU3ybb+ULHp4d+hjNXxH7Y=
19:24:36 [vert.x-eventloop-thread-2] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: WY68hG0tcQXt12Ybnk201w==, expected response: whI+Vq4w2yOugUVYWJ0hsynhWh0=
19:24:36 [vert.x-eventloop-thread-5] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: ErBmPnqZNYDBOhSyqDk0lw==, expected response: Q/9FO6AYPMXTXobXbqssYtH+Gyc=
19:24:36 [vert.x-eventloop-thread-11] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: D4XSHw9Z5HgYFjGATQiXWA==, expected response: YkMylc54LLHSki3xiekR5qT/Pbw=
七月 17, 2018 7:24:36 下午 io.vertx.core.http.impl.HttpClientImpl
严重: java.lang.NullPointerException: value
七月 17, 2018 7:24:36 下午 io.vertx.core.http.impl.HttpClientImpl
严重: java.lang.NullPointerException: value
19:24:36 [vert.x-eventloop-thread-6] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: GUfEstOfYBKkmC6QgBNttA==, expected response: lo8lorxtK2YL7f+MNvCqcpuC0AY=
七月 17, 2018 7:24:36 下午 io.vertx.core.http.impl.HttpClientImpl
严重: java.lang.NullPointerException: value
19:24:36 [vert.x-eventloop-thread-14] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: SKpjw3ho8j3dBVdECeRt8Q==, expected response: LnJj7PqkaYe8DEJnK/MXVVOJz50=
19:24:36 [vert.x-eventloop-thread-11] DEBUG io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker13 - WebSocket version 13 client handshake key: qUBnp78dz0sMeu7NeHKQgg==, expected response: Xc7XnO+2eAQIuiHmSZ7qi3iMEZs=
七月 17, 2018 7:24:36 下午 io.vertx.core.http.impl.HttpClientImpl
严重: java.lang.NullPointerException: value
七月 17, 2018 7:24:36 下午 io.vertx.core.http.impl.HttpClientImpl
严重: java.lang.NullPointerException: value
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2541
Exception not handled in some cases · Issue #2541 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I saw this in our log file. Is it something that should be fixed? I suspected that it might have something to do with websocket but I can't be sure.
i.n.c.DefaultChannelPipeline [vert.x-eventloop-thread-0] [] An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception. java.io.IOException: Connection reset by peer | 	at sun.nio.ch.FileDispatcherImpl.read0(Native Method) | 	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39) | 	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223) | 	at sun.nio.ch.IOUtil.read(IOUtil.java:192) | 	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380) | 	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288) | 	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1108) | 	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:345) | 	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:126) | 	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645) | 	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580) | 	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497) | 	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459) | 	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886) | 	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) | 	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2542
Limit client connection count · Issue #2542 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,we are heavy use vert.x, and we want limit active client connection count both in HttpServer and NetServer.
If server had accepted certain amount of connection, new connection need reject for overload protection.
Any good idea ?
Best Regards & Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2543
Websocket compression by codepitbull · Pull Request #2543 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Will be reopened
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2544
Vertx/Netty is appending "=" in query parameter. · Issue #2544 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We are using Vertx 3.5.0 WebClient API to make HTTP call to remote server and given below is how my input URI look like :

/server/path?jREJBBB5x2AaiSSDO0/OskoCztDZBAAAAAADV1A4

In HttpClientContext Vertx is calling io.netty.handler.codec.http.QueryStringEncoder, which append "=" even though it wasn't there in actual input provided to Vertx.
QueryStringEncoder enc = new QueryStringEncoder(request.uri); request.queryParams().forEach(param -> enc.addParam(param.getKey(), param.getValue())); requestURI = enc.toString();
From QueryStringEncoder:
if (value != null) { this.uriBuilder.append('='); appendComponent(value, this.charsetName, this.uriBuilder); }
So actual URI received by remote server looks like below:

/server/path?jREJBBB5x2AaiSSDO0%2FOskoCztDZBAAAAAADV1A4=

If you notice in above URL, Vertx is encoding the parameter and also appending extra "=" at the end.
This issue isn't there if we use HttpClient API instead of WebClient API. Unfortunately the remote server doesn't like this extra "=" added to query and encoded query, and fails hard. This remote system can't be updated to handle this behavior because if doesn't belong to us.
Moving back to HttpClient will be very expensive to us because of amount of code change. Looking forward to your feedback. We are open for suggestions, and we can create a PR once agreed upon the solution.
Here is sample reproducer - https://github.com/manish-panwar/vertx-issue-2544-reproducer-
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2545
Enable websocket compression by codepitbull · Pull Request #2545 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Server support is enabled by default (but the client must request it).
Client side must be specifically enabled in options.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2546
Enable websocket compression by codepitbull · Pull Request #2546 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
will review today
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2547
Provide Elliptic Curve format for key and cert  · Issue #2547 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have tried to load ECDSA key pair that is formatted using following delimiters:
TLS_CERT
-----BEGIN CERTIFICATE-----
... cert content comes here ...
-----END CERTIFICATE-----

TLS_KEY
-----BEGIN EC PRIVATE KEY-----
... private key content comes here ...
-----END EC PRIVATE KEY-----

using the following conde snippet:
        return new HttpServerOptions()
                .setUseAlpn(true)
                .setSsl(true)
                .setPemKeyCertOptions(
                        new PemKeyCertOptions()
                                .setKeyValue(Buffer.buffer(getMandatoryString(config, "TLS_KEY")))
                                .setCertValue(Buffer.buffer(getMandatoryString(config, "TLS_CERT")))
                );

And I get the following error message:
{
      "time" : "24-07-2018 03:51:05 BST",
      "level" : "DEBUG",
      "loggerName" : "com.crypt.common.http.routes.AbstractApiVerticle",
      "message" : "Unable to starting Api Verticle",
      "thrown" : [
        "io.vertx.core.VertxException: java.lang.RuntimeException: Missing -----END PRIVATE KEY----- delimiter",
        "        at io.vertx.core.net.impl.SSLHelper.createContext(SSLHelper.java:297)",
        "        at io.vertx.core.net.impl.SSLHelper.getContext(SSLHelper.java:457)",
        "        at io.vertx.core.net.impl.SSLHelper.validate(SSLHelper.java:482)",
        "        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:243)",
        "        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:216)",
        "        at io.vertx.reactivex.core.http.HttpServer.listen(HttpServer.java:249)",
        "        at io.vertx.reactivex.core.http.HttpServer.lambda$rxListen$2(HttpServer.java:268)",
        "        at io.vertx.reactivex.core.impl.AsyncResultSingle.subscribeActual(AsyncResultSingle.java:42)",
        "        at io.reactivex.Single.subscribe(Single.java:3313)",
        "        at io.reactivex.internal.operators.single.SingleFlatMap$SingleFlatMapCallback.onSuccess(SingleFlatMap.java:84)",
        "        at io.reactivex.internal.operators.single.SingleDoOnError$DoOnError.onSuccess(SingleDoOnError.java:52)",
        "        at io.reactivex.internal.operators.single.SingleMap$MapSingleObserver.onSuccess(SingleMap.java:64)",
        "        at io.vertx.reactivex.core.impl.AsyncResultSingle.lambda$subscribeActual$0(AsyncResultSingle.java:46)",
        "        at io.vertx.reactivex.ext.web.api.contract.openapi3.OpenAPI3RouterFactory$8.handle(OpenAPI3RouterFactory.java:272)",
        "        at io.vertx.reactivex.ext.web.api.contract.openapi3.OpenAPI3RouterFactory$8.handle(OpenAPI3RouterFactory.java:269)",
        "        at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:79)",
        "        at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:289)",
        "        at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)",
        "        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)",
        "        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)",
        "        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)",
        "        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)",
        "        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)",
        "        at java.lang.Thread.run(Thread.java:748)",
        "Caused by: java.lang.RuntimeException: Missing -----END PRIVATE KEY----- delimiter",
        "        at io.vertx.core.net.impl.KeyStoreHelper.loadPems(KeyStoreHelper.java:355)",
        "        at io.vertx.core.net.impl.KeyStoreHelper.loadPrivateKey(KeyStoreHelper.java:305)",
        "        at io.vertx.core.net.impl.KeyStoreHelper.loadKeyCert(KeyStoreHelper.java:293)",
        "        at io.vertx.core.net.impl.KeyStoreHelper.create(KeyStoreHelper.java:107)",
        "        at io.vertx.core.net.KeyCertOptions.getKeyManagerFactory(KeyCertOptions.java:43)",
        "        at io.vertx.core.net.impl.SSLHelper.getKeyMgrFactory(SSLHelper.java:302)",
        "        at io.vertx.core.net.impl.SSLHelper.createContext(SSLHelper.java:255)",
        "        ... 23 more"
      ]
    }


Which make me wonder wheter there is any support for elliptic-curve cryptography or if I am missing something?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2548
`FileResolver.unpackFromBundleURL()` does not detect a directory unless the requested path has a trailing '/' · Issue #2548 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As can be seen from this line of FileResolver.java, unpackFromBundleURL() does not account for the possibility of a resource path to be a directory - even if it doesn't end with a '/'.
For example, consider the following sample OSGi bundle structure (excluding manifests etc.):
META-INF/
└── resources
    └── webjars
        └── swagger-ui
            └── 3.17.4
                ├── favicon-16x16.png
                ├── favicon-32x32.png
                ├── index.html
                ├── index.html.gz
                ├── oauth2-redirect.html
                ├── oauth2-redirect.html.gz
                ├── swagger-ui-bundle.js
                ├── swagger-ui-bundle.js.gz
                ├── swagger-ui-bundle.js.map
                ├── swagger-ui.css
                ├── swagger-ui.css.gz
                ├── swagger-ui.css.map
                ├── swagger-ui.js
                ├── swagger-ui.js.gz
                ├── swagger-ui.js.map
                ├── swagger-ui-standalone-preset.js
                ├── swagger-ui-standalone-preset.js.gz
                └── swagger-ui-standalone-preset.js.map

4 directories, 18 files

If unpackFromBundleURL() is called for META-INF/resources/webjars/swagger-ui/3.17.4/, it will correctly reach the directory code here. However, if this method is called for META-INF/resources/webjars/swagger-ui/3.17.4, the else branch (for file resources) will be taken and the cache will be corrupted.
See #2549 for a fix.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2549
Fix FileResolver for OSGi bundle resources by devplayer0 · Pull Request #2549 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have just signed the required ECA.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2550
Use VertxOptions to configure class path resolving · Issue #2550 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Class path resolving is currently enabled or disabled via System property.
In environments with multiple Vert.x-based applications the property will be set to the same value for all the applications running in the same JVM.
Adding a VertxOption field to override the System property would allow each Vert.x application in a JVM to decide individually whether to allow file class path resolving.
The use-case driving this issue is that we would like to use Vert.x as a client without any file system side effects (such as creating a .vertx directory), but we don't want to interfere with other Vert.x-based applications that may be running in the same JVM.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2551
Class path resolving option by MarkArbogast · Pull Request #2551 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Addresses #2550.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2552
Add file class path resolving option to VertxOptions by MarkArbogast · Pull Request #2552 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Addresses #2550
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2553
Add file class path resolving option to VertxOptions by MarkArbogast · Pull Request #2553 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Addresses: #2550
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2554
Add file class path resolving option to VertxOptions by MarkArbogast · Pull Request #2554 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we should use a FileSystemOptions as we may have other related options in the future.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2555
Update package-info.java by romero · Pull Request #2555 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi, now we have moved the docs here https://github.com/eclipse/vert.x/blob/master/src/main/asciidoc/http.adoc (the current file you edited is a left-over we need to clean up), can you reopen a new IP valid PR please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2556
Update http.adoc by romero · Pull Request #2556 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixed some typos.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2557
Update package-info.java by romero · Pull Request #2557 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixed some typos
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2558
Update http.adoc by romero · Pull Request #2558 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixed some typos
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2559
Update http.adoc by romero · Pull Request #2559 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign your commits and the ECA ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2560
RecordParser should have an option to limit the record size · Issue #2560 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using RecordParser's delimited mode, it would be nice to somehow limit the maximum buffer size, to prevent misbehaving/malicious clients from exhausting server resources.
This could be achieved by exposing the buffer length, like so:
RecordParser rp = RecordParser.newDelimited("\n", System.out::println);
socket.handler(buffer -> {
   rp.handle(buffer);
   if (rp.getBufferSize() > config().getInteger("maxRecordSize")) {
      System.out.println("big record, eh?");
      socket.close();
   }
});
Another option would be to check the record size in RecordParserImpl.parseDelimited() and throw an exception, that could be handled inside the exceptionHandler:
RecordParser rp = RecordParser.newDelimited("\n", System.out::println);
rp.setMaxRecordSize(10);
rp.exceptionHandler(throwable -> {
   System.out.println("big record, eh?");
   socket.close();
});
Thoughts?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2561
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2562
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2563
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2564
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2565
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2566
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2567
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2568
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2569
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2570
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2571
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2572
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2573
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2574
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2575
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2576
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2577
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2578
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2579
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2580
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2581
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2582
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2583
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2584
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2585
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2586
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2587
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2588
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2589
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2590
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2591
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2592
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2593
HttpClient connection should be resumed when response ends · Issue #2593 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We are running into a situation where an http client connection is paused when its last message is received.
This causes the paused connection to be recycled.
We think paused connections should be resumed when they are pooled.
A test to reproduce this behaviour:
@RunWith(VertxUnitRunner.class)
public class PausedPooledConnectionTest {
    @Test
    public void test(TestContext context) {
        Vertx vertx = Vertx.vertx();
        vertx.createHttpServer()
                .requestHandler(req -> req.response().end("pong"))
                .listen(0, "localhost", context.asyncAssertSuccess(server -> {
                    HttpClient client = vertx.createHttpClient(new HttpClientOptions()
                            .setKeepAlive(true) // When set to false everything works as expected (first socket is also closed correctly)
                            .setDefaultPort(server.actualPort())
                    );
                    Async async = context.async();
                    // first request
                    client.get("/").handler(resp -> resp.endHandler(v -> {
                        resp.pause();
                        // second request which reuses the just paused connection.
                        vertx.setTimer(10, l -> client.get("/").handler(resp1 -> resp1.endHandler(v1 -> {
                            async.countDown();
                            vertx.close();
                        })).end());
                    })).end();
                }));
    }
}
A fix could be as easy as:
--- a/src/main/java/io/vertx/core/http/impl/Http1xClientConnection.java
+++ b/src/main/java/io/vertx/core/http/impl/Http1xClientConnection.java
@@ -874,6 +874,7 @@ class Http1xClientConnection extends Http1xConnectionBase implements HttpClientC
 
   private void recycle() {
     long expiration = keepAliveTimeout == 0 ? 0L : System.currentTimeMillis() + keepAliveTimeout * 1000;
+    doResume();
     listener.onRecycle(expiration);
   }
 }
If you think this is the correct fix, I do not mind to create a PR with the test and the fix.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2594
added 'stop' by jsight · Pull Request #2594 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the eclipse contributor agreement and the commit please ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2595
HTTP client upgrade to socket might lose buffers immediately sent by the server · Issue #2595 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP client upgrade to socket might lose buffers when these buffers are received in the same chunk than the HTTP response.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2596
how to set netty vertion · Issue #2596 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
when i use java vert.x 3.5.3 ,io.netty vertion is 4.1.19, but i got
java.lang.NoSuchMethodError: io.netty.handler.codec.http2.Http2ConnectionEncoder.writePing(Lio/netty/channel/ChannelHandlerContext;ZJLio/netty/channel/ChannelPromise;)Lio/netty/channel/ChannelFuture; at com.turo.pushy.apns.ApnsClientHandler.userEventTriggered(ApnsClientHandler.java:268) ~[pushy-0.13.3.jar:na] at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-transport-4.1.19.Final.jar:4.1.19.Final]
i need to update io.netty to vertion 4.1.27, how to do? thank you
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2597
mvn package fail · Issue #2597 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
mac os 10.13.6
mvn 3.5.3
java 1.8
vertx 3.6.0-SNAPSHOT
netty 4.1.25
run: mvn package
[vert.x-eventloop-thread-5] WARN io.netty.channel.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: certificate_unknown
at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:459)
at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:392)
at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:359)
at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:342)
at io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1028)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224)
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1429)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231)
at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:947)
at io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:822)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:465)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
Caused by: javax.net.ssl.SSLException: Received fatal alert: certificate_unknown
at sun.security.ssl.Alerts.getSSLException(Alerts.java:219)
at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1666)
at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1634)
at sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1800)
at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1083)
at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:907)
at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)
at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
at io.netty.handler.ssl.SslHandler$SslEngineType$3.unwrap(SslHandler.java:294)
at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1275)
at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1177)
at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1221)
at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
... 18 more
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2598
Vertx HTTP Thread block unknown warning issue · Issue #2598 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
times to times we get this thread-block warning exception. any idea?
io.vertx.core.impl.BlockedThreadChecker - Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 1368 ms, time limit is 1000
io.vertx.core.VertxException: Thread blocked
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.names(VertxHttpHeaders.java:337)
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.size(VertxHttpHeaders.java:58)
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.entries(VertxHttpHeaders.java:293)
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.iterator(VertxHttpHeaders.java:322)
	at io.netty.handler.codec.http.HttpHeaders.set(HttpHeaders.java:1504)
	at io.netty.handler.codec.http.DefaultHttpHeaders.set(DefaultHttpHeaders.java:111)
	at io.netty.handler.codec.http.HttpContentEncoder.encode(HttpContentEncoder.java:171)
	at io.netty.handler.codec.http.HttpContentEncoder.encode(HttpContentEncoder.java:51)
	at io.netty.handler.codec.MessageToMessageCodec$1.encode(MessageToMessageCodec.java:67)
	at io.netty.handler.codec.MessageToMessageEncoder.write(MessageToMessageEncoder.java:88)
	at io.netty.handler.codec.MessageToMessageCodec.write(MessageToMessageCodec.java:116)
	at io.vertx.core.http.impl.HttpChunkContentCompressor.write(HttpChunkContentCompressor.java:38)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:738)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:730)
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:816)
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:723)
	at io.netty.handler.stream.ChunkedWriteHandler.doFlush(ChunkedWriteHandler.java:304)
	at io.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:137)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:802)
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:814)
	at io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:794)
	at io.vertx.core.net.impl.ConnectionBase.write(ConnectionBase.java:107)
	at io.vertx.core.net.impl.ConnectionBase.lambda$queueForWrite$0(ConnectionBase.java:128)
	at io.vertx.core.net.impl.ConnectionBase$$Lambda$236/1662235749.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.vertx.core.impl.ContextImpl$$Lambda$23/1301528418.run(Unknown Source)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2599
Remove generic connection message encoding/decoding and instead let each connection handle it when necessary · Issue #2599 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the VertxHandler/ConnectionBase handle conversion of Netty / Vertx messages. Such conversion can be handled by the receiver of the emitter of the message instead of being applied to each message. This removes unnecessary message inspection (if/else switches) when it's not needed (i.e an plain HTTP request with not entity).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2600
Support for proxy hosts black listing in ProxyOptions · Issue #2600 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, we have this issue when we want to ignore the proxy and when it comes to call certain components of our internal network. Since vertx ignores JVM proxy arguments like http.nonProxyHosts there is no real workaround.
The proxy configuration is set at the WebClient level. ProxyOptions object should have an equivalent to http.nonProxyHosts.
Vertx web version: 3.5.1
Vertx core version: 3.5.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2601
Verticle on Docker container won't stop properly · Issue #2601 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

vert.x core:

Context
Stopping a Verticle using the cli on this Docker container fails. This is because the 'ps' command is not installed which is utilized by the StopCommand class here.
The method terminateLinux() fails because the method pid() returns null.
pid() returns null because it relies on the 'ps' command.
Steps to reproduce

Create a simple Verticle. It should not matter what language its implemented in.
In my case, I wrote my app in Kotlin.
Fire up a vertx docker container and add the verticle to it.
Run the Verticle using the 'start' command.
Try to shut down the Verticle using the 'stop' command.
???
Profit!

Extra

For my code, I was able to fix the app by adding

RUN apt-get update && apt-get install -y procps
to my Dockerfile which was using vertx/vertx3 as its base.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2602
Gracefully close HttpServer · Issue #2602 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Logging issue to gracefully close HTTP server.
Meaning :

Stop listening and accepting incoming requests.
Leave inflight requests ending normally before completly close the server.

Discussed recently here : https://groups.google.com/forum/#!topic/vertx/A7GhZ6bmOmU
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2603
Update http.adoc by flow2k · Pull Request #2603 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix a possible typo
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2604
Update http.adoc by flow2k · Pull Request #2604 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix a possible typo
Hopefully ECA passes now
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2605
Update http.adoc by flow2k · Pull Request #2605 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
okay, can't use the github editor I guess. will try to manually commit from CLI
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2606
Provide a way for verticles to reload configuration upon changes · Issue #2606 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As per documentation for config retriever listening for changes, the retriever reloads the configuration every 5 seconds. Issue is that there is no way provide that new configuration to the verticle without first undeploying and redeploying it with the new configuration or doing a app/pod restart. The reason for that is the config JsonObject that holds the configuration for the verticle is created via new constructor and there is no reference to this config object available. This functionality will be really helpful where API keys and certs are being rotated out and live traffic is being taken by the app.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2607
Extra chunk for request with no content. · Issue #2607 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following code produces an extra 0 end trailer chunk that makes HTTP clients parse it as a second invalid response:
		Vertx vertx = Vertx.vertx();
		HttpServer server = vertx.createHttpServer();
		server.requestStream().toObservable().subscribe(req -> {
			System.err.println("Got request");
			req.response().setChunked(true).setStatusCode(204).end();
		});
		server.rxListen(9001, "localhost").subscribe(s -> System.err.println("started"), Throwable::printStackTrace);
My guess is that if there is no body, there should not be any trailer end chunk.
Related to #1986 (was only for HEAD).
https://tools.ietf.org/html/rfc7231#section-6.3.5 indicates:
 A 204 response is terminated by the first empty line after the header
 fields because it cannot contain a message body.

Perhaps there are other HTTP status codes that can't contain a message body?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2608
EventBus: if handler registration has pending messages to deliver, but handler has been set to null, results in NPE. · Issue #2608 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version: 3.5.3
This one is a bit hard to reproduce outside of a larger system.  For us it happens when we have an Rx chain reading from an event bus consumer (implemented via FlowableReadStream).  If we cancel the subscription then this calls FlowableReadStream.release().  This sets all of the handlers on the underlying stream (which is a HandlerRegistration in this case) to null.  It then resumes the stream which causes it to attempt to deliver any data that it has in its pending queue.  Since the handler is now null the resulting delivery attempt results in an NPE and lots of log spew, like this:
13:41:01.986 [vert.x-eventloop-thread-4] ERROR i.v.c.e.impl.HandlerRegistration - Failed to handleMessage. address: vantiq-local://cad8cdd0-ad5d-11e8-b442-7a15f23eec05
java.lang.NullPointerException: null
	at io.vertx.core.eventbus.impl.HandlerRegistration.deliver(HandlerRegistration.java:223)
	at io.vertx.core.eventbus.impl.HandlerRegistration.lambda$checkNextTick$5(HandlerRegistration.java:248)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)
13:41:01.992 [vert.x-eventloop-thread-4] ERROR io.vertx.core.impl.ContextImpl - Unhandled exception
java.lang.NullPointerException: null
	at io.vertx.core.eventbus.impl.HandlerRegistration.deliver(HandlerRegistration.java:223)
	at io.vertx.core.eventbus.impl.HandlerRegistration.lambda$checkNextTick$5(HandlerRegistration.java:248)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)

Either the HandlerRegistration code should check for the null handler and silently drop the data (perhaps invoking the discard handler -- see #2488) or the stream should offer a way to flush the pending data which can be called by release.  I'm assuming we don't want to flush the queue when the handler is set to null, though that would probably fix this as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2609
HTTP/2 settings update can miss acknowledgement · Issue #2609 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP/2 settings upgrade sets the acknowledgement handler after the successful write of the settings frame, sometimes the acknowledgement can be received before this callback happens and therefore we miss the acknowledgement.
We should instead update the acknowledgement handler queue before writing the settings frame and remove this handler from the queue on a write failure.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2610
WebSocket client does not report server protocol violations on the WebSocket exception handler · Issue #2610 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As the title says, basically. When a websocket client receives a payload larger than the configured max size, it seems that it just immediately closes the socket without warning - no logs, no exception, no close frame. I may have misunderstood something, but nothing I did short of changing the max sizes in the options gave any indication of the problem being displayed or fixed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2611
RecordParser: Limit the record size by richardf · Pull Request #2611 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2612
Websocket Request Failing to Upgrade · Issue #2612 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Websocket Request to upgrade fails with the below exception. The same was working on my local setup, but when deployed on a cluster started getting this error.
The difference between the two websocket requests was that the first one was sending a response through as soon as it upgraded whereas the failing one was updating some shared data using an AsyncMap and sending a test message in the callBack.
In effect the websocket closes down if the first message is not sent immediately after upgrading.
Unhandled exception java.lang.IllegalStateException: Can't upgrade this request at io.vertx.core.http.impl.Http1xServerConnection.upgrade(Http1xServerConnection.java:236) at io.vertx.core.http.impl.HttpServerRequestImpl.upgrade(HttpServerRequestImpl.java:317) at io.vertx.ext.web.impl.HttpServerRequestWrapper.upgrade(HttpServerRequestWrapper.java:223) at jdk.nashorn.internal.scripts.Script$Recompilation$2266$15438$\^eval\_#88\!17\^eval\_.L:1#HttpServerRequest#upgrade(vertx-js/http_server_request.js:498) at jdk.nashorn.internal.scripts.Script$Recompilation$2265$9296AA$\^eval\_#88\!17\^eval\_.L:1#L:223#upgradeWebSocket(server.js:248) at jdk.nashorn.internal.scripts.Script$Recompilation$2264$10109AA$\^eval\_#88\!17\^eval\_.L:1#L:223#L:276(server.js:280) at jdk.nashorn.internal.scripts.Script$Recompilation$2234$3355A$\^eval\_#88\!17\^eval\_.L:1#EventBus#send#L:79(vertx-js/event_bus.js:81) at io.vertx.core.Handler$$NashornJavaAdapter.handle(Unknown Source) at io.vertx.core.eventbus.impl.EventBusImpl.lambda$convertHandler$1(EventBusImpl.java:349) at io.vertx.core.eventbus.impl.HandlerRegistration.deliver(HandlerRegistration.java:223) at io.vertx.core.eventbus.impl.HandlerRegistration.handle(HandlerRegistration.java:200) at io.vertx.core.eventbus.impl.EventBusImpl.lambda$deliverToHandler$3(EventBusImpl.java:533) at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463) at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2613
Adding metrics SPI methods for the event loop by marcust · Pull Request #2613 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
instead of this, we will provide a new callback to the VertxMetrics SPI called when the vertx instance has been initialised. This allows to get the EventLoopGroup from the instance and obtain the event loops in the same way. See #2695
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2614
Allow to exclude host from being proxying #2600 by KowalczykBartek · Pull Request #2614 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2615
Consider passing websocket close code / reason to the WebSocket closeHandler · Issue #2615 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since the closeHandler callback is just a Handler<Void>, dealing with close codes / reasons requires you to add extra code into the frameHandler to explicitly check for close frames to get the code / reason, making closeHandler have limited utility for non-trivial use-cases.
Example use-case:
I'm using vert.x to write a wrapper for the Discord API. Part of this entails opening a websocket connection to their gateway to receive real-time events. As the gateway may give a variety of close codes / reasons under different circumstances (server restarting, sending a malformed payload, ...), it would be significantly more convenient to be able to handle this in the closeHandler rather than needing to have a special case in the frameHandler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2616
ErrorDataDecoderException: Bad string · Issue #2616 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks like more netty bug, but I report here for investigation.
I have a simple configuration like:
        Vertx vertx = Vertx.vertx();
        Router router = Router.router(vertx).exceptionHandler(ex -> log.error("error", ex));
        router.route().handler(BodyHandler.create());  // capture POST body parameters
        router.route().handler(CorsHandler.create("*").allowedMethod(HttpMethod.GET));  // allow cross-domain requests from anywhere
        router.route().handler(CookieHandler.create());  // capture cookies
        router.route("/alive").handler(this::handleAlive);
        HttpServer trackerServer = vertx.createHttpServer(opts);
        trackerServer.requestHandler(router::accept)
                .listen(Integer.parseInt(props.getProperty("server.tracker.port")), props.getProperty("server.tracker.host"));


For special requests the code fails before my handler.
Request like:
POST <URL> HTTP/1.1
Content-Type: application/x-www-form-urlencoded

BODY:
test=org.springframework.core.SerializableTypeWrapper$TypeProviderxr�java.lang.reflect.Proxy�'� ��C���L�ht%Ljava/lang/reflect/InvocationHandler;xpsr2sun.reflect.annotation.AnnotationInvocationHandlerU�����~���LmemberValuest�Ljava/util/Map;L�typet�Ljava/lang/Class;xpsr�java.util.HashMap������`���F


Error:
io.netty.handler.codec.http.multipart.HttpPostRequestDecoder$ErrorDataDecoderException: Bad string: 'org.springframework.core.SerializableTypeWrapper$TypeProviderxr�java.lang.reflect.Proxy�'� ��C���L�ht%Ljava/lang/reflect/InvocationHandler;xpsr2sun.reflect.annotation.AnnotationInvocationHandlerU�����~���LmemberValuest�Ljava/util/Map;L�typet�Ljava/lang/Class;xpsr�java.util.HashMap������`���F'
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.decodeAttribute(HttpPostStandardRequestDecoder.java:646)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.setFinalBuffer(HttpPostStandardRequestDecoder.java:631)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.parseBodyAttributes(HttpPostStandardRequestDecoder.java:595)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.parseBody(HttpPostStandardRequestDecoder.java:360)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.offer(HttpPostStandardRequestDecoder.java:289)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.offer(HttpPostStandardRequestDecoder.java:46)
	at io.netty.handler.codec.http.multipart.HttpPostRequestDecoder.offer(HttpPostRequestDecoder.java:227)
	at io.vertx.core.http.impl.HttpServerRequestImpl.handleEnd(HttpServerRequestImpl.java:395)
	at io.vertx.core.http.impl.ServerConnection.handleLastHttpContent(ServerConnection.java:475)


Vertx version: 3.5.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2617
localCosumer 100x slower than consumer in Clustered mode · Issue #2617 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Reproducer: https://gist.github.com/oli-h/e44c9e42033bd10945dc6c6afa460fcb
Tested with Vertx 3.5.3 and 3.5.0 on a Core i7-69xx:

consumer handles 100'000 to 150'000 per second
localConsumer is factor 100 slower: only ~1'500 per second can be delivered (and CPU-Load is high)

With Vertx 3.4.0 and 3.4.2 observations are different: Here, both types (consumer and localConsumer) are quite slow
Prior to 3.4.0 (e.g. 3.3.3) there seems to be no support for Infinispan-Cluster (or I didn't find the appropriate dependencies)
Notes:

I found #1764, but I think this was a different case as the performance panalty was only a few percent - not factor 100
I also found 3ed3fea - this probably addresses the same basic issue, but from the sender's perspective
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2618
Incorrect javadoc for MessageProducer#send · Issue #2618 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm not sure whether this behavior is correct or not, but when you try to create a message producer via EventBus.publisher method, it creates instance of MessageProducerImpl class with private send field equal to false -- which is designed to distinguish senders and publishers I guess; but actual implementation of methods send and write of the producer class differs:
Send method:
public MessageProducer<T> send(T message) {
    doSend(message, null);
    return this;
}
Write method:
public synchronized MessageProducer<T> write(T data) {
    if (send) {
      doSend(data, null);
    } else {
      bus.publish(address, data, options);
    }
    return this;
}
Which subsequently leads to strange behavior: send method actually sends messages, but write method publishes them, even if it was a publisher created.
In JavaDoc for the MessageProducer.send method denoted that it is

Synonym for write(Object).

So, if it is a synonym, why the behavior differs?
For me using MessageProducer.write method works fine now, but I had some time figuring out why publishing messages did not work (not all message handlers actually received data).
Please, consider adding analogous if (send) checks to the method send also, if this behavior is not correct. And should really write method be synchronized, while send is not?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2619
FileResolver fails when path contains `+` character · Issue #2619 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

vert.x core: 3.5.3

Context
 io.vertx.core.impl.FileResolver fails to extract content from JARs containing + in a file name (e.g. vertx-static-content-0.0.1+test-fat.jar).
Most likely java.net.URLDecoder.decode(String, String) replaces + with    (space)
java -jar vertx-static-content-0.0.1+test-fat.jar
io.vertx.core.Starter
INFO: Succeeded in deploying verticle
io.vertx.ext.web.impl.RoutingContextImplBase
SEVERE: Unexpected exception in route
io.vertx.core.VertxException: java.io.FileNotFoundException: /home/user/workspace/vertx-static-content/target/vertx-static-content-0.0.1 test-fat.jar
        at io.vertx.core.impl.FileResolver.unpackFromJarURL(FileResolver.java:249)
        at io.vertx.core.impl.FileResolver.unpackUrlResource(FileResolver.java:153)
        at io.vertx.core.impl.FileResolver.resolveFile(FileResolver.java:134)
        at io.vertx.core.impl.VertxImpl.resolveFile(VertxImpl.java:776)
        at io.vertx.core.http.impl.HttpServerResponseImpl.doSendFile(HttpServerResponseImpl.java:432)
        at io.vertx.core.http.impl.HttpServerResponseImpl.sendFile(HttpServerResponseImpl.java:352)
        at io.vertx.core.http.HttpServerResponse.sendFile(HttpServerResponse.java:327)
        at io.vertx.core.http.HttpServerResponse.sendFile(HttpServerResponse.java:313)
        at test.Web.lambda$start$1(Web.java:15)

Do you have a reproducer?
https://github.com/zaytsev/vertx-static-content
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2620
Upgrade Netty to 4.1.27.Final · Issue #2620 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2621
Upgrade Jackson to 2.9.6 · Issue #2621 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2622
Upgrade Tcnative to 2.0.12.Final · Issue #2622 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2623
Fixes #2619: properly handle plus signs when resolving paths by pmlopes · Pull Request #2623 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm wondering why there are so few tests for code that does not seem trivial ?
can you move this in net.impl package I would like avoiding to supporting it in API as it does not seem required
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2624
Refactor test by changing package names to keep a single organized hi… by vietj · Pull Request #2624 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…erarchy of tests and leave the async test classes alone in the io.vertx.core.test package
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2625
Improve the ALPN detection to work on latest JDK 11 · Issue #2625 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2626
Add PKCS#11 like Java Keystore by aicfr · Pull Request #2626 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we are missing tests for this, please look at the ssl.txt file and how to create pkcs11 version of a store
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2627
CompositeFuture cannot take a list of futures where the list type parameter has a type parameter · Issue #2627 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Apologies if the title is unclear; I couldn't think of a good way to word it...
Suppose you do something like the following:
List<Future<JsonObject>> futures = new ArrayList<>();
for(Service service : services) {
    futures.add(service.doSomeUpdate());
}
CompositeFuture.all(futures)... // do whatever here
This gives me the following error:
/path/to/Whatever.java:[114,32] no suitable method found for all(java.util.List<io.vertx.core.Future<io.vertx.core.json.JsonObject>>)
    [...]
    method io.vertx.core.CompositeFuture.all(java.util.List<io.vertx.core.Future>) is not applicable
      (argument mismatch; java.util.List<io.vertx.core.Future<io.vertx.core.json.JsonObject>> cannot be converted to java.util.List<io.vertx.core.Future>)

This can be resolved by convincing the compiler to see it as a List<Future> instead of a List<Future<T>>, such as
// Could declare `futures` as this, but then potentially losing type safety
List<Future> futures = new ArrayList<>();
// Or do an ugly thing like this to convince the compiler it doesn't have a type param
CompositeFuture.all(Arrays.asList(futures.toArray(new Future[0])))...
but doing this feels like an unnecessary hack to get around the problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2628
Add Vert.x Logger isWarnEnabled() method · Issue #2628 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The io.vertx.core.logging.Logger interface currently does not have a isWarnEnabled() method like the other levels have already. This adds this method as well as the corresponding method on LogDelegate and its implementations.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2629
Move FaultToleranceTest to eventbus package by tsegismont · Pull Request #2629 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you please review?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2630
HttpServerResponse content headers improvements · Issue #2630 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpServerResponse incorrectly sets the content-length and transfer-encoding headers in a few cases. It should use the following rules:

on RESET_CONTENT (205) status

either send transfer-encoding: chunked with an empty chunk or content-length : 0


on HEAD method or NOT_MODIFIED (304) status

content-Length should not be set automatically to 0 or this header can be set to what the body size would have been
transfer-encoding should not be present


on INFORMATIONAL (1xx) or NO_CONTENT (204)

none of these headers should be present



Currently a few cases are not supported for HTTP/1.x and HTTP/2. This issues fixes them, in addition the chunked flag on the response implementations is removed to check the transfer-encoding directly on the response to avoid the edge case where a user would set such headers instead of the response object.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2631
HttpServerResponse content headers improvements - fixes #2630 - fixes… by vietj · Pull Request #2631 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
LGTM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2632
Event bus interceptor improvements by vietj · Pull Request #2632 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
breaking change added here https://github.com/vert-x3/wiki/wiki/3.6.0-Breaking-Changes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2633
Unidiomatic Ruby example on the home page · Issue #2633 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On the home page at https://vertx.io/:

We provide idiomatic APIs for every language that Vert.x supports.
[…]
Ruby
$vertx.create_http_server().request_handler() { |req|
  req.response()
    .put_header("content-type", "text/plain")
    .end("Hello from Vert.x!")
}.listen(8080)

This Ruby example is formatted non-idiomatically, with unnecessary parentheses and the {} block syntax. It would be better to write it like this:
$vertx.create_http_server.request_handler do |req|
  req.response
    .put_header("content-type", "text/plain")
    .end("Hello from Vert.x!")
end.listen(8080)
(It is not very idiomatic to use global variables $vertx either, but I don’t know enough about Vert.x to say it isn’t justified.)
I would have made this a pull request, but I can’t find the code for the Vert.x website in any eclipse-vertx GitHub repo.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2634
It would be nice to have convenience functions in httpServerRequest also available for serverWebSocket · Issue #2634 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
httpServerRequest comes with some nice functionality, like getParam(). It would be nice to have that available in the websocket equivalent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2635
RecordParser: Limit the record size by richardf · Pull Request #2635 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2636
HttpClient connection handler · Issue #2636 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClient does have a per request connection handler which requires to modify each request to be aware of connection life cycle. This can be quite intrusive in client code to set a the connection handler on each request, specially when one wants to be aware of life cycle without being intrusive.
This features adds a new HttpClient#connectionHandler(Handler<HttpConnection>) that is called when the client connects to an host.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2637
Rework FileSystemOptions data object by vietj · Pull Request #2637 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2638
Rework FileSystemOptions data object by vietj · Pull Request #2638 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Julien Viet julien@julienviet.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2639
Test lock release twice by meggarr · Pull Request #2639 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2640
Should be only one lock released after it release() is called twice. by meggarr · Pull Request #2640 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2641
Exception not propagated from VertxHandler to WebSocket exceptionHandler · Issue #2641 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello Team,
While investigating a random websocket disconnect issue, I found that the VertxHandler::exceptionCaught() does not propagate the exception all the way to the websocket exceptionHandler. Due to this, when websocket disconnect happens due to an exception, the application's exceptionHandler never logs it, and only gets notified about the close().
Version: 3.5.3
Uses vertx-rx and netty's per-message deflate extension.
This is the code I am referring to in VertxHandler:
  @Override
  public void exceptionCaught(ChannelHandlerContext chctx, final Throwable t) throws Exception {
    Channel ch = chctx.channel();
    // Don't remove the connection at this point, or the handleClosed won't be called when channelInactive is called!
    C connection = getConnection();
    if (connection != null) {
      ContextImpl context = conn.getContext();
      context.executeFromIO(() -> {
        try {
          if (ch.isOpen()) {
            ch.close(); ---------> Channel is silently cosed
          }
        } catch (Throwable ignore) {
        }
        connection.handleException(t); -----> this here doesn't reach the app's websocket exception handler
      });
    } else {
      ch.close();
    }
  }


Is this a known issue? Else, can you please take a look and advice a potential fix?
Thank you,
Udai.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2642
Test  by vietj · Pull Request #2642 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2643
Test PR for travis by vietj · Pull Request #2643 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2644
IllegalStateException cannot register channel with OpenJDK 11  · Issue #2644 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm using latest version of Vert.x
and compiled successfully my application with OpenJDK 11+28
My application start fine but as soon Vert.x received a request it shows that warning and the whole Vertx server get restarted and returns Server Internal Error
Same code runs fine when compiled and run with Java 8 (Oracle)
Expected behavior
Should be able to register channel
Actual behavior
WARN  [ServerBootstrap] 16:16:33.446: Failed to register an accepted channel: [id: 0x5d14897d, L:0.0.0.0/0.0.0.0:8090]
java.lang.IllegalStateException: null
	at io.vertx.core.net.impl.VertxEventLoopGroup.next(VertxEventLoopGroup.java:37) ~[auctioncore.jar:?]
	at io.vertx.core.net.impl.VertxEventLoopGroup.register(VertxEventLoopGroup.java:53) ~[auctioncore.jar:?]
	at io.netty.bootstrap.ServerBootstrap$ServerBootstrapAcceptor.channelRead(ServerBootstrap.java:255) ~[auctioncore.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[auctioncore.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[auctioncore.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[auctioncore.jar:?]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[auctioncore.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[auctioncore.jar:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[auctioncore.jar:?]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[auctioncore.jar:?]
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93) ~[auctioncore.jar:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645) ~[auctioncore.jar:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:545) ~[auctioncore.jar:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:499) ~[auctioncore.jar:?]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:451) ~[auctioncore.jar:?]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886) ~[auctioncore.jar:?]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[auctioncore.jar:?]
	at java.lang.Thread.run(Thread.java:834) ~[?:]

Steps to reproduce
Use Vertx Server with OpenJDK 11
send request
Vertx version
3.5.3 from maven
JVM version (e.g. java -version)
OpenJDK 11+28
OS version (e.g. uname -a)
Oracle Linux 7 on Docker
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2645
TLS resumption · Issue #2645 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since SSL handshake can be quite expensive, it might make sense to have an option to turn on more complex logic in connection pooling for SSL connection to establish at least one connection at the startup so that the TLS session can be cached by the server. This will reduce the CPU time spent by eventloop thread significantly especially when there are multiple requests to the same server at the same time.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2646
Vert.x fails to start on Linux if SM prevents reading resolv.conf · Issue #2646 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Under Linux a SecurityControlException is thrown by AddressResolver line 50 due to the JVM not having security permissions to access /etc/resolv.conf. Due to the platform I am developing for I cannot grant security permission for this file. Below is the stack trace. Vertx version 3.5.3 is used.
Caused by: java.security.AccessControlException: access denied ("java.io.FilePermission" "/etc/resolv.conf" "read")
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)
at java.security.AccessController.checkPermission(AccessController.java:884)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
at java.lang.SecurityManager.checkRead(SecurityManager.java:888)
at java.io.File.exists(File.java:814)
at io.vertx.core.impl.AddressResolver.(AddressResolver.java:50)
The if checks should be moved inside the try catch block to prevent the crash.
Alternatively it would be nice to be able to ignore this check via a system property.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2647
Even bus not work well in VPC network · Issue #2647 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Context
When setup cluster with event bus:

Private node is in private cloud, its public address is not local network interface but a virtual address defined by NAT.
Public node in public address.
Using hazelcast and set public-address in hazelcast configuration.

When starting node in private cloud, add argument and java properties:

-cluster-host as local network interface
-cluster-port as specific port (local port)
vertx.cluster.public.host as public address of private node
vertx.cluster.public.port as public port of private node

It up and run normally with hazelcast, private node joins into cluster.
However, event bus message cannot send from public node to private node because address is still local network interface of private node.


Reproduce Code
Will be update
Expectation

Not sure it is a bug or something is wrong in my configuration
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2648
WebSocket upgrade request body limit · Issue #2648 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
CVE-2018-12541: The WebSocket HTTP upgrade implementation buffers the full http request before doing the handshake, holding the entire request body in memory. There should be a reasonnable limit (8192 bytes) above which the WebSocket gets an HTTP response with the 413 status code and the connection gets closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2649
Sporadic failures of ComplexHATest#testComplexFailover · Issue #2649 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
*** Iteration 4/10 of test
Starting test: ComplexHATest#testComplexFailover 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
A quorum has been obtained. Any deploymentIDs waiting on a quorum will now be deployed 
node17e6bb8c-a7ff-4249-94c4-59da50d9ff3d says: Node c7ac2832-6129-4bc8-9fdd-d0a9d321815a has failed. This node will deploy 19 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
nodedb42e894-daa5-4968-b763-04df950514c2 says: Node f31ade06-e2cf-4f1d-b82e-58a36a5af8fd has failed. This node will deploy 27 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
node458e6814-f2b7-408f-92a8-cc098452d61e says: Node f7095b27-8efa-4976-a8ac-87fd34054a64 has failed. This node will deploy 21 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
node17e6bb8c-a7ff-4249-94c4-59da50d9ff3d says: Node 458e6814-f2b7-408f-92a8-cc098452d61e has failed. This node will deploy 39 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
nodedb42e894-daa5-4968-b763-04df950514c2 says: Node 17e6bb8c-a7ff-4249-94c4-59da50d9ff3d has failed. This node will deploy 31 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
nodefe0e4a21-74c4-4d1a-abe4-edf3dbf7591e says: Node 17e6bb8c-a7ff-4249-94c4-59da50d9ff3d has failed. This node will deploy 31 deploymentIDs from that node. 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
java.lang.AssertionError: expected:<31> but was:<45>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at io.vertx.test.core.AsyncTestBase.assertEquals(AsyncTestBase.java:235)
	at io.vertx.core.ComplexHATest.checkDeployments(ComplexHATest.java:224)
	at io.vertx.core.ComplexHATest.failedOverOnto(ComplexHATest.java:203)
	at io.vertx.core.ComplexHATest.lambda$createNodes$10(ComplexHATest.java:196)
	at io.vertx.core.impl.HAManager.lambda$checkFailover$10(HAManager.java:500)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$13(HAManager.java:529)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:333)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:39)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
java.lang.AssertionError: expected:<31> but was:<45>
	at org.junit.Assert.fail(Assert.java:88)
Unhandled exception 
java.lang.AssertionError: expected:<31> but was:<45>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at io.vertx.test.core.AsyncTestBase.assertEquals(AsyncTestBase.java:235)
	at io.vertx.core.ComplexHATest.checkDeployments(ComplexHATest.java:224)
	at io.vertx.core.ComplexHATest.failedOverOnto(ComplexHATest.java:203)
	at io.vertx.core.ComplexHATest.lambda$createNodes$10(ComplexHATest.java:196)
	at io.vertx.core.impl.HAManager.lambda$checkFailover$10(HAManager.java:500)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$13(HAManager.java:529)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:333)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:39)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)

	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at io.vertx.test.core.AsyncTestBase.assertEquals(AsyncTestBase.java:235)
	at io.vertx.core.ComplexHATest.checkDeployments(ComplexHATest.java:224)
	at io.vertx.core.ComplexHATest.failedOverOnto(ComplexHATest.java:203)
	at io.vertx.core.ComplexHATest.lambda$createNodes$10(ComplexHATest.java:196)
	at io.vertx.core.impl.HAManager.lambda$checkFailover$10(HAManager.java:500)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$13(HAManager.java:529)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:333)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:39)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
nodefe0e4a21-74c4-4d1a-abe4-edf3dbf7591e says: Node db42e894-daa5-4968-b763-04df950514c2 has failed. This node will deploy 17 deploymentIDs from that node. 
java.lang.AssertionError: expected:<31> but was:<45>
	at org.junit.Assert.fail(Assert.java:88)
	at io.vertx.test.core.AsyncTestBase.fail(AsyncTestBase.java:262)Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 

	at io.vertx.core.ComplexHATest.testComplexFailover(ComplexHATest.java:77)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at io.vertx.test.core.RepeatRule$RepeatStatement.evaluate(RepeatRule.java:37)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 

	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle1 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle3 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
Successfully redeployed verticle java:io.vertx.test.verticles.HAVerticle2 after failover 
java.lang.AssertionError: expected:<31> but was:<62>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at io.vertx.test.core.AsyncTestBase.assertEquals(AsyncTestBase.java:235)
	at io.vertx.core.ComplexHATest.checkDeployments(ComplexHATest.java:224)
	at io.vertx.core.ComplexHATest.failedOverOnto(ComplexHATest.java:203)
	at io.vertx.core.ComplexHATest.lambda$createNodes$10(ComplexHATest.java:196)
	at io.vertx.core.impl.HAManager.lambda$checkFailover$10(HAManager.java:500)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$13(HAManager.java:529)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:333)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:39)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
Unhandled exception 
java.lang.AssertionError: expected:<31> but was:<62>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at io.vertx.test.core.AsyncTestBase.assertEquals(AsyncTestBase.java:235)
	at io.vertx.core.ComplexHATest.checkDeployments(ComplexHATest.java:224)
	at io.vertx.core.ComplexHATest.failedOverOnto(ComplexHATest.java:203)
	at io.vertx.core.ComplexHATest.lambda$createNodes$10(ComplexHATest.java:196)
	at io.vertx.core.impl.HAManager.lambda$checkFailover$10(HAManager.java:500)
	at io.vertx.core.impl.HAManager.lambda$runOnContextAndWait$13(HAManager.java:529)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:333)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:39)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.387 sec <<< FAILURE! - in io.vertx.core.ComplexHATest
testComplexFailover(io.vertx.core.ComplexHATest)  Time elapsed: 2.379 sec  <<< FAILURE!
java.lang.AssertionError: expected:<31> but was:<45>
	at org.junit.Assert.fail(Assert.java:88)
	at io.vertx.test.core.AsyncTestBase.fail(AsyncTestBase.java:262)
	at io.vertx.core.ComplexHATest.testComplexFailover(ComplexHATest.java:77)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2650
Update Kotlin support for 3.5.4 · Issue #2650 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I notice that vert.x 3.5.4 is recently released with kotlin libraries deprecated (kotlin-stdlib-jre7-1.2.20.jar / kotlin-stdlib-jre8.1.2.20.jar) when kotlin released months ago others named as "jdk" (kotlin-stdlib-jdk7-?.jar / kotlin-stdlib-jdk8-?.jar). I can imagine to update kotlin you have to check updated dependencies (e.g. kotlinx-coroutines-core-0.30.1.jar) and recompile vertx-lang-kotlin. Any way, this is something to update in vert.x and I would apreciate this. Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2651
SSH incompatible event loop when NativeTransport set to true · Issue #2651 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
java.io.IOException: java.lang.IllegalStateException: incompatible event loop type: io.netty.channel.epoll.EpollEventLoop
at io.termd.core.ssh.netty.Helper.toIOException(Helper.java:33)
at io.termd.core.ssh.netty.NettyIoAcceptor.bind(NettyIoAcceptor.java:99)
at org.apache.sshd.server.SshServer.start(SshServer.java:319)
at io.vertx.ext.shell.term.impl.SSHServer.lambda$listen$6(SSHServer.java:212)
at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:273)
at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: incompatible event loop type: io.netty.channel.epoll.EpollEventLoop
at io.netty.channel.AbstractChannel$AbstractUnsafe.register(AbstractChannel.java:469)
at io.netty.channel.SingleThreadEventLoop.register(SingleThreadEventLoop.java:80)
at io.netty.channel.SingleThreadEventLoop.register(SingleThreadEventLoop.java:74)
at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:331)
at io.netty.bootstrap.AbstractBootstrap.doBind(AbstractBootstrap.java:282)
at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:278)
at io.termd.core.ssh.netty.NettyIoAcceptor.bind(NettyIoAcceptor.java:88)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2652
For internal keystores prefer PKCS12 (industry standard) instead of p… by pmlopes · Pull Request #2652 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
PCKS12 also has the benefit of being more secure, for more info: http://openjdk.java.net/jeps/229
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2653
NPE on HttpServerResponse.setChunked(false) on 3.5.4 · Issue #2653 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
java.lang.NullPointerException: null
at io.vertx.core.http.impl.headers.VertxHttpHeaders.set(VertxHttpHeaders.java:384)
at io.vertx.core.http.impl.HttpServerResponseImpl.setChunked(HttpServerResponseImpl.java:136)
at io.vertx.core.http.impl.HttpServerResponseImpl.setChunked(HttpServerResponseImpl.java:53)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2654
Shared data in both local and clustered mode · Issue #2654 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Providing shared data structures (locks, counters, async maps) in both local and cluster modes, even when Vert.x is clustered.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2655
AsyncFile setReadLength  · Issue #2655 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
Could we have AsyncFile.setReadLength for streaming/pumping where result can be bigger than max buffer size ie > 2GB.
Cheers
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2656
Support retrieving X509 certificates CN since javax.naming package is unavailable in Android by hjames9 · Pull Request #2656 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
have you tried running Vert.x on Android ? is there a way we could test this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2657
Callback improvements · Issue #2657 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Improve how callbacks are delivered to the application.

some callbacks are invoked under synchronisation which are fine most of the time but can also sometimes lead to deadlock, we should avoid this when possible
some callbacks invocation are delayed with a runOnContext operation which is not suitable when the callback notifies of a state update, e.g a close operation. Often applications use this callback to update its own state. When the callback is delayed, it can lead to an unexpected state when another event happens before the callback, e.g a websocket is closed, making it impossible to write and the application is unaware of this, the websocket close handler should be not be delayed so the developer can rely on this when writing his application
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2658
Callback improvements - fixes #2657 by vietj · Pull Request #2658 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #2657
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2659
Callback improvements - fixes #2657 by vietj · Pull Request #2659 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #2657
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2660
Incorrect metrics SPI callbacks for H2C upgrade · Issue #2660 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
io.vertx.core.spi.metrics.HttpClientMetrics#endpointConnected is not invoked for Http2 client
is it a bug or requirement?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2661
Create additional write interface to NetSocket for notifications after socket writes are executed by hjames9 · Pull Request #2661 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
actually what we want is different, we want to overload the write(Buffer) method with a write(Buffer, Handler<AsyncResult>) method and the handler is called when the buffer has been sent. This callback might be delayed when the buffer is full. We also need to test that when the buffer is not delivered and the socket is closed then the callback happens with a failure.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2662
Websocket client HTTP header response callback · Issue #2662 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Would the vert.x team be open to a PR which exposes yet another callback to be passed into httpClient.websocket that allows a user to receive the HTTP headers returned by the sever after the websocket handshake succeeds?
The issue is that we load balance on the server end based on a cookie, the cookie is auto generated by HAProxy when not present in a request and it includes the name of the backend node the request should route to.  We need this cookie for session identity because we occasionally open multiple websocket channels from a single client.  It makes our lives easier if secondary websocket channels can be forwarded to the same backend node as the original, or if we have to reconnect the initial channel.
I was unable to get this information back even via reflection because it is quickly discarded so I had to fork and modify the code to add a handler.  Since I see no other issues related to this, maybe we are an oddity therefore I am curious if the PR would be welcome.  Feel free to close if not and we will maintain our fork.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2663
Fixed a typo in Verticles documentation by anhldbk · Pull Request #2663 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Modified HttpServeer to HttpServer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2664
io.vertx.core.spi.metrics.HttpClientMetrics#endpointConnected is not invoked for Http2 client  · Issue #2664 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2665
Can we upgrade netty to support Java11 · Issue #2665 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Dear Vertx Team,
since Java11 is already out there. When we run with vertx, it will always pop out following words in logs:

cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module

since netty has already fixed this issue, can we update it also?
cheers,
gb
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2666
Allow to put object that doesn't implement Shareable into LocalMap · Issue #2666 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Shareable interface is used in two ways:

to verify object before putting it into map;
to create a copy of mutable object before returning it;

The first is worthless. It actually doesn't help to write safe code because there is no way to define whether object thread-safe or not. Rather it's an obstacle because now it's impossible to share any object that comes from 3rd-party library without implementing some kind of holder. For instance what I want to share a DataSource. A dependency injector? There are many thread-safe classes in Java world around Vert.x and no one of them implement io.vertx.core.shareddata.Shareable.
If you want to warn about how dangerous is to share object state between threads, please, do it in the docs. Since Vert.x is unopinionated, do not force to write boilerplate code just to avoid unnecessary checks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2667
Websocket Client HTTP response headers by swinterberger · Pull Request #2667 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2668
Websocket client response headers by swinterberger · Pull Request #2668 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@swinterberger can you submit a new PR that can pass IP validation (requires you to sign off commit and accept CLA)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2669
fix wrong TimeUnit by okou19900722 · Pull Request #2669 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2670
Client connections on GlobalEventExecutor thread that are not propagated to the application · Issue #2670 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes the Netty's bootstrap may notify client connections on the GlobalEventExecutor thread when it happens early in the boostrap when an event-loop has not been yet determined. Vertx expects notifications to happen on the event loop thread and this results in a Uh oh! Event loop context executing with wrong thread! failure.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2671
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2672
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2673
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2674
Quest for database cache · Issue #2674 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can I use database cache and  how to do?same as spring  boot @Cacheable
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2675
Callback improvements - fixes #2657 by vietj · Pull Request #2675 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2676
another by vietj · Pull Request #2676 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2677
Performance improvements and simplifications by vietj · Pull Request #2677 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR provides a few performance improvement as well as the removal of the VertxHandler hierarchy that simplifies the implementation of connection management moving all the connection management in the subclasses of ConnectionBase removing the need for parallel VertxHandler subclassing.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2678
Performance improvements and connection management simplification by vietj · Pull Request #2678 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR provides a few improvements in HTTP/1.x request handling (faster header encoding, unnecessary method calls) as well as simplifications in the implementation of connection management, avoiding an unnecessary subclassing of VertxHandler along with the ConnectionBase (and thus removing subclasses like VertxHttpHandler, ...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2679
vertx-js example causes warning · Issue #2679 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Moved from vert-x3/vertx-web#1017
Version

vert.x core: 3.5

Context
Following the very first example on the vertx documenation js version causes the following warning on the console:
WARNING: You're already on a Vert.x context, are you sure you want to create a new Vertx instance?
Code looks to be work fine until you start to use some clustering API-s, where they just won't function as expected. I believe because we're on a differently configured context by now.
Do you have a reproducer?
var Vertx = require("vertx-js/vertx");
var vertx = Vertx.vertx();
Solution
As I found out from the examples the vertx variable is already defined js verticles, so the above initialization is not required.
If this is true in every cases then the documentation should be updated to reflect this, otherwise it should be more clear describing when the vertx is already defined and when not.
Many thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2680
Add Diffblue tests by diffblue-assistant · Pull Request #2680 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The test cases contained in this PR were generated by Diffblue's Deeptest software.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2681
Add Diffblue Tests by diffblue-assistant · Pull Request #2681 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The test cases contained in this PR were generated by Diffblue's Deeptest software.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2682
Redeploy inside docker container fails · Issue #2682 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to create a development environment inside Docker for Vert.x, I have the file system mounted and the file watcher is successfully detecting changes. However when a change occurs the redeploy task ./gradlew classes fails with the following:
INFO: Redeploying!
Error: Could not find or load main class org.gradle.wrapper.GradleWrapperMain
Despite the failure Vert.x subsequently reboots but with the stale code as the recompilation never occurs. Whats odd is if there was an issue with the wrapper it would have occurred when the container boots as its started with the command: ./gradlew clean run
Any help would be much appreciated
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2683
Improve the actual Queue class by vietj · Pull Request #2683 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The actual new Queue is actually not targeted as being a general purpose API, also it tries to be too general and is prone to race conditions when used outside of a Context. This renames the Queue to InboundBuffer and make it used with a Context. The implementation has also been improved. Classes that were using it without a Context have been rewritten without as they have a natural existing buffer that was duplicated anyway.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2684
executeBlocking callback run on the wrong thread for asynchronous future resolution · Issue #2684 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the executeBlocking(Handler<Future<T>>, Handler<AsyncResult<T>>) might execute the callback on the wrong thread when the runOnContext(...) execution loses the race against the thread that completes the future. This never happens when the worker thread completes the future, but it can happen when the worker thread hands off the future to another thread that completes it.
This happen in the Mongo client and fails with a stack-trace like:
	at io.vertx.ext.mongo.impl.MongoIterableStream.lambda$doRead$5(MongoIterableStream.java:120)
	at io.vertx.core.impl.FutureImpl.tryComplete(FutureImpl.java:125)
	at io.vertx.core.impl.FutureImpl.complete(FutureImpl.java:86)
	at io.vertx.ext.mongo.impl.MongoIterableStream.lambda$null$3(MongoIterableStream.java:112)
	at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49)
	at com.mongodb.operation.AsyncQueryBatchCursor.handleGetMoreQueryResult(AsyncQueryBatchCursor.java:271)
	at com.mongodb.operation.AsyncQueryBatchCursor.access$300(AsyncQueryBatchCursor.java:55)
	at com.mongodb.operation.AsyncQueryBatchCursor$CommandResultSingleResultCallback.onResult(AsyncQueryBatchCursor.java:301)
	at com.mongodb.operation.AsyncQueryBatchCursor$CommandResultSingleResultCallback.onResult(AsyncQueryBatchCursor.java:276)
	at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49)
	at com.mongodb.connection.DefaultServer$DefaultServerProtocolExecutor$2.onResult(DefaultServer.java:207)
	at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49)
	at com.mongodb.connection.CommandProtocolImpl$1.onResult(CommandProtocolImpl.java:102)
	at com.mongodb.connection.DefaultConnectionPool$PooledConnection$1.onResult(DefaultConnectionPool.java:458)
	at com.mongodb.connection.UsageTrackingInternalConnection$2.onResult(UsageTrackingInternalConnection.java:110)
	at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49)
	at com.mongodb.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:381)
	at com.mongodb.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:359)
	at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:651)
	at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:618)
	at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:487)
	at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:484)
	at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:233)
	at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:216)
	at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:126)
	at sun.nio.ch.Invoker.invokeDirect(Invoker.java:157)
	at sun.nio.ch.UnixAsynchronousSocketChannelImpl.implRead(UnixAsynchronousSocketChannelImpl.java:553)
	at sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:276)
	at sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:297)
	at com.mongodb.connection.AsynchronousSocketChannelStream.readAsync(AsynchronousSocketChannelStream.java:128)
	at com.mongodb.connection.InternalStreamConnection.readAsync(InternalStreamConnection.java:484)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2685
Feature: Support for stream dependency and weight · Issue #2685 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Problem:
The project I am working on requires prioritization of HTTP/2 streams. For that I need to be able to set stream dependency and weight in HEADER frames in request made from client, as well as responses sent from the server. Currently stream dependency and stream weight is not exposed through the API. When writing HTTP/2 requests/responses stream dependency and weight are not passed to Netty, therefore default values are used (0 and 16 respectively).
Solution:
It seems it would be enough to to add  extend HttpClientRequest and HttpServerResponse interfaces with setStreamDependecy and setWeight to override the default values and pass them through Http2ClientStream.writeHead -> VertxHttp2ConnectionHandler.writeHeaders to io.netty.handler.codec.http2.Http2ConnectionEncoder.writeHeaders
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2686
Problems decoding payload · Issue #2686 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello, I am making a really simple route in vert.x scala:
    router
      .put("/clients/:apiKey")
      .handler(handler => {
        handler.response().end()
      })
I have some payloads with "=" and "%", like this example:
curl -v XPUT localhost:8085/clients/test -d '{"s":"Q==","":"%IM" }'
For some strange reason when both are present I am getting this in log:
Caused by: java.lang.IllegalArgumentException: invalid hex byte 'IM' at index 8 of '=","":"%IM" }'
	at io.netty.util.internal.StringUtil.decodeHexByte(StringUtil.java:244)
	at io.netty.handler.codec.http.QueryStringDecoder.decodeComponent(QueryStringDecoder.java:351)
	at io.netty.handler.codec.http.QueryStringDecoder.decodeComponent(QueryStringDecoder.java:309)
	at io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.decodeAttribute(HttpPostStandardRequestDecoder.java:644)

What I cand do about? Not sure if it is vertx or netty issue.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2687
Have some plan to support game server？ · Issue #2687 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I just learning about vert.x. I think it is suitable for PvP MMO game server for its speed.
Anyone use vert.x for game server?
Or official support plan?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2688
MultiMap should return entries in addition order · Issue #2688 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MultiMap mm = ...
mm.add("h", "v1");
mm.add("h", "v2");
mm.add("h", "v3");

// Returns v3 but should return v1
String s = mm.get("h");
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2689
SSL handshake improvements · Issue #2689 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the SSL handshake leaks handshake failures to the ChannelPipeline during the handshake because we are using the HandshakeFuture to progress during the handshake.
Improve the SSL handshake handling to use a channel handlers (client / server) that will not propagate uncaught failures in the pipeline. The handlers are implemented using events emitted by the SslHandler/SniHandler when the handshake completes.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2690
ChannelProvider improvements · Issue #2690 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the ChannelProvider is responsible for connecting the channel on behalf of the NetClient/HttpClient . SSL handshaking and setup is handled separately by the clients.
Improve the ChannelProvider to also handle the SSL client handshake in a common place. The proxy provider has also been merged in the ChannelProvider as there is no much interest to have a subclass for it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2691
Support for distributed queues · Issue #2691 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Could the ClusterManager be extended to expose shared/distributed queues provided by underneath cluster managers in the same way as AsyncMap?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2692
FileResolve shutdown hook throws exception · Issue #2692 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm shutting down a Vertx environment using vertx.close.  During this process the system runs its shutdown hooks.  One of those is deployed by FileResolver and it is consistently throw the following exception:
java.util.concurrent.RejectedExecutionException: Task io.vertx.core.impl.TaskQueue$$Lambda$62/2067180044@6ab80713 rejected from java.util.concurrent.ThreadPoolExecutor@48cf5273[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 308]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)
	at io.vertx.core.impl.TaskQueue.execute(TaskQueue.java:93)
	at io.vertx.core.impl.ContextImpl.executeBlocking(ContextImpl.java:293)
	at io.vertx.core.impl.ContextImpl.executeBlocking(ContextImpl.java:237)
	at io.vertx.core.file.impl.FileSystemImpl$BlockingAction.run(FileSystemImpl.java:839)
	at io.vertx.core.file.impl.FileSystemImpl.deleteRecursive(FileSystemImpl.java:223)
	at io.vertx.core.impl.FileResolver.deleteCacheDir(FileResolver.java:328)
	at io.vertx.core.impl.FileResolver.lambda$setupCacheDir$1(FileResolver.java:317)
	at java.lang.Thread.run(Thread.java:745)

The issue is that since we're doing close we've already terminated the executor used to run blocking code so the attempt to queue work is rejected.  It would be better if this exception didn't leak as it does currently since there is essentially nothing the Vert.x programmer can do about it (at least not AFAICT).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2693
Add support for stream dependency and priority weight by mmopenet · Pull Request #2693 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we need tests that use directly the netty API, see Http2ServerTest and Http2ClientTest as well
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2694
Port the utils removeDots and normalizePath from web to core, as they… by pmlopes · Pull Request #2694 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2695
Signal the VertxMetrics when the Vertx instance is initialised · Issue #2695 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the VertxMetrics SPI does not leak the Vertx instance during metrics creation because the instance might be not be fully initialised yet. We should add a callback to the VertxMetrics to signal when the Vertx instance is initialised before it is returned to the application.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2696
Usability: clustered event bus defaults · Issue #2696 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, there are different processes for configuring clustered eventbus.

the cluster manager configuration file (eg cluster.xml for HZ)
the ClusteredEventBusOptions
the Launcher CLI args (cluster-host, cluster-port)

When running a Vert.x app from the CLI, or in an executable jar with the Launcher, we try to determine a host address if not provided via argument. Then the host/port are set in the ClusteredEventBusOptions.
When it starts the ClusteredEventBus uses values from options.
There are a number of issues with this process:

the address chosen by the cluster manager is not always consistent with the address chosen by the CLI
it's difficult to configure for beginners: users must update the cluster manager configuration file and provide CLI arguments or EB options
EB options defaults to localhost and when embedding Vert.x, users often forget to set cluster host

For Vert.x 4 we must think about better processes, for a better user experience and less questions/issues posted of course :)
Not all issues need to be solved with code changes: a better documentation about this process can help.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2697
Documentation improvement for MT worker verticles by tsegismont · Pull Request #2697 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Also I think that we should say that instead of providing the deployment option trick only:

either they should use regular worker and increase the worker size (as you said)
can combine regular verticle + executeBlocking with ordered = false (that needs to be verified in a test I think before)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2698
Server to server file upload, handler gets stuck · Issue #2698 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So I have a scenario where a file upload from a server is uploaded to another server. The client code is taken from Paulo Lopes' SO post. Client saves a file from user's form and streams it to another server. Though it's written in scala, basically it just forwards futures from file open to http post.
  router.post("/form").handler(BodyHandler.create().setUploadsDirectory("./temp"))

  router.post("/form").handler(ctx => {
    ctx.fileUploads().foreach(p => {
      val size    = p.size()
      val f = for {
        ffil <- vertx.fileSystem().openFuture(p.fileName(), OpenOptions())
        fpos <- client.post(8065, "localhost", "/form")
                .putHeader("content-length", size.toString)
                .sendStreamFuture(ffil)
      } yield fpos
      f onComplete {
        case Success(a) => ctx.response.end("ok")
        case Failure(e) => ctx.response.end(e.getMessage)
      }
    })


The target server follows the Vertx example with some modifications to receive, reconstruct the file as byte array instead of saving it in local stroage. It doesn't use vertx-web either.
vertx.createHttpServer().requestHandler(req => {
 (req.method(), req.uri()) match {

   case (HttpMethod.POST, "/form") =>
      req.setExpectMultipart(true)
      req.uploadHandler(upload => { // <-- stuck, never proceeds
         var cache: Option[Buffer] = None
         upload.exceptionHandler(cause => println(cause.getMessage))
         upload.handler(b => {
             if (cache.isDefined){
                cache.get.appendBuffer(b)
             } else {
                 cache = Some(b.copy())
             }
         })
        upload.endHandler(end => resizeAndOtherProcess(cache))
    })
}

Here req detects incoming request but uploadHandler never proceeds into Handle and is just stuck in the line with comment.  it doesn't throw any exception either. However a file upload from html form directed at that path works. Any help pointing the problem is appreciated. Thanks in advance.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2699
NPE during h2c upgrade without host header · Issue #2699 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the server receives h2c upgrade request without Host header, it throws NPE:
09:41:50,996 ERROR (vert.x-eventloop-thread-2) [i.v.c.n.i.ConnectionBase] value java.lang.NullPointerException: value
	at io.netty.util.internal.ObjectUtil.checkNotNull(ObjectUtil.java:31)
	at io.netty.handler.codec.DefaultHeaders.set(DefaultHeaders.java:431)
	at io.netty.handler.codec.http2.DefaultHttp2Headers.authority(DefaultHttp2Headers.java:145)
	at io.vertx.core.http.impl.HttpServerImpl$Http2UpgradeHandler.channelRead(HttpServerImpl.java:966)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)

The host header is mandatory, but upon client error the server should respond with error (right now it sends 101 Switching protocols and then the connection is terminated).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2700
HttpServerResponseImpl.isChunked fails to validate existence of Transfer-Enconding header · Issue #2700 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In io/vertx/core/http/impl/HttpServerResponseImpl.java:145  version 3.5.4, the methods tries to compare CharSequence with a String and always returns false even when the header is present.
  @Override
  public boolean isChunked() {
    synchronized (conn) {
      return HttpHeaders.CHUNKED.equals(headers.get(HttpHeaders.TRANSFER_ENCODING));
    }
  }
```
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2701
NetServer not using every eventloop thread · Issue #2701 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I'm writing a tcp server using vertx NetClient, however i found that even if i start multiple servers and listen at the same time, the handler won't using every eventloop thread.
Here's the example code:
vertx: 3.5.3
package com.netease.connectiontest;

import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
import io.vertx.core.net.NetServer;

public class TestMain {
    public static void main(String[] args) {
        Vertx vertx = Vertx.vertx(new VertxOptions().setEventLoopPoolSize(4));
        for (int i = 0; i < 4; ++i) {
            NetServer server = vertx.createNetServer();
            server.connectHandler(sock -> {
                sock.write("Hello world\r\n");
                sock.handler(buf -> {
                    System.out.println(Thread.currentThread());
                });
            });
            server.listen(8080);
        }
    }
}
then repeating telnet -> send some msg -> quit telent
The result I imagine would be printing vert.x-eventloop-thread-(0 to 3), however the output ranges from 1 to 3, where 0 was never printed.
I check the source code and found that when the first server.listen is called, it tries to resolve the local socket host, even if the host is set to 0.0.0.0. The resolve process will start a UDP sock for DNS. The UDP sock will use the second EventLoop element inside the PowerOfTwoEventExecutorChooser.
io.netty.util.concurrent.DefaultEventExecutorChooserFactory line 56:
        @Override
        public EventExecutor next() {
            return executors[idx.getAndIncrement() & executors.length - 1];
        }
executors[0] will be used by the first tcp server
executors[1] will be used by the udp sock
executors[2] will be used by the second tcp server
executors[3] will be used by the third tcp server
then
executors[0] will be used by the last tcp server, where it's the same as the first one. And the DNS lookup will not bu used very often, so the result would be: one event loop thread not doing anything.
I'm wondering whether this is a bug? This is easy to fix, just set the event loop to 5. But if the vertx is upgraded, I must check whether there are any new process fetching event loop from the chooser.
And I don't see it very clear that: why the event loop should be set to 2 * cores. If all libs i'm using are async (async-mysql-client/webclient/redisclient and so on), I think I won't get better performance when setting event loop size to ${a number > cores} than ${= cores} (or change it to ${cores - 1} if considering soft interrupt).
Looking forward to your reply~thx
^_^
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2702
Multi-threaded worker deprecation · Issue #2702 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MultiThreaded worker verticles are an extension to worker verticles. Like with usual worker verticles, events are handled on worker pool threads. But they can be executed by different threads concurrently, which means the verticle must manage its own state to be visible between threads.
There are many parts of Vert.x which simply doesn't support them. For example, you can't create an HTTP server on a MT worker verticle.
Also, we have seen many new users, in particular those experienced with Spring or Java EE, starting directly with MT worker verticles and adding as many threads as possible with the impression it would help get the best performance results. But this is really counter-productive.
In 3.6.0 we deprecate the usage of multi-threader worker verticles and we document how to replace them. The feature will be dropped in Vert.x 4.
See

#2697
#2431
#2755
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2703
Remove multithreaded worker verticles · Issue #2703 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Deprecated in 3.6, they can be removed in 4.0
See #2702

remove mt worker context
update deployment options
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2704
Deprecate Message replyAddress method · Issue #2704 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The replyAddress cannot be used in both standalone and clustered mode. When clustered, the remote recipient cannot use the reply address because it's not registered in cluster manager.
Reply address is an internal detail of implementation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2705
File descriptor leak when using WebClient · Issue #2705 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Enviornment Information:
------------------------------------------------------------
Gradle 4.10.2
------------------------------------------------------------

Build time:   2018-09-19 18:10:15 UTC
Revision:     b4d8d5d170bb4ba516e88d7fe5647e2323d791dd

Kotlin DSL:   1.0-rc-6
Kotlin:       1.2.61
Groovy:       2.4.15
Ant:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018
JVM:          1.8.0_172 (Oracle Corporation 25.172-b11)
OS:           Mac OS X 10.14.1 x86_64

Reproducer: https://github.com/kjstouffer/vertx-fd-issue-repro (README with more detailed information)
FD open/close log generated by http://file-leak-detector.kohsuke.org/ : files-2-loops.log
This issue only happens when an exception happens (a Timeout in this case), but not in every combination of timeout / number of requests. for example, with number of request set to 10 and timeout set to 8000ms, the issue does not appear (only 2 requests fail), however, when the number of requests is 20 and timeout set to 8000ms, the issue does appear (12 requests fail).
I'm wondering if I'm doing something wrong in my reproducer or if there's a bug in the underlying implementation that's supposed to close / free sockets.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2706
Issue TCCL warn based on system classloader equality rather than internal class name check · Issue #2706 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As the name of the system classloader class changes with Java version, it seems better to use tccl == ClassLoader.getSystemClassLoader() rather than tccl.getClass().getName().equals("sun.misc.Launcher$AppClassLoader").
Without this, it cause to issue warns on Java > 8 when creating a context from the main thread with the vertx.disableTCCL flag set.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2707
Issue TCCL warn based on system classloader equality rather than inte… by vietj · Pull Request #2707 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…rnal class name check
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2708
Json.checkAndVerify doesn't support Enums · Issue #2708 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I've got a problem with the Json-class in vertx-core.
java.lang.IllegalStateException: Illegal type in JsonObject: class my.code.SomeEnum
	at io.vertx.core.json.Json.checkAndCopy(Json.java:211)
	at io.vertx.core.json.JsonObject.put(JsonObject.java:677)
	at as.leap.vertx.rpc.impl.VertxRPCServer.lambda$replyFail$10(VertxRPCServer.java:188)
...

I think it is related to this piece of code in Json.java:
  static Object checkAndCopy(Object val, boolean copy) {
    if (val == null) {
      // OK
    } else if (val instanceof Number && !(val instanceof BigDecimal)) {
      // OK
    } else if (val instanceof Boolean) {
      // OK
    } else if (val instanceof String) {
      // OK
    } else if (val instanceof Character) {
      // OK
    } else if (val instanceof CharSequence) {
      val = val.toString();
    } else if (val instanceof JsonObject) {

Another else-if fixed it for me:
    } else if (val instanceof Enum) {
      // OK

This is my first issue / PR, so please tell me, if I can improve something.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2709
fixed Json.checkAndCopy for enums by jclohmann · Pull Request #2709 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
PR for #2708
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2710
fixed Json.checkAndCopy for enums by jclohmann · Pull Request #2710 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you read the Eclipse Contributor Agreement ?
also this is missing tests to check it's fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2711
Document the new streams fetch mode · Issue #2711 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It would be useful in javadocs and docs to have a quick overview of the ReadStream state machines when in regular push vs (new) pull/fetch mode.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2712
NPE in OpenApi3Utils for dynamic number of query parameters in spec · Issue #2712 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On exploring the use of web-api-contract and OpenAPI3RouterFactory.create and have the requirement to have a variable (dynamic) number of query parameters for an endpoint e.g. /my/path/v1?param1=value1&param2=value2 etc. (for a search solution) but the parsing of this in OpenApi3Utils.class fails with a NPE.
Nov 15, 2018 8:41:36 AM io.vertx.core.impl.ContextImpl
SEVERE: Unhandled exception
java.lang.NullPointerException
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenApi3Utils.solveObjectParameters(OpenApi3Utils.java:196)
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenAPI3RequestValidationHandlerImpl.magicParameterExplodedObject(OpenAPI3RequestValidationHandlerImpl.java:293)
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenAPI3RequestValidationHandlerImpl.checkSupportedAndNeedWorkaround(OpenAPI3RequestValidationHandlerImpl.java:371)
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenAPI3RequestValidationHandlerImpl.parseParameter(OpenAPI3RequestValidationHandlerImpl.java:405)
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenAPI3RequestValidationHandlerImpl.parseOperationSpec(OpenAPI3RequestValidationHandlerImpl.java:97)
    at io.vertx.ext.web.api.contract.openapi3.impl.OpenAPI3RequestValidationHandlerImpl.<init>(OpenAPI3RequestValidationHandlerImpl.java:87)

the relevant slice of my spec.yaml is
- name: params
  in: query
     schema:
        type: object
            type: string
     style: form
     explode: true

it parses fine in SwaggerUI for example with the correct output.
A suggested workaround of an empty {} for the object properties sorted the NPE, but no additionalProperties are parsed from the url (which may be a secondary issue)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2713
3.5 by hubertg1122 · Pull Request #2713 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what's the point ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2714
Expose netty's SSL Handshake Timeout - Fixes #2118 by BillyYccc · Pull Request #2714 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In addition, I have no idea how this makes sense in SNI due to df4a3dd since Netty does not give a way to configure the timeout in SniHandler directly.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2715
io.vertx.core.net.SocketAddress.NetworkMetrics#bytesRead and bytesWritten do not contain headers · Issue #2715 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
default void bytesWritten(S socketMetric, SocketAddress remoteAddress, long numberOfBytes) {
}
default void bytesRead(S socketMetric, SocketAddress remoteAddress, long numberOfBytes) {
}
the numberOfBytes only contains the body length.
numberOfBytes  equals  buff.getBytes().length
HttpClient localhost = http2Client.getNow(8080, "localhost", "", resp -> {
  resp.bodyHandler(buff -> {
    System.out.println(buff.getBytes().length);
  });
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2716
3.6.0.CR1  do not support http2?  · Issue #2716 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the same code run correctly in the 3.5.3
when I use 3.6.0.CR1, it throws
Nov 19, 2018 3:25:35 PM io.vertx.core.http.impl.HttpClientRequestImpl
SEVERE: javax.net.ssl.SSLHandshakeException: Failed to create SSL connection
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2717
Clear pending messages when unregistering message consumer · Issue #2717 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the message consumer, keep the pending messages (accumulated when the consumer was paused) after unregistration. There can be some races that the consumer is resumed after unregistration (user issue) and the pending messages will be processed and it results in internal failures.
Instead the pending messages should be cleared on unregistration and the discarded messages processed by the internal discard handler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2718
future compose not handle first future exception · Issue #2718 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx version
        <dependency>
            <groupId>io.vertx</groupId>
            <artifactId>vertx-core</artifactId>
            <version>3.5.4</version>
        </dependency>

code

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
import java.util.concurrent.atomic.AtomicInteger;

/**
 * vertx-test
 * chenpx 2018/11/19 19:20
 **/
public class TestCompose extends AbstractVerticle {
    public static void main(String[] args) {
        VertxOptions options = new VertxOptions();
        Vertx vertx = Vertx.vertx(options);

        vertx.deployVerticle(TestCompose.class.getName());
    }
    AtomicInteger index = null;

    @Override
    public void start() throws Exception {
        //1. must try catch
        try {
            getData().compose(res->{
                return Future.succeededFuture("i am foo");
            }).setHandler(res->{
               //attention will skip this handler
               if (res.failed()){
                   System.out.println("=== error");
                   res.cause().printStackTrace();
               }else {
                   System.out.println(res.result());
               }
            });
        } catch (Exception e) {
            //RuntimeException catch in hera
            System.out.println("xxx-xx ERROR");
            e.printStackTrace();
        }

        //2. not need try catch
        getData2().compose(res->{
            return getData();
        }).setHandler(res->{
            if (res.failed()) {
                System.out.println("have error ");
                res.cause().printStackTrace();
            }else {
                System.out.println(res.result());
            }
        });
    }

    //test throw RuntimeException
    public Future<String> getData(){
        return Future.future(r->{
            index.getAndIncrement();
            r.tryComplete("hello");
        });
    }

    public Future<String> getData2(){
        Future<String> future = Future.future();
        vertx.setPeriodic(1000,ar->{
            future.tryComplete("hello amy");
        });
        return future;
    }
}

my question is why the first future of compose futures must be success?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2719
The sendFile implementation using file region might idle timeout for very large files · Issue #2719 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently calling sendFile on a NetSocket or HttpServerResponse might timeout for connection having a TCP idle timeout set. This happens because we send a single file region that takes more time than the idle timeout value and cause a timeout. Since it's a FileRegion object, configuring observeOutput on IdleStateHandler will have no effect as such regions are not reporting progress on the ChannelOutboundBuffer.
Instead of sending a very large region, instead we stream file regions of a fixed size (1mo) until the file is completely sent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2720
Upgrade Jetty ALPN Agent to 2.0.9 · Issue #2720 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
so that the tests work with the latest Oracle JDK.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2721
Upgrade Jetty APLN Agent to 2.0.9 - fixes #2720 by BillyYccc · Pull Request #2721 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can't merge it for now, we are awaiting for an Eclipse works-with CQ
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2722
Close all shared TCP based servers when Vert.x is closing · Issue #2722 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When closing Vert.x, only the first shared server is closed and not the other servers, which actually does not close the server, since the other shared servers are not closed and prevent closing to happen.
On Vert.x close we should instead close all the servers with a special method as this is not a regular close.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2723
Close all shared TCP based servers when Vert.x is closing - fixes #2722 by vietj · Pull Request #2723 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2724
Send file fixes by vietj · Pull Request #2724 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2725
Configure cluster public host and port from command line · Issue #2725 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, it's only possible to configure cluster public host and port with sysprops.
This will help having a consistent user experience (cluster host and port can be configured via the command line).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2726
Configure cluster public host and port from command line by tsegismont · Pull Request #2726 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #2725
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2727
HTTP/2 stream priority implementation - fixes #2685 by vietj · Pull Request #2727 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2728
Remove TCPSSLOptions#usePooledBuffers · Issue #2728 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #2325
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2729
TLS 1.3 Support · Issue #2729 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi All,
Is it possible to update netty to 4.1.31.Final and add support for TLS 1.3?

TLSv1.3 support
TLSv1.3 was recently finalized as a standard. In this release we add support for it in various ways, when either of these is true:
using Java11 or later
using netty-tcnative (build against OpenSSL 1.1.1+) and Java8+
using netty-tcnative-boringssl-static and Java8+.
That said TLSv1.3 is not enabled by default so if you want to use it you will need to explicit enable it by using TLSv1.3 when configure your SslContextBuilder (like for example):
SslContextBuilder.forClient().protocols("TLSv1.3") ....
To be able to do this for our native implementations you also need to ensure you use netty-tcnative 2.0.19 (compiled against OpenSSL 1.1.1+) or netty-tcnative-boringssl-static 2.0.19.

Regards,
Pratik Parikh
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2730
AsyncFile should accept empty buffer writes instead of throwing an IllegalStateException · Issue #2730 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj  I need some help.
pom:
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-core</artifactId>
      <!--<version>3.5.3</version>-->
      <version>3.6.0.CR1</version>
    </dependency>
    <dependency>
      <groupId>io.netty</groupId>
      <artifactId>netty-tcnative-boringssl-static</artifactId>
      <version>2.0.12.Final</version>
    </dependency>

server:

public class HttpServerDownloadTest {
    public static void main(String[] args) {
        HttpServerOptions httpServerOptions = new HttpServerOptions();
        httpServerOptions.setUseAlpn(true)
                .setSsl(true)
                .setPemKeyCertOptions(new PemKeyCertOptions().setKeyPath("tsl/server-key.pem").setCertPath("tsl/server-cert.pem"));
        Vertx vertx = Vertx.vertx();
        HttpServer httpServer = vertx.createHttpServer(httpServerOptions);
        httpServer.requestHandler(request -> {
            request.bodyHandler(body -> {
                System.out.println("server : " + body.toString());
            });
            String file = "filePath";
            request.response().headers().set("Content-Disposition", attachment;filename=tempFileEntity.txt");
            request.response().sendFile(file);
        });
        httpServer.listen(8080, "localhost", req -> {
            if (req.succeeded()) {
                System.out.println("bind port :" + req.result().actualPort());
            } else {
                System.out.println("bind port error");
            }
        });
    }
}

client:

public class HttpClientTest {
    public static void main(String[] args) {
        Vertx vertx = Vertx.vertx();
        String filePath = "filePath";
        HttpClientOptions http2ClientOption = new HttpClientOptions();
        http2ClientOption.setProtocolVersion(HttpVersion.HTTP_2)
                .setUseAlpn(true)
                .setHttp2ClearTextUpgrade(false)
                .setTrustAll(true)
                .setSsl(true)
                .setDefaultPort(8080)
                .setDefaultHost("localhost");
        HttpClient httpClient = vertx.createHttpClient(http2ClientOption);
        HttpClientRequest httpClientRequest = httpClient.request(HttpMethod.POST, "", res -> {
            res.pause();
            vertx.fileSystem().open(filePath, new OpenOptions(), ares -> {
                AsyncFile file = ares.result();
                Pump pump = Pump.pump(res, file);
                res.endHandler(v1 -> {
                    System.out.println("end...");
                    file.flush().close(v2 -> {
                        System.out.println(" download success");
                    });
                });
                pump.start();
                res.resume();
            });
        });
        httpClientRequest.setChunked(true);
        httpClientRequest.end("hello");
    }
}


when I start the server and client. the file download successfully. but it will throw an exception
十一月 22, 2018 9:55:03 上午 io.vertx.core.http.impl.HttpClientResponseImpl
严重: io.vertx.core.VertxException: Connection was closed
十一月 22, 2018 9:55:03 上午 io.vertx.core.http.impl.HttpClientResponseImpl
严重: java.lang.IllegalStateException: Cannot save zero bytes
end...
 download success

How can I avoid this exception or can I ignore this exception?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2731
Evetbus processor registration problem with socket · Issue #2731 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi：
Please look at the chart below.
Using localConsumer here will make other vertx instances in the cluster invisible.Why not consumer but localConsumer?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2732
AsyncFile reuse the ByteBuffer for repeated reads · Issue #2732 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently AsyncFile allocates an heap ByteBuffer for repeated reads and could instead allocate a single that would be reused.
Change the doRead() method so it allocates a ByteBuffer and then call doRead passing the buffer instead of calling the read method that allocates the ByteBuffer. After copy the ByteBuffer must be compacted for reuse.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2733
AsyncMap keys, values and entries not available through reactivex/core · Issue #2733 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Related to: #2020
Methods available: core/shareddata/AsyncMap
Methods not available: reactivex/core/shareddata/AsyncMap


Is there a way to gain access to these methods from reactivex/core even if they are not the rx variant?
Will there be an observable returning rx variant?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2734
when use metrics with h2 and h2c , http server will lost bytesWritten info · Issue #2734 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
pom:
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-core</artifactId>
     <version>3.6.0.CR1</version>
    </dependency>

    <dependency>
      <groupId>io.netty</groupId>
      <artifactId>netty-tcnative-boringssl-static</artifactId>
      <version>2.0.12.Final</version>
    </dependency>

server:
public class Server {

  public static void main(String[] args) {
    HttpServerOptions httpServerOptions = new HttpServerOptions();
    httpServerOptions.setUseAlpn(true)
        .setSsl(true)
        .setPemKeyCertOptions(
            new PemKeyCertOptions().setKeyPath("tsl/server-key.pem").setCertPath("tsl/server-cert.pem"));
    VertxOptions vertxOptions = new VertxOptions();
    VertxMetricsFactory factory = (options) -> new DummyVertxMetrics() {
      @Override
      public HttpServerMetrics<?, ?, ?> createHttpServerMetrics(HttpServerOptions options, SocketAddress localAddress) {
        return new DummyHttpServerMetrics() {
          @Override
          public Void requestBegin(Void socketMetric, HttpServerRequest request) {
            System.out.println("request begin");
            return null;
          }

          @Override
          public void responseEnd(Void requestMetric, HttpServerResponse response) {
            System.out.println("response end ");
          }

          @Override
          public Void connected(SocketAddress remoteAddress, String remoteName) {
            System.out.println("connected");
            return null;
          }

          @Override
          public void disconnected(Void socketMetric, SocketAddress remoteAddress) {
            System.out.println("disconnected");
          }

          @Override
          public void bytesRead(Void socketMetric, SocketAddress remoteAddress, long numberOfBytes) {
            System.out.println("bytes read : " + numberOfBytes);
          }

          @Override
          public void bytesWritten(Void socketMetric, SocketAddress remoteAddress, long numberOfBytes) {
            System.out.println("bytes write : " + numberOfBytes);
          }

          @Override
          public boolean isEnabled() {
            return true;
          }

          @Override
          public void close() {

          }
        };
      }
    };
    vertxOptions.setMetricsOptions(new MetricsOptions().setEnabled(true).setFactory(factory));

    Vertx vertx = Vertx.vertx(vertxOptions);
    HttpServer server = vertx.createHttpServer(httpServerOptions).requestHandler(req -> {
      HttpServerResponse response = req.response();
      response.setStatusCode(200).setChunked(true).write("bye").end();
      response.close();
    });
    server.listen(8081, "localhost", handler -> {
      if (handler.succeeded()) {
        System.out.println(" bind success");
      }
    });
  }
}

client :
public class Client {

  public static void main(String[] args) {

    VertxOptions vertxOptions = new VertxOptions();

    Vertx vertx = Vertx.vertx(vertxOptions);
    HttpClientOptions http2ClientOption = new HttpClientOptions();
    http2ClientOption.setProtocolVersion(HttpVersion.HTTP_2)
        .setUseAlpn(true)
        .setIdleTimeout(0)
        .setHttp2ClearTextUpgrade(false)
        .setTrustAll(true)
        .setSsl(true);

    HttpClient http2Client = vertx.createHttpClient(http2ClientOption);

    http2Client.getNow(8081, "localhost", "", resp -> {
      resp.bodyHandler(buff -> {
        System.out.println(buff.toString());
      });
    });
  }
}

logging:
bind success
connected
request begin
bytes read : 0
disconnected

the method  bytesWritten(Void socketMetric, SocketAddress remoteAddress, long numberOfBytes)  has not been invoked
@Override
void bytesWritten(Void socketMetric, SocketAddress remoteAddress, long numberOfBytes) {
         System.out.println("bytes write : " + numberOfBytes);
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2735
minor: call super.tearDown() in DNSTest by ruslansennov · Pull Request #2735 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Ruslan Sennov ruslan.sennov@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2736
HttpServerFileUpload should be resumed when the pending inbound buffer is drained · Issue #2736 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
That's a regression introduced by the usage of InboundBuffer.
The consequence is that the TCP when the TCP connection is paused, it is never resumed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2737
File Upload never finishes with 3.6.0-CR2 · Issue #2737 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So we upgrade to 3.6.0-CR2 to make our code base ready for 3.6.0.
And we encountered an Issues related to File Uploads.
When you try to upload a large file to an vertx webserver and pump this file to the filesystem the following happens:
The writeStream gets full because the fs can write fast enough. This leads to an full InboundBuffer in the HttpServerFileUploadImpl which the proceeds to pause the request when it recives another chunk of data.
The thing is, the request never gets resumed again even tho write stream and inbound buffer get empty.
Looking at the code in HttpServerFileUploadImpl i dont get how this could have worked before since nothing resumes the request. But everything works with 3.5.2.
I think this is a regression introudced through the refactoring of the internal Queue in the HttpServerFileUploadImpl to the InboundBuffer class.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2738
ClusteredEventBus with ZookeeperClusterManager loosing the messages when one of the nodes is leaving the cluster · Issue #2738 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello guys!
It seems like vertx cluster event bus (zookeeper implementation) loosing some messages when some of the nodes leaving the cluster. This can be related to #1594 or vert-x3/vertx-hazelcast#13 issues.
Theoretically, it is still sending the messages to the shutted down node.
Here is a code to reproduce:
Start zookeeper
docker run -p 2181:2181 zookeeper:3.4.13
Base class:
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import io.vertx.core.DeploymentOptions;
import io.vertx.core.Future;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
import io.vertx.core.json.JsonObject;
import io.vertx.spi.cluster.zookeeper.ZookeeperClusterManager;

public class ShutdownTestBase {

    protected List<Vertx> cluster = Collections.synchronizedList(new ArrayList<>());

    public Future<Object> startClusterNode(String serviceName) {
        Future<Object> retval = Future.future();

        JsonObject zkConfig = new JsonObject();
        zkConfig.put("zookeeperHosts", "127.0.0.1");
        ZookeeperClusterManager cm = new ZookeeperClusterManager(zkConfig);
        VertxOptions options = new VertxOptions();
        options.setClusterManager(cm);
        // for cluster init do not throw any warnings
        options.setMaxEventLoopExecuteTime(8_000_000_000l);
        Vertx.clusteredVertx(options, res -> {
            if (res.succeeded()) {
                cluster.add(res.result());
                runService(serviceName, res.result()).setHandler(retval);
                System.out.println("................... Vertx deployed ...................");
            } else {
                res.cause().printStackTrace();
            }
        });

        return retval;
    }

    private Future<Object> runService(String serviceName, Vertx vertx) {
        Future<Object> retval = Future.future();
        vertx.deployVerticle(serviceName, new DeploymentOptions(), e -> {
            retval.complete();
        });
        return retval;
    }

}

Test class:
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.atomic.AtomicInteger;

import org.junit.Test;
import org.junit.runner.RunWith;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.CompositeFuture;
import io.vertx.core.Future;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;

@RunWith(VertxUnitRunner.class)
public class ShutdownTest extends ShutdownTestBase {

    private static String ADDRESS = "test.shutdown";
    private static int INSTANCES_COUNT = 2;
    private int i = 0;

    // massages tracking map
    private static Map<Integer, Object> MESSAGE_MAP = Collections.synchronizedMap(new HashMap<>());

    @Test
    public void shutdownTest(TestContext context) {
        Async async = context.async();

        @SuppressWarnings("rawtypes")
        List<Future> servicesDeploy = new ArrayList<>();
        // start cluster
        for (int i = 0; i < INSTANCES_COUNT; i++) {
            servicesDeploy.add(startClusterNode(ShutdownTestMS.class.getName()));
        }
        // start test
        CompositeFuture.join(servicesDeploy).setHandler(e -> {
            System.out.println("Cluster: " + cluster);
            // sending messages
            long periodic = cluster.get(0).setPeriodic(10l, timer -> sendMessage());
            // closing last instance
            cluster.get(0).setTimer(500l, timer -> cluster.get(cluster.size() - 1).close());
            // stop sending messages
            cluster.get(0).setTimer(1000l, timer -> {
                cluster.get(0).cancelTimer(periodic);
            });
            // Closing all
            cluster.get(0).setTimer(2000l, timer -> {
                System.out.println("Failed messages " + MESSAGE_MAP);
                context.assertTrue(MESSAGE_MAP.isEmpty(),
                        "Message map should be empty, but was " + MESSAGE_MAP.toString());
                async.complete();
                cluster.forEach(vertx -> vertx.close());
            });

        });
    }

    private void sendMessage() {
        System.out.println("Sending message " + i);
        MESSAGE_MAP.put(i, i);
        cluster.get(0).eventBus().send(ADDRESS, String.valueOf(i));
        i++;
    }

    public static class ShutdownTestMS extends AbstractVerticle {

        private static AtomicInteger holder = new AtomicInteger(0);

        @Override
        public void start() throws Exception {
            int number = holder.incrementAndGet();
            vertx.eventBus().<String> consumer(ADDRESS, e -> {
                int message = Integer.parseInt(e.body());
                System.out.println(number + " got message " + message);
                MESSAGE_MAP.remove(message);
            });
        }

    }

}

Stack trace:
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:36,668 [vert.x-worker-thread-0] INFO  [admins-MacBook-Pro.local] o.a.c.f.imps.CuratorFrameworkImpl - Starting
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:36,668 [vert.x-worker-thread-0] INFO  [admins-MacBook-Pro.local] o.a.c.f.imps.CuratorFrameworkImpl - Starting
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:41,785 [vert.x-worker-thread-0-EventThread] INFO  [admins-MacBook-Pro.local] o.a.c.f.state.ConnectionStateManager - State change: CONNECTED
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:41,785 [vert.x-worker-thread-0-EventThread] INFO  [admins-MacBook-Pro.local] o.a.c.f.state.ConnectionStateManager - State change: CONNECTED
................... Vertx deployed ...................
................... Vertx deployed ...................
Cluster: [io.vertx.core.impl.VertxImpl@2fbb33e6, io.vertx.core.impl.VertxImpl@5c18005b]
Sending message 0
Sending message 1
1 got message 1
Sending message 2
1 got message 0
Sending message 3
Sending message 4
1 got message 3
Sending message 5
1 got message 5
Sending message 6
2 got message 2
2 got message 4
2 got message 6
Sending message 7
1 got message 7
Sending message 8
2 got message 8
...
Sending message 50
Sending message 51
1 got message 51
Sending message 52
Sending message 53
1 got message 53
Sending message 54
1 got message 54
Sending message 55
1 got message 55
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:48,083 [Curator-Framework-0] INFO  [admins-MacBook-Pro.local] o.a.c.f.imps.CuratorFrameworkImpl - backgroundOperationsLoop exiting
Sending message 56
1 got message 56
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:48,097 [vert.x-eventloop-thread-9] ERROR [admins-MacBook-Pro.local] i.v.c.e.impl.HandlerRegistration - Failed to propagate registration for handler io.vertx.spi.cluster.zookeeper.impl.AsyncMapTTLMonitor$$Lambda$191/1719340525@23cb1cde and address __VERTX_ZK_TTL_HANDLER_ADDRESS
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:48,099 [vert.x-eventloop-thread-10] ERROR [admins-MacBook-Pro.local] i.v.c.e.i.c.ClusteredEventBus - Failed to remove sub
java.lang.IllegalStateException: instance must be started before calling this method
	at org.apache.curator.shaded.com.google.common.base.Preconditions.checkState(Preconditions.java:176)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:367)
	at io.vertx.spi.cluster.zookeeper.impl.ZKMap.lambda$checkExists$5(ZKMap.java:198)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.sendToBackgroundCallback(CuratorFrameworkImpl.java:749)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.processBackgroundOperation(CuratorFrameworkImpl.java:522)
	at org.apache.curator.framework.imps.SyncBuilderImpl$1.processResult(SyncBuilderImpl.java:108)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:634)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:505)
Sending message 57
1 got message 57
Sending message 58
1 got message 58
Sending message 59
1 got message 59
...
Sending message 98
1 got message 98
Sending message 99
1 got message 99
Failed messages {50=50, 52=52}
[WEAVO_MODE_IS_UNDEFINED] [NATIVE] 2018-11-29 18:29:49,528 [vert.x-eventloop-thread-5] ERROR [admins-MacBook-Pro.local] io.vertx.core.impl.ContextImpl - Unhandled exception
java.lang.AssertionError: Message map should be empty, but was {50=50, 52=52}. Expected true
	at io.vertx.ext.unit.impl.TestContextImpl.reportAssertionError(TestContextImpl.java:467)
	at io.vertx.ext.unit.impl.TestContextImpl.assertTrue(TestContextImpl.java:307)
	at com.anyclip.weavo._test.gk.ShutdownTest.lambda$4(ShutdownTest.java:54)
	at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:885)
	at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:844)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

For now this is really blocking for my project. Is it possible to do something with this?
For example:




Send a call to other nodes, that current node is leaving
And just then start all shutdown procedure





enable some retry mechanism on the event bus and track closed connections or something..





Unsubscribe from receiving messages
push to verticles all the messages, received by event bus, before vertx instance will be shutted down
In this case I can fail the messages manually
stop the event bus and stop the instance

I will be very grateful for any help!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2739
Undocumented breaking change in HttpServerResponse::setChunked(true) from 3.5.3 to 3.5.4 · Issue #2739 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Vertx 3.5.3 chunked transfer encoding could be enabled by

Call response.setChunked(true)
Call response.headers().setAll(responseToProxiedRequest.headers().remove("content-length"))

In Vertx 3.5.4 the above call order breaks with

IllegalStateException: You must set the Content-Length header to be the total size of the message body BEFORE sending any data if you are not using HTTP chunked encoding.
Please note that headers().remove("content-length") was not a requirement for getting/retaining chunked transfer encoding in 3.5.3. That call just adds clarity by leading to an IllegalStateException whenever chunked transfer encoding is not enabled.

Vertx 3.5.4 require that the call order be reversed. I.e.

Call response.headers().setAll(responseToProxiedRequest.headers().remove("content-length"))
Call response.setChunked(true)

I would not expect the behaviour of 3.5.4 unless chunked transfer-encoding was enabled and disabled by setting the appropriate header (with a call to header().set("transfer-encoding", "chunked")), rather than controlling it through a separate instance method.
Given the presence of the setChunked instance method , I do expect the behaviour of 3.5.3: That only explicit calls to setChunked can enable and disable chunked transfer encoding, and that the appropriate transfer-encoding header be set accordingly.
According to https://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.4.4:

Messages MUST NOT include both a Content-Length header field and a non-identity transfer-coding. If the message does include a non-identity transfer-coding, the Content-Length MUST be ignored

Neither Vertx 3.5.3, nor 3.5.4 removed or prevented the content-length header from being set when chunked transfer encoding is enabled. I don't see a problem with it, because I can control this behaviour in my implementation. But if you really do feel that it is desireable for headers().setAll to be an implicit call to setChunked(false),  then I strongly believe you should do the same whenever the content-length header is set. I also believe you should change the documentation by

Adding a note about this breaking change in the release notes for 3.5.4
Changing the documentation for both ::setChunked and headers::setAll to clearly state that calls to these methods are inter-dependent as well as document the impact of different method call ordering.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2740
EventBusMetrics  add messageSent(String address, Boolean publish, Boolean local, Boolean remote, ServerID sid)  method · Issue #2740 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add
void messageSent(String address, Boolean publish, Boolean local, Boolean remote, ServerID sid) 
method to the EventBusMetrics class to help track the delivery of event bus messages across cluster nodes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2741
HttpClient request/response uses Handler<AsyncResult<HttpClientResponse>> pattern · Issue #2741 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient request/response methods are using in Vert.x 3 patterns using an Handler<HttpClientResponse>. For obvious reasons we want to use instead Handler<AsyncResult<HttpClientResponse>> in Vert.x 4. The WebClient provides already this in Vert.x 3.x and it is the advocated client for high level operations so we don't need to provide replacement for these operations, only to deprecate them.
Pull request for Vert.x 3 that deprecates the methods of the HttpClient with a mention for removal in Vert.x 4:

#2743

A bunch of pull requests for the Vert.x 4 stack that upgrade the usage of the handler:

vert-x3/vertx-lang-ruby#37
vert-x3/vertx-lang-kotlin#100
vert-x3/vertx-unit#67
vert-x3/vertx-rx#169
vert-x3/vertx-dropwizard-metrics#84
vert-x3/vertx-micrometer-metrics#67
vert-x3/vertx-sync#33
vert-x3/vertx-circuit-breaker#32
vert-x3/vertx-http-service-factory#10
vert-x3/vertx-service-discovery#101
vert-x3/vertx-auth#252
vert-x3/vertx-tcp-eventbus-bridge#45
vert-x3/vertx-web#1094
vert-x3/vertx-config#62
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2742
HttpClient request/response uses Handler<AsyncResult<HttpClientResponse>> pattern - fixes #2741 by vietj · Pull Request #2742 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think the PR is quite obvious, that being said it's good to have somebody looking at it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2743
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2744
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2745
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2746
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2747
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2748
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2749
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2750
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2751
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2752
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2753
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2754
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2755
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2756
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2757
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2758
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2759
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2760
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2761
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2762
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2763
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2764
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2765
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2766
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2767
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2768
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2769
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2770
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2771
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2772
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2773
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2774
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2775
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2776
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2777
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2778
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2779
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2780
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2781
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2782
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2783
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2784
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2785
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2786
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2787
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2788
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2789
Virtual memory usage is high, when Java Heap or real memory usage is much lower · Issue #2789 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello guys, Vertx is an awesome piece of software, thanks for your effort.
However I have a problem which I described in the subject. My web server is extremely simple and the only thing it does is sends received URL to Kafka after basic validation. I understand that Kafka client might be the root cause, but I have found similar issue with like https://www.tikalk.com/posts/2018/04/30/vertx-memory-usage-with-intensive-network/
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2790
JsonParser should not resume or pause the source wrapped read stream when it is ended · Issue #2790 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We have implemented streaming Json from an AsyncFile as shown in this example. This has worked nicely before 3.6.0 but now results in a java.lang.IllegalStateException: File handle is closed in 3.6.2.
Based on some debugging, the following happens:

io.vertx.core.parsetools.impl.JsonParserImpl#end calls io.vertx.core.parsetools.impl.JsonParserImpl#checkPending which will call the endHandler.
endHandler closes the AsyncFile
io.vertx.core.streams.ReadStream#resume is called (on the already closed stream)
the exceptionHandler is called with the above exception

As far as I can see, issue #2584 and PR #2583 seems to be related.
Is the example outdated? Should we handle file closing in some other way?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2791
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2792
Stream pipe API · Issue #2792 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the advocated way to transfer data between streams is to use the pump API. This API only cares about transferring data and leave the aspects of stream life cycle and error management to the developer, which can be difficult to implement when a write stream is obtained asynchronously.
The stream API is a new API that will pipe a read stream to a write stream using the well known pump mechanism and will also take care of other aspects to provide a simple and effective solution to the developer.
The previous pump API will still be supported but not advocated anymore in the doc in favor of the pipe API.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2793
Stream pipe API - fixes #2792 by vietj · Pull Request #2793 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the CI does not pass because this PR has a codegen modification to allow this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2794
HttpServer closes the connection prematurely when sending a large file with HTTP/1.1 without keep-alive · Issue #2794 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version:  3.6.2
When sending a file larger than 1MB the server will prematurely disconnect if the client has set the Connection header to close.
Here is the reproduction -- https://gist.github.com/sfitts/052d0805ad4d70af701ecef7ce9c8a7f
See also the discussion here -- https://groups.google.com/forum/#!topic/vertx/vL49FCY2mG4
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2795
HttpServer handles incorrectly pipelined server response with sendFile · Issue #2795 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpServerResponse will signal that the connection can be written to the server after calling sendFile leading the server to process a next request and interact with the response concurrently with the send file operation. Instead the response should signal the end when the file has been sent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2796
provide fix and test for #2790 by KowalczykBartek · Pull Request #2796 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good, but can we have the same test using the FakeStream instead that reproduces the same asynchrony than AsyncFile ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2797
The uri() method and the absoluteURI() method in HttpServerRequestImpl are inconsistent in judging the legality of uri. · Issue #2797 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 3.6.2
This is a very simple server code
    public void start() throws Exception {
        vertx.createHttpServer().requestHandler( req -> {
            System.out.println( req.uri());
            System.out.println( req.absoluteURI());

            req.response()
                    .putHeader("content-type", "text/plain")
                    .end("Hello from Vert.x!");
        }).listen(8080);
    }
When I request the address http://127.0.0.1:8080/test?a={1} in the browser, the uri() method will not report an error, but the absoluteURI() print error will return a null value. This inconsistent performance is not reasonable.
The contents of the error are as follows:
/test?a={1}
17:26:41.548 [vert.x-eventloop-thread-0] ERROR io.vertx.core.http.impl.HttpServerRequestImpl - Failed to create abs uri
java.net.URISyntaxException: Illegal character in query at index 8: /test?a={1}
	at java.net.URI$Parser.fail(URI.java:2848)
	at java.net.URI$Parser.checkChars(URI.java:3021)
	at java.net.URI$Parser.parseHierarchical(URI.java:3111)
	at java.net.URI$Parser.parse(URI.java:3063)
	at java.net.URI.<init>(URI.java:588)
	at io.vertx.core.http.impl.HttpUtils.absoluteURI(HttpUtils.java:362)
	at io.vertx.core.http.impl.HttpServerRequestImpl.absoluteURI(HttpServerRequestImpl.java:379)
...
...
...
null

The first line is the result returned by the uri() method.
The last line is the result returned by the absoluteURI() method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2798
io.vertx.core.VertxException: Thread blocked · Issue #2798 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there,
i am already using vertx.executeBlocking() but i always get this exception:
Jan 13, 2019 4:18:24 PM io.vertx.core.impl.BlockedThreadChecker
WARNUNG: Thread Thread[vert.x-worker-thread-1,5,main] has been blocked for 5644 ms, time limit is 0
io.vertx.core.VertxException: Thread blocked
	at sun.misc.Unsafe.park(Native Method)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)
	at com.jukusoft.mmo.gs.region.RegionContainerImpl.lambda$init$3(RegionContainerImpl.java:220)
	at com.jukusoft.mmo.gs.region.RegionContainerImpl$$Lambda$116/89177479.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:273)
	at io.vertx.core.impl.ContextImpl$$Lambda$10/1232703108.run(Unknown Source)
	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
	at io.vertx.core.impl.TaskQueue$$Lambda$9/303846650.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)

Jan 13, 2019 4:18:24 PM io.vertx.core.impl.BlockedThreadChecker
WARNUNG: Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 5593 ms, time limit is 0
io.vertx.core.VertxException: Thread blocked
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:170)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at java.io.FilterInputStream.read(FilterInputStream.java:107)
	at org.apache.commons.net.io.Util.copyStream(Util.java:102)
	at org.apache.commons.net.ftp.FTPClient._retrieveFile(FTPClient.java:1920)
	at org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1885)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadSingleFile(FTPUtil.java:41)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:102)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:96)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:96)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:96)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:96)
	at com.jukusoft.mmo.gs.region.ftp.FTPUtil.downloadDirectory(FTPUtil.java:60)
	at com.jukusoft.mmo.gs.region.RegionContainerImpl.lambda$downloadFilesFromFtp$5(RegionContainerImpl.java:256)
	at com.jukusoft.mmo.gs.region.RegionContainerImpl$$Lambda$112/113015548.handle(Unknown Source)
	at com.jukusoft.mmo.gs.region.ftp.NFtpFactory.lambda$create$1(NFtpFactory.java:52)
	at com.jukusoft.mmo.gs.region.ftp.NFtpFactory$$Lambda$114/113714097.handle(Unknown Source)
	at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:79)
	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:289)
	at io.vertx.core.impl.ContextImpl$$Lambda$11/2011477534.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
	at io.vertx.core.impl.ContextImpl$$Lambda$12/727546868.run(Unknown Source)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)
source code:
//download files for region from ftp server (in another thread to avoid blocking og this thread)
vertx.executeBlocking(future -> {
    downloadFilesFromFtp();//this operation takes about 6-10 seconds
    future.complete();
}, (Handler<AsyncResult<Void>>) event -> {
    //don't do anything here
});
For explanaition:
I download some files from ftp server and this takes some time. So i have also tried to set the checker interval:
vertxOptions.setBlockedThreadCheckInterval(30000);
but this doesn't have any effect.
It is a clustered vertx instance (source file).
What can i do to solve this problem? Or how can i increase the limit?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2799
Feature Request of webclient : getRedirectedUri()   · Issue #2799 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using web client to get urls . I need to get the redirected uri for further parsing as base url . Thanks in advance . As I investigated, HttpAsyncClient uses a HttpContext to get it:
CloseableHttpAsyncClient httpclient = HttpAsyncClients.custom().build();
            try {
                httpclient.start();
                HttpClientContext localContext = HttpClientContext.create();
                HttpGet request = new HttpGet("https://bit.ly/1eTpSHp");
                request.setHeader("User-Agent", "gis");
                Future<HttpResponse> future = httpclient.execute(request, localContext, null);
                HttpResponse response = future.get();
                String result = IOUtils.toString(response.getEntity().getContent(), StandardCharsets.UTF_8);
                System.out.println("Response: " + response.getStatusLine().getStatusCode() + ":" + result.length());
                HttpHost target = localContext.getTargetHost();
                List<URI> redirectLocations = localContext.getRedirectLocations();
                for (URI u : redirectLocations) {
                    System.out.println("location: " + u.toASCIIString());
                }
                URI location = URIUtils.resolve(request.getURI(), target, redirectLocations);
                System.out.println("Final HTTP location: " + location.toASCIIString());
                // Expected to be an absolute URI
            } finally {
                httpclient.close();
            }

just for reference.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2800
MongoDB rxFindWithOptions returns no results · Issue #2800 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I'm trying to run natural language search. I have collection tag, and that collection has text field, with text index on it.
When I connect via shell, and run the query:
 db.tag.find(
    { $text: { $search: "tag" } },
    { score: { $meta: "textScore" } }
).sort( { score: { $meta: "textScore" } } )
I get expected results back. When I do the same from the vert.x kotlin app:
threadMongoClient.rxFindWithOptions(
            "tag",
            json("\$text" to json("\$search" to msg.body())),
            FindOptions()
                .setSort(json("score" to json("\$meta" to "textScore")))
                .setFields(json("score" to json("\$meta" to "textScore")))
                .setLimit(5))
        ).subscribe({ matches ->
            msg.reply(JsonArray(matches))
        }, { err ->
            log.error("Could not retrieve similar tags", err)
            msg.fail(500, err.message)
        })
I always get 0 results back for the same input  - "tag" string in this case.
Is there some obvious mistake I'm making?
Many thanks for wonderful work!!!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2801
Document that executeBlocking should not be used for long blocking operations · Issue #2801 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently users might use executeBlocking for operations that lasts an indefinite amount of time (e.g using a worker thread to poll a blocking input in a while loop). Add documentation to clarify this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2802
HTTP response sendFile callback · Issue #2802 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add a callback to HttpServerResponse.sendFile so the caller can react to when the file is completely put on the wire.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2803
HTTP2 request/response exception handler should not be called when response is ended · Issue #2803 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When setting an exceptionHandler for a response, it is called with a "connection closed" exception for every HTTP2 request, even when the response has been written and ended properly. This does not happen for HTTP1.1 requests. The following unit test illustrates this problem - it passes for HTTP1.1 and fails for HTTP2. Maybe PR #2319 fixes this.
import io.vertx.core.Future;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpClientOptions;
import io.vertx.core.http.HttpServer;
import io.vertx.core.http.HttpServerOptions;
import io.vertx.core.http.HttpVersion;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunnerWithParametersFactory;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import java.util.List;

@RunWith(Parameterized.class)
@Parameterized.UseParametersRunnerFactory(VertxUnitRunnerWithParametersFactory.class)
public class Http2ConnectionClosedReproducer {

  @Parameterized.Parameters
  public static Iterable<HttpVersion> httpVersions() {
    return List.of(HttpVersion.HTTP_1_1, HttpVersion.HTTP_2);
  }

  @Parameterized.Parameter
  public HttpVersion httpVersion;

  @Test
  public void test(TestContext ctx) {
    var vertx = Vertx.vertx();
    var listenFut = Future.<HttpServer>future();
    
    vertx.createHttpServer(new HttpServerOptions())
      .requestHandler(r -> r.response()
        .exceptionHandler(ctx::fail)
        .end("world!"))
      .listen(0, listenFut);

    listenFut.compose(server -> {
      var requestFut = Future.future();
      vertx.createHttpClient(new HttpClientOptions()
          .setProtocolVersion(httpVersion)
          .setDefaultPort(server.actualPort()))
        .getNow("/hello", r -> r.bodyHandler(body -> {
          ctx.assertEquals("world!", body.toString());
          requestFut.complete();
        }));
      return requestFut;
    }).setHandler(ctx.asyncAssertSuccess());
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2804
Use HttpClientRequestImpl as the logger name in HttpClientRequestImpl.java by jahanzebbaber · Pull Request #2804 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2805
Use HttpClientRequestImpl as the logger name in HttpClientRequestImpl… by jahanzebbaber · Pull Request #2805 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Not sure how to fix ip-validation check. I have signed the ECA before. Resigned it again. Also not able to see any details regarding the ip-validation check:
https://dev.eclipse.org/eclipse-webhook/services/status_details.php?id=5c48098f32584
Current status
Validation status unavailable. Contact support.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2806
Vertx  call RPC， no Handler for address exception · Issue #2806 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I'm using vertx-service-discovery for rpc service. And use vertx-ignite for cluster. The vertx version is 3.5.4.
I also got this exception: NO HANDLER (-1) for address , it appears sometime, not always.
the exception showed below：
LOCAL_SYSTEM_TIME=[2019-01-23 18:14:56.257],THREAD=[vert.x-eventloop-thread-0],LOG_LEVEL=[INFO ],CLASS=[c.e.s.m.b.p.r.DynamicMessageProcessRPC.lambda$send$1:125],LOG_VERSION=[V1],LOG_FLAG=[BIZ],SYSTEM_TRACEID=[111],MODULE_NAME=[SPLITTER],SERVICE_NAME=[BUSINESS_SERVICE],CONTAINER ID=[iZuf68d2sa0635xqj2s1bqZ],TYPE=[FUNCTION],STATUS=[ING],DESCRIPTION=[DynamicMessageProcessRPC send(), success to get the consumer ],PARAMS=[{"location":{"endpoint":"_ComService_192.168.16.33"},"metadata":{"service.interface":"com.eigpay.splitter.infrastructure.communication.provider.chief.message.MessageProvider"},"name":"MessageProvider_ComService_192.168.16.33","status":UP,"registration":"e2519632-c7e7-4e05-acde-c6a4cbaae514","type":"eventbus-service-proxy"},MessageProvider_ComService_192.168.16.33]
LOCAL_SYSTEM_TIME=[2019-01-23 18:14:56.329],THREAD=[vert.x-eventloop-thread-0],LOG_LEVEL=[INFO ],CLASS=[c.e.s.m.b.p.r.DynamicMessageProcessRPC$1.handle:150],LOG_VERSION=[V1],LOG_FLAG=[BIZ],SYSTEM_TRACEID=[111],MODULE_NAME=[SPLITTER],SERVICE_NAME=[BUSINESS_SERVICE],CONTAINER ID=[iZuf68d2sa0635xqj2s1bqZ],TYPE=[FUNCTION],STATUS=[ING],DESCRIPTION=[DynamicMessageProcessRPC send(), forward message fails, retrying],PARAMS=[{"value":1},(NO_HANDLERS,-1) No handlers for address _ComService_192.168.16.33
at io.vertx.core.eventbus.impl.HandlerRegistration.sendAsyncResultFailure(HandlerRegistration.java:127)
at io.vertx.core.eventbus.impl.EventBusImpl.deliverMessageLocally(EventBusImpl.java:368)
at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.lambda$sendOrPub$4(ClusteredEventBus.java:245)
at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:79)
at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:289)
at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:339)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:745)
]
I registered in the eventbus address “_comservice_192.168.1.33” ，bond with the service name “messagepriovder_comservice_192.168.1.33” . when the com service node(192.168.1.33) started, the rpc service will be published. Then the biz service node will find the rpc service by service name rhen call the rpc interface.  The com service node and biz service node are clustered by ignite with tcpvmfinder configurations.
I succeed to get the rpc service consumer , but when calling the rpc interface, the error  appears.
I got very confused , and test some days , have not fixed this. Could anyone offer s
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2807
Allow ObjectMapper to be configured on a per Vertical basis · Issue #2807 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There are cases where you want to setup a Verticle with a specific ObjectMapper configurations (additional configs, modules, etc).
But we dont want to change the global mapper, but we are also using items (like the Web Client) that use the global mapper.
Would be great if Abstract Verticle allowed you to control the specific mapper being used.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2808
Avoid excessive handler creation while Send-Reply which slowes down communication (Cluster Mode) · Issue #2808 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We have to deal with many messages send via send/reply strategy over a clustered eventbus. Vertx registeres a new handler for each call which causes in heavy load in cluster manager (we use zookeeper cluster manager) which has to create a new entry for each message and propagate it to all cluster memebers (< 600 instances). This could be avoid and we implement our own Reply Strategy which uses send strategy of vertx inside. We register only one reply consumer/handler while start of each verticle/eventbus instance. It's address is send as header via send and while reply this address is used.
maybe its possible to integrate this into vertx core.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2809
Adding close hook make it impossible to fail verticle deploy · Issue #2809 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This code:
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.core.Vertx;

public class Main {
  public static void main(String[] args) {
    Vertx vertx = Vertx.vertx();
    vertx.deployVerticle(new A());
  }

  static class A extends AbstractVerticle {
    @Override
    public void start() {
      vertx.deployVerticle(new B(), deployResult -> {
        if (deployResult.succeeded()) {
          System.out.println("deployed");
        } else {
          System.out.println("not deployed");
        }
      });
    }
  }

  static class B extends AbstractVerticle {
    @Override
    public void start(Future<Void> startFuture) {
      vertx.getOrCreateContext().addCloseHook(hook -> {
        System.out.println("close hook handler is called");
      });
      startFuture.fail("Something is wrong");
    }
  }
}
Actual behaviour
prints:
close hook handler is called

Expected behaviour
prints:
close hook handler is called
not deployed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2810
API design flaw - conflicting interests between requestHandler and router? · Issue #2810 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have this error:
java.lang.IllegalStateException: Set request or websocket handler first
        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:196)
        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:191)
        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:187)
        at huru.MainVerticle.start(MainVerticle.java:206)
        at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.j
here is the culprit (the main verticle):
package huru;

import huru.middleware.JWTHandler;
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.eventbus.EventBus;
import io.vertx.core.http.HttpMethod;
import io.vertx.core.http.HttpServerRequest;
import io.vertx.core.http.HttpServerResponse;
import io.vertx.core.json.JsonObject;
import io.vertx.ext.sql.SQLRowStream;
import io.vertx.ext.web.Router;
import io.vertx.ext.asyncsql.PostgreSQLClient;
import io.vertx.ext.jdbc.JDBCClient;
import io.vertx.ext.sql.ResultSet;
import io.vertx.ext.sql.SQLClient;
import io.vertx.ext.sql.SQLConnection;
import io.vertx.ext.web.RoutingContext;
import org.apache.log4j.Logger;
import io.vertx.core.Future;
import io.vertx.ext.web.handler.BodyHandler;


public class MainVerticle extends AbstractVerticle {
  
  private final Logger log = Logger.getLogger(MainVerticle.class);
 
  @Override
  public void start(Future<Void> f) throws Exception {
    
    super.start();
    
    final Router router = Router.router(vertx);
    router.route().handler(BodyHandler.create());
    router.route().handler(new JWTHandler());
    
    final EventBus eventBus = vertx.eventBus();
    
    eventBus.consumer("address", receivedMessage -> {
      log.debug("Received message: " + receivedMessage.body());
      receivedMessage.reply("my reply");
    });
    
    router.route(HttpMethod.GET, "/hello/:name").handler(ctx -> {
      // Retrieving request and response objects
      HttpServerRequest request = ctx.request();
      HttpServerResponse response = ctx.response();
      
      String name = request.getParam("name");
 
      response.putHeader("Content-Type", "text/plain");
      response.setChunked(true);
      response.write("Hello " + name);
      response.setStatusCode(200);
      response.end();
    });
    
    router.route("/").handler(ctx -> {
      HttpServerResponse response = ctx.response();
      response
        .putHeader("content-type", "text/html")
        .end("<h1>Hello from non-clustered messenger example!</h1>");
    });
    
    router.post("/send/:message").handler(this::sendMessage);

    router.route().last().handler(ctx -> {
      ctx.response().setStatusCode(404).end();
    });
    
    JsonObject config = new JsonObject()
      .put("username", "postgres")
      .put("password", "postgres")
      .put("database", "oleg")
      .put("host", "localhost")
      .put("port", 5432);
    
    SQLClient client = PostgreSQLClient.createShared(vertx, config);
  
    int port = 3005;
    
    vertx.createHttpServer()
      .exceptionHandler(ctx -> {
        
        log.error("In the exception handler.");
        log.error(ctx.getCause());
        
      })
//      .requestHandler(req -> {
//            the culprit? this request handler is commented out
//      })
      .listen(port, res -> {
        if (res.succeeded()) {
          System.out.println("Server listening on port " + port);
          f.complete();
        } else {
          System.out.println("Failed to launch server");
          f.fail(res.cause());
        }
      });
    
  }
  
}
there seems to be a conflict of interested between
    vertx.createHttpServer()
     .requestHandler(req -> {
            the culprit? this request handler is commented out
      })
and
    final Router router = Router.router(vertx);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2811
how to customize eventloop thread name and calculate how many eventloopContext created · Issue #2811 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
currently:

we create multiple vertx instances in one process
sometimes our code is not so good, that caused create unnecessary eventloopContext

so we extend VertxImpl in vertx 3.5.3 and previous versions (https://github.com/apache/servicecomb-java-chassis/blob/master/foundations/foundation-vertx/src/main/java/io/vertx/core/impl/VertxImplEx.java):

give vertx a name, and make eventloop thread name prefix relate to vertx name
calculate how many eventloopContext created


but when i try this in 3.6.3-SNAPSHOT, i fount that constructor changed from package to private, so i can not do what we want.
someone help me to resolve this? thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2812
Establish a relationship between the vertx thread name and the vertx name - fixes #2811 by wujimin · Pull Request #2812 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the name is too simple, how about threadNamePrefix
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2813
MessageConsumer delivers more items than requested in fetch mode · Issue #2813 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Originally filed as an Rxified consumer issue (vert-x3/vertx-rx#179) but it turns out the MessageConsumer implementation itself is the root cause.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2814
MessageConsumer delivers more items than requested in fetch mode by tsegismont · Pull Request #2814 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think the fix is incorrect as the EventBus flow control tests don't pass anymore, also this fix makes an unecessary to pending when it is empty.
The actual issue of this bug is that the demand is never decreased when a message is processed and adding simply:
        if (demand != Long.MAX_VALUE) {
          demand--;
        }

fixes the issue
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2815
jackson-databind multiple critical CVEs · Issue #2815 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
From org.owasp:dependency-check-maven plugin,
[ERROR] jackson-databind-2.9.7.jar: CVE-2018-19362, CVE-2018-19361, CVE-2018-19360
Bumping to v2.9.8 solves the issue.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2816
Feature/question - access id of current event loop tick · Issue #2816 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am looking for a feature to determine if a method call x is in the same event loop tick as a previous method call y. If it's the same tick, I will use code like this to make sure the call gets run on the next tick:
private void putCallOnNextTickIfNecessary(int previousTickId, Runnable v, Whatever w) {
  
  if(vertx.weAreInNewTick(previousTickId)){
      v.run(w);
      return;
   }

  vertx.runOnContext(new Handler<Void>() {
    public void handle(Void event) {
         v.run(w);
    }
  });
}
this kind of thing will make sure APIs are always sync or always async to make them consisent. Doing this in Node.js is known as avoiding Zalgo.
Anyway, my question is, how do we implement vertx.weAreInNewTick(previousTickId)?
What that method would do is get the id of the current tick and if that id is greater than the previous tick, return true. But not sure if we can do this yet?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2817
Why is NetServerImpl sharing the thread pool pattern · Issue #2817 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The listen method in the NetServerImpl class :
ServerBootstrap bootstrap = new ServerBootstrap();
bootstrap.group(availableWorkers);
sslHelper.validate(vertx);
Threads that handle other IO events and tasks in addition to accept can easily block
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2818
Why does deploy use a new thread callback in the DeploymentManager class · Issue #2818 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Why is it wasteful to create a new context, but only callContext
       ` if (deployCount.incrementAndGet() == verticles.length) {
            reportSuccess(deploymentID, callingContext, completionHandler);
          }`

Isn't that a waste of an eventloop thread? There's nothing to do!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2819
How to trap errors thrown in a verticle - specifically within route handlers · Issue #2819 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I posted this question on StackOverflow:
https://stackoverflow.com/questions/54498162/how-to-catch-errors-in-asynchronous-code-using-vert-x
Maybe I missed it in the docs but I think it's an important feature and I am wondering if Vertx attempts to solve this one.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2820
HttpClient pool does check progress after connections are evicted on idle timeout · Issue #2820 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClient pool on idle timeout might evict connections but does not check progress. It should check progress so the pool is closed and released when it becomes empty.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2821
Handler/callback registration guarantee? · Issue #2821 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Say I have a simple API, like so:
x.doSomething(v -> {
   v.done(null, 5);
});

v.onDone((err,value) ->{
   System.out.println("This gets fired after v.done() is called");
});
Given the above code, my question is - using Vertx with Java, is there a guarantee that v.onDone will be called in a deterministic amount of time?
for example, assume that v.done() looks like:
class V {
  ArrayList<Object> onDoneHandlers  = new ArrayList<>();
  
  public void onDone(Object cb){
    this.onDoneHandlers.add(cb);
  }

  public void done(Object err, Integer result){
     var v = this;
     new Thread(() -> {
        Thread.sleep(50);
        v.onDoneHandlers.get(0).run(err, result)
    }).start();
 }

}
so by using a thread, we delay, in the hopes that  v.onDone() in the same scope will be registered, but I don't believe there is any such guarantee, when it comes to basic Java threads. So I assume that using an event loop will give us such a guarantee, where vanilla Java threads wouldn't.  Is there some documentation that explains how this guarantee works?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2822
Vert.x 3.6.3 wrong access control origin · Issue #2822 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi!
I am working with vertx web and I am migrating from the 3.5.0 to the 3.6.3.
I am now facing a issue that was not present on the previous version: when request is sent to the websocket server there is a CORS problem
Here is the header of the sent request:
Accept: */*
Accept-Encoding: gzip, deflate, br
Accept-Language: fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3
Cache-Control: no-cache
Connection: keep-alive
Host: xxx.xxx.xxx.xxx:yyyy
Origin https://xxx.xxx.xxx.xxx
Pragma: no-cache
Referer: https://xxx.xxx.xxx.xxx/myURL

Here is the former response (3.5.0):
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: https://xxx.xxx.xxx.xxx
Cache-Control: no-store, no-cache, no-transform, must-revalidate, max-age=0
content-length: 77
Content-Type: application/json; charset=UTF-8

Here is the new response (3.6.3):
Access-Control-Allow-Credentials: true
access-control-allow-origin: *
Cache-Control: no-store, no-cache, no-transform, must-revalidate, max-age=0
content-length: 78
Content-Type: application/json; charset=UTF-8

You can see that the parameter access-control-allow-origin is different from one version to another. As a result Firefox tells me it is not allowed to look for a resource which access-control-allow-origin is "*" while Access-Control-Allow-Credentials is set to true.
I might have seen something in the vertx code that changed and could explain that but I do not know if it was on purpose. In the method setCORS() in the class io.vertx.ext.web.handler.sockjs.impl.BaseTransport, the new version does not override the Access-Control-Allow-Origin if already set resulting in the wildcard in the response.
Here is my implementation for opening a server websocket:
Router router = serverFactory.getRouter(port);

router.route()
            .handler(CorsHandler.create("*").allowedHeader("Authorization").allowedHeader("www-authenticate")
           .allowedHeader("Content-Type").allowedHeader("origin").allowedHeader("x-requested-with")
           .allowedHeader("Access-Control-Allow-Origin").allowedHeader("accept").allowedMethod(HttpMethod.OPTIONS)
           .allowedMethod(HttpMethod.GET).allowedMethod(HttpMethod.POST.allowedMethod(HttpMethod.DELETE)
           .allowedMethod(HttpMethod.HEAD));

Yours faithfully
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2823
basicAuthentication joins using hyphen instead of colon · Issue #2823 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For basic authentication, the basicAuthentication method in HttpRequests should be joining the client_id and client_secret with a colon (as the javadoc also suggests), but in reality it joins them using a hyphen, as shown below. It's not the biggest inconvenience, but just thought I'd point that out.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2824
Add a simple TrustStoreOptions & KeyCertOptions that uses static KeyStore by fzakaria · Pull Request #2824 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add a simple implementation of the TrustStoreOptions & KeyCertOptions
that works off of a single KeyStore.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2825
Add fails method to TestContext async object · Issue #2825 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am seeing this:

I would think there would be a method that tells the test case that there is failure?
should we just throw an error?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2826
Feature request - add overload for JsonObject.mapTo · Issue #2826 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I posted this question on SO:
https://stackoverflow.com/questions/54645377/best-way-to-map-jsonobject-to-class-fields
here is the only definition for mapTo:
  public <T> T mapTo(Class<T> type) {
    return Json.mapper.convertValue(this.map, type);
  }
I am thinking another definition which accepts another map which can map the fields before converting? Something like this:
  public <T> T mapTo(Class<T> type, Map<String,String> m) {
    return Json.mapper.convertValue(renameKeys(this.map,m), type);
  }
where renameKeys would rename the keys in this.map to the expected names.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2827
Feature request - non-blocking locking akin to synchronized block · Issue #2827 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I asked this question on SO:
https://stackoverflow.com/a/54607357/1223975
Is there a good way to implement an asynchronous version of synchronized keyword? Obviously synchronous blocks the current thread.
For example:
  public static boolean getLockSync(Runnable r) {

    if (isLocked) {
      r.run();
      return true;
    }

    synchronized (My.lock) {  // this is blocking, could block for more than 1-2 ms
      isLocked = true;
      r.run();
      isLocked = false;
      return false;
    }

  }
I can return a boolean from this block - it's synchronous. Is there a way to do this asynchronously?
Something like this:
  public static void getLockAsync(Runnable r) {

    if (isLocked) {
      CompletableFuture.runAsync(r);
      return;
    }

    Object.onLockAcquisition(My.lock, () -> {  // this is non-blocking
           isLocked = true;
           r.run();
           isLocked = false;
           Object.releaseLock(My.lock);
     });

  }
I made up the Object.onLockAcquisition method, but looking for something like that.
Object.wait() and Object.notify() are for threads, I don't think a non-blocking locking system will play well with traditional synchronization primitives
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2828
Use JsonArray along with JsonObject · Issue #2828 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I looked through the source code, and therefore I believe this is a request not a question.
Say we have a SQLConnection conn:
   conn.query("select * from bagel", res -> {
        JsonObject o = res.result().toJson();
        ctx.response().end(o.toString());
   });
however it's pretty obvious that this query is going to return a list (of rows), so always putting everything in a JsonObject is not very refined. I would hope for something like this instead:
   conn.query("select * from bagel", res -> {
        JsonArray o = res.result().toJsonArray();
        ctx.response().end(o.toString());
   });
but that call doesn't seem to exist. I looked through the source, I see this for toJson();
ResultSetConverter.toJson(this, obj);
which converts into:
  public static void toJson(ResultSet obj, JsonObject json) {
    toJson(obj, json.getMap());
  }
which calls:
public static void toJson(ResultSet obj, Map<String, Object> json) {
    JsonArray array;
    if (obj.getColumnNames() != null) {
      array = new JsonArray();
      obj.getColumnNames().forEach((item) -> {
        array.add(item);
      });
      json.put("columnNames", array);
    }

    if (obj.getNext() != null) {
      json.put("next", obj.getNext().toJson());
    }

    json.put("numColumns", obj.getNumColumns());
    json.put("numRows", obj.getNumRows());
    if (obj.getOutput() != null) {
      json.put("output", obj.getOutput());
    }

    if (obj.getResults() != null) {
      array = new JsonArray();
      obj.getResults().forEach((item) -> {
        array.add(item);
      });
      json.put("results", array);
    }

    if (obj.getRows() != null) {
      array = new JsonArray();
      obj.getRows().forEach((item) -> {
        array.add(item);
      });
      json.put("rows", array);
    }

  }
the above code is very if/elsey - I think it would be nice to see a toJsonArray and toJson method?
if it couldn't be converted to an array, it would throw an Exception, which is fine. If it's an array and you attempt to convert it to a single object, then it would also throw.
Is this a good idea? All I see right now is:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2829
Should be a json() convenience method on ctx.response() · Issue #2829 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am looking this:

I just want to write json to the response. I assume the right way to do this now is something like:
 ctx.response().end(r.result().toJson().toString());
but I wonder if there could exist a json() method or sendJson() method that could accept various different kinds of JSON library types and handle them.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2830
Introduce local methods in SharedData for async map, counter and lock by pk-work · Pull Request #2830 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@pk-work thanks for the PR. This is a good start. To complete it we need:

shared data documentation update
test (like two clustered nodes may acquire a local lock with same name at the same time)

I would also prefer not to break the feature into pieces (local locks in 3.7 and the rest in 4.0). Can you also contribute the changes for local counters and local async map?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2831
HttpClientRequest.get/getNow is deprecated, what should I use instead? · Issue #2831 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2832
Add static method JsonObject.from() · Issue #2832 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I believe this can create a JsonObject from a string:
 JsonObject o = new JsonObject(`{"foo":"bar"}`);
however, I expected this to work:
 JsonObject o = JsonObject.from(`{"foo":"bar"}`);
but there is no from() static method...this would be a nice-to-have.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2833
TrustOptions and KeyCertOptions should define a copy() method instead of clone() · Issue #2833 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently TrustOptions and KeyCertOptions interface defines a clone() method without extending the Cloneable interface. The method should be deprecated in 3.x with a new copy() method and the copy() method should delegate to the clone() method as default implementation. The clone() method is removed in 4.0.
This method is not intended to be used by developers, usually it is used internally when an options object is copied and this is used to implement a polymorphic copy.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2834
Fix impossible cast and equals checks for incompatible operand by hiroakiy · Pull Request #2834 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
FindBugs-3.0.1 (http://findbugs.sourceforge.net/) reported BC_IMPOSSIBLE_CAST and EQ_CHECK_FOR_OPERAND_NOT_COMPATIBLE_WITH_THIS warnings on master:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2835
Fix impossible cast and equals checks for incompatible operand by hiroakiy · Pull Request #2835 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The ip-validation check failed even though I had signed the ECA before I opened this PR. Could someone please help with this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2836
Tracing exp5 by vietj · Pull Request #2836 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2837
add `toJson()` to `VertxOptions` by jo5ef · Pull Request #2837 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
actually this has just been added by this commit a8d751e
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2838
Cleanup in HTTP server/client options · Issue #2838 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP server/client have many discrepencies and the documentation is inconsistent with the spec for the WebSocket compression extensions.
In addition a few methods needs to be actually renamed to have proper getters and a couple of constants for default parameter value are inconsistent with their corresponding attribute.

HttpClientOptions

DEFAULT_TRY_USE_WEBSOCKET_DEFLATE_FRAME → DEFAULT_TRY_USE_PER_FRAME_WEBSOCKET_COMPRESSION
DEFAULT_TRY_USE_WEBSOCKET_PERMESSAGE_DEFLATE → DEFAULT_TRY_USE_PER_MESSAGE_WEBSOCKET_COMPRESSION
DEFAULT_WEBSOCKET_COMPRESSION_ALLOW_CLIENT_NO_CONTEXT → DEFAULT_WEBSOCKET_ALLOW_CLIENT_NO_CONTEXT
DEFAULT_WEBSOCKET_COMPRESSION_REQUEST_SERVER_NO_CONTEXT → DEFAULT_WEBSOCKET_REQUEST_SERVER_NO_CONTEXT
tryWebsocketDeflateFrameCompression()
tryUsePerMessageWebsocketCompression()


HttpServerOptions

DEFAULT_WEBSOCKET_SUPPORT_DEFLATE_FRAME_COMPRESSION → DEFAULT_PER_FRAME_WEBSOCKET_COMPRESSION_SUPPORTED
DEFAULT_WEBSOCKET_SUPPORT_PERMESSAGE_DEFLATE_COMPRESSION → DEFAULT_PER_MESSAGE_WEBSOCKET_COMPRESSION_SUPPORTED
DEFAULT_WEBSOCKET_COMPRESSION_ALLOW_SERVER_NO_CONTEXT → DEFAULT_WEBSOCKET_ALLOW_SERVER_NO_CONTEXT
DEFAULT_WEBSOCKET_COMPRESSION_PREFERRED_CLIENT_NO_CONTEXT → DEFAULT_WEBSOCKET_PREFERRED_CLIENT_NO_CONTEXT
perFrameWebsocketCompressionSupported() → getPerFrameWebsocketCompressionSupported()
perMessageWebsocketCompressionSupported() → getPerMessageWebsocketCompressionSupported()
websocketCompressionLevel() → getWebsocketCompressionLevel()
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2839
SSLEngineOptions should define a copy() method instead of clone() · Issue #2839 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently SSLEngineOptions class defines a clone() method without extending the Cloneable interface. The method should be deprecated in 3.x with a new copy() method and the copy() method should delegate to the clone() method as default implementation. The clone() method is removed in 4.0.
This method is not intended to be used by developers, usually it is used internally when an options object is copied and this is used to implement a polymorphic copy.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2840
Remove equals/hashCode from options · Issue #2840 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently some options classes define equals/hashCode methods with tests. There is no real purpose for such methods and such implementations require to be implemented / tested. The equals method is used in some tests (for instance to assert copy constructors) but this can be replaced by comparing the json version of the options.
We can remove such methods which are not really necessary and this will simplify the implementation of vertx options and be less error prone synchronising the implementation with the actual options fields (which does not happen for json as we generate them).
Users code should not rely on these methods, this will only be removed in Vert.x 4 however.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2841
fix logging to system out and err by zyclonite · Pull Request #2841 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj do need something else?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2842
Context tracing  · Issue #2842 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Support context tracing in a Vert.x runtime.
See also https://github.com/vert-x3/wiki/wiki/RFC:-context-tracing
Goals

trace an activity or flow attached to the current Vert.x context (which implies it can be statically retrieved using a thread local using the Vert.x context)
hooks for transport context propagation (HTTP client/server, event-bus consumer/producer)
tracing management, i.e the ability to start/end an activity for third-party integration

Non goals

generic framework for tracing arbitrary continuations
thread local like registries

Changes

allow to shallow duplicate and attach local data to a io.vertx.core.Context, this creates a new context which shares the same state than its creating context (same event-loop, same attribute map, same concurrency, etc...).
add a local map storage on the context, that is used to store state to distinguish contexts (i.e it can store a span id, etc...)
add an event-driven tracer SPI (that can be configured or discovered) for integration with external tracing systems (tracing clients such as Zipkin, OpenTracing, etc...)
modify server implementations so that contexts are created when necessary

per HTTP server request
per event-bus message received
etc...



Not covered by this issue (i.e todo)

integration of other Vert.x middleware with the tracer SPI so their activity can be traced
integration with tracing clients
per verticle tracing configuration (not planned)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2843
Context tracing - fixes #2842 by vietj · Pull Request #2843 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR breaks a few internal API, so the stack needs to be checked after merge
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2844
CLI parser should be case-sensitive · Issue #2844 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When using the CLI API for parsing command-line parameters I noticed that the shortName for Options are case-insensitive.  I wouldn't have expected this behavior by default, and didn't see this behavior documented anywhere.  I recall working with other command-line tools which accept single-character ("shortName") options in both uppercase and lowercase forms (i.e. ./someTool -a someValue -A someOtherValue).
Here's a quick test case demonstrating this behavior (short names):
    @Test
    public void testCliOptionShortNamesAreCaseSensitive() {
        CLI cli = CLI.create("test")
                .addOption(new Option().setShortName("a").setLongName("lowercase"))
                .addOption(new Option().setShortName("A").setLongName("uppercase"));

        String lowercaseValue = "someValue";
        String uppercaseValue = "someOtherValue";

        CommandLine commandLine = cli.parse(Arrays.asList("-a", lowercaseValue,
                                                          "-A", uppercaseValue));

        Assert.assertEquals(lowercaseValue, commandLine.getOptionValue("a"));
        Assert.assertEquals(uppercaseValue, commandLine.getOptionValue("A"));
    }

org.junit.ComparisonFailure: 
Expected :someOtherValue
Actual   :someValue

And here's another, where I pass the long names into commandLine.getOptionValue():
    @Test
    public void testCliOptionLongNamesAreCaseSensitive() {
        CLI cli = CLI.create("test")
                .addOption(new Option().setShortName("a").setLongName("lowercase"))
                .addOption(new Option().setShortName("A").setLongName("uppercase"));

        String lowercaseValue = "someValue";
        String uppercaseValue = "someOtherValue";

        CommandLine commandLine = cli.parse(Arrays.asList("-a", lowercaseValue,
                                                          "-A", uppercaseValue));

        Assert.assertEquals(lowercaseValue, commandLine.getOptionValue("lowercase"));
        Assert.assertEquals(uppercaseValue, commandLine.getOptionValue("uppercase"));
    }

java.lang.AssertionError: 
Expected :someOtherValue
Actual   :null

Interestingly enough, if I pass the full long name representations into cli.parse(), and use the full long names when retrieving the values via commandLine.getOptionValue(), then I get the expected behavior (test passes):
    @Test
    public void testCliOptionLongNames() {
        CLI cli = CLI.create("test")
                .addOption(new Option().setShortName("a").setLongName("lowercase"))
                .addOption(new Option().setShortName("A").setLongName("uppercase"));

        String lowercaseValue = "someValue";
        String uppercaseValue = "someOtherValue";

        CommandLine commandLine = cli.parse(Arrays.asList("--lowercase=" + lowercaseValue,
                                                          "--uppercase=" + uppercaseValue));

        Assert.assertEquals(lowercaseValue, commandLine.getOptionValue("lowercase"));
        Assert.assertEquals(uppercaseValue, commandLine.getOptionValue("uppercase"));
    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2845
Remove deprecated  Metrics#isEnabled() method · Issue #2845 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Remove this SPI internal method that has been marked as deprecated and never really used/implemented.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2846
Remove deprecated NetServerOptions#isClientAuthRequired() · Issue #2846 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This method has been deprecated a long time ago and replaced by NetServerOptions#clientAuth enumerated field.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2847
Remove deprecated VertxOptions#fileResolverCachingEnabled · Issue #2847 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This method is replaced by the nested FileSystemOptions#fileCachingEnabled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2848
i dont unrestand this behavior · Issue #2848 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@OverRide
public void start(Future future) throws Exception {
System.out.println("start : "+Thread.currentThread().getName());
vertx.setPeriodic(1000,res->{
System.out.println("1 : "+Thread.currentThread().getName());
try {
Thread.currentThread().sleep(2000);
} catch (InterruptedException e) {
e.printStackTrace();
}
});
vertx.setPeriodic(400 , res->{
System.out.println("2 : " + Thread.currentThread().getName());
});
future.complete();
}
the second setPriodic sync with first setPriodic ?????????????????
if first setPrioic have a long time operations why the second setPriodic must w8 for it.
this is a worker verticle ,
DeploymentOptions.setWorker(true)
sorry my english is not good.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2849
i dont underestand this behavior · Issue #2849 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@OverRide
public void start(Future future) throws Exception {
System.out.println("start : "+Thread.currentThread().getName());
vertx.setPeriodic(1000,res->{
System.out.println("1 : "+Thread.currentThread().getName());
try {
Thread.currentThread().sleep(2000);
} catch (InterruptedException e) {
e.printStackTrace();
}
});
vertx.setPeriodic(400 , res->{
System.out.println("2 : " + Thread.currentThread().getName());
});
future.complete();
}
verticle is worker verticle , DeplpymentOptions().setWorker(true).
why the second operation (setPriodic) synced with first.
if the first operation have a long time process why the second operation must w8ing for it , while we used worker thread and worker threads used for long operation.
plz explain this behavor , sorry my english is not good.TY.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2850
Inbound buffer should compare strictly to the high water mark for writability · Issue #2850 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the InboundBuffer uses a lower or equals comparison to the high water mark when checking the buffer writability. It should use a strict bound, so a buffer with a zero high water mark  will reported to be full when the buffer is paused and there is no demand
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2851
InboundBuffer should call the drain handler only during a drain call · Issue #2851 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the drain handler can be called when writing to the InboundBuffer as the InboundBuffer will append the elements to the queue when it receives elements and is already emitting and the internal buffer is full.
Instead writing to the internal buffer should always succeed when there is demand and the result of the write operation should only be based on the high water mark and the size of the internal queue instead of being based previously on the high water mark only.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2852
Delay the end handler notification when an stream end handler is called · Issue #2852 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In 3.6, the stream contract was changed to pause only the event notification and not the end handler notification. The assumption was that pause only concerns the data and that a stream could end when there is no demand for its elements.
This issue restores the previous behaviour and add test for this behavior (it was actually inconsistentin the codebase).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2853
Set verticle deployment completion handler early for blocking worker case by xkr47 · Pull Request #2853 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Before, the handler for startFuture was only registered after Verticle.start(startFuture) returned. However in case the verticle is a worker verticle it should be allowed to block indefinitely and still communicate that it has started successfully (before it starts blocking).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2854
fix logging to system out and err by zyclonite · Pull Request #2854 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj please restart ci build, this is the logging fix for 3.7 you merged on master some weeks ago
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2855
Does not get response from second request, while replying to eventbus requests from websocket client handler · Issue #2855 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Only getting one response, when processing the event bus message, (reply is from websocket client handler.)
public class WorkerVerticle extends AbstractVerticle {
    private WebSocket webSocket;

    @Override
    public void start(Future<Void> startFuture) {
        vertx.eventBus().<JsonObject>consumer("/processRequest")
                .toFlowable()
                .subscribe(this::processRequest);

        vertx.createHttpClient().websocket(9000, "localhost", "/requestURL", webSocket -> {
            System.out.println("Connected to server");
            this.webSocket = webSocket;
        });
        startFuture.complete();
    }

    private void processRequest(Message<JsonObject> message) {
        webSocket.writeBinaryMessage(Buffer.buffer(constructRequest(message).toString()));
        webSocket.handler(res -> {
            System.out.println(res.toString());
            message.reply(constructResponse(res));
        });
    }
}

Getting reply only for the first message, all other requests which are sent via eventbus are getting timeout after 30 seconds.
Using Vert.x 3.6.3
Stuck with this for a very long time. Any help would be greatly appreciated !!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2856
Can not close file while upload empty file or zero size file · Issue #2856 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
reproduce step

start upload server sample in vertx-examples.
don't choose file or choose empty file(size is 0) and upload
after upload, check program's open file with lsof( on linux ) or processexplore(on windows)
can see the remain uploaded file handle




preliminary analysis

it seems that the HttpServerFileUploadImpl.streamToFileSystem does not set the file variable,  it's null, and can not close while handleComplete. But I'm not sure about it now.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2857
reproduce step for issue 2856 scenario 1(zero file) by fishjam · Pull Request #2857 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
what version did you try with ?
…
 On 1 Mar 2019, at 09:41, fishjam ***@***.***> wrote:

 can not close the file handle if upload empty or zero size file
 When my test:
 Starting test: Http1xTest#testFormUploadZeroFile
 Unhandled exception
 java.lang.AssertionError: Issue: 2856, if it's null for zero file, can not close the file

 ....

 after streamToFileSystem succeeded, ***@***.***

  <https://user-images.githubusercontent.com/1870684/53626369-7e891f80-3c40-11e9-9a0c-33041e53e8bf.png>
 You can view, comment on, or merge this pull request online at:

   #2857 <#2857>
 Commit Summary

 reproduce step for issue 2856 scenario 1:
 File Changes

 M src/main/java/io/vertx/core/http/impl/HttpServerFileUploadImpl.java <https://github.com/eclipse-vertx/vert.x/pull/2857/files#diff-0> (3)
 M src/test/java/io/vertx/core/http/HttpTest.java <https://github.com/eclipse-vertx/vert.x/pull/2857/files#diff-1> (5)
 Patch Links:

 https://github.com/eclipse-vertx/vert.x/pull/2857.patch <https://github.com/eclipse-vertx/vert.x/pull/2857.patch>
 https://github.com/eclipse-vertx/vert.x/pull/2857.diff <https://github.com/eclipse-vertx/vert.x/pull/2857.diff>
 —
 You are receiving this because you are subscribed to this thread.
 Reply to this email directly, view it on GitHub <#2857>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AANxijoWxSXioyNK7xFCJk1UWUjUuTEjks5vSOeigaJpZM4bYh8l>.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2858
Asynchronous handshake of a server WebSocket · Issue #2858 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the server WebSocket handler can decide to accept or reject a WebSocket when it is invoked otherwise it will be accepted when no action has been explicitly taken. Sometimes it is desirable to perform an asynchronous decision (e.g authentication).
This feature provides asynchronous handshake with a setHandshake method accepting a future instance.
server.websocketHandler(websocket -> {
  Future<Integer> fut = Future.future();
  websocket.setHandshake(fut);
  authenticate(websocket, ar -> {
    if (ar.succeeded()) {
      // Terminate the handshake with the status code 101 (Switching Protocol)
      // Reject the handshake with 401 (Unauthorized)
      fut.complete(ar.succeeded() ? 101 : 401);
    } else {
      // Will send a 500 error
      fut.fail(ar.cause());
    }
  });
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2859
HTTP server file upload leaks file descriptors when empty upload streamed to file system · Issue #2859 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP server does not close file descriptors when empty files are streamed to the file system. There is a race happening because the completion check does not pay check that the stream isn't being paused, causing the file opening to happen after the completion leading to the leak.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2860
Fix native BSD transport dependency by FRosner · Pull Request #2860 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
right, can you also make a PR for 3.7 branch ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2861
Fix native BSD transport dependency by FRosner · Pull Request #2861 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
3.7 version of #2860
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2862
reproduce step for issue 2856 scenario 2(client exception) by fishjam · Pull Request #2862 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@fishjam I've added your test and fixed it in #2865
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2863
Internal logging api by tsegismont · Pull Request #2863 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj @jponge there are a lot of files changed (updated imports) but you can review the commits separately
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2864
JSON decoding without knowledge of the content · Issue #2864 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, it's possible to decode content to a JsonObject or a JsonArray, if you know what the actual content is.
But sometimes you receive JSON without knowing the format beforehand, and it would be handy to have methods to decode to the right target object.
An example use case is a GraphQL request: some clients (Apollo) support request batching and then will send you an array of request instead of a single request object. Only by inspecting the content you can determine if the request is batched request or a regular one.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2865
FileUpload streamed file should be closed on error · Issue #2865 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2866
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2867
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2868
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2869
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2870
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2871
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2872
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2873
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2874
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2875
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2876
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2877
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2878
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2879
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2880
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2881
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2882
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2883
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2884
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2885
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2886
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2887
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2888
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2889
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2890
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2891
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2892
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2893
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2894
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2895
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2896
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2897
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2898
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2899
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2900
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2901
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2902
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2903
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2904
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2905
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2906
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2907
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2908
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2909
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2910
Idle timeout does not fail request since 3.6.0 · Issue #2910 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, I recently attempted to up grade our project from vertx 3.5.3 to 3.6.3, but found that idle timeouts no longer fail existing requests. After creating the repro below, I've verified that this seems to have been introduced at 3.6.0.
Using Vertx 3.5.3, the request will have it's exception handler called after ~5 seconds due to the idle timeout. In later versions, the idle timeout does fire and the connection is still closed, but the request's exception handler is not called, and instead the CompletableFuture.get will time out after ~10 seconds.
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpClient;
import io.vertx.core.http.HttpClientOptions;
import io.vertx.core.http.HttpClientRequest;
import io.vertx.core.http.HttpHeaders;
import io.vertx.core.http.HttpMethod;

import java.util.concurrent.CompletableFuture;
import java.util.concurrent.TimeUnit;

public class IdleTimeoutRepro {
    private final static int PORT = 10_000;
    private final static int IDLE_TIMEOUT_SECONDS = 5;

    public static class Server extends AbstractVerticle {
        @Override
        public void start() throws Exception {
            vertx.createHttpServer().requestHandler(req -> {
                req.response()
                        .writeContinue();
            }).listen(PORT);
        }
    }

    public static void main(String[] args) {
        Vertx serverVertx = Vertx.vertx();
        serverVertx.deployVerticle(Server.class.getName());

        CompletableFuture<Void> result = new CompletableFuture<>();
        Vertx clientVertx = Vertx.vertx();
        long startTime = System.currentTimeMillis();
        clientVertx.getOrCreateContext().runOnContext((aVoid) -> {
            HttpClientOptions clientOptions = new HttpClientOptions();
            clientOptions.setIdleTimeout(IDLE_TIMEOUT_SECONDS);
            HttpClient httpClient = clientVertx.createHttpClient(clientOptions);

            HttpClientRequest request = httpClient.request(HttpMethod.GET, PORT, "localhost", "/");
            request.putHeader(HttpHeaders.EXPECT, "100-Continue");
            request.exceptionHandler(result::completeExceptionally);
            request.continueHandler(aVoid2 -> System.out.println("Client received continue"));
            request.handler(resp -> {
                resp.exceptionHandler(result::completeExceptionally);
                resp.bodyHandler(body -> {
                    System.out.println("Received: " + body.toString("ISO-8859-1"));
                    result.complete(null);
                });
            });
            request.end();
        });

        try {
            result.get(IDLE_TIMEOUT_SECONDS * 2, TimeUnit.SECONDS);
        } catch (Exception e) {
            System.out.println("Got exception after " + (System.currentTimeMillis() - startTime) + " ms: " + e);
            e.printStackTrace();
        }

        System.exit(0);
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2911
Verticle based applications only use half of configured event loop threads · Issue #2911 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I discovered this issue in 3.5.3 and have verified using the reproducer below that it is still present in 3.6.3 and 3.7.0.
As background, it seems that 1) Netty assigns event loop threads in round-robin fashion, and 2) Netty creates event loop threads only when something is executed on the event loop. The current Verticle deployment path calls getOrCreateContext() twice, which results in every other event loop never having anything run on it, and as a consequence applications that use an even number of event loop threads will only use half of them. This is the common case, since the default number of event loop threads is twice the number of cores detected in the system, and it seems likely that custom configurations are likely to use an even number of threads.
The code below can be used to see this issue:
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;

public class VerticleRepro {
    public static class MyVerticle extends AbstractVerticle {

        public void start() {
            System.out.println("MyVerticle: " + Thread.currentThread().getId() + " "
                    + vertx.getOrCreateContext().isEventLoopContext() + " "
                    + vertx.getOrCreateContext().deploymentID() + " "
                    + vertx.getOrCreateContext());
        }
    }

    public static void main(String[] args) {
        final int numEventLoops = 8;
        final int numVerticles = 8;
        VertxOptions vertxOptions = new VertxOptions().setEventLoopPoolSize(numEventLoops);
        Vertx vertx = Vertx.vertx(vertxOptions);
        for (int i = 0; i < numVerticles; ++i) {
            vertx.deployVerticle(MyVerticle.class.getName());
        }
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2912
Vertx.cancelTimer() can return true when timer fires · Issue #2912 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The API contract for Vertx.cancelTimer() appears to indicate that if it returns true, the timer has been successfully canceled. However, the timer handler is not properly synchronized with the timer flag, so the handler can see the cancelled flag is false and start the handler execution before the CAS in the cancel() method runs.
Currently, we have to do our own synchronization around timers to ensure that when a timer fires indicating a timeout, we are guaranteed the handler does not also execute. It would be better if InternalTimerHandler.handle() also did a cancelled.compareAndSet(false, true) and only executed the handler when the CAS is successful, ensuring that canceled timers are guaranteed not to execute their handlers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2913
bareCommand.getJsonFromFileOrString can not read classpath file · Issue #2913 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
"-conf" can only read non-classpath configuration files.
Maybe we should check the "jsonFileOrString" ,if starting with “classpath:”read configuration file from classpath.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2914
Vertx.getOrCreateContext unexpected behaviour · Issue #2914 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi guys,
After 3.7.0 upgrade my system provides unexpected behavior with the data in a Context.
Currently I working for reproduction test. (Will take some time).
Following some inputs:

In start() method of Verticle initialized object and set to actual context via Context.put().
Later in code, I trying to get this object from context (context.get()), but its null.
This is a web application and data over via Router.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2915
Signal end of stream using a sentinel · Issue #2915 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently streams implementations in core relies on a boolean flag to determine when a stream has ended and the delivery (possibly delayed) of the corresponding event.
This can be simplified by using an end sentinel that is the last event of the stream removing some complexity in the handling of the delayed stream end.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2916
HTTP event handler should not be called when holding a lock · Issue #2916 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We still have event handlers that are called while holding a lock which can lead to deadlocks.
We should remove them.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2917
HTTP event handler should not be called when holding a lock and signa… by vietj · Pull Request #2917 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…l end of stream using a sentinel. Fixes #2915 - Fixes #2916
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2918
HTTP event handler should not be called when holding a lock and signa… by vietj · Pull Request #2918 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj any ETA on 3.7.1?  One of these fixes also fixed a break in FlowableReadStream when a downstream operator calls request in the middle of processing an onNext.  When it came to the end of the stream it would fail to recognized that it still had data in the pending queue and instead would immediately call onComplete.  I test 3.7.1-SNAPSHOT and the break is gone (thankfully, was not looking forward to coming up with a clean reproduction for that one ;)).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2919
Expose isClosed() method in WebSockets by alula · Pull Request #2919 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #3020
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2920
Vertx-web-client  setTryUseCompression error:decompression failure · Issue #2920 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hello,
I use webclient request "http://api.bilibili.com/x/v1/dm/list.so?oid=87113082"
code :
val userAgent = "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36"
    val webClientOptions = webClientOptionsOf(userAgent=userAgent,followRedirects = true,tryUseCompression = true)
    val weblient = WebClient.create(vertx,webClientOptions)
val response = webClient
        .get(bilibiliApiUrl, "/x/v1/dm/list.so")
        .putHeader("Accept-Encoding","gzip, deflate")
        .addQueryParam("oid", cid.toString())
        .addQueryParam("page", i.toString())
        .sendAwait()

But there was an error：

io.netty.handler.codec.compression.DecompressionException: decompression failure
        at io.netty.handler.codec.compression.JdkZlibDecoder.decode(JdkZlibDecoder.java:230)
        at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:502)
        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:441)
        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:278)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)
        at io.netty.channel.embedded.EmbeddedChannel.writeInbound(EmbeddedChannel.java:325)
        at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:234)
        at io.netty.handler.codec.http.HttpContentDecoder.decodeContent(HttpContentDecoder.java:155)
        at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:147)
        at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:46)
        at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
        at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438)
        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)
        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)
        at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)
        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)
        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:579)
        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:496)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)
        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)
        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
        at java.base/java.lang.Thread.run(Thread.java:835)
Caused by: java.util.zip.DataFormatException: incorrect header check
        at java.base/java.util.zip.Inflater.inflateBytesBytes(Native Method)
        at java.base/java.util.zip.Inflater.inflate(Inflater.java:378)
        at io.netty.handler.codec.compression.JdkZlibDecoder.decode(JdkZlibDecoder.java:187)
        ... 38 more
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2921
OpenApi router factory and EventBus · Issue #2921 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We recently shifted our apis to make use of the openapi web contract with the combination of eventbus to send and receive api responses for our clients.
It was working fine until today where we noticed that most of our apis were timing out, the following errors were thrown.
API FAILURE: (TIMEOUT,-1) Timed out after waiting 30000(ms) for a reply. address: __vertx.reply.448, repliedAddress: /v1/analytics/post
at io.vertx.core.eventbus.impl.HandlerRegistration.sendAsyncResultFailure(HandlerRegistration.java:146)
at io.vertx.core.eventbus.impl.HandlerRegistration.lambda$new$0(HandlerRegistration.java:78)
at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:907)
at io.vertx.core.impl.VertxImpl$InternalTimerHandler.handle(VertxImpl.java:866)
at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)

We were unable to debug as our consumers where not even receiving the messages to reply back. Our logs just had these error messages.
e.g openapi web contract and eventbus setup, all our apis are configured this way
 routerFactory.addHandlerByOperationId("addViews", routingContext -> {
           RequestParameters requestParameters = routingContext.get("parsedParameters");
            JsonObject token = routingContext.user().principal();
            String lambda_token = 
                vertx.eventBus()
                        .send(Endpoints.API_ANALYTICS_POST,
                                Json.encodeToBuffer(requestParameters.body().getJsonObject()),
                                result -> {
                                    if (result.succeeded()) {
                                        successResponse(routingContext, result.result());
                                    } else {
                                        errorResponse(routingContext, result.cause());
                                    }
                                });
           
        });
        registerFailureHandler(routerFactory,"addViews");

We use the shared event bus as of now not the cluster event bus. Are there any limits to how many messages the eventbus can handle?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2922
NullPointerException on Clustered EventBus · Issue #2922 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[{}] 2019-04-23 18:17:34.404 ERROR [vert.x-eventloop-thread-0] VertxFactory:lambda$null$0:44 - VertX Exception ->
java.lang.NullPointerException: null
	at io.vertx.core.net.impl.NetServerImpl.lambda$connected$13(NetServerImpl.java:471) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:188) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:180) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.net.impl.NetServerImpl.connected(NetServerImpl.java:467) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.net.impl.NetServerImpl.access$200(NetServerImpl.java:54) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.vertx.core.net.impl.NetServerImpl$1.initChannel(NetServerImpl.java:216) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:113) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:105) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:597) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline.access$000(DefaultChannelPipeline.java:44) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1387) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1122) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:647) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:506) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register(AbstractChannel.java:472) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.SingleThreadEventLoop.register(SingleThreadEventLoop.java:80) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.SingleThreadEventLoop.register(SingleThreadEventLoop.java:74) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.vertx.core.net.impl.VertxEventLoopGroup.register(VertxEventLoopGroup.java:53) ~[vertx-core-3.7.0.jar:3.7.0]
	at io.netty.bootstrap.ServerBootstrap$ServerBootstrapAcceptor.channelRead(ServerBootstrap.java:254) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:350) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:610) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:551) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:465) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:437) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873) ~[netty-all-4.1.5.Final.jar:4.1.5.Final]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2923
Add WriteStream asynchronous write and end methods by vietj · Pull Request #2923 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2924
#2920 HttpContentDecompressor Compression level becomes more lenient fashion by shenzhou-6 · Pull Request #2924 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2925
provide empty object/array instance by MaiCw4J · Pull Request #2925 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
That will make the empty object/array immutable and this is not the usual behavior.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2926
routingContext.request().resume() ends current request · Issue #2926 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vert.x core: 3.7.0
vert.x web: 3.7.0
Context
When using routingContext.request().pause() and routingContext.request().resume() I'm getting "Request has already been read" exception. When using vert.x 3.5 it is working fine.
Steps to reproduce
Here is my AuthHandler which is the first hander in my Router. It checks if there is a valid session and if yes it calls routingContext.next() to continue to the next handlers https://gist.github.com/gentritgojani/b9935ecd146cc0c2f5a8f36f177e459a
When using vert.x 3.5 it works fine but in vert.x 3.7 in my next handler I'm getting "Request has already been read" exception.
Here is the implementation of resume method of HttpServerRequestImpl in vert.x 3.5
https://gist.github.com/gentritgojani/8e165258d06dc723c27131c47e45de63
and here is the implementation of resume method of HttpServerRequestImpl in vert.x 3.7
https://gist.github.com/gentritgojani/30de75d9b72005ad7a12e5a24c002d62
In my case !pending.resume() is returning true so then doEnd() is called.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2927
FutureImpl's confusing inheritance · Issue #2927 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As I was looking at all your Implementation classes I found a very confusing class decleration statement. FutureImpl implements Future and Handler.
But why is that? I think thats very confusing because Future already implements Handler so thats redundant in the FutureImpl class.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2928
Http client domain sockets - fixes #1674 by vietj · Pull Request #2928 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2929
Http client domain sockets - fixes #1674 by vietj · Pull Request #2929 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2930
ConnectionPool should evict unused connection as a progress task · Issue #2930 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the ConnectionPool does evict unused connections when connections are recycled. When a waiter recycles a connection immediately, the connections will be put back in the pool because there might still be waiters and the pool will contain extra unused connections. Also idle connections will be expired synchronously by closeIdle.
Unused / idle connection eviction should also be a progress task, so when there are no more waiters, the pool will evict those. Closing idle connections will now be a pool progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2931
Add `query(Object... path)` method for simple JSON querying by lukehutch · Pull Request #2931 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See vert-x3/issues#449 .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2932
message by message · Issue #2932 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
how can i get the message chain ,i want to know the pre message info (headers).
first i want add outInterceptor (EventBusImpl.addOutboundInterceptor) so it can run by handler,but i find the OutboundDeliveryContext.replierMessage is private  .in the handler ,i can't get the replierMessage.
second i find the EventBusImpl.sendReply has the input param(replierMessage) but not used.
:)
what can it do to get the replierMessage.headers  ,i will logger the  message invoked chain
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2933
MessageProducerImpl runs out of credits when using send() in publish-mode · Issue #2933 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The MessageProducerImpl uses a credit-system to not overfeed the receiver. The credits get added back by a receiver via the credit-address.
But this mechanism is only active in send=true mode. In publish mode the credits still get subtracted and checked - but never refilled. So as soon as the producer runs out of credits, its send() method stops working altogether.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2934
HttpServerOptions.setCompressionSupported(true) breaks h2c upgrade · Issue #2934 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Minimal reproducer:
package io.vertx.issues.h2c;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.core.http.HttpServerOptions;

public class MainVerticle extends AbstractVerticle {

  @Override
  public void start(Future<Void> startFuture) throws Exception {
    vertx.createHttpServer(new HttpServerOptions()
            .setCompressionSupported(true)
            .setSsl(false)).requestHandler(req -> req.response()
                    .putHeader("content-type", "text/plain")
                    .end("Hello from Vert.x!")).listen(8888, http -> {
      if (http.succeeded()) {
        startFuture.complete();
        System.out.println("HTTP server started on port 8888");
      } else {
        startFuture.fail(http.cause());
      }
    });
  }
}
Then
$ curl --http2 -v localhost:8888/
Results in
*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8888 (#0)
> GET / HTTP/1.1
> Host: localhost:8888
> User-Agent: curl/7.64.0
> Accept: */*
> Connection: Upgrade, HTTP2-Settings
> Upgrade: h2c
> HTTP2-Settings: AAMAAABkAARAAAAAAAIAAAAA
> 
< HTTP/1.1 101 Switching Protocols
< connection: upgrade
< upgrade: h2c
< content-length: 0
* Received 101
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
* Recv failure: Connection reset by peer
* Failed receiving HTTP2 data
* Send failure: Broken pipe
* Failed sending HTTP2 data
* Connection #0 to host localhost left intact
curl: (56) Recv failure: Connection reset by peer

And logs:
May 07, 2019 10:01:09 PM io.vertx.core.impl.launcher.commands.Watcher
INFO: Starting the vert.x application in redeploy mode
Starting vert.x application...
c5afa853-961e-47a2-b3e2-040b921b5610-redeploy
HTTP server started on port 8888
May 07, 2019 10:01:10 PM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
INFO: Succeeded in deploying verticle
May 07, 2019 10:01:12 PM io.vertx.core.net.impl.ConnectionBase
SEVERE: java.lang.IllegalStateException: unexpected message type: io.netty.handler.codec.http.DefaultHttpContent (expected: HttpResponse)
May 07, 2019 10:01:12 PM io.vertx.core.net.impl.ConnectionBase
SEVERE: NULL

Expected: it works.
Tested with

3.6.0
3.7.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2935
Performance issues with vert.x · Issue #2935 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
We are running a simple hello world application and we are seeing a lot of time being taken in processing of the request with just 40-50 users.
Machine Configuration: 4 core cpu 1.90 Ghz
RAM: 16 GB
Source code which we are testing: https://github.com/vert-x3/vertx-examples/blob/master/web-examples/src/main/java/io/vertx/example/web/helloworld/Server.java
Here are the jmeter results:
jmeter -n -t performance_test_localhost.jmx
May 08, 2019 2:54:10 PM java.util.prefs.WindowsPreferences <init>
WARNING: Could not open/create prefs root node Software\JavaSoft\Prefs at root 0x80000002. Windows RegCreateKeyEx(...) returned error code 5.
Creating summariser <summary>
Created the tree successfully using performance_test_localhost.jmx
Starting the test @ Wed May 08 14:54:11 CST 2019 (1557298451018)
Waiting for possible Shutdown/StopTestNow/Heapdump message on port 4445
summary +    767 in 00:00:19 =   40.9/s Avg:   888 Min:   123 Max:  3253 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary +    910 in 00:00:30 =   30.5/s Avg:  1339 Min:    92 Max:  4643 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   1677 in 00:00:49 =   34.5/s Avg:  1133 Min:    92 Max:  4643 Err:     0 (0.00%)
summary +   1053 in 00:00:30 =   35.1/s Avg:  1145 Min:   140 Max:  2811 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   2730 in 00:01:19 =   34.7/s Avg:  1137 Min:    92 Max:  4643 Err:     0 (0.00%)
summary +   1333 in 00:00:30 =   44.5/s Avg:   885 Min:    86 Max:  3233 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   4063 in 00:01:49 =   37.4/s Avg:  1055 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1042 in 00:00:30 =   34.7/s Avg:  1171 Min:   145 Max:  4176 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   5105 in 00:02:19 =   36.8/s Avg:  1078 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1398 in 00:00:30 =   46.6/s Avg:   860 Min:   104 Max:  1917 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   6503 in 00:02:49 =   38.6/s Avg:  1031 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1401 in 00:00:30 =   46.8/s Avg:   856 Min:    91 Max:  1970 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   7904 in 00:03:19 =   39.8/s Avg:  1000 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1497 in 00:00:30 =   49.8/s Avg:   799 Min:    97 Max:  1580 Err:     0 (0.00%) Active: 41 Started: 41 Finished: 0
summary =   9401 in 00:03:49 =   41.1/s Avg:   968 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1401 in 00:00:30 =   46.8/s Avg:  1310 Min:   156 Max:  3470 Err:     0 (0.00%) Active: 81 Started: 81 Finished: 0
summary =  10802 in 00:04:19 =   41.8/s Avg:  1013 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1473 in 00:00:30 =   49.1/s Avg:  1629 Min:   154 Max:  3369 Err:     0 (0.00%) Active: 81 Started: 81 Finished: 0
summary =  12275 in 00:04:49 =   42.5/s Avg:  1087 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1484 in 00:00:30 =   49.4/s Avg:  1627 Min:   157 Max:  3416 Err:     0 (0.00%) Active: 81 Started: 81 Finished: 0
summary =  13759 in 00:05:19 =   43.2/s Avg:  1145 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1433 in 00:00:30 =   47.8/s Avg:  1673 Min:    92 Max:  3594 Err:     0 (0.00%) Active: 81 Started: 81 Finished: 0
summary =  15192 in 00:05:49 =   43.6/s Avg:  1195 Min:    86 Max:  4643 Err:     0 (0.00%)
summary +   1419 in 00:00:30 =   47.2/s Avg:  1690 Min:   156 Max:  3309 Err:     0 (0.00%) Active: 81 Started: 81 Finished: 0
summary =  16611 in 00:06:19 =   43.9/s Avg:  1237 Min:    86 Max:  4643 Err:     0 (0.00%)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2936
HttpClient does not fire HttpClientRequest exception handler after receiving a 100 continue response · Issue #2936 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClientRequest exception handler is not fired when a response sent with a 100 response code and the actual response has not been received yet.
The failure delivery should check that the response is null or the response has a 100 continue status code. When the actual response will be received, it will override the initial response that was received.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2937
[HTTP2] io.vertx.core.http.HttpClientResponse#headers returning invalid header (:status) · Issue #2937 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Returned map contains the key ':Status' with the value HTTP response status code i.e. 200.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2938
[Scala API] Handlers cannot be unset · Issue #2938 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Example:
response.handler(null)  will not work as intended (to release the reference) because scala api will wrap it with a new function
io.vertx.scala.core.http.HttpClientResponse#handler
  def handler(handler: Handler[io.vertx.core.buffer.Buffer]): HttpClientResponse = {
    asJava.asInstanceOf[JHttpClientResponse].handler({x: Buffer => handler.handle(x)})
    this
  }

As a work around one must cast it to the Java class
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2939
What distributed transaction support is provided by vertx · Issue #2939 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to use vert.x to create a project about a distributed transaction business.
What distributed transaction support is provided by vert.x?
Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2940
[feature][niceToHave]: Expose EpollTcpInfo in Requests · Issue #2940 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TCP_INFO
https://netty.io/4.1/api/io/netty/channel/epoll/EpollTcpInfo.html
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2941
Do not expose HTTP/2 pseudo headers in header maps · Issue #2941 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2942
Shutdown Vert.x Java process with high CPU uses · Issue #2942 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am running vert.x on linux machine with configuration:

Clock cycle = 1GHz
RAM = 512 MB

I had tried to deploy two vert.x services. One vert.x ran perfectly fine, but when I ran second one, it will automatically terminates due to high CPU uses. I expect that process should be slow instead of terminating out. Is there anything I can do here?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2943
Vertx hangs instead of closing while using Micrometer · Issue #2943 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to use Vertx + Micrometer and I see that that when I want to call vertx#close the application doesn't exit and some threads from the Micrometer class stay there forever.
However when I run the both standalone (either Vertx or Micrometer), everything is fine. So this issue only happens when I try to use both at the same time.
Here's a screen shot of what I see when I try to close the vertx instance, but it hangs.
Below you can find a link to the repository capable of reproducing the issue.

https://github.com/renannprado/vertx-micrometer-issue
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2944
vertx  java.lang.IllegalStateException: Response is closed · Issue #2944 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I don't know where catch this Exception,EveryWhere like 'response.end()'  i have added 'if (response.closed()||response.ended())'
The version of Vertx  is 3.7.0
Do anybody know how to fix this issue?
May 13, 2019 2:42:50 PM io.vertx.core.impl.ContextImpl SEVERE: Unhandled exception java.lang.IllegalStateException: Response is closed at io.vertx.core.http.impl.HttpServerResponseImpl.checkValid(HttpServerResponseImpl.java:575) at io.vertx.core.http.impl.HttpServerResponseImpl.end(HttpServerResponseImpl.java:323) at io.vertx.core.http.impl.HttpServerResponseImpl.end(HttpServerResponseImpl.java:312) at io.vertx.ext.web.impl.RoutingContextImplBase.unhandledFailure(RoutingContextImplBase.java:169) at io.vertx.ext.web.impl.RoutingContextImpl.checkHandleNoMatch(RoutingContextImpl.java:143) at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:135) at io.vertx.ext.web.impl.RoutingContextImpl.doFail(RoutingContextImpl.java:483) at io.vertx.ext.web.impl.RoutingContextImpl.fail(RoutingContextImpl.java:179) at io.vertx.ext.web.impl.RoutingContextImpl.fail(RoutingContextImpl.java:172) at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.lambda$new$3(BodyHandlerImpl.java:211) at io.vertx.core.http.impl.HttpServerRequestImpl.handleException(HttpServerRequestImpl.java:590) at io.vertx.core.http.impl.Http1xServerConnection.handleClosed(Http1xServerConnection.java:464) at io.vertx.core.net.impl.VertxHandler.lambda$channelInactive$5(VertxHandler.java:164) at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320) at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43) at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:188) at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:180) at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:164) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75) at io.netty.handler.timeout.IdleStateHandler.channelInactive(IdleStateHandler.java:277) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:390) at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:355) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1429) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:947) at io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:822) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462) at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2945
WriteStream asynchronous write/end versions · Issue #2945 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The WriteStream interface defines write and end methods with a  fire and forget semantic that won't provide any kind of completion feedback when they are called.
These methods should be overloaded with an asynchronous version that will report the success of the failure of the operation, which shall be used when the feedback of the completion and/or the success/failure matters.
The WriteStream#write(T) and Writestream#end() operation shall not anymore report failures and should retain the fire and forget semantic instead. This means that the implementations for HttpServerResponse will not anymore throw an IllegalStateException when the response is closed, only the asynchronous version will do.
A few existing sub-interfaces of WriteStream provide already such methods such as AsyncFile or NetSocket. A similar efforts have been already attempted previously for the end operation: #2123
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2946
WriteStream asynchronous write/end versions - fixes #2945 by vietj · Pull Request #2946 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2947
Ambiguous Exception on Timeouts · Issue #2947 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This is on 3.7.1 BUILD-SNAPSHOT
If configuring the HttpClient like so.
HttpClientOptions httpClientOptions = new HttpClientOptions()
			.setConnectTimeout(connectTimeout).setIdleTimeoutUnit(TimeUnit.MILLISECONDS).setIdleTimeout(idleTimeout)
			.setTcpQuickAck(true)
			.setReusePort(true);

When the timeout does take place.
		httpClientRequest.handler(response -> {
			serverResponse.setStatusCode(response.statusCode());
			response.pipeTo(serverResponse);
		});

		httpClientRequest.exceptionHandler(throwable -> {
			throwable.printStackTrace();
			serverResponse.end();
		});

There is no TimeoutException.  The exception used is io.vertx.core.VertxException: Connection was closed
Is there anyway to determine if the connection was closed by the client itself (as a result of the timeout) or if it was terminated by the server.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2948
ServerWebSocket handler should not ignore exception · Issue #2948 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
here is reproduce code:
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.http.HttpClient;
import io.vertx.core.http.HttpServer;
import io.vertx.core.http.ServerWebSocket;
import io.vertx.ext.web.Router;
import io.vertx.ext.web.RoutingContext;
public class ReproduceWebSocketException extends AbstractVerticle {
public static void main(String[] args) {
    Vertx vertx = Vertx.vertx();
    vertx.deployVerticle(new ReproduceWebSocketException(), ar->{
        runClient(vertx);
    });
}

private static void runClient(Vertx vertx) {
    HttpClient client = vertx.createHttpClient();
    client.websocket(8088,"localhost", "/", ws->{
        for (int i = 0; i < 10; i++) {
            ws.write(Buffer.buffer("hello"));
        }
    });
}

@Override
public void start() throws Exception {
    HttpServer server = vertx.createHttpServer();
    Router router = Router.router(vertx);
    router.route("/").handler(this::handlerWebsocket);
    server.requestHandler(router).listen(8088);

    System.out.println("server started");
}

private void handlerWebsocket(RoutingContext context) {
    ServerWebSocket socket = context.request().upgrade();
    socket.handler(buff->{
        System.out.println("got buffer:" + buff.toString());

        //this exception is ignored
        throw new RuntimeException("error");
    });
    socket.closeHandler(v->{
        System.out.println("close");
    });
    socket.exceptionHandler(th->{
        th.printStackTrace();
    });
}

}
there have a exception throwed in :
socket.handler(buff->{
System.out.println("got buffer:" + buff.toString());
    //this exception is ignored
    throw new RuntimeException("error");
});

while I am debugging source code, found that InboundBuffer<Buffer> pending in WebSocketImplBase doesn't setup exceptionHandler.
so I think this is a bug.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2949
HttpClient shall forbid chunked transfer requests when it might use http2 · Issue #2949 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Given an application doesn't know in advance whether a server supports http2 and allows the HttpClient to upgrade the connection to h2c in terms of:
client = vertx.createHttpClient(new HttpClientOptions()
  .setSsl(false)
  .setProtocolVersion(HttpVersion.HTTP_2));
Setting a content-length header is required in this situation because

the connection might not be upgraded, then either content-length or chunked transfer would be ok
the connection might be upgraded, then either content-length or none of both would be ok, but chunked transfer must not be used (against http2 spec)
In summary, content-length is required to allow for both situations.

This in turn means it's illegal to enable chunked transfer along with supporting any http2 protocol (upgrade, prior knowledge or ALPN).
Right now the client would upgrade the connection after having sent the chunked transfer header (and then maybe even http1 chunks?) which is against http2 spec. The upgrade handshake (AFAIK) specifies the initial http1 request is to be considered the first http2 request on stream id 1. So the initial http1 request must not contain chunked transfer.
This behaviour breaks (upgraded) requests to e.g. a http2 enabled spring boot web service although a http2 enabled vert.x server is fine with it.
Verified with vertx 3.6.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2950
Performance issues with vert.x using apache bench · Issue #2950 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Disclaimer: It's more of an observation that we are seeing. May be we are doing something incorrectly
When running the test using apache bench for a vert.x application, we are seeing that the response time increased as we increase the number of concurrent users.
D:\httpd-2.2.34-win64\Apache2\bin>ab -n 500 -c 1 -H "Authorization: 5" -H "Span_Id: 4" -H "Trace_Id: 1" -H "X-test-API-KEY: 6"  http://localhost:8443/product_catalog/products/legacy/001~001~5ZP/terms
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Finished 500 requests


Server Software:
Server Hostname:        localhost
Server Port:            8443

Document Path:          /product_catalog/products/legacy/001~001~5ZP/terms
Document Length:        319 bytes

Concurrency Level:      1
Time taken for tests:   12.366 seconds
Complete requests:      500
Failed requests:        0
Write errors:           0
Total transferred:      295094 bytes
HTML transferred:       159500 bytes
Requests per second:    40.43 [#/sec] (mean)
Time per request:       24.733 [ms] (mean)
Time per request:       24.733 [ms] (mean, across all concurrent requests)
Transfer rate:          23.30 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.5      1       3
Processing:     5   24  83.9      8    1293
Waiting:        5   23  83.9      8    1293
Total:          6   24  83.9      9    1293

Percentage of the requests served within a certain time (ms)
  50%      9
  66%     11
  75%     13
  80%     15
  90%     29
  95%     57
  98%    238
  99%    332
 100%   1293 (longest request)

D:\httpd-2.2.34-win64\Apache2\bin>ab -n 500 -c 2 -H "Authorization: 5" -H "Span_Id: 4" -H "Trace_Id: 1" -H "X-test-API-KEY: 6"  http://localhost:8443/product_catalog/products/legacy/001~001~5ZP/terms
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Finished 500 requests


Server Software:
Server Hostname:        localhost
Server Port:            8443

Document Path:          /product_catalog/products/legacy/001~001~5ZP/terms
Document Length:        319 bytes

Concurrency Level:      2
Time taken for tests:   7.985 seconds
Complete requests:      500
Failed requests:        0
Write errors:           0
Total transferred:      295151 bytes
HTML transferred:       159500 bytes
Requests per second:    62.61 [#/sec] (mean)
Time per request:       31.941 [ms] (mean)
Time per request:       15.971 [ms] (mean, across all concurrent requests)
Transfer rate:          36.10 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.6      1       9
Processing:     6   30  71.5     12     720
Waiting:        5   30  71.4     12     720
Total:          7   31  71.5     13     721

Percentage of the requests served within a certain time (ms)
  50%     13
  66%     16
  75%     21
  80%     24
  90%     53
  95%    113
  98%    246
  99%    444
 100%    721 (longest request)

D:\httpd-2.2.34-win64\Apache2\bin>ab -n 500 -c 3 -H "Authorization: 5" -H "Span_Id: 4" -H "Trace_Id: 1" -H "X-test-API-KEY: 6"  http://localhost:8443/product_catalog/products/legacy/001~001~5ZP/terms
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Finished 500 requests


Server Software:
Server Hostname:        localhost
Server Port:            8443

Document Path:          /product_catalog/products/legacy/001~001~5ZP/terms
Document Length:        319 bytes

Concurrency Level:      3
Time taken for tests:   7.148 seconds
Complete requests:      500
Failed requests:        0
Write errors:           0
Total transferred:      295335 bytes
HTML transferred:       159500 bytes
Requests per second:    69.95 [#/sec] (mean)
Time per request:       42.888 [ms] (mean)
Time per request:       14.296 [ms] (mean, across all concurrent requests)
Transfer rate:          40.35 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.6      1       5
Processing:     6   42  66.2     22     516
Waiting:        6   41  66.3     22     515
Total:          7   42  66.3     23     516

Percentage of the requests served within a certain time (ms)
  50%     23
  66%     31
  75%     43
  80%     51
  90%     76
  95%    128
  98%    259
  99%    430
 100%    516 (longest request)

D:\httpd-2.2.34-win64\Apache2\bin>ab -n 500 -c 4 -H "Authorization: 5" -H "Span_Id: 4" -H "Trace_Id: 1" -H "X-test-API-KEY: 6"  http://localhost:8443/product_catalog/products/legacy/001~001~5ZP/terms
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Finished 500 requests


Server Software:
Server Hostname:        localhost
Server Port:            8443

Document Path:          /product_catalog/products/legacy/001~001~5ZP/terms
Document Length:        319 bytes

Concurrency Level:      4
Time taken for tests:   7.078 seconds
Complete requests:      500
Failed requests:        0
Write errors:           0
Total transferred:      295389 bytes
HTML transferred:       159500 bytes
Requests per second:    70.64 [#/sec] (mean)
Time per request:       56.623 [ms] (mean)
Time per request:       14.156 [ms] (mean, across all concurrent requests)
Transfer rate:          40.76 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.6      1       4
Processing:     8   55 112.8     22    1112
Waiting:        8   55 112.7     21    1111
Total:          9   56 112.8     22    1112

Percentage of the requests served within a certain time (ms)
  50%     22
  66%     31
  75%     43
  80%     59
  90%    120
  95%    213
  98%    294
  99%    387
 100%   1112 (longest request)

Also when the test is running, if we hit the API from another console, we see that the response time increases for that as well.
We have used the following code:
Router code:
router.route().handler(LoggerHandler.create(LoggerFormat.SHORT));
router.route().handler(ResponseTimeHandler.create());
router.route().handler(CorsHandler.create("*")
                .allowedMethod(io.vertx.core.http.HttpMethod.GET)
                .allowedMethod(io.vertx.core.http.HttpMethod.POST)
                .allowedMethod(io.vertx.core.http.HttpMethod.PUT)
                .allowedMethod(io.vertx.core.http.HttpMethod.DELETE)
                .allowedMethod(io.vertx.core.http.HttpMethod.OPTIONS)
                .allowedHeader("Access-Control-Request-Method")
                .allowedHeader("Access-Control-Allow-Credentials")
                .allowedHeader("Access-Control-Allow-Origin")
                .allowedHeader("Access-Control-Allow-Headers")
                .allowedHeader("Content-Type")
                .allowedHeader("Trace_Id")
                .allowedHeader("Span_Id")
                .allowedHeader("Authorization")
                .allowedHeader("X-test-API-KEY")
                .allowedHeader("Accept"));
router.get("/product_catalog/products/legacy/:id/terms").handler(this::getByProductCode);

Server Creation:
vertx
    .createHttpServer()
    .exceptionHandler(event -> {
        logger.error("{}", new GPCLogEvent(className, "global_exception_handler", event, new GPCEntry("global_exception", event.getMessage() != null ? event.getMessage() : "")));
    })
    .connectionHandler(handler -> {
        handler.exceptionHandler(event -> {
            logger.error("{}", new GPCLogEvent(className, "global_exception_connection_handler", event, new GPCEntry("global_exception", event.getMessage() != null ? event.getMessage() : "")));
        });

    })
    .websocketHandler(handler -> {
        handler.exceptionHandler(event -> {
            logger.error("{}", new GPCLogEvent(className, "global_exception_websocket_handler", event, new GPCEntry("global_exception", event.getMessage() != null ? event.getMessage() : "")));
        });
    })
    .requestHandler(handler -> {
        handler.exceptionHandler(event -> {
            logger.error("{}", new GPCLogEvent(className, "global_exception_request_handler", event, new GPCEntry("global_exception", event.getMessage() != null ? event.getMessage() : "")));
        });
    })
    .requestHandler(router)
    .listen(serverPort, result -> {
        if (result.succeeded()) {
            logger.info("{}",
                    new GPCLogEvent(className, "start", new GPCEntry<>("Server started at port", serverPort)));
        } else {
            logger.error("{}", new GPCLogEvent(className, "start", result.cause(),
                    new GPCEntry<>("Server failed to start at port", serverPort)));
        }
    });

Handler Method:
private void getByProductCode(RoutingContext routingContext) {
    LocalDateTime requestReceivedTime = LocalDateTime.now();
    ZonedDateTime nowUTC = ZonedDateTime.now(ZoneOffset.UTC);
    JsonObject jsonObject = commonUtilities.populateJsonObject(routingContext.request().headers());
    jsonObject.put("requestReceivedTime", requestReceivedTime.format(commonUtilities.getDateTimeFormatter()));
    jsonObject.put("path_param_id", routingContext.pathParam("id"));
    jsonObject.put("TRACING_ID",UUID.randomUUID().toString());
    long timeTakenInGettingRequestVar = 0;
    if (jsonObject.getString("requestSentTime") != null) {
        ZonedDateTime requestSentTime = LocalDateTime.parse(jsonObject.getString("requestSentTime"), commonUtilities.getDateTimeFormatter()).atZone(ZoneId.of("UTC"));
        timeTakenInGettingRequestVar = ChronoUnit.MILLIS.between(requestSentTime.toLocalDateTime(), nowUTC.toLocalDateTime());
    }
    final long timeTakenInGettingRequest = timeTakenInGettingRequestVar;
    vertx.eventBus().send(TermsVerticleGet.GET_BY_PRODUCT_CODE,
            jsonObject,
            result -> {
                if (result.succeeded()) {
                    routingContext.response()
                            .putHeader("content-type", jsonObject.getString("Accept"))
                            .putHeader("TRACING_ID", jsonObject.getString("TRACING_ID"))
                            .putHeader("TRACE_ID", jsonObject.getString("TRACE_ID"))
                            .putHeader("SPAN_ID", jsonObject.getString("SPAN_ID"))
                            .putHeader("responseSentTime", LocalDateTime.now().format(commonUtilities.getDateTimeFormatter()))
                            .putHeader("timeTakenInGettingRequest", Long.toString(timeTakenInGettingRequest))
                            .putHeader("requestReceivedTime", nowUTC.toLocalDateTime().format(commonUtilities.getDateTimeFormatter()))
                            .putHeader("requestSentTime", jsonObject.getString("requestSentTime") != null ? jsonObject.getString("requestSentTime") : "")
                            .setStatusCode(200)
                            .end(result.result().body().toString())

                    ;
                    logger.info("OUT");
                } else {
                    ReplyException cause = (ReplyException) result.cause();

                    routingContext.response()
                            .putHeader("content-type", jsonObject.getString("Accept"))
                            .putHeader("TRACING_ID", jsonObject.getString("TRACING_ID"))
                            .putHeader("TRACE_ID", jsonObject.getString("TRACE_ID"))
                            .putHeader("SPAN_ID", jsonObject.getString("SPAN_ID"))
                            .putHeader("responseSentTime", LocalDateTime.now().format(commonUtilities.getDateTimeFormatter()))
                            .putHeader("timeTakenInGettingRequest", Long.toString(timeTakenInGettingRequest))
                            .putHeader("requestReceivedTime", nowUTC.toLocalDateTime().format(commonUtilities.getDateTimeFormatter()))
                            .putHeader("requestSentTime", jsonObject.getString("requestSentTime") != null ? jsonObject.getString("requestSentTime") : "")
                            .setStatusCode(cause.failureCode())
                            .end(cause.getMessage());
                    logger.info("OUT");
                }
            });

}

Worker Verticle:
private void getByProductCode(Message<JsonObject> messageConsumer) {
        LocalDateTime requestReceivedTime_handler = LocalDateTime.now();
        ZonedDateTime nowUTC_handler = ZonedDateTime.now(ZoneOffset.UTC);
        final String TRACING_ID = messageConsumer.body().getString("TRACING_ID");
        final String TRACE_ID = !commonUtilities.validateNullEmpty(messageConsumer.body().getString("Trace_Id")) ? UUID.randomUUID().toString() : messageConsumer.body().getString("Trace_Id");
        final String SPAN_ID = !commonUtilities.validateNullEmpty(messageConsumer.body().getString("Span_Id")) ? UUID.randomUUID().toString() : messageConsumer.body().getString("Span_Id");

        logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("IN", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID)));

        // Run the validation
        logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("validateCommonRequestHeader", true), new GPCEntry<>("IN", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID)));
        commonUtilities.validateCommonRequestHeader(messageConsumer.body());
        logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("validateCommonRequestHeader", true), new GPCEntry<>("OUT", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID)));

        // Product code - Mandatory
        messageConsumer.body().put("product_codes", messageConsumer.body().getString("path_param_id"));

        // Product code validation
        if (commonUtilities.validateNullEmpty(messageConsumer.body().getString("product_codes"))) {
            commonUtilities.checkProductIAORGLOGOPCTCode(messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID, false);
        } else {
            messageConsumer.body().getJsonArray("errors").add("id (path parameter) is  mandatory field");
        }
        // There are validation errors
        if (messageConsumer.body().getJsonArray("errors").size() > 0) {
            messageConsumer.body().put("error_message", "Validation errors");
            messageConsumer.body().put("developer_message", messageConsumer.body().getJsonArray("errors").toString());
            messageConsumer.body().put("error_code", "400");
            messageConsumer.body().put("more_information", "There are " + messageConsumer.body().getJsonArray("errors").size() + " validation errors");
            messageConsumer.fail(400, Json.encode(commonUtilities.errors(messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID)));
            logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("OUT", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID), new GPCEntry<>("TIME_TAKEN", ChronoUnit.MILLIS.between(requestReceivedTime_handler, LocalDateTime.now()))));
            return;
        }
        Handler<AsyncResult<CreditCardTerms>> dataHandler = data -> {
            if (data.succeeded()) {
                logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("Success", true), new GPCEntry<>("IN", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID)));
                /*routingContext.response()
                        .putHeader("content-type", messageConsumer.body().getString("Accept"))
                        .putHeader("TRACING_ID", TRACING_ID)
                        .putHeader("TRACE_ID", TRACE_ID)
                        .putHeader("SPAN_ID", SPAN_ID)
                        .putHeader("responseSentTime", ZonedDateTime.now(ZoneOffset.UTC).toLocalDateTime().format(commonUtilities.getDateTimeFormatter()))
                        .putHeader("timeTakenInGettingRequest", Long.toString(timeTakenInGettingRequest))
                        .putHeader("requestReceivedTime", nowUTC_handler.toLocalDateTime().format(commonUtilities.getDateTimeFormatter()))
                        .putHeader("requestSentTime", messageConsumer.body().getString("requestSentTime") != null ? messageConsumer.body().getString("requestSentTime") : "")
                        .setStatusCode(200)
                        .end(Json.encode(data.result()));
                 */
                messageConsumer.reply(Json.encode(data.result()));
                logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("OUT", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID), new GPCEntry<>("TIME_TAKEN", ChronoUnit.MILLIS.between(requestReceivedTime_handler, LocalDateTime.now()))));
            } else {
                logger.info("{}", new GPCLogEvent(className, "getByProductCode", new GPCEntry<>("onError", true), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID)));
                if (data.cause() instanceof NoDocumentFoundException) {
                    messageConsumer.body().put("error_message", "Issue while fetching the details of the product");
                    messageConsumer.body().put("developer_message", messageConsumer.body().getJsonArray("errors").add(commonUtilities.getStackTrace(data.cause())).toString());
                    messageConsumer.body().put("error_code", "404");
                    messageConsumer.body().put("more_information", "Issue while fetching the details of the product");
                    //commonUtilities.errors(routingContext, messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID);
                    messageConsumer.fail(404, Json.encode(commonUtilities.errors(messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID)));
                } else {
                    messageConsumer.body().put("error_message", "Internal Server Error: Issue while fetching the details of the product");
                    messageConsumer.body().put("developer_message", messageConsumer.body().getJsonArray("errors").add(commonUtilities.getStackTrace(data.cause())).toString());
                    messageConsumer.body().put("error_code", "500");
                    messageConsumer.body().put("more_information", "Internal Server Error: Issue while fetching the details of the product");
                    //commonUtilities.errors(routingContext, messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID);
                    messageConsumer.fail(500, Json.encode(commonUtilities.errors(messageConsumer.body(), TRACING_ID, TRACE_ID, SPAN_ID)));
                }
                logger.error("{}", new GPCLogEvent(className, "getByProductCode", data.cause(), new GPCEntry<>("OUT", System.currentTimeMillis()), new GPCEntry<>("TRACING_ID", TRACING_ID), new GPCEntry<>("TRACE_ID", TRACE_ID), new GPCEntry<>("SPAN_ID", SPAN_ID), new GPCEntry<>("TIME_TAKEN", ChronoUnit.MILLIS.between(requestReceivedTime_handler, LocalDateTime.now()))));

            }
        };
        // Search based on product codes
        gpcFlowable.getByGPID(TRACING_ID,
                TRACE_ID,
                SPAN_ID,
                TermsConstant.DOCUMENT_KEY,
                gpcFlowable.getByProductCode(TRACING_ID, TRACE_ID, SPAN_ID, messageConsumer.body().getString("product_codes"),
                        TermsConstant.API_VERSION_V1), // Get the GPID for the given IA or ORG~LOGO~PCT code
                TermsConstant.API_VERSION_V1,
                CreditCardTerms.class)
                .subscribe(doc -> dataHandler.handle(Future.succeededFuture(doc)),
                        error -> dataHandler.handle(Future.failedFuture(error)));
    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2951
Include graal native-image metadata so users can build native images … by pmlopes · Pull Request #2951 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR should only be merged after netty accepts the changes in the referred pr.
This can however be used to try out that the upstream changes will work out of the box.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2952
Properties for HttpMethod · Issue #2952 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For vert-x3/vertx-web#460, I need to know if a HttpMethod is safe (leads to a read-only operation: GET, HEAD, OPTIONS), idempotent (does not have any side-effect: all safe one plus PUT and DELETE) or migh have a body(POST, PUT, DELETE, TRACE, CONNECT, PATCH).
Although, I could add an utility on vertx-web, it would be more appropriate to add these properties together with HttpMethod.
Sources:

Safe: https://developer.mozilla.org/en-US/docs/Glossary/safe
Idempotent: https://developer.mozilla.org/en-US/docs/Glossary/idempotent
MighHaveBody: https://tools.ietf.org/html/rfc7231#section-4.3
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2953
Fixes #2952 by VictorQRS · Pull Request #2953 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: victorq victorqrsilva@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2954
Provide HttpClient asynchronous WebSocket connect methods · Issue #2954 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient provides WebSocket connect methods that will not follow the asynchronous method pattern (i.e uses a Handler<AsyncResult<WebSocket>>).
We need to provide such methods to improve the usability of WebSocket client connect use case as well as prepare the migration for Vert.x 4 with future style methods.
Such methods are named webSocket(...).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2955
Deprecate irrelevant HttpClient WebSocket connect methods · Issue #2955 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient expose incorrect WebSocket connection methods. We need to deprecate these methods in favor of the HttpClient#webSocket(...) methods.
e.g
client.websocket(8080, "localhost", "/", ws -> {});
// becomes
client.webSocket(8080, "localhost", "/", ar -> {
  if (ar.succeeded()) {
    WebSocket ws = ar.result();
  }
});

and
client.websocket(8080, "localhost", "/", ws -> {}, err -> {});
// becomes
client.webSocket(8080, "localhost", "/", ar -> {
  if (ar.succeeded()) {
    WebSocket ws = ar.result();
  } else {
  }
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2956
Introduce WebSocketConnectOptions · Issue #2956 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In order to keep the HttpClient#webSocket(...) method overloading reasonable we introduce a WebSocketConnectOptions that extends RequestOptions with:

the version as the WebsocketVersion enum
the subProtocols as a List<String>
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2957
Add headers to RequestOptions  · Issue #2957 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We add an header MultiMap to the RequestOptions allowing to create HttpClientRequest or WebSocket using the corresponding options overloading and be able to specify HTTP headers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2958
Couchbase SDK with Vert.x and Netty server issues · Issue #2958 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am suspecting and do not have sample application to create the issue that there is an issue while using couchbase SDK with vert.x and some dependency injection(like spring-boot-autoconfigure, guice).
If the couchbase SDK connects to cluster before the vert.x httpserver creation, the SDK starts a netty server and the same netty server is getting used while vert.x create the new HttpServer.
The reason I am suspecting that is because when I use reactive extensions with vert.x, I see cb-io threads being used for the processing of normal rxjava code. If the vert.x http server would have started, I would have seen the io- pool for processing of rxjava code.
Also I am seeing this at the start of the code which is making me suspect that this being the cause.
11:38:44.173 [vert.x-eventloop-thread-2] DEBUG io.netty.channel.DefaultChannelId - -Dio.netty.processId: 162448 (auto-detected)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2959
Why Vert.x json renames my object properties? · Issue #2959 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a data class like the following
data class User(val id: String,
                val name: String,
                val isVerified: Boolean)

When I'm trying to serialize it using io.vertx.core.json.Json.encode(user), I expect the result to be
{
  "id": "",
  "name": "",
  "isVerified": false
}

but I got
{
  "id": "",
  "name": "",
  "verified": false
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2960
Misleading function name · Issue #2960 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I had trouble setting up a basic authentication example and discovered by debugging that calling routingContext.request().setExpectMultipart(true); was the point of failure. I noticed that my call had no effect because the request wasn't using a valid multipart content type. I find it misleading to have a setter-like function which does not behave at all like a setter and, even worse, fails silently (see all the if with no matching else):

  
    
      vert.x/src/main/java/io/vertx/core/http/impl/HttpServerRequestImpl.java
    
    
         Line 439
      in
      11f52fc
    
  
  
    

        
          
           public HttpServerRequest setExpectMultipart(boolean expect) { 
        
    
  


I suggest modifying the code so that if expect is true but setting the value can not be carried out, a runtime exception is thrown to warn the developer that the code is not behaving as expected. Alternatively, please at least include proper documentation that explains why this call may fail.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2961
Expose netty's SSL Handshake Timeout by BillyYccc · Pull Request #2961 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
merged, can you provide the same PR for master ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2962
NetSocket upgrade to SSL asynchrony fix · Issue #2962 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the NetSocket#upgradeToSsl method uses an Handler<Void> completion. The only way to determine whether the upgrade fails is to set an exception handler on the socket which will replace the current handler and complicate the code.
This method should instead use an Handler<AsyncResult<Void>>.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2963
Cannot close file if one of the write operations fails · Issue #2963 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version :
Vert.x : 3.7.0
Vert.x - Web : 3.7.0
I test thing with vert.x and I discover that :
-> If file transfer start , create file & fill it.
-> If disk size becomes full.
-> BodyHandler does not trigger an Http response.
-> The guilty seems to be the wich call close on the file but because it remains byte to write, closed is defered & never called, callback never called.

  
    
      vert.x/src/main/java/io/vertx/core/http/impl/HttpServerFileUploadImpl.java
    
    
        Lines 166 to 180
      in
      ba47fac
    
  
  
    

        
          
           context.owner().fileSystem().open(filename, new OpenOptions(), ar -> { 
        

        
          
             if (ar.succeeded()) { 
        

        
          
               file =  ar.result(); 
        

        
          
               pipe.to(file, ar2 -> { 
        

        
          
                 file.close(ar3 -> { 
        

        
          
                   Throwable failure = ar2.failed() ? ar2.cause() : ar3.failed() ? ar3.cause() : null; 
        

        
          
                   if (failure != null) { 
        

        
          
                     notifyExceptionHandler(failure); 
        

        
          
                   } 
        

        
          
                   synchronized (HttpServerFileUploadImpl.this) { 
        

        
          
                     size = file.getWritePos(); 
        

        
          
                   } 
        

        
          
                   handleEnd(); 
        

        
          
                 }); 
        

        
          
               }); 
        
    
  


because close will defer to :

  
    
      vert.x/src/main/java/io/vertx/core/file/impl/AsyncFileImpl.java
    
    
        Lines 521 to 531
      in
      645f6d4
    
  
  
    

        
          
           private synchronized void closeInternal(Handler<AsyncResult<Void>> handler) { 
        

        
          
             check(); 
        

        
          
            
        

        
          
             closed = true; 
        

        
          
            
        

        
          
             if (writesOutstanding == 0) { 
        

        
          
               doClose(handler); 
        

        
          
             } else { 
        

        
          
               closedDeferred = () -> doClose(handler); 
        

        
          
             } 
        

        
          
           } 
        
    
  


and the because of writesOutstanding != 0 (some byte left because we cannot write the all things), close is defered and never called because the completion handler which is the only part who called the defered method is always in failure (no space on disk) :

  
    
      vert.x/src/main/java/io/vertx/core/file/impl/AsyncFileImpl.java
    
    
        Lines 163 to 189
      in
      645f6d4
    
  
  
    

        
          
           private synchronized AsyncFile doWrite(Buffer buffer, long position, Handler<AsyncResult<Void>> handler) { 
        

        
          
             Objects.requireNonNull(buffer, "buffer"); 
        

        
          
             Arguments.require(position >= 0, "position must be >= 0"); 
        

        
          
             check(); 
        

        
          
             Handler<AsyncResult<Void>> wrapped = ar -> { 
        

        
          
               if (ar.succeeded()) { 
        

        
          
                 checkContext(); 
        

        
          
                 Runnable action; 
        

        
          
                 synchronized (AsyncFileImpl.this) { 
        

        
          
                   if (writesOutstanding == 0 && closedDeferred != null) { 
        

        
          
                     action = closedDeferred; 
        

        
          
                   } else { 
        

        
          
                     action = this::checkDrained; 
        

        
          
                   } 
        

        
          
                 } 
        

        
          
                 action.run(); 
        

        
          
                 if (handler != null) { 
        

        
          
                   handler.handle(ar); 
        

        
          
                 } 
        

        
          
               } else { 
        

        
          
                 if (handler != null) { 
        

        
          
                   handler.handle(ar); 
        

        
          
                 } else { 
        

        
          
                   handleException(ar.cause()); 
        

        
          
                 } 
        

        
          
               } 
        

        
          
             }; 
        
    
  


Reproducer :
I have create a tempory partition on an unbuntu desktop (sudo mount -t tmpfs -o size=90M tmpfs /media/testUpload/) and try to download a file greater that 90Mo.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2964
New message codec for service proxy feature by eutkin · Pull Request #2964 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Example:
public class VerticleOnNode1 extends AbstractVerticle {
    public void start() {
        vertx.eventBus()
             .registerDefaultCodec(SampleDataObject.class, new SampleDataObjectMessageCodec());
        vertx.eventBus().send("address", new Object[] { "textValue", new SampleDataObject() });
    }
}

public class VerticleOnNode2 extends AbstractVerticle {
    public void start() {
        vertx.eventBus()
             .registerDefaultCodec(SampleDataObject.class, new SampleDataObjectMessageCodec());
        vertx.eventBus().consumer("address")
             .handler(mes -> {
                  String textValue = mes.body()[0];
                  SampleDataObject sample = mes.body()[1];
             });
    }
}
Service Proxy:
public class SomeDatabaseServiceVertxEBProxy implements SomeDatabaseService {
  @Override
  public  void save(String collection, JsonObject document, Handler<AsyncResult<Void>> result){
    if (closed) {
      result.handle(Future.failedFuture(new IllegalStateException("Proxy is closed")));
      return;
    }
   /* Serialize data in text format
    JsonObject args = new JsonObject();
    args .put("collection", collection);
    args .put("document", document);
   */
  // now, serialize data in binary format, supporting user's codecs.
  // and DataObject may not have Constructor(JsonObject json) and toJson method.
   Object[] args = new Object[] {collection, document};

    DeliveryOptions _deliveryOptions = (_options != null) ? new DeliveryOptions(_options) : new DeliveryOptions();
    _deliveryOptions.addHeader("action", "save");
    _vertx.eventBus().<Void>send(_address, args, _deliveryOptions, res -> {
      if (res.failed()) {
        result.handle(Future.failedFuture(res.cause()));
      } else {
        result.handle(Future.succeededFuture(res.result().body()));
      }
    });
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2965
Fixes #2963 by aygalinc · Pull Request #2965 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2966
Add Object Array Message Codec for Vertx Service Proxy by eutkin · Pull Request #2966 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
up
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2967
RecordParser delimited parsing does not read the last file line · Issue #2967 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2968
Compilation failure: both interface io.vertx.core.Vertx in io.vertx.core and class io.vertx.reactivex.core.Vertx in io.vertx.reactivex.core match · Issue #2968 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
When doing mvn package it gives this error:
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project myapp: Compilation failure: Compilation failure: 
[ERROR] /home/devrck/Downloads/echo2/target/classes/com/echo2/echo2/services/EchoServiceVertxProxyHandler.java:[61,17] reference to Vertx is ambiguous
[ERROR]   both interface io.vertx.core.Vertx in io.vertx.core and class io.vertx.reactivex.core.Vertx in io.vertx.reactivex.core match
[ERROR] /home/devrck/Downloads/echo2/target/classes/com/echo2/echo2/services/EchoServiceVertxProxyHandler.java:[67,39] reference to Vertx is ambiguous
[ERROR]   both interface io.vertx.core.Vertx in io.vertx.core and class io.vertx.reactivex.core.Vertx in io.vertx.reactivex.core match
[ERROR] /home/devrck/Downloads/echo2/target/classes/com/echo2/echo2/services/EchoServiceVertxProxyHandler.java:[71,39] reference to Vertx is ambiguous
[ERROR]   both interface io.vertx.core.Vertx in io.vertx.core and class io.vertx.reactivex.core.Vertx in io.vertx.reactivex.core match
[ERROR] /home/devrck/Downloads/echo2/target/classes/com/echo2/echo2/services/EchoServiceVertxProxyHandler.java:[75,39] reference to Vertx is ambiguous
[ERROR]   both interface io.vertx.core.Vertx in io.vertx.core and class io.vertx.reactivex.core.Vertx in io.vertx.reactivex.core match
[ERROR] /home/devrck/Downloads/echo2/target/classes/com/echo2/echo2/services/EchoServiceVertxProxyHandler.java:[44,1] a type with the same simple name is already defined by the single-type-import of io.vertx.core.Vertx

Here is my pom.xml:
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <groupId>com.echo2</groupId>
  <artifactId>myapp</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <name>echo2</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.target>1.10</maven.compiler.target>
    <maven.compiler.source>1.10</maven.compiler.source>
    <vertx.version>3.7.1</vertx.version>
    <vertx-maven-plugin.version>1.0.18</vertx-maven-plugin.version>
    <vertx.verticle>com.echo2.echo2.MainVerticle</vertx.verticle>
    <slf4j.version>1.7.21</slf4j.version>
    <graal.version>1.0.0-rc14</graal.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-core</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-jdk14</artifactId>
      <version>${slf4j.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-reactive-streams</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-rx-gen</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-rx-java2-gen</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-rx-java2</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-service-factory</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-service-proxy</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-web-api-contract</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-web-api-service</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-web</artifactId>
      <version>${vertx.version}</version>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-codegen</artifactId>
      <version>${vertx.version}</version>
      <classifier>processor</classifier>
    </dependency>
    <dependency>
      <groupId>io.vertx</groupId>
      <artifactId>vertx-web-client</artifactId>
      <version>${vertx.version}</version>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>io.reactiverse</groupId>
        <artifactId>vertx-maven-plugin</artifactId>
        <version>${vertx-maven-plugin.version}</version>
        <executions>
          <execution>
            <id>vmp</id>
            <goals>
              <goal>initialize</goal>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project>
package com.echo2.echo2.services;

import com.echo2.echo2.services.impl.EchoServiceImpl;
import io.vertx.core.AsyncResult;
import io.vertx.core.Handler;
import io.vertx.ext.web.api.OperationRequest;
import io.vertx.ext.web.api.OperationResponse;
import io.vertx.ext.web.api.generator.WebApiServiceGen;
import io.vertx.reactivex.core.Vertx;

@WebApiServiceGen
public interface EchoService {

  static EchoService create(Vertx vertx) {
    return new EchoServiceImpl(vertx);
  }

  void getEcho(
    String name,
    OperationRequest context, Handler<AsyncResult<OperationResponse>> resultHandler);

}
Can you please help with the issue?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2969
RecordParser delimited parsing does not read the last file line by tsegismont · Pull Request #2969 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj this fixes the issue without breaking compatibility so it's fine for 3.8
Yet there are a couple of problems with RecordParser:

it's only safe in verticle code (not truly thread safe)
back-pressure is managed with the internal buffer state, whereas it could be simplified with an InboundBuffer

If that's fine with you, I can file an issue for 4.0.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2970
CLI updates by pmlopes · Pull Request #2970 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Summary of the changes:

This code is (to my knowledge) backward compatible
Existing commands can be overriden by a new command with higher priority (default priority: 0)
A new Default-Verticle-Factory flag is read from the MANIFEST.MF which will prefix all main verticles with xyz: IIF the main verticle has no specific factory already in the name.
Converters were refactored to use less reflection
Command factory was refactored to use less reflection

Use cases:
Commands can be overriden as:
@Name("run", priority = 100)
public class MyRunCommand extends RunCommand {
  ...
}
Polyglot verticles can now be declared as:
Default-Verticle-Factory: js
Main-Verticle: index

Doing this will ensure that the main verticle will not be assumed to be a java verticle and will be transformed to: js:index.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2971
javax.net.ssl.SSLException: Received fatal alert: certificate_unknown · Issue #2971 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to Create an Https server on localhost and i have a client which uses SockJS and connects to the event bus via a url https://localhost:8001/eventbus. I have a self signed certificate and the server.cert and server.key files are in the resources of my project.
Server Code
router.route("/eventbus/*").handler(sockJSHandlerCreator(inboundAddress, outboundAddress));

        router.get("/storeassist").handler(this::storeAssist);

        Buffer crtBuffer = Buffer.buffer();
        Buffer keyBuffer = Buffer.buffer();
        HttpServerOptions httpOpts = new HttpServerOptions();
        try {

            httpOpts.setSsl(true)
                    .setPemKeyCertOptions(new PemKeyCertOptions()
                    .setKeyValue(keyBuffer.appendBytes(IOUtils.toByteArray(getClass()
                            .getClassLoader().getResourceAsStream("server.key"))))
                    .setCertValue(crtBuffer.appendBytes(IOUtils.toByteArray(getClass()
                            .getClassLoader().getResourceAsStream("server.crt")))));
            

            this.getVertx()
                    .createHttpServer(httpOpts)
                    .requestHandler(router::accept)
// Other logic
And i'm using Vertx eventbus js https://github.com/vert-x3/vertx-bus-bower/blob/master/vertx-eventbus.js to connect the server to the client. The client runs on an azure blob url and has a host like https://azcdn.com/my/ap
When i send a message from the vertx module to the client i get the following error
May 28, 2019 11:35:41 PM io.netty.channel.DefaultChannelPipeline onUnhandledInboundException
WARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: certificate_unknown
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:459)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:141)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: javax.net.ssl.SSLException: Received fatal alert: certificate_unknown
	at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
	at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1666)
	at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1634)
	at sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1800)
	at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1083)
	at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:907)
	at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)
	at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
	at io.netty.handler.ssl.SslHandler$SslEngineType$3.unwrap(SslHandler.java:292)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1248)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1159)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1194)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)

Am i doing something wrong,
I am running this on Mac OSX El Capitan
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2972
The values in some methods of JsonArray/JsonObject are not converted to json types. · Issue #2972 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
some method like :

  
    
      vert.x/src/main/java/io/vertx/core/json/JsonArray.java
    
    
        Lines 524 to 527
      in
      d9bfe3e
    
  
  
    

        
          
           @Override 
        

        
          
           public Iterator<Object> iterator() { 
        

        
          
             return new Iter(list.iterator()); 
        

        
          
           } 
        
    
  



  
    
      vert.x/src/main/java/io/vertx/core/json/JsonArray.java
    
    
        Lines 663 to 671
      in
      d9bfe3e
    
  
  
    

        
          
           public Object next() { 
        

        
          
             Object val = listIter.next(); 
        

        
          
             if (val instanceof Map) { 
        

        
          
               val = new JsonObject((Map)val); 
        

        
          
             } else if (val instanceof List) { 
        

        
          
               val = new JsonArray((List)val); 
        

        
          
             } 
        

        
          
             return val; 
        

        
          
           } 
        
    
  


it conver the value to JsonArray if it's a List, conver to JsonObject if it's a map.
but some other method didn't conver.eg:forEach, stream,spliterator. So should we implements these methods
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2973
Inbound buffer silently ignores an exception · Issue #2973 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hey,
I have been playing with a simple TCP server, and it seems like exceptions thrown in socket::handler are silently ignored. None of the below exception handlers are passed to InboundBuffer as a result an exception neither being caught or logged:
public class SimpleServer {
	public static void main(String[] args) {
		System.err.println("Application starting...");
		
		final Vertx vertx = Vertx.vertx();
		final FileSystem fs = vertx.fileSystem();

		final NetServer server = vertx.createNetServer();
		server.exceptionHandler(System.err::println);

		server.connectHandler(socket -> {
			socket.exceptionHandler(System.err::println);
			socket.handler($ -> fs.readDirBlocking("/WHERE_IS_MY_EXCEPTION").forEach(System.out::println));
		}).listen(3456);
	}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2974
Inbound exception handler by manzur · Pull Request #2974 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
we need a test, thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2975
Check promise by vietj · Pull Request #2975 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2976
Check promise by vietj · Pull Request #2976 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello Experts,
I have been trying to implement a scenario where the verticle may be
executing a long running call. For e.g. Opening a socket with external
application (MS Exchange) and retrieving records.

I tried implementing the logic using "executeBlocking" (see below:) and
inside that block I use "*Thread.sleep(long)"* to mimic long running call,
however I see that when I fire two concurrent requests the  second one gets
queued up and completes only after the first one is done.

Example code
----------------------------------------------------------------------------------------------------------
static int a=0;
  @OverRide
  public void start() throws Exception {

    vertx.createHttpServer().requestHandler(request -> {

     vertx.<String>executeBlocking(future -> {
a++;
String result = null;
                try {
 if(a%2==0) {
Thread.sleep(10000);
result = "armadillos!";
  }else {
  Thread.sleep(5000);
  result = "Amol!";
 }
} catch (InterruptedException e) {e.printStackTrace();}
        future.complete(result);
      }, res -> {
        if (res.succeeded()) {
          request.response().putHeader("content-type",
"text/plain").end(res.result());
        } else {
          res.cause().printStackTrace();
        }
      });
    }).listen(8080);
  }
--------------------------------------------------------------------------------------------------------------------

I'm not sure if this  is the right way to implement the required use case,
but would like to hear your thoughts on this.

Thanks,
Umesh
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2977
socket IO read/write issue · Issue #2977 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Close the socket buffer write when reading a socket in the connetionBase class.
Why is this design?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2978
HttpServerRequest throws error when setExpectMultipart fails. by DeMol-EE · Pull Request #2978 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you avoid reformating imports ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2979
Fixes vert.x-web 1146 by abilioesteves · Pull Request #2979 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
actually we want to go away from Jackson data binding in vertx 4, so we should find another way to do it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2980
Json codec by vietj · Pull Request #2980 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2981
Vertx http request queuing · Issue #2981 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
We have taken the vert.x hello world application and run that as a standalone application
Git Repo: https://github.com/himanshumps/web-examples.git
Maven Command: mvn clean install exec:java -Dexec.mainClass="io.vertx.example.web.helloworld.Server"
When we run the load test with a single user, we get the following response:

Percentage of the requests served within a certain time (ms)
50%      3
66%      4
75%      4
80%      5
90%      5
95%      7
98%      9
99%     15
100%     65 (longest request)

When the same test is ran with 10 user, we get the following:

Percentage of the requests served within a certain time (ms)
50%     28
66%     33
75%     38
80%     42
90%     59
95%     85
98%    148
99%    235
100%    252 (longest request)

When the same test is ran with 100 users, we get the following:

Percentage of the requests served within a certain time (ms)
50%    455
66%    566
75%    651
80%    682
90%    874
95%   1177
98%   1354
99%   1406
100%   1949 (longest request)

As you can see from the test, as we increase the load on the application, the response time increases exponentially.
Are the request getting queued up ?
When we used LoggerHandler, we can see the response time on the server is 0-3 ms. So where is the additional time going?
The similar results were seen when we ran it in a docker container with 1 core CPU and 4GB of RAM.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2982
HTTP Client - Deadlock · Issue #2982 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes, it appears that some eventloops are blocked while doing some http client relative stuff (Vert.x 3.7.0)
Here is a threaddump:
"vert.x-eventloop-thread-0" #10 prio=5 os_prio=0 tid=0x00007f55410b0000 nid=0x855f waiting for monitor entry [0x00007f54fb771000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleDrained(HttpClientRequestImpl.java:352)
	- waiting to lock <0x00000000c5b865e0> (a io.vertx.core.http.impl.HttpClientRequestImpl)
	at io.vertx.core.http.impl.Http1xClientConnection.handleInterestedOpsChanged(Http1xClientConnection.java:847)
	- locked <0x00000000c541b4b8> (a io.vertx.core.http.impl.Http1xClientConnection)
	at io.vertx.core.net.impl.VertxHandler.lambda$channelWritabilityChanged$3(VertxHandler.java:136)
	at io.vertx.core.net.impl.VertxHandler$$Lambda$757/154866834.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:188)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:180)
	at io.vertx.core.net.impl.VertxHandler.channelWritabilityChanged(VertxHandler.java:136)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelWritabilityChanged(CombinedChannelDuplexHandler.java:450)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelWritabilityChanged(ChannelInboundHandlerAdapter.java:119)
	at io.netty.channel.CombinedChannelDuplexHandler.channelWritabilityChanged(CombinedChannelDuplexHandler.java:273)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1457)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:977)
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:607)
	at io.netty.channel.ChannelOutboundBuffer.setWritable(ChannelOutboundBuffer.java:573)
	at io.netty.channel.ChannelOutboundBuffer.decrementPendingOutboundBytes(ChannelOutboundBuffer.java:194)
	at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:259)
	at io.netty.channel.ChannelOutboundBuffer.removeBytes(ChannelOutboundBuffer.java:338)
	at io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:428)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:934)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.flush0(AbstractNioChannel.java:360)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:901)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1396)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:768)
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:749)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.flush(CombinedChannelDuplexHandler.java:533)
	at io.netty.channel.ChannelOutboundHandlerAdapter.flush(ChannelOutboundHandlerAdapter.java:115)
	at io.netty.channel.CombinedChannelDuplexHandler.flush(CombinedChannelDuplexHandler.java:358)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:802)
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:814)
	at io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:794)
	at io.vertx.core.net.impl.ConnectionBase.write(ConnectionBase.java:102)
	at io.vertx.core.net.impl.ConnectionBase.lambda$queueForWrite$0(ConnectionBase.java:123)
	- locked <0x00000000c541b4b8> (a io.vertx.core.http.impl.Http1xClientConnection)
	at io.vertx.core.net.impl.ConnectionBase$$Lambda$756/897948790.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
	at io.vertx.core.impl.EventLoopContext$$Lambda$64/397318359.run(Unknown Source)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

"vert.x-eventloop-thread-3" #13 prio=5 os_prio=0 tid=0x00007f55410b6800 nid=0x8562 waiting for monitor entry [0x00007f54fb46d000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at io.vertx.core.http.impl.Http1xClientConnection.handleRequestEnd(Http1xClientConnection.java:659)
	- waiting to lock <0x00000000c541b4b8> (a io.vertx.core.http.impl.Http1xClientConnection)
	at io.vertx.core.http.impl.Http1xClientConnection.access$1100(Http1xClientConnection.java:59)
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.endRequest(Http1xClientConnection.java:411)
	at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:653)
	- locked <0x00000000c5b865e0> (a io.vertx.core.http.impl.HttpClientRequestImpl)
	at io.vertx.core.http.impl.HttpClientRequestImpl.end(HttpClientRequestImpl.java:576)
	at io.vertx.core.streams.impl.PipeImpl.lambda$to$4(PipeImpl.java:105)
	at io.vertx.core.streams.impl.PipeImpl$$Lambda$480/828512551.handle(Unknown Source)
	at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:79)
	at io.vertx.core.streams.impl.PipeImpl.to(PipeImpl.java:89)
	at io.vertx.core.streams.ReadStream.pipeTo(ReadStream.java:130)
	at io.vertx.ext.web.client.impl.HttpContext.handleSendRequest(HttpContext.java:439)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:266)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:250)
	at io.gravitee.elasticsearch.client.http.HttpClient$1.handle(HttpClient.java:136)
	at io.gravitee.elasticsearch.client.http.HttpClient$1.handle(HttpClient.java:123)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:247)
	at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
	at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:247)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:257)
	at io.vertx.ext.web.client.impl.HttpContext.sendRequest(HttpContext.java:173)
	at io.vertx.ext.web.client.impl.HttpContext.handlePrepareRequest(HttpContext.java:330)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:263)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:250)
	at io.gravitee.elasticsearch.client.http.HttpClient$1.handle(HttpClient.java:136)
	at io.gravitee.elasticsearch.client.http.HttpClient$1.handle(HttpClient.java:123)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:247)
	at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
	at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:247)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:257)
	at io.vertx.ext.web.client.impl.HttpContext.prepareRequest(HttpContext.java:160)
	at io.vertx.ext.web.client.impl.HttpRequestImpl.send(HttpRequestImpl.java:263)
	at io.vertx.ext.web.client.impl.HttpRequestImpl.sendStream(HttpRequestImpl.java:228)
	at io.vertx.reactivex.ext.web.client.HttpRequest.sendStream(HttpRequest.java:376)
	at io.vertx.reactivex.ext.web.client.HttpRequest.lambda$rxSendStream$3(HttpRequest.java:394)
	at io.vertx.reactivex.ext.web.client.HttpRequest$$Lambda$533/1751013907.accept(Unknown Source)
	at io.vertx.reactivex.impl.AsyncResultSingle.subscribeActual(AsyncResultSingle.java:48)
	at io.reactivex.Single.subscribe(Single.java:3495)
	at io.reactivex.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:34)
	at io.reactivex.Single.subscribe(Single.java:3495)
	at io.reactivex.internal.operators.single.SingleSubscribeOn$SubscribeOnObserver.run(SingleSubscribeOn.java:89)
	at io.reactivex.Scheduler$DisposeTask.run(Scheduler.java:578)
	at io.vertx.reactivex.ContextScheduler$ContextWorker$TimedAction.run(ContextScheduler.java:184)
	at io.vertx.reactivex.ContextScheduler$ContextWorker$TimedAction$$Lambda$535/208536531.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
	at io.vertx.core.impl.EventLoopContext$$Lambda$64/397318359.run(Unknown Source)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

I'm trying to provide a simple reproducer but it seems that the deadlock is pretty hard to reproduce.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2983
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2984
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2985
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2986
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2987
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2988
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2989
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2990
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2991
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2992
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2993
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2994
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2995
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2996
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2997
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2998
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/2999
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3000
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3001
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3002
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3003
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3004
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3005
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3006
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3007
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3008
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3009
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3010
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3011
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3012
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3013
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3014
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3015
HttpClient improvements - this closes #3014, this closes #2982 by vietj · Pull Request #3015 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3016
HttpClient improvements - this closes #3014, this closes #2982 by vietj · Pull Request #3016 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3017
Isolation group classloader cleanup · Issue #3017 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the deployment manager will create classloader when isolation group is required. When all verticles using an isolation group are undeployed or when the vertx instance is closed these classloaders should be closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3018
Isolation group classloader cleanup - this fixes #3017 by vietj · Pull Request #3018 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3019
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3020
Expose WebSocket closed status · Issue #3020 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The WebSocketBase interface could expose its closed boolean status.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3021
Thread blocked for long time · Issue #3021 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
What is the issue is related too? And what is the possible way to solve it?
[hz.nubeio-cluster.priority-generic-operation.thread-0] WARN  c.h.s.i.o.impl.Invocation - [172.22.0.7]:5701 [dev] [3.10.6] Retrying invocation: Invocation{op=com.hazelcast.internal.partition.operation.PromotionCommitOperation{serviceName='hz:core:partitionService', identityHash=2086216157, partitionId=-1, replicaIndex=0, callId=1106647, invocationTime=1562121161640 (2019-07-03 02:32:41.640), waitTimeout=-1, callTimeout=5000}, tryCount=2147483647, tryPauseMillis=500, invokeCount=67910, callTimeoutMillis=5000, firstInvocationTimeMs=1562096649943, firstInvocationTime='2019-07-02 19:44:09.943', lastHeartbeatMillis=0, lastHeartbeatTime='1970-01-01 00:00:00.000', target=[172.22.0.7]:5701, pendingResponse={VOID}, backupsAcksExpected=0, backupsAcksReceived=0, connection=null}, Reason: com.hazelcast.spi.exception.RetryableHazelcastException: Another promotion is being run currently. This is only expected when promotion is retried to an unresponsive destination.
2019-07-03 02:32:42 [vertx-blocked-thread-checker] WARN  i.v.core.impl.BlockedThreadChecker - Thread Thread[vert.x-worker-thread-8,5,main] has been blocked for 24072923 ms, time limit is 60000 ms
io.vertx.core.VertxException: Thread blocked
	at java.lang.Thread.sleep(Native Method)
	at com.hazelcast.internal.partition.impl.InternalPartitionServiceImpl.getPartitionOwnerOrWait(InternalPartitionServiceImpl.java:235)
	at com.hazelcast.internal.partition.impl.InternalPartitionServiceImpl.getMemberPartitionsMap(InternalPartitionServiceImpl.java:989)
	at com.hazelcast.spi.impl.operationservice.impl.OperationServiceImpl.invokeOnAllPartitions(OperationServiceImpl.java:375)
	at com.hazelcast.multimap.impl.MultiMapProxySupport.entrySetInternal(MultiMapProxySupport.java:164)
	at com.hazelcast.multimap.impl.ObjectMultiMapProxy.entrySet(ObjectMultiMapProxy.java:182)
	at io.vertx.spi.cluster.hazelcast.impl.HazelcastAsyncMultiMap.lambda$removeAllMatching$0(HazelcastAsyncMultiMap.java:76)
	at io.vertx.spi.cluster.hazelcast.impl.HazelcastAsyncMultiMap$$Lambda$251/1786991293.handle(Unknown Source)
	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$2(ContextImpl.java:272)
	at io.vertx.core.impl.ContextImpl$$Lambda$48/1783083399.run(Unknown Source)
	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
	at io.vertx.core.impl.TaskQueue$$Lambda$45/1368173251.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3022
Failures not reported when executeBlocking is invoked without a result handler by tsegismont · Pull Request #3022 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #3009
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3023
Vert.x can use event loop with vanilla Netty threads · Issue #3023 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently Vert.x mandates that EventLoop threads are instance of VertxThread. It is possible to have Vert.x uses vanilla EventLoop threads by using FastThreadLocal instances to store the current dispatch local information such as the current context and the blocked thread checker statistics.
This allows Vert.x instance to be created with existing EventLoopGroup and embed it in an existing runtime that provides the Netty resources.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3024
HttpClient redirection can use any HttpClientRequest · Issue #3024 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient will cast the HttpClientRequest returned by the redirect handler down to HttpClientRequestImpl. If we avoid this cast it gives flexibility for redirect implementors to provide a proxy of the request to implement things such as body caching in some specific cases.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3025
Fix 'DEFAULT_BLOCKED_THREAD_CHECK_INTERVAL_UNIT' constant javadoc des… by zeying-wang · Pull Request #3025 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…cription error in VertxOptions Class.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3026
Delete invalid import class,Remove repeat ignore item,Fix 'javadoc' description error by zeying-wang · Pull Request #3026 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks , I ported it here
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3027
WorkerContext.wrapTask() bug? · Issue #3027 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
final  Runnable wrapTask(T arg, Handler hTask, PoolMetrics metrics) {
Object metric = metrics != null ? metrics.submitted() : null;
return () -> {
if (metrics != null) {
metrics.begin(metric);
}
boolean succeeded = executeTask(arg, hTask);
if (metrics != null) {
metrics.end(metric, succeeded);
}
};
}
metrics.begin(metric)  return usage.time() but it do not stop.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3028
[Worker pool - ExecuteBlocking] Queing delay too high · Issue #3028 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
During some load testing on our architecture based on VertX I found some issues concerning the use of ExecuteBlocking. I don't know yet if it comes from our way of doing or if something weird is going on.
1. Context
We are calling an endpoint that is in charge of execute some I/O (a rest call to a third party). For that we are executing that I/O in a executeBlocking() method (using vertx.executeBlocking() with ordered = false).
Unfortunately, we can't use the Vertx webclient for that purpose
2. Configuration
We are using 4 event loops (fix to 4 as we have only 2 CPU on our hardware) and a worker pool size of 100 using 4 verticles.
The I/O blocking process is executed in a average of 200ms.
The load test is using JMeter (on the same local machine) using 1000 threads that will call this specific endpoint (using HTTP).
For the verticle deployment we are using a specific Verticle that is in charge of deploying the "business verticles" based on configuration via  vertx.deployVerticle. The business verticle to deploy is configured that way :

worker : false
workerpoolName : myWorkerPoolName (I changed that name for this issue :))
workerPoolSize : 100
instances : 4

3. Where is the potential problem ?
The average response time of the call is around 2 seconds.
The delay is caused by the time to send the blocking task to the worker pool.
Here are some metrics about this specific worker pool (exposed by DropWizard) :
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.5",} 1.752741364
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.75",} 1.816608618
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.95",} 2.275382375
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.98",} 2.3868914240000003
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.99",} 2.4479487690000004
vertx_pools_worker_xxx_worker_pool_queue_delay{quantile="0.999",} 2.510801675
vertx_pools_worker_xxx_worker_pool_queue_delay_count 80628.0
As we can see in the metrics most of the queue_delay is around 2 seconds.
Here is a snapshot (from JVisualVM of the worker pool during the load test) :

As we can see the worker pool is busy but it seems that some threads are waiting sometimes (indicating that he seems not "over charged"). (we've tried adding more threads in the pool but it didn't change anything, more threads were waiting, that's all).
The event loops are not blocked (we don't have any warnings, and we've set the warning to 100ms).
We've set timers to correlate data for the queuing delay and we've noticed the same numbers (2 seconds delay for a process to be executed).
Here is a trace (from Jaeger) displaying the duration for one specific call during load testing :

We can see that the process inside the execute blocking is taking around 200ms but before that the process was doing nothing but waiting to be processed.
Questions :

Do we have missed a configuration ?
Is there something we're doing wrong ?
How can we explain that delay ?
Can we avoid the queuing delay in some way ?

Notes

This kind of contention is not happening with lower concurrency (like 100 threads)
We've tried to have one worker pool per verticle (so 4 worker pool) to avoid potential contention but it didn't change anything at first sight.
We can't have more than 2 CPU on our hardware
We are using Vertx 3.7.1

Thank you and don't hesitate to ask me anything that can help you investigate this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3029
Javadoc for Filesystem.mkdirs incorrect · Issue #3029 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Javadoc says that the operation will fail when the directory already exists.
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/file/FileSystem.java#L486
This is incorrect. Internally Files.createDirectories is used, which does not fail when the directory already exists.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3030
Fix FileSystem#mkdirs javadoc · Issue #3030 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently FileSystem#mkdirs javadoc is incorrect. This actually only fail when there is a file already existing and not a directory. Under the hood the API uses Files#createDirectories method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3031
Worker pool metrics does not correctly pass the pool metrics handback objects · Issue #3031 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3032
Set inbound exception handler by manzur · Pull Request #3032 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj why hasn't this pull request been merged yet?
Having issues where parsing fails and get no errors.
#2973
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3033
Lazy load JDK default cipher suite - fixes #3012 by vietj · Pull Request #3033 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3034
The main class io.vertx.core.Launcher could not be found or loaded · Issue #3034 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx version=3.7.1
When I use cmd.exe to enter the command "vertx version", the console outputs 3.7.1,
but when I use git bash.exe to enter the same command, the console error
"The main class io.vertx.core.Launcher could not be found or loaded"
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3035
add message exception handler by tomfi · Pull Request #3035 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi, this is my first attempt to contribute to Vert.x and to open source in general :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3036
Add method for creating type-safe Future<T> objects compatible with "var" declarations. by anatec-deryck · Pull Request #3036 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
At the moment, the only way to create a typed Future<T> is to have an explicitly-typed declaration of the variable, namely:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3037
Add new static method to create Future<T> objects that is compatible with "var" declarations · Issue #3037 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
At the moment, the only way to create a typed Future<T> is to have an explicitly-typed declaration of the variable, namely:
Future<Void> myFuture = Future.future();

If you attempt to use the Java 10 var keyword, the result is a value of type Future<Object>.
It would therefore be useful to add a new static method to Future (or Promise in 3.8), similar to the following:
static <T> Future<T> future(Class<T> clazz) {
    Future<T> future = factory.future();
    return future;
}

Using this new method allows for the following code, where the inferred type is now Future<Void>:
var myFuture = Future.future(Void.class);

The impact of this change seems minimal, given that it is really just a compile-time type checking fix.
Regards,
Deryck Brown
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3038
HttpClient doesn't handle 308 redirect · Issue #3038 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Is there a reason?
Seems like it's supposed to be handled like a 301.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3039
Support for Dart · Issue #3039 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm Dart developer and i would like to work on something to create an implementation of Vertx pro Dart.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3040
How does vert.x connect with dns server · Issue #3040 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I find  some random udp port(0.0.0.0：）in my program,which is for dns resolve.obviously it listens at any address so it's not safe,so I wonder how can I bind the this port to specified ip address.thanks a lot
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3041
jdbc.subscribeOn(scheduler) is executed on event loop thread · Issue #3041 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was expecting the following SQL statement to be executed on the worker thread. However, according to logs it is executed on event loop thread. Tried 3.8.0 today, no difference. Here is the code and output:
public class TestVerticle extends AbstractVerticle {

    JDBCClient jdbc;

    @Override
    public void start(Promise<Void> fut) {

        jdbc = JDBCClient.createNonShared(vertx,
                new JsonObject().put("url", "jdbc:hsqldb:mem:test?shutdown=true")
                        .put("driver_class", "org.hsqldb.jdbcDriver"));

        fut.complete();
        test();
    }

    public void test() {

        Scheduler scheduler = RxHelper.blockingScheduler(vertx);

        jdbc.rxGetConnection()
        .subscribeOn(scheduler)
        .flatMap(conn -> {
            Thread.sleep(3000); //Vertx BlockedThreadChecker prints warning if this is on event loop thread.
            return conn.rxQuery("select 42 from (values(0))")
                    .doAfterTerminate(conn::close);
        })
        .subscribe(rs -> {
            System.out.println(rs.getRows().toString() + " " + Thread.currentThread().getName());
        });

        //Check subscribeOn(scheduler) really works on worker thread if jdbc-client is not used.
        Observable.range(1, 1).subscribeOn(scheduler).subscribe(i -> {
            Thread.sleep(3000); //Vertx BlockedThreadChecker prints warning if this is on event loop thread.
            System.out.println(i + " " + Thread.currentThread().getName());
        });
    }
}

1 vert.x-worker-thread-2
Tem 22, 2019 2:41:13 ÖS io.vertx.core.impl.BlockedThreadChecker
WARNING: Thread Thread[vert.x-eventloop-thread-2,5,main]=Thread[vert.x-eventloop-thread-2,5,main] has been blocked for 2813 ms, time limit is 2000 ms
[{"C1":42}] vert.x-eventloop-thread-2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3042
Using multiple classloaders with FileResolver can cause caching issues · Issue #3042 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue
The fileresolver will currently locate and unpack resources using the currently active classloader. The found resource will be extracted and placed in a cache directory. This mechanism is however not taking into account that the classloader can resolve different resources for the same given fileName/path. The fileresolver will currently return the wrong content once the resource has been cached once.
Mitigation
I suggest to prepend a id,key that is classloader specific to the cache directory so that the cache is working correctly when using multiple classloaders. I'm not yet sure what id to use since ideally the cache should survive a restart of the JVM.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3043
Support http status code 308 redirection by shenzhou-6 · Pull Request #3043 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #3038
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3044
Port-Blacklist for "inner-communication-Threads" · Issue #3044 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
i am working on a NetServer-Project on a Windows 2016-Server. Looking at the Screenshot (ProcessExplorer), you will see, that the process which has a single Vertx-Instance with one NetServer listening on one Port (35000), opens alot of "random" Ports which communicate "zick-zack"-wise. I quess it is for inner-Thread-Communication in vertx(?).
The problem i have is, that in our System, we have some ports, which are used fix by other third-party-services and are blocked by vertx sometimes. Is it possible to have a blacklist or something like that, which is used for port allocation?
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3045
Is it okay to share the Vert.X EventLoop with the AWS SDK? · Issue #3045 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi guys.
I've been recently migrating one service from Undertow to Vert.x and the experience so far have been great. We make massive usage of AWS SDK 2 and as both uses Netty under the hood, and Netty event loop can handle hundreds of millions of requests, I was wondering if is it okay to share Vert.x's Netty EventLoop with AWS SDK 2's NettyNioHttpAsyncClient?
Below you can find a copy of what we did on your configuration.
val awsRegion = Region.of( env("AWS_REGION", "us-east-1") )
val credentialsProvider = DefaultCredentialsProvider.create()
val nettyHttpClient = NettyNioAsyncHttpClient.builder()
    .eventLoopGroup(SdkEventLoopGroup.create(vertx.nettyEventLoopGroup()))
        .build()
I guess worth mention that nettyHttpClient will also be shared by all of our AWS clients.
    @Producer
    fun kinesisClient() = KinesisAsyncClient.builder()
        .httpClient(nettyHttpClient)
        .credentialsProvider(credentialsProvider)
        .region(awsRegion)
            .build()!!

    @Producer
    fun dynamoDbClient() = DynamoDbAsyncClient.builder()
        .httpClient(nettyHttpClient)
        .credentialsProvider(credentialsProvider)
            .build()!!
Here are versions we've been using on our Kotlin (on OpenJDK 11) project:
properties:
  version.vertx: 3.8.0
  version.aws: 2.7.8
  version.netty: 4.1.34.Final
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3046
Rename startFuture parameters to startPromise by jponge · Pull Request #3046 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I found this while playing with 4.0.0-milestone and my IDE completed with a wrong name.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3047
Make available on WebSocketBase the close status code and reason · Issue #3047 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently one can be aware of the close status code and reason received by a WebSocket by setting a frame handler and catching the close frame. We can also retain such info on the WebSocket and expose them as accessors so they can be retrieved easily.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3048
Make available on WebSocketBase the close status code and reason - se… by vietj · Pull Request #3048 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
merged directly with a minor change in the test
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3049
Race condition in NetServer connection management by tsegismont · Pull Request #3049 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3050
HttpServer cookie support · Issue #3050 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently cookie support is provided by Vert.x Web using the cookie handler. This feature is quite simple and could be directly in Vert.x Core.
Cookies can be queried on HttpServerRequest and managed on HttpServerResponse (like adding / removing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3051
Test failures on Ubuntu 16.04 on X86 architecture · Issue #3051 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to build Eclipse Vert.x package master branch on Ubuntu 16.04 platform on X86 architecture. I could build the package but I am getting around 8 test case failures.
These are the steps that I followed -
- Installed Java version: 1.8.0
- Installed Apache Maven 3.6.0
- Cloned the master copy of eclipse-vertx git code base.
- Triggered the build
I am currently trying to look at the logs to investigate the failures, however any pointers on any additional dependencies / configuration required for these, which I may be missing would be of great help.
Appreciate your help in advance.
Below are the test cases which are failing. Please let me if I should share more specific details.
io.vertx.core.DeploymentTest.txt:Tests run: 76, Failures: 4, Errors: 0, Skipped: 0, Time elapsed: 38.469 sec <<< FAILURE! - in io.vertx.core.DeploymentTest
io.vertx.core.file.FileSystemTest.txt:Tests run: 101, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 11.874 sec <<< FAILURE! - in io.vertx.core.file.FileSystemTest
io.vertx.core.http.Http1xTest.txt:Tests run: 404, Failures: 1, Errors: 1, Skipped: 1, Time elapsed: 214.646 sec <<< FAILURE! - in io.vertx.core.http.Http1xTest
io.vertx.core.http.Http2Test.txt:Tests run: 293, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 214.5 sec <<< FAILURE! - in io.vertx.core.http.Http2Test
io.vertx.core.net.NetTest.txt:Tests run: 125, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 31.268 sec <<< FAILURE! - in io.vertx.core.net.NetTest
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3052
allow naming the thread pool threads vertx uses · Issue #3052 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this is useful when running multiple vertx instances in the same JVM
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3053
Calling unregister on an event bus handler causes an NullPointerException in the metrics code · Issue #3053 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Related to #2892
vertx 3.8.0 not clustered
Exception:
java.lang.NullPointerException: null
        at io.vertx.ext.dropwizard.impl.EventBusMetricsImpl$HandlerMetric.remove(EventBusMetricsImpl.java:265)
        at io.vertx.ext.dropwizard.impl.EventBusMetricsImpl.handlerUnregistered(EventBusMetricsImpl.java:127)
        at io.vertx.ext.dropwizard.impl.EventBusMetricsImpl.handlerUnregistered(EventBusMetricsImpl.java:34)
        at io.vertx.core.eventbus.impl.HandlerRegistration.doUnregister(HandlerRegistration.java:187)
        at io.vertx.core.eventbus.impl.HandlerRegistration.unregister(HandlerRegistration.java:140)

...

The metrics options:
		return new DropwizardMetricsOptions().setEnabled(true)
				.addMonitoredEventBusHandler(new Match().setValue("\\w+/.*").setType(MatchType.REGEX));

This is a sometimes-issue.
My work around at the moment is to disable metrics since I really need this consumer to close.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3054
MessageConsumer should unregister only once · Issue #3054 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the MessageConsumer will call the metrics SPI when the consumer is already unregistered. While the consumer state is fine with this, the metrics SPI should not be called more than necessary as it can corrupt the metrics state.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3055
Documentation promotes use of deprecated method getNow · Issue #3055 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The core documentation on how to make requests says to use xxxNow to make request from a client, but those methods are deprecated, e.g., getNow.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3056
Future.future(Handler<Promise<T>> handler) not handle exception. · Issue #3056 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I see that issue #1568.
Why don't make the Future fail when the handler throws an Exception?
Should I create a pr resolve that?
Code: Here!
Expanded, should I make all Future auto fail when Future.handler throws an Exception ?
Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3057
Future will fail when the handler which is passed to `Future.future` throws an Exception. by iseki0 · Pull Request #3057 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I modify the code, But it break the test case. The testcase need update. Should I update it?
Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3058
HttpServer#close does not disconnect established connections · Issue #3058 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have just upgraded Gentics Mesh from Vert.x 3.7.1 to 3.8.0 and only a single test in our testsuite is failing. The test simulates a server crash by first establishing a websocket connection and stopping the used HttpServer. Previously an error was thrown since the connection was severed. The client would now reconnect. This is no longer the case. With Vert.x 3.8.0 the connection is not severed and I can see in Wireshark that the continuously send text frames are accepted with an ACK.
I use HttpServer#close with an handler so I'm sure the server should be stopped. The failure handler is not invoked.
@Override
public void stop(Promise<Void> promise) throws Exception {
	server.close(rh -> {
		if (rh.failed()) {
			promise.fail(rh.cause());
		} else {
			promise.complete();
		}
	});
}

I can try to create a reproducer if needed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3059
“Unexpected exception in route” with POST using Content-Type:application/x-www-form-urlencoded (Content-Type:application/json working fine) · Issue #3059 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm creating a post request that can except "Content-Type:application/x-www-form-urlencoded" using "vert.x". And getting "Unexpected exception in route java.lang.NullPointerException" but the same request works fine when I remove the content type.
I am using vert.x 3.3.3 and trying to create a route with verticles.
Router router = Router.router(vertx);
//--- 
router.post("/sample-api").handler(new myHandler());

// This allows post with content-type "application/json" and "
// exception in route java.lang.NullPointerException" error with
// "application/x-www-form-urlencoded"

//---
router.route(HttpMethod.POST, "/sample-api").consumes("application/x-www-form- 
urlencoded").handler(new myHandler());

// This gives 404 on the post with content-type "application/json" and 
// "Unexpected exception in route java.lang.NullPointerException" error 
// with "application/x-www-form-urlencoded"

Error msg with content-type : application/x-www-form-urlencoded
Unexpected exception in route java.lang.NullPointerException
        at java.util.Objects.requireNonNull(Objects.java:203)
        at io.vertx.core.file.impl.FileSystemImpl.existsInternal(FileSystemImpl.java:772)
        at io.vertx.core.file.impl.FileSystemImpl.existsBlocking(FileSystemImpl.java:333)
        at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.makeUploadDir(BodyHandlerImpl.java:141)
        at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.<init>(BodyHandlerImpl.java:124)
        at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:65)
        at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:40)
        at io.vertx.ext.web.impl.RouteImpl.handleContext(RouteImpl.java:215)
        at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:78)
        at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:94)
        at io.vertx.ext.web.impl.RouterImpl.accept(RouterImpl.java:79)
        at io.vertx.core.http.impl.ServerConnection.handleRequest(ServerConnection.java:286)

with status 500

expected value:

Status 200

*** Request working fine with other headers.
Header --- --- ----
host: randomHost
Accept: /
User-Agent: random/1.0
X-Signature: randomSignature
Connection: keep-alive
Content-Type:application/x-www-form-urlencoded
Content-Length: 1517
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3060
ClusteredEventBus should throw an exception if an outbound connection is actually back to its own server · Issue #3060 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This issue occurs when the event bus port is the same for two clustered Vertx instances on the same machine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3061
3.7.1 version still  "java.lang.IllegalStateException: Response is closed" · Issue #3061 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
issue #2944  is written that it will be handled in version vertx 3.7.1 but still have this case.
May be we should check response isClosed() or catch the exception and swallow it. Or is there any suggestions ?
What was the improvement for this case in version 3.7.1 ?
java.lang.IllegalStateException: Response is closed at io.vertx.core.http.impl.HttpServerResponseImpl.checkValid(HttpServerResponseImpl.java:617) at io.vertx.core.http.impl.HttpServerResponseImpl.putHeader(HttpServerResponseImpl.java:157) at io.vertx.core.http.impl.HttpServerResponseImpl.putHeader(HttpServerResponseImpl.java:54) at com.cloud.transaction.api.repository.TransactionRepository.lambda$send$6(TransactionRepository.java:100) at com.mongodb.async.client.MongoIterableImpl$2$2.onResult(MongoIterableImpl.java:113) at com.mongodb.async.client.MongoIterableImpl$2$2.onResult(MongoIterableImpl.java:107) at com.mongodb.async.client.MongoIterableImpl$4.onResult(MongoIterableImpl.java:182) at com.mongodb.async.client.MongoIterableImpl$4.onResult(MongoIterableImpl.java:177) at com.mongodb.operation.AsyncQueryBatchCursor.next(AsyncQueryBatchCursor.java:139) at com.mongodb.operation.AsyncQueryBatchCursor.next(AsyncQueryBatchCursor.java:99) at com.mongodb.async.client.MongoIterableImpl.loopCursor(MongoIterableImpl.java:177) at com.mongodb.async.client.MongoIterableImpl.access$000(MongoIterableImpl.java:39) at com.mongodb.async.client.MongoIterableImpl$4.onResult(MongoIterableImpl.java:188) at com.mongodb.async.client.MongoIterableImpl$4.onResult(MongoIterableImpl.java:177) at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49) at com.mongodb.operation.AsyncQueryBatchCursor.handleGetMoreQueryResult(AsyncQueryBatchCursor.java:272) at com.mongodb.operation.AsyncQueryBatchCursor.access$300(AsyncQueryBatchCursor.java:55) at com.mongodb.operation.AsyncQueryBatchCursor$CommandResultSingleResultCallback.onResult(AsyncQueryBatchCursor.java:303) at com.mongodb.operation.AsyncQueryBatchCursor$CommandResultSingleResultCallback.onResult(AsyncQueryBatchCursor.java:277) at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49) at com.mongodb.connection.DefaultServer$DefaultServerProtocolExecutor$2.onResult(DefaultServer.java:207) at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49) at com.mongodb.connection.CommandProtocolImpl$1.onResult(CommandProtocolImpl.java:102) at com.mongodb.connection.DefaultConnectionPool$PooledConnection$1.onResult(DefaultConnectionPool.java:458) at com.mongodb.connection.UsageTrackingInternalConnection$2.onResult(UsageTrackingInternalConnection.java:110) at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:49) at com.mongodb.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:381) at com.mongodb.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:359) at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:651) at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:618) at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:487) at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:484) at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:233) at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:216) at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:126) at sun.nio.ch.Invoker.invokeDirect(Invoker.java:157) at sun.nio.ch.UnixAsynchronousSocketChannelImpl.implRead(UnixAsynchronousSocketChannelImpl.java:553) at sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:276) at sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:297) at com.mongodb.connection.AsynchronousSocketChannelStream.readAsync(AsynchronousSocketChannelStream.java:128) at com.mongodb.connection.InternalStreamConnection.readAsync(InternalStreamConnection.java:484) at com.mongodb.connection.InternalStreamConnection.access$1100(InternalStreamConnection.java:74) at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback.onResult(InternalStreamConnection.java:608) at com.mongodb.connection.InternalStreamConnection$MessageHeaderCallback.onResult(InternalStreamConnection.java:593) at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:487) at com.mongodb.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:484) at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:233) at com.mongodb.connection.AsynchronousSocketChannelStream$BasicCompletionHandler.completed(AsynchronousSocketChannelStream.java:216) at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:126) at sun.nio.ch.UnixAsynchronousSocketChannelImpl.finishRead(UnixAsynchronousSocketChannelImpl.java:430) at sun.nio.ch.UnixAsynchronousSocketChannelImpl.finish(UnixAsynchronousSocketChannelImpl.java:191) at sun.nio.ch.UnixAsynchronousSocketChannelImpl.onEvent(UnixAsynchronousSocketChannelImpl.java:213) at sun.nio.ch.EPollPort$EventHandlerTask.run(EPollPort.java:293) at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)"
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3062
vertx PumpImpl has one problem · Issue #3062 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx version
3.6.3+
Issue
I use ServiceComb to upload muletipe files(upload one file has no this problem), but have some problem. Sometimes success, sometime fail. Below is the log
java.lang.IllegalStateException: inputStream is closed
	at org.apache.servicecomb.foundation.vertx.stream.InputStreamToReadStream.check(InputStreamToReadStream.java:76)
	at org.apache.servicecomb.foundation.vertx.stream.InputStreamToReadStream.resume(InputStreamToReadStream.java:170)
	at org.apache.servicecomb.foundation.vertx.stream.InputStreamToReadStream.resume(InputStreamToReadStream.java:34)
	at io.vertx.core.streams.impl.PumpImpl.lambda$new$0(PumpImpl.java:59)
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleDrained(HttpClientRequestImpl.java:358)
	at io.vertx.core.http.impl.Http1xClientConnection.handleInterestedOpsChanged(Http1xClientConnection.java:847)
	at io.vertx.core.net.impl.VertxHandler.lambda$channelWritabilityChanged$3(VertxHandler.java:136)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:188)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:180)
	at io.vertx.core.net.impl.VertxHandler.channelWritabilityChanged(VertxHandler.java:136)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelWritabilityChanged(ChannelInboundHandlerAdapter.java:119)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelWritabilityChanged(CombinedChannelDuplexHandler.java:450)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelWritabilityChanged(ChannelInboundHandlerAdapter.java:119)
	at io.netty.channel.CombinedChannelDuplexHandler.channelWritabilityChanged(CombinedChannelDuplexHandler.java:273)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelWritabilityChanged(ChannelInboundHandlerAdapter.java:119)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:409)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1457)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:977)
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:607)
	at io.netty.channel.ChannelOutboundBuffer.setWritable(ChannelOutboundBuffer.java:573)
	at io.netty.channel.ChannelOutboundBuffer.decrementPendingOutboundBytes(ChannelOutboundBuffer.java:194)
	at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:259)
	at io.netty.channel.ChannelOutboundBuffer.removeBytes(ChannelOutboundBuffer.java:338)
	at io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:411)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:934)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.flush0(AbstractNioChannel.java:360)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:901)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1396)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:768)
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:749)
	at io.netty.channel.ChannelDuplexHandler.flush(ChannelDuplexHandler.java:117)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:768)
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:749)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.flush(CombinedChannelDuplexHandler.java:533)
	at io.netty.channel.ChannelOutboundHandlerAdapter.flush(ChannelOutboundHandlerAdapter.java:115)
	at io.netty.channel.CombinedChannelDuplexHandler.flush(CombinedChannelDuplexHandler.java:358)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:776)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:802)
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:814)
	at io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:794)
	at io.vertx.core.net.impl.ConnectionBase.write(ConnectionBase.java:102)
	at io.vertx.core.net.impl.ConnectionBase.writeToChannel(ConnectionBase.java:112)
	at io.vertx.core.net.impl.ConnectionBase.writeToChannel(ConnectionBase.java:129)
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.writeBuffer(Http1xClientConnection.java:325)
	at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:645)
	at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:582)
	at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:48)
	at io.vertx.core.streams.impl.PumpImpl.lambda$new$1(PumpImpl.java:63)
	at org.apache.servicecomb.foundation.vertx.stream.InputStreamToReadStream.handleData(InputStreamToReadStream.java:182)
	at org.apache.servicecomb.foundation.vertx.stream.InputStreamToReadStream.afterReadInEventloop(InputStreamToReadStream.java:155)
	at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:284)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:464)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

then i add some log to check where this problem, finally i find the PumpImpl object  is different at same file upload.
  PumpImpl(ReadStream<T> rs, WriteStream<T> ws) {
    this.readStream = rs;
    this.writeStream = ws;
    drainHandler = v-> {
      System.out.println("drainHandler pump is " + this.toString());
      readStream.resume();
    };
    dataHandler = data -> {
      System.out.println("dataHandler pump is " + this.toString());
      writeStream.write(data);
      incPumped();
      if (writeStream.writeQueueFull()) {
        readStream.pause();
        System.out.println("start set drainHandler dataHandler pump is " + this.toString());
        writeStream.drainHandler(drainHandler);
      }
    };

dataHandler pump is io.vertx.core.streams.impl.PumpImpl@1f1ef9fd
drainHandler pump is io.vertx.core.streams.impl.PumpImpl@5c150aa1

Problem
writeStream.writeQueueFull() return false, the writeStream's drainHandler is the last one, so upload the second file maybe check the first inputstream's status, then throw an IOException
Fix
I don't understand why the drainHandler shuold be setted only when writeQueueFull? i move the
writeStream.drainHandler(drainHandler) outsite the block， then this problem fixed.
  PumpImpl(ReadStream<T> rs, WriteStream<T> ws) {
    this.readStream = rs;
    this.writeStream = ws;
    drainHandler = v-> {
      System.out.println("drainHandler pump is " + this.toString());
      readStream.resume();
    };
    writeStream.drainHandler(drainHandler);
    dataHandler = data -> {
      System.out.println("dataHandler pump is " + this.toString());
      writeStream.write(data);
      incPumped();
      if (writeStream.writeQueueFull()) {
        readStream.pause();
      }
    };
  }

But I am still worried about some other problems @vietj , can you help me to  look this problem, Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3063
Pipe should use the write stream acknowledged end when a result handler is expected · Issue #3063 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently when a pipe receives a ReadStream#endHandler end event it will end the WriteStream and call the pipe operation result handler immediately. Instead it should use the acknowledged end and propagate the result to the result handler so it can be aware when the write is completed or when it failed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3064
HttpServerResponse operation should not fail synchronously when the stream is is closed · Issue #3064 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We already have made some improvements here and for we should have the same behaviour for other related responses methods.

when the stream is ended (by the user) then it should fail synchronously because it is a programming mistake
when the stream is closed then it should not fail synchronously but should fail asynchronously. In Vert.x 4 the synchronous operation return a Future result that be failed in this case.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3065
HttpServerResponse send file does not report a failure when the response is closed for HTTP/2 · Issue #3065 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the implementation of HttpServerResponse does not report an async failure on sendFile when the response is closed. The current implementation uses a virtual Netty channel however this channel's contract (AbstractChannel) has a synchronous failure model which does not fit the HTTP/2 response which has an asynchronous failure model. Consequently failures can't be reported properly through the pipeline.
Instead we should simply use an AsyncFile pipe operation on the HttpServerResponse because HTTP/2 cannot benefit from zero file copy transfer anyway.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3066
Move WriteHandlerLookupFailureTest to its own class by tsegismont · Pull Request #3066 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It shouldn't be part of the clustered event bus test suite.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3067
Make CLI options case sensitive for short names (#2844). by MitchAman · Pull Request #3067 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@MitchAman thanks for sending a PR!
I just read the bug report and it says that currently the short names are compared ignoring case but not long names. But when I look at the code in master, both are compared ignoring case.
So to me, this doesn't look like a bug. But rather a request for changing behavior, that might impact users.
Also, in this PR, short names comparison has been made case-sensitive, while the long names one remained case-insensitive. If we change the current behavior, it should be changed consistently.
@MitchAman @vietj considering #2844 is not a bug but a change request, I believe we should decide if the benefits (ability to, for example, have -a and -A used for distinct options) outweigh the risks (users scripts with typos suddenly broken).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3068
Consider Netty upgrade to resolve security vulnerability in HTTP/2 · Issue #3068 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For details of vulnerability see the following disclosure:
https://www.kb.cert.org/vuls/id/605641/
Netty is already released fixes as 4.1.39.Final. See:
https://netty.io/news/2019/08/13/4-1-39-Final.html
AFAIK vertx-core needs to be updated in order to update vertx-web, right?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3069
run command should honour "-options" · Issue #3069 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx core manual for Java shows that run command takes in -options CLI option. However, if I were to provide that by running a jar, it does not consider the path to json file passed in as CLI option.
Example,
java -jar app.jar --options <vertx_options.json> runs with default VertxOptions rather than the options set within vertx_options.json
Also, neither RunCommand and BaseCommand has -options CLI option listed within them. It would be really helpful to honour the option, instead of having to specify everything as system properties prefixed with -Dvertx.options.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3070
Message exception handling in consumer · Issue #3070 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
About a month ago I opened a PR with a suggestion for better exception handling: #3035
I would like to raise it as an issue, as I am not sure if only opening a PR was the right thing to do to get attention for it.
I gave a good description in my PR but ill give a short description here as well.
Currently in vert.x, if an uncaught exception occurs in a consumer, it will be swallowed by vertx and the sender needs to wait for a timeout in order to know that something went wrong. The code in my PR give a suggestion to add another kind of exception handler that allows the user to configure default behavior in case of an uncaught exception. This way the sender will be notified about the problem as soon as it happens. It also allows to create global exception handling logic in a single centralized place.
I would also consider making it fail with 500 by default to make sure the consumer is safe and never blocks in case of unknown exceptions.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3071
Recovering From Failure Faster? · Issue #3071 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using the WebClient with Vert.x 3.7.1 to send around 2mm requests in batches of 5k spread over several nodes (backed by a queue). I am finding in most cases it takes only 1-2 seconds to send each batch, but occasionally I am receiving a "Stream reset: 2" message, which causes the entire batch to take over 60s to complete.
Out of 2mm sends, I only received this message 250 times, and I am ok with dropping those requests entirely. The issue is the time it takes to recover from a stream reset.
Is it possible to have requests fail faster, or to recover from STREAM_RST quicker?
Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3072
How to unsecure the healthcheck endpoint after enabling the SSL property in the HTTP server options? · Issue #3072 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Greetings Everyone!
Use Case: We did the following SSL configuration as per the docs, however we need to disable this SSL check for a couple of routes (/healthcheck & /ping- make them non-secure) and have the SSL check only for 1 route (/seller). How do we accomplish this?
HTTP Server Options:
HttpServerOptions secureOptions = new HttpServerOptions();
     secureOptions.setSsl(true)
          .setPfxKeyCertOptions(new PfxOptions().setPath(sslKeystorePath)
              .setPassword(sslKeystorePassword))
          .setPfxTrustOptions(new PfxOptions().setPath(sslKeystorePath)
              .setPassword(sslKeystorePassword))
          .setClientAuth(ClientAuth.REQUIRED)
          .addEnabledSecureTransportProtocol(APIConstants.TLS_VERSION_2);

Registering Healthcheck routers:
private void registerHealthChecks(Router router) {
     HealthCheckHandler healthCheckHandler = 
         HealthCheckHandler
                          .createWithHealthChecks(HealthChecks.create(vertx));
         healthCheckHandler
                           .register("STATUS", 2000, future -> future.complete(Status.OK()));

      HealthCheckHandler pingHandler = HealthCheckHandler.create(vertx);
       pingHandler.register("DB_STATUS", future -> {
               final JDBCClient client = JDBCClient.createShared(vertx, new JsonObject()
                       .put("url", config().getValue("jdbc.url"))
                       .put("driver_class", config().getValue("jdbc.driver_class"))
                       .put("max_pool_size", config().getValue("jdbc.max_pool_size"))
                       .put("user", config().getValue("jdbc.user"))
                       .put("password", config().getValue("jdbc.password")));
               client.getConnection(conn -> {
                   if (conn.failed()) {
                       LOGGER.error(conn.cause().getMessage());
                       future.complete(Status.KO());
                   } else if (conn.succeeded()) {
                       LOGGER.info("DB Connection successful!!!");
                       future.complete(Status.OK());
                   }
               }).close();
           });
       // Healthcheck endpoint handler
       router.get(APIConstants.SA_HEALCHECK_ENDPOINT).handler(healthCheckHandler);
       LOGGER.info("Endpoint added to router " + APIConstants.SA_HEALCHECK_ENDPOINT);
       // Ping endpoint handler for database health check
       router.get(APIConstants.SA_PING_ENDPOINT).handler(pingHandler);
       LOGGER.info("Endpoint added to router " + APIConstants.SA_PING_ENDPOINT);
   }

Start Method Implementation:
@Override
   public void start(Future<Void> startFuture) throws Exception {
       Json.mapper.registerModule(new JavaTimeModule());
       FileSystem vertxFileSystem = vertx.fileSystem();

       // Read properties into config object and use it for further server configuration.
       this.configRetriever.configStream().handler(config -> {
           // read port from properties file.
           this.serverPort = config.getInteger("api.endpoint.port");

           //  Reading swagger.json and and register router here
           vertxFileSystem.readFile("swagger.json", readFile -> {
               HttpServer server = null;
               if (readFile.succeeded()) {
                   // Get Swagger file and create routes with api endpoints defined in the swagger.json
                   Swagger swagger = new SwaggerParser().parse(readFile.result().toString(Charset.forName("utf-8")));
                   Router swaggerRouter = SwaggerRouter.swaggerRouter(router, swagger, vertx.eventBus(), new OperationIdServiceIdResolver());

                   // Register /healthcheck and /ping endpoints here
                   registerHealthChecks(swaggerRouter);
                  
                   // Configure SSL certifications for https://
                   HttpServerOptions secureOptions = getSSLConfig(config);

                   // Initialize HttpServer with above SSL config
                   server = vertx.createHttpServer(secureOptions);

                   // deploy theSellerAPIVerticle
                   deployVerticles(startFuture, config);

                   // Start the server with all above the routes
                 if(server != null) {
                   server.requestHandler(swaggerRouter)
                       .listen(serverPort, h -> {
                         if (h.succeeded()) {
                           startFuture.complete();
                         } else {
                           startFuture.fail(h.cause());
                         }
                       });
                 } else {
                   LOGGER.warn("Server is not initialized properly!!");
                 }
               } else {
                   startFuture.fail(readFile.cause());
               }
           });
       });
   }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3073
timeout is not working properly in multipart/form-data request · Issue #3073 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When we set the timeout in multipart/form-data request. It is not working properly. If we did not get the response in that given time, it is not throwing timeout error and stuck at that point and will never get the response.

webClient.postAbs(URL)
.putHeader("Content-type", "multipart/form-data")
.timeout(5000)
.multipartMixed(false)
.sendMultipartForm(multipartForm, httpResponseAsyncResult -> {
responseHelper.getResponse(completableFuture, action, httpResponseAsyncResult);
});

If we did not get a response in 5sec, code is not throwing any error and never get any response/error.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3074
NPE when undeploying several instances of the same verticle that share the same isolationGroup · Issue #3074 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Vert.x folks!
Vert.x 3.8.0 fails undeploying verticles when more than 1 instance were deployed with VertxMavenFactory.
This is because these instances share the same isolationGroup.
The issue seems to have been introduced in this commit: 38111ed
A NPE is thrown from here: 
  
    
      vert.x/src/main/java/io/vertx/core/impl/DeploymentManager.java
    
    
         Line 713
      in
      740804c
    
  
  
    

        
          
           if (--icl.refCount == 0) { 
        
    
  


In the code above, icl is null after been cleaned when undeploying the first instance.
Here is a reproducer:
https://github.com/Melusyn/vertx-maven-factory-classloader-bug/
I first described this here: https://groups.google.com/forum/#!topic/vertx/TAD99dtEU10
Thanks a lot for having a look at it :)
Best!
Hugo
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3075
Async undeploy won't report exception by the verticle with promise complete · Issue #3075 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Considering this
class MyVerticle extends AbstractVerticle {
  public void stop(Promise<Void> promise) {
    promise.complete();
    throw new RuntimeException();
  }
}
The RuntimeException will attempt to fail the promise already completed and result into a failure in the deployment manager and losing the original exception.
Instead the deployment manager should try to fail the promise and when it can't fail it then it should report it to the undeploying context so the application can be aware of it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3076
JsonParser does not consume properly the stream demand · Issue #3076 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the JsonParser implementation does not consume properly the stream demand. It consumes for each Jackson JsonToken instead of the actual event emitted by the parser. Some tokens won't produce events such as the FIELD_NAME token. The consequence is that stream demand is lost by stream consumers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3077
http response endHandler not called on request with `connection: close` · Issue #3077 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
After upstepping from vert.x version 3.6.2 to 3.7.1 we noticed that the endHandler for http 1.1 responses is not called anymore when the client asks for the connection to be closed with a connection: close header.
We can reproduce the issue with the following test in io.vertx.core.http.HttpTest:
  @Test
  public void testResponseEndHandlersConnectionClose() {
    waitFor(2);
    server.requestHandler(req -> {
      req.response().endHandler(v -> complete());
      req.response().end();
    }).listen(onSuccess(server ->
      client.request(HttpMethod.GET, DEFAULT_HTTP_PORT, DEFAULT_HTTP_HOST, "/", onSuccess(res -> {
        assertEquals(200, res.statusCode());
        complete();
      }))
      .putHeader(HttpHeaders.CONNECTION, "close")
      .end()));
    await();
  }
A git bisect points to 645f6d4 by @vietj.
As this is a rather big change it is unclear to us where it is introduced exactly.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3078
Fix #3077 call endHandler for HttpServerResponse without keepalive by steven-aerts · Pull Request #3078 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So travis ran three times for the proposed commit.
And only one time it failed with the below stacktrace.
Is this a known spurious issue, or can it triggered by this PR?
Starting test: Http1xTest#testHttpServerWithIdleTimeoutSendChunkedFile 
NULL 
java.nio.channels.ClosedChannelException
	at io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:604)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.close(DefaultChannelPipeline.java:1363)
	at io.netty.channel.AbstractChannelHandlerContext.invokeClose(AbstractChannelHandlerContext.java:621)
	at io.netty.channel.AbstractChannelHandlerContext.close(AbstractChannelHandlerContext.java:605)
	at io.netty.channel.AbstractChannelHandlerContext.close(AbstractChannelHandlerContext.java:467)
	at io.vertx.core.net.impl.ConnectionBase.handleIdle(ConnectionBase.java:324)
	at io.vertx.core.net.impl.VertxHandler.lambda$userEventTriggered$5(VertxHandler.java:179)
	at io.vertx.core.impl.EventLoopContext.schedule(EventLoopContext.java:45)
	at io.vertx.core.impl.AbstractContext.schedule(AbstractContext.java:103)
	at io.vertx.core.net.impl.VertxHandler.userEventTriggered(VertxHandler.java:179)
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:341)
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:327)
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:319)
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:372)
	at io.netty.handler.timeout.IdleStateHandler$AllIdleTimeoutTask.run(IdleStateHandler.java:578)
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:477)
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38)
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:127)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:515)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

io.vertx.core.VertxException: Connection was closed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3079
2934 make compressed http2 request possible by KowalczykBartek · Pull Request #3079 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse Contributor Agreement and your commits ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3080
Proper handling of host names ending with a dot in client connections · Issue #3080 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently NetClient and HttpClient don't properly handle host names ending with a dot.
TLS peer host should be the un-dotted version instead of the provided name otherwise it results in unexpected handshake failures.
The hosts based resolution should use the un-dotted version when doing a lookup in the list to resolve correctly the name.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3081
Support mapping in ReadStream · Issue #3081 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It would be very useful to provide a mapping method in ReadStreams (like pipeTo).
Idea and use case:
ReadStream<String> rs;
ReadStream<Integer> rs.map(Integer::parseInt);

Signatures:
interface ReadStream <T> {
  <T2> ReadStream<T2> map(Function<T, T2> transformation);
  <T2> ReadStream<T2> map(Function<T, Future<T2>> transformation);
}

I think it could be implemented by default as a simple delegation in ReadStream (like pipe*).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3082
HTTP/1.1 connection state might be corrupted when processing pipelined requests · Issue #3082 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the server process HTTP/1.1 pipelined requests, the state might not be updated correctly when dequeuing a pipelined requests when the dequeued request is asynchronously processed. This code is not executed in real life applications (that won't use pipelining) but can be executed intensively in benchmarks. The corrupted state leads to an incorrect error handling when handling IO errors like a connection reset.
2019-08-22 14:11:00,135 SEVERE [io.ver.cor.imp.ContextImpl] (vert.x-eventloop-thread-25) Unhandled exception: java.lang.NullPointerException
	at io.vertx.core.http.impl.HttpServerRequestImpl.handleException(HttpServerRequestImpl.java:568)
	at io.vertx.core.http.impl.Http1xServerConnection.handleException(Http1xServerConnection.java:437)
	at io.vertx.core.net.impl.VertxHandler.lambda$exceptionCaught$3(VertxHandler.java:150)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:369)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:232)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:224)
	at io.vertx.core.net.impl.VertxHandler.exceptionCaught(VertxHandler.java:143)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:282)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:261)
	at io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:253)
	at io.netty.channel.ChannelHandlerAdapter.exceptionCaught(ChannelHandlerAdapter.java:90)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:282)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:261)
	at io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:253)
	at io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(ChannelInboundHandlerAdapter.java:131)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:282)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:261)
	at io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:253)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught(DefaultChannelPipeline.java:1375)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:282)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:261)
	at io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:918)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(AbstractNioByteChannel.java:125)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:174)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:677)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:612)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:529)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:491)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3083
HTTP/1.1 connection state might be corrupted when processing pipeline… by vietj · Pull Request #3083 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…d requests - closes #3082
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3084
Vert.x 4.0 ClusteredEventBus support HTTP/HTTP2 · Issue #3084 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version 3.X only support transport in socket  (ConnectionHolder/NetSocket).
If it would also provide HTTP/HTTP2 as it transportation or have a mechanism (i.e, abstract/interface class) let us to write our own implementation.
Leverage  HTTP/HTTP2 work better in K8S or Proxy/Gateway integrated well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3085
hight response time for the first web request received after the server has no work load for a while · Issue #3085 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We working on a project using vert.x 3.8 and openapi3 contract and we have noticed that our server vert.x takes long time to answer a web request if the server has not received http requests for a while.
Do we have some option in vert.x to help us to make vert.x answer faster if the server has not received requests for a while
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3086
Unable to create new native thread · Issue #3086 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to manage 10k connections with a 100ms blocking code in a worker verticle.
Then I'm trying to create a worker pool with 10k size but It can't create 10k native threads.
Am I missing something? Am I doing it wrong? Is it possible to switch from worker verticle to Akka's Actors?
Thanks to advance
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3087
immutable Json in Vertx · Issue #3087 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For future releases, it could be great to be able to work with an immutable Json in Vertx, with a more declarative and functional API than the current. I think that performance would improve because no defensive copy of a Json would be needed before sending a message to the bus.
I propose to consider json-values as an alternative to the current Json object.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3088
fix for maven build Error message on windows by qxo · Pull Request #3088 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse Contributor Agreement and resubmit the PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3089
improve netty HttpMethod to vert.x HttpMethod performance for http GET/POST/HEAD by qxo · Pull Request #3089 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
is that a bottleneck in your application ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3090
fix for maven build Error message on windows by qxo · Pull Request #3090 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[ERROR] OS=Windows and the assembly descriptor contains a *nix-specific root-relative-reference (starting with slash) /
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3091
improve http parse url performance for #path #query #params by qxo · Pull Request #3091 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3092
fixed Http2Test#testRequestTimeoutCanceledWhenRequestHasAnOtherError issue at windows by qxo · Pull Request #3092 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
why is larger timer necessary on windows ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3093
java.lang.NoClassDefFoundError:: io/vertx/lang/rxjava/TypeArg · Issue #3093 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
While updating from 3.5.4 to 3.8.1 i am getting
java.lang.NoClassDefFoundError: io/vertx/lang/rxjava/TypeArg
at io.vertx.rxjava.ext.web.Router.(Router.java:59)
at verticles.HttpRouter.start(HttpRouter.java:23)
at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:106)
at io.vertx.rxjava.core.AbstractVerticle.start(AbstractVerticle.java:43)
at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:552)
at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:495)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.ClassNotFoundException: io.vertx.lang.rxjava.TypeArg
at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)
at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
... 13 more
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3094
CompositeFuture.java, Future deprecation · Issue #3094 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi all,
In https://github.com/vert-x3/wiki/wiki/3.8.0-Deprecations-and-breaking-changes, Future are announced deprecated.
But CompositeFuture.java still makes heavy use of Futures.
To be more precise, I'm am trying to use microservices based on https://github.com/cescoffier/vertx-microservices-examples and it involves CompositeFuture
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3095
Vertx Graphql Preview Status warning - is it not production ready yet? · Issue #3095 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I was thinking to use Graphql along with Vertx but then I saw above warning.
Vertx Graphql Tech Preview Status warning - when will it be stable or production ready?
Are there any major upgrade or drastically new api changes are coming?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3096
Promise: Shall we remove `succeededPromise` and `failedPromise`? · Issue #3096 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When return an immediate result, I will use Future.succeededFuture/failedFuture and find nowhere to use Promise.succeededPromise/failedPromise.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3097
Want a way to custom usage of SniHandler · Issue #3097 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

vert.x core: 3.8.0
vert.x web: 3.8.0

Context
I noticed that SniHandler accept a param of type AsyncMapping in public constructor. Any way to use it in SNI duration to get key&certs asynchronously?
My idea is to pass an custom AsyncMapping object in NetServerOptions so pipeline can use it, as alternative to inner class AsyncMappingAdapter, which did nothing about async. This AsyncMapping.map() may return a Promise immediately and try to load key&certs asynchronously.
This AsyncMapping may co-work with the KeyCertOption, to make sure SSLHelper.map will get the key&certs for sni name.
Or is there a way to change the channel pipeline from user code?
Sure this issue is related to let's encrypt certs, or likely usage.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3098
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3099
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3100
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3101
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3102
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3103
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3104
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3105
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3106
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3107
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3108
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3109
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3110
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3111
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3112
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3113
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3114
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3115
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3116
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3117
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3118
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3119
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3120
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3121
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3122
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3123
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3124
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3125
Using native transport and a UNIX domain socket with the HTTP server causes netty warnings · Issue #3125 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
When binding an HTTP server to a UNIX domain socket, Netty prints out warnings upon each connection as so:
Oct 04, 2019 3:48:03 PM io.netty.bootstrap.AbstractBootstrap setChannelOption
WARNING: Unknown channel option 'io.netty.channel.epoll.EpollChannelOption#TCP_QUICKACK' for channel '[id: 0x7a807bb7]'
Oct 04, 2019 3:48:03 PM io.netty.bootstrap.AbstractBootstrap setChannelOption
WARNING: Unknown channel option 'io.netty.channel.epoll.EpollChannelOption#TCP_CORK' for channel '[id: 0x7a807bb7]'

This appears to be caused by one of the configure functions in EpollTransport, which always set the TCP_QUICKACK and TCP_CORK options, even on a UNIX domain socket.
This occurred with netty-transport-native-epoll version 4.1.39.Final (same version as vert.x imports) and with vert.x version 3.8.1.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3126
Clustered Lock is not released if more locks are requested than available worker threads · Issue #3126 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am facing this issue while migrating from vertx 3.5.4 to 3.7.x.
If I am requesting more locks than available workers, then lock is not released in vertx versions 3.6.x and 3.7.x. Please find the reproducer below:
https://github.com/naveen140990/ClusteredLockReproducer/blob/master/src/test/java/EventbusTest.java
Above same code works if I change vertx version to 3.5.4.
Also if I reduce numTestEvents in dataprovider(for above reproducer code) to a number less than 20 then also everything seems to be working.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3127
WebClient request not fail when connection reset · Issue #3127 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I send a get request use webClient. (Over socks5 proxy) before server response( It's a long poll.) I shutdown socks5. Console print a fatal error: 远程强制关闭连接( I'm using zh-cn locale, English means: Remote peer force reset connection)
But the callback not called. No more log on console ( I use log4j DEBUG level )
How to get the exception and retry the request?
Thank you.
(I am too tired to fix-up the issues format and syntax error. Sorry)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3128
Discard old messages · Issue #3128 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I have written simple test. One verticle (reply) is service that process some complex jobs (modelled with simple Thread.sleep(10000) => 10 seconds). Other verticle (sender) sends 2 messages to be processed with 5 second timeout. So when reply verticle receives second message sender is not interested in response (because all timeouts gone) but those messages still come and we need to do "hard job" to process it.
Output is here:
Reply started
Message received: ping1
Reply address: __vertx.reply.1
Failed to receive reply: Timed out after waiting 5000(ms) for a reply. address: __vertx.reply.1, repliedAddress: service.address
Failed to receive reply: Timed out after waiting 5000(ms) for a reply. address: __vertx.reply.2, repliedAddress: service.address
Sender done
Message received: ping2
Reply address: __vertx.reply.2
How can we discard old messages (which have been timeouted on sender end)? So that message ping2 will not be processed.
If we look at code of message sender it creates HandlerRegistration and unregister it on timeout (in sendAsyncResultFailure). So the task is to check on reply verticle if reply address is still registered on event bus. But I haven't found any API to do it.
The problem is getting more important if sender will try to repeat request on timeout. So we will end up with service bloated with old messages and while we process old messages new messages wil also be timeouted!
Test code:
import io.vertx.core.*;
import io.vertx.core.eventbus.DeliveryOptions;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import java.io.IOException;
@RunWith(VertxUnitRunner.class)
public class TimeoutSenderTest {
private static final String SERVICE_ADDRESS = "service.address";

private Vertx vertx;

private final ReplyVerticle reply = new ReplyVerticle();

@Before
public void setUp(TestContext context) throws IOException {
    vertx = Vertx.vertx();
    final DeploymentOptions replyOptions = new DeploymentOptions().setWorker(true);
    vertx.deployVerticle(reply, replyOptions, context.asyncAssertSuccess());
}

@After
public void tearDown(TestContext context) {
    vertx.close(context.asyncAssertSuccess());
}

@Test
public void testSender(TestContext context) {
    final DeploymentOptions senderOptions = new DeploymentOptions().setWorker(true);
    final SenderVerticle sender = new SenderVerticle();
    vertx.deployVerticle(sender, senderOptions, context.asyncAssertSuccess());
}

private class ReplyVerticle extends AbstractVerticle {

    @Override
    public void start(Promise<Void> startPromise) {
        vertx.eventBus().<String>consumer(SERVICE_ADDRESS).handler(msg -> {
            try {
                System.out.println("Message received: " + msg.body());
                System.out.println("Reply address: " + msg.replyAddress());
                //Model long processing
                Thread.sleep(10000);
                msg.reply("pong to " + msg.body());
            } catch (InterruptedException e) {}
        });
        startPromise.complete();
        System.out.println("Reply started");
    }

}

private class SenderVerticle extends AbstractVerticle {

    @Override
    public void start(Promise<Void> startPromise) {
        CompositeFuture.join(sendMessage(1), sendMessage(2)).setHandler(ar -> {
            startPromise.complete();
            System.out.println("Sender done");
        });
    }

    private Future<String> sendMessage(int count) {
        return Future.future(promise -> {
            //Five second timeout
            final DeliveryOptions options = new DeliveryOptions().setSendTimeout(5000);
            vertx.eventBus().request(SERVICE_ADDRESS, "ping" + count, options, ar -> {
                if (ar.succeeded()) {
                    System.out.println("Reply received: " + ar.result().body());
                } else {
                    System.out.println("Failed to receive reply: " + ar.cause().getMessage());
                }
                promise.complete();
            });
        });
    }
}

}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3129
Blocking Code vs Fibers · Issue #3129 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello authors and coders,
although this is  not an issue, I am interested in what would be your opinion on calling ExecuteBlocking for  small blocking code vs running  the code on Vertx Sync Fibers..
Example:
Running vertx instances using AbstractVehicle (event-loop), and running other vertx instances on SyncVerticle (quasar fibers) on same  server. Would it be more efficient to run the small blocking code (aritmetic operations and rounding.. BigDecimal, etc) on SyncVerticle and returning the result via event-bus to the  AbstractVerticle instances,
or simply running executeBlocking{} on AbstractVerticle instance to run this small blocking code? Which is better for large scale?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3130
Should we detect kotlin envirionment and register Jackson-Kotlin module automatically? · Issue #3130 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Maybe we can detect Jackson-Kotlin module and register it automatically?
Let's make Kotlin greate again! :XD
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3131
NPE on WebSocket reject · Issue #3131 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A minor regression has been introduced with the WebSocket header feature that will print an NPE when the WebSocket could not handshake.
Starting test: WebSocketTest#testRejectHybi08 
Unhandled exception 
java.lang.NullPointerException
	at io.vertx.core.http.impl.Http1xClientConnection.lambda$null$5(Http1xClientConnection.java:750)
	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:178)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:50)
	at io.vertx.core.impl.AbstractContext.executeFromIO(AbstractContext.java:191)
	at io.vertx.core.http.impl.Http1xClientConnection.lambda$toWebSocket$6(Http1xClientConnection.java:740)
	at io.vertx.core.http.impl.WebSocketHandshakeInboundHandler.channelRead(WebSocketHandshakeInboundHandler.java:80)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302)
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:632)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:549)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3132
Clustering spi redesign by tsegismont · Pull Request #3132 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I see there is some sanitization of deprecated methods, can we split this PR in two and to the deprecation removals in another one ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3133
#3116 - Strengthen null guards in MultiMap by slgriff · Pull Request #3133 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add tests for this ? also the commit should be signed along with the Contributor Agreement.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3134
Can not close file when upload file body without the end delimiter · Issue #3134 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Step:

create a vertx server, use Content-Type: multipart/form-data, accept file(s).
send a post request, and modify the request raw.
use vertx-core 3.6.3.

For example:
[Normal]

POST /url/ HTTP/1.x
xxxxxx
Content-Type: multipart/form-data; boundary=--------1122334455
xxxxxx
--------1122334455
...file...
--------1122334455
...file...
--------1122334455--

[Abnormal]

POST /url/ HTTP/1.x
xxxxxx
Content-Type: multipart/form-data; boundary=--------1122334455
xxxxxx
--------1122334455
...file...
--------1122334455
...file...

Use abnormal body to request, it will be wating to timeout.
I find the NettyFileUpload#addContent param-last is false, it will not into if branch to execute end() method, so the file will not close in endHandler after open by HttpServerFileUploadImpl#streamToFileSystem.
I try to modify code to solve.such as:
io.netty.handler.codec.http.multipart.HttpPostMultipartRequestDecoder

private static boolean loadDataMultipart(ByteBuf undecodedChunk, String delimiter, HttpData httpData) {
......
if (startReaderIndex == lastRealPos) {
delimiterFound = true;
}
try {
httpData.addContent(content, delimiterFound);
} catch (IOException e) {
throw new ErrorDataDecoderException(e);
}
......
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3135
#3116 Added null handling in add0 that makes it work the same as set0 by lbroman · Pull Request #3135 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Leonard Broman leonard.broman@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3136
Regression mount sub router from 3.8.1 to 3.8.2 · Issue #3136 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It seems that there is a regression from 3.8.1 to 3.8.2, when we mount subrouter with regex route request
checkout this project to reproduce : https://github.com/Fyro-Ing/vertx-bug-regex
    router.getWithRegex("^.*regex").handler((rc) -> { rc.response().end("regex"); });
router.mountSubRouter("/", new TestRoute().init(vertx));
java.lang.NullPointerException at io.vertx.ext.web.impl.RouteImpl.validateMount(RouteImpl.java:563) at io.vertx.ext.web.impl.RouteImpl.subRouter(RouteImpl.java:180) at io.vertx.ext.web.impl.RouterImpl.mountSubRouter(RouterImpl.java:295) at io.github.vertx.bug.MainVerticle.start(MainVerticle.java:15) at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$8(DeploymentManager.java:556) at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:369) at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:515) at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.lang.Thread.run(Thread.java:745)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3137
ServerWebSocket asynchrone handshake method should consume a future instead of a promise · Issue #3137 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The newly introduced ServerWebSocket#setHandshake(Promise<Integer>, Handler<AsyncResult<Integer>>) method should instead consume a Future instead of a Promise.
The following method is changed void setHandshake(Promise<Integer>) → void setHandshake(Future<Integer>,Handler<AsyncResult<Integer>>)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3138
EventBus consumer should register pending replies context close hooks when the context is associated with a deployment · Issue #3138 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the EventBus implementation will register more context close hook than necessary because they are only not registered when the current thread is not associated with a context.
In practice this is not a bug because such close hook are unregistered when the registration is removed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3139
Remove succeeded/failed Promise creation · Issue #3139 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When Promise has been introduced, the creation of succeeded/failed future has been duplicated in the Promise interface with the behaviour or updating the state of this promise to throw an IllegalStateException or return false.
In practice such promises are not needed and one should use the same method for Future instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3140
Do not lock the handler calls in AsyncFile · Issue #3140 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the AsyncFile implementation calls the file handlers in a synchronized block. This synchronization is only useful for reading the handler and should not be used when calling them.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3141
2934 make compressed http2 request possible by KowalczykBartek · Pull Request #3141 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
looks good, minor change asked
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3142
Deadlock when deploying several instances of a verticle a starting net server · Issue #3142 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This is a regression on 3.8.2 due to #3117
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3143
Removed synchronization in shared net servers code by tsegismont · Pull Request #3143 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj please take a look, this is a fix that may be included in 3.8.3. Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3144
Extend Future#compose to allow remapping errors · Issue #3144 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Future#compose(Function<T, Future<U>>) allows to remap a success into an future and the Future#recover(Function<Throwable, Future<U>>) allows to remap a failure into a future. We should extend the compose method to allow simultaneous mappings with two mappers: compose(Function<T, Future<U>>, Function<Throwable, Future<U>>)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3145
rovide the Future#flatMap method as alias of Future#compose method · Issue #3145 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We currently provide the flatMap operation named as compose. We should add a flatMap alias that delegates to compose for people that prefer this naming.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3146
Netty upgrade to 4.1.42.Final · Issue #3146 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3147
Delay vert.x shutdown till Hazelcast AsyncMap remove operation is completed · Issue #3147 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I am using vert.x version 3.7.1 and stuck in an issue while triggering cleanup during vert.x shutdown.
I am gracefully shutting down vert.x process(soft kill using kill 9 ). I have called closeHandler with a handler on ServerWebSocket which gets invoked while graceful shutdown.
In Handler, I am triggering a remove operation on clustered AsyncMap of Hazelcast. As remove() is asynchronous call, handler completes execution and eventually MainVerticle is stopped(including stopping Hazelcast on node).
Because of above scenario, I am getting below error in callback of remove operation and I could not complete cleanup of connected users.
com.hazelcast.core.HazelcastInstanceNotActiveException: State: PASSIVE Operation: class com.hazelcast.map.impl.operation.RemoveOperation
I was thinking of using setTimer() in MainVerticle's stop method to simulate some constant delay but that sounds ugly.
Can someone suggest a better way to handle this?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3148
Handle gracefully HttpClient protocol switches · Issue #3148 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient is able to handle protocol switches but requires the NetSocket method to be called. When this method is not called the client will handle the protocol buffers by throwing an IllegalStateException in Http1xClientConnection#handleMessage method.
We should handle this better, one of

create a NetSocket on a 101 response and make it available even if the user does not call the HttpClientResponse#netSocket() method
ignore it
close the connection

It can be reproduced using any server doing a protocol switch and with an HttpClient request that does a proper HTTP protocol switch.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3149
JsonParser improvements · Issue #3149 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
place holder for improvements:

throwing an exception when there is no exception handler seems dubious
handle parsing reentrancy
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3150
Hostname resolution does not handle answers set in additional section instead of answers section · Issue #3150 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to create websocket client, but DNS resolution fails.
It doesn't fails consistently, sometimes it succeeds.
Example
package test;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.http.HttpClientOptions;

public class Test extends AbstractVerticle {
  @Override
  public void start() {
    var httpOpts = new HttpClientOptions().setSsl(true);
    var client = vertx.createHttpClient(httpOpts);

    client.webSocket(443, "echo.websocket.org", "/", res -> {
      if (res.failed()) {
        res.cause().printStackTrace();
        return;
      }
      System.out.println("SUCCESS");
      res.result().handler(System.out::println);
    });
  }
}
Exception
io.netty.resolver.dns.DnsResolveContext$SearchDomainUnknownHostException: Search domain query failed. Original hostname: 'echo.websocket.org' failed to resolve 'echo.websocket.org.Home' after 3 queries 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:925)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:884)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:356)
	at io.netty.resolver.dns.DnsResolveContext.onResponse(DnsResolveContext.java:543)
	at io.netty.resolver.dns.DnsResolveContext.access$400(DnsResolveContext.java:64)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:400)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:500)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:493)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:472)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:413)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:538)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:527)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:98)
	at io.netty.resolver.dns.DnsQueryContext.setSuccess(DnsQueryContext.java:204)
	at io.netty.resolver.dns.DnsQueryContext.finish(DnsQueryContext.java:196)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1296)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:93)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:632)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:549)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)


Dig output
; <<>> DiG 9.14.7 <<>> echo.websocket.org
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 26605
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;echo.websocket.org.		IN	A

;; ANSWER SECTION:
echo.websocket.org.	60	IN	A	174.129.224.73

;; Query time: 45 msec
;; SERVER: 192.168.1.1#53(192.168.1.1)
;; WHEN: Thu Oct 17 12:26:26 CEST 2019
;; MSG SIZE  rcvd: 52

I'm using vertx 3.8.2 on OpenJDK 11 on Arch Linux.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3151
Test fully native epoll profiles when upgrading to Netty 4.1.43.Final or above · Issue #3151 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently we only test a subset due to a regression that slows down tests with epoll native. See netty/netty#9678
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3152
Rename io.vertx.core.impl.NetSocketInternal to io.vertx.core.net.impl.NetSocketInternal · Issue #3152 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No particular issues, it is simply in the wrong package.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3153
Catch Throwable in Future.future by ProgMaq · Pull Request #3153 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
done manually, eclipse contrib agreement was not signed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3154
JsonObjectMessageCodec has inconsistent behavior in handling local vs. remote message sending & receiving. · Issue #3154 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JsonObjectMessageCodec has inconsistent support for JsonObjects depending on whether they are being passed through the event bus locally or remotely (through the wire).
If a JsonObject contains a BigDecimal or List field, it will encounter issues when going through the event bus locally. For BigDecimal fields, an error will be thrown. For List fields, it will be converted into a JsonArray instead. This is inconsistent from the behavior if the same JsonObject is passed through the wire/remotely.
We've found the root cause to be in how the encodeFromWire() / decodeFromWire() and transform() methods were implemented in JsonObjectMessageCodec. The relevant source is reproduced below:
  @Override
  public void encodeToWire(Buffer buffer, JsonObject jsonObject) {
    Buffer encoded = jsonObject.toBuffer();
    buffer.appendInt(encoded.length());
    buffer.appendBuffer(encoded);
  }

  @Override
  public JsonObject decodeFromWire(int pos, Buffer buffer) {
    int length = buffer.getInt(pos);
    pos += 4;
    return new JsonObject(buffer.slice(pos, pos + length));
  }

  @Override
  public JsonObject transform(JsonObject jsonObject) {
    return jsonObject.copy();
  }

For remote sending/receiving of messages, the JsonObject is encoded into a byte buffer and decoded back into a new JsonObject, which results in a byte-perfect copy of the message.
For local sending/receiving of messages, JsonObject.copy() is used to create a deep copy of the object instead. This, however, has some side effects that result in the above highlighted issues with certain field types, resulting in either an error, or an inconsistent copy of the original message.
Digging further, the issue seems to be that JsonObject.copy() in turn uses Json.checkAndCopy(), which has processing logic that affects the List & BigDecimal handling. Snippet reproduced here:
    if (val == null) {
      // OK
    } else if (val instanceof Number && !(val instanceof BigDecimal)) {
      // OK
    } else if (val instanceof Map) {
      if (copy) {
        val = (new JsonObject((Map)val)).copy();
      } else {
        val = new JsonObject((Map)val);
      }
    } else if (val instanceof List) {
      if (copy) {
        val = (new JsonArray((List)val)).copy();
      } else {
        val = new JsonArray((List)val);
      }
    } else {
      throw new IllegalStateException("Illegal type in JsonObject: " + val.getClass());
    }

Based on this, BigDecimal values will throw an IllegalStateException, Map becomes JsonObject and List becomes a JsonArray. I can understand the rationale here, as Vert.x is meant to be a polyglot framework and these types are Java-specific.
However, this results in JsonObjectMessageCodec having behavior that is inconsistent, depending on if the verticles are co-located locally or are clustered remotely.
The reason why we discovered this is because we went through a refactoring exercise to consolidate certain related services together, and the first step was to combine previously-remote verticles into a group of child verticles under the same main verticle. Suddenly, event bus calls that used to be working fine were throwing errors.
As JsonObjectMessageCodec is a baked-in codec for handling JsonObject messages in CodecManager, we couldn't override it or replace it. What we ended up doing was to register a custom codec whose transform() method mimics the byte buffer logic in encodeFromWire() / decodeFromWire():
    @Override
    public JsonObject transform(JsonObject jsonObject) {
        return new JsonObject(jsonObject.toBuffer());
    }

However, this also means we need to ask all our services to register this custom codec.
I'm raising this issue because I think it's worth reviewing the implementation for JsonObjectMessageCodec and consider if there are any improvements to be made, especially in the consistency of local v remote message handling. Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3155
Should we make Future.result() throw cause() when failed? · Issue #3155 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
val exception = Exception()
val future = Future.failedFuture(exception)
try{
    future.result()
}catch(e: Exception){
    assertEquals(exception, e)
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3156
3.8.3 - redeploy on linux fails · Issue #3156 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Running  the demo server with run/start works - that is, the server displays text in the browser.
With start, executing vertx list results with;
Listing vert.x applications...
e586a4f4-9bd4-4535-9d1f-a0adec1ceb25	my.jsc.vertx.Server

With run, executing vertx list results with;
Listing vert.x applications...
No vert.x application found.

With run and redeploy ;
Starting vert.x application...
3c34e176-2b83-4ff0-8849-09c6a15fd7fa-redeploy

executing vertx list results with;
Listing vert.x applications...
No vert.x application found.

And the browser gets a Unable to connect.
executing ps -ef |grep vertx gets the following;
31784 31730  0 17:02 pts/3    00:00:02 /usr/java/latest/bin/java -XX:+UseBiasedLocking -XX:BiasedLockingStartupDelay=0 -Djava.util.logging.config.file=/home/daveo/work/vertx3/conf/logging.properties -Dvertx.home=/home/daveo/work/vertx3 -Dvertx.cli.usage.prefix=vertx -Dvertx.clusterManagerFactory=io.vertx.spi.cluster.impl.hazelcast.HazelcastClusterManagerFactory -classpath /usr/lib64/python3.6/site-packages/jep/jep-3.7.0.jar:/home/daveo/work/vertx3/conf:/home/daveo/work/vertx3/lib/* io.vertx.core.Launcher run my.jsc.vertx.Server -cp /usr/lib64/python3.6/site-packages/jep/jep-3.7.0.jar:.:/home/daveo/installs/jin-0.1.0/classes../lib/vertx-core-3.8.3.jar:/home/daveo/installs/jin-0.1.0/classes:/home/daveo/installs/jin-0.1.0/classes../lib/jin/jin.jar --redeploy /home/daveo/installs/jin-0.1.0/classes/my/jsc/vertx/Server.class --launcher-class=io.vertx.core.Launcher

While the redeploy is executing, changing code results with;
Stopping vert.x application '3c34e176-2b83-4ff0-8849-09c6a15fd7fa-redeploy'
Cannot find process for application using the id '3c34e176-2b83-4ff0-8849-09c6a15fd7fa-redeploy'.
Starting vert.x application...
3c34e176-2b83-4ff0-8849-09c6a15fd7fa-redeploy

And the browser still gets a Unable to connect.
The Server code;
package my.jsc.vertx;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Promise;

public class Server extends AbstractVerticle {

  @Override
    // public void start(Future<Void> fut) {
    public void start(Promise<Void> fut) {
    
    vertx
        .createHttpServer()
        .requestHandler(r -> {
          r.response().end("<h1>Hello from my first " +
              "Vert.x 3 application</h1>");
        })
        .listen(8083, result -> {
          if (result.succeeded()) {
            fut.complete();
          } else {
            fut.fail(result.cause());
          }
        });
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3157
Change JsonObjectMessageCodec to use a Buffer for deep copy for local delivery of messages. Fixes #3154. by jenoosia · Pull Request #3157 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Change JsonObjectMessageCodec to use a Buffer for deep copy for local delivery of messages. This makes local messaging behavior more consistent with remote messaging. Fixes #3154.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3158
Event bus improvements by vietj · Pull Request #3158 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A bunch of simplifications for the EventBus implementation. The addition of the tracing feature somehow complexified the implementation. The HandlerRegistration was also mixing concerns of MessageConsumer and ReplyHandler, the HandlerRegistration class has been made parent of a new MessageConsumerImpl and ReplyHandler each consuming messages in a different manner, consequently reply handlers shall be a tad more lightweight.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3159
Not pause at any breakpoint when debug a vertx project · Issue #3159 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I debug a vertx project created by Vert.x Starter, execution will not pause at any breakpoint.
Any one can help me? Thanks very much.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3160
Update copyright notices by jponge · Pull Request #3160 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This also:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3161
Maven surefire plugin · Issue #3161 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I created a vert.x project using https://start.vertx.io/ . I  tried  build project using ./mvnw clean package command .  ı get an exception .
Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.1:test (default-test) on project starter: There are test failures.
I changed  surefire plugin version and it worked . vert.x project default version hava a problem . 2.19.1 working perfectly
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3162
Error on  build a vert.x native image with graalvm · Issue #3162 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the bug
Error on  build a vert.x  (v3.8.3) native image with graalvm.
Log
Build on Server(pid: 1970, port: 28040) [httpvertx2:1970]    classlist:   1,499.06 ms [httpvertx2:1970]        (cap):     567.00 ms [httpvertx2:1970]        setup:     826.96 ms [httpvertx2:1970]     analysis:  11,292.09 ms Warning: Aborting stand-alone image build. Unsupported features in 6 methods Detailed message: Error: No instances of io.netty.buffer.UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeHeapByteBuf are allowed in the image heap as this class should be initialized at image runtime. To see how this object got instantiated use -H:+TraceClassInitialization. Trace:  object io.netty.buffer.UnreleasableByteBuf object io.vertx.core.buffer.impl.BufferImpl method io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.access$300() Call path from entry point to io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.access$300(): at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.access$300(ClusteredEventBus.java:48) at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus$1.handle(ClusteredEventBus.java:321) at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus$1.handle(ClusteredEventBus.java:304) at io.vertx.core.impl.launcher.commands.RunCommand.stopBackgroundApplication(RunCommand.java:333) at io.vertx.core.impl.launcher.commands.RunCommand$$Lambda$3584/881120997.handle(Unknown Source) at io.vertx.core.impl.launcher.commands.Watcher.close(Watcher.java:282) at io.vertx.core.impl.launcher.commands.Watcher.run(Watcher.java:300) at java.lang.Thread.run(Thread.java:748) at com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:460) at com.oracle.svm.core.posix.thread.PosixJavaThreads.pthreadStartRoutine(PosixJavaThreads.java:193) at com.oracle.svm.core.code.IsolateEnterStub.PosixJavaThreads_pthreadStartRoutine_e1f4a8c0039f8337338252cd8734f63a79b5e3df(generated:0) 
Environment:

GraalVM version  : graalvm-ce-19.2.0.1
Vert.x version : 3.8.3
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3163
Context promise/future · Issue #3163 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Vert.x 3, promise/future are not associated to Vert.x concurrency model.
Callback is performed when both the promise is resolved and the handler is set, consequently the callback thread cannot be predicted when the promise/future is used outside Vert.x event-loop, e.g when the callback handler is set on a resolved future by a non event-loop thread, this handler is called on the current thread.
Handler failure are also propagated to the thread resolving the promise or setting the callback handler.
This feature gives the opportunity to create a promise/future associated with a Vert.x context to provide the alleviate these issues.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3164
Use context futures in Vert.x API · Issue #3164 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the API returns a future, it should return a context future instead of a context-less one. Such futures provides a better support for concurrency.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3165
Can not set default encoding as UTF-8 for  http response · Issue #3165 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Similar questions like ：
https://github.com/quarkusio/quarkus/issues/4891
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3166
Update cluster manager to return a Future instead of using a callback · Issue #3166 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Cluster manager updates will be done as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3167
fix cli @Option acceptValue support. by hengyunabc · Pull Request #3167 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following configuration will throw an exception:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3168
Launcher.getMainVerticle() value is not being passed to custom commands · Issue #3168 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I've created a set of new commands extending BareCommand.
In my launcher class, that is extending io.vertx.core.Launcher, I've overrode the getMainVerticle()  since all commands should deploy this root verticle. But this information are not being passed thru the command instances.
Seems that the problem occurs because io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(Object, String[]) is calling the command (line 382) before the mainVerticle be evaluated (line 395).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3169
Suggestion: Improving ReactiveX APIs · Issue #3169 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Given a scenario, I want to make some legacy synchronous API calls. In this example, I will simply call Thread.sleep() to represent that.
In order not to block the event-loop, I will need to use rxExecuteBlocking api provided by vertx
vertx.rxExecuteBlocking( future -> {
    try {
        Thread.sleep(3000);
        future.complete("ExampleResult");
    } catch (Exception e) {
        future.fail(e);
    }
}) 
... chain to other rxjava operation

In our project, where we exclusively code with RxJava
Ideally, we would prefer
vertx.rxExecuteBlocking( () -> {
    Thread.sleep(3000);
    return "ExampleResult";
})

or perhaps, chain it as method reference
private String synchronousCall() throws Exception{
    Thread.sleep(3000);
    return "ExampleResult";
}
...
vertx.rxExecuteBlocking(this::synchronousCall);

In order to achieve this, we wrapped the rxExecuteBlocking with our own spin, replacing Handler<Promise<T>> with Callable (and also overload it with Runnable that so that it can return void)
public Maybe<Object> rxExecuteBlocking(Callable caller){
    return vertx.rxExecuteBlocking( objectFuture -> {
        try {
            objectFuture.complete(caller.call());
        } catch (Throwable e) {
            objectFuture.fail(e);
        }
    });
}

I think it would make these rx APIs slightly more align with the Reactive programming paradigm. But that's just my two cents. It's not a deal-breaker.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3170
Bug: in JsonObject.equals · Issue #3170 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
{a:null}.equals({b:1}) 
returns true instead of false.
solution:
if (!fieldNames().equals(m2.fieldName()))
   return false;
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3171
Feature Request: JsonArray.add(int index, Object value) · Issue #3171 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this is easy to add and is available in most json libs
PS: and for JsonArray.set(int index, Object value)
methods add and set have the same semantics as in java's List
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3172
#3168 Improved BareCommand extendability by cvgaviao · Pull Request #3172 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3173
AsyncMap.put that returns a future re-curses indefinitely · Issue #3173 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vert.x/src/main/java/io/vertx/core/shareddata/AsyncMap.java
    
    
         Line 90
      in
      07fe826
    
  
  
    

        
          
           put(k, v, ttl); 
        
    
  


Should change to
put(k, v, ttl, promise);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3174
Future should handle multiple handlers instead of a single · Issue #3174 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently, the Future type has a single handler value making it not suitable when a future needs to have multiple listeners unless the developers handles it manually.
We need to support multiple listeners per future.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3175
Terminal Future method callbacks · Issue #3175 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Future type allows to set a callback using the setHandler(...) method. We should improve the API naming and provide finer grained callbacks.

onComplete(...)
onSuccess(...)
onFailure(...)

setHandler(...) will likely be deprecated or at least discouraged to use.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3176
Multi futures by vietj · Pull Request #3176 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3177
Intermittent MetricsTest testDatagram failure · Issue #3177 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MetricsTest#testDatagram1 and/or MetricsTest#testDatagram2 fail intermittently in at least one out of five runs:
MetricsTest.lambda$testDatagram$95:830->AsyncTestBase.assertEquals:241 expected:<1> but was:<0>
Example: https://travis-ci.org/eclipse-vertx/vert.x/jobs/607323914#L14311
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3178
why vert.x implements Buffer with netty Unpooled instead of PooledByteBuf · Issue #3178 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I review vert.x code, i have a question why vert.x implements Buffer with netty Unpooled instead of PooledByteBuf? If request body is too big, this can cause high gc frequency?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3179
add yaml to mimetypes by zyclonite · Pull Request #3179 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3180
Vert.x 3 Python Native Support · Issue #3180 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am getting that vert.x 3 official doc doesn't have any documentation for Python.
We are trying to use our Python projects into Vert.x system.
Python system are Machine Learning based projects.
Can anyone help us, how can we use Python ML projects using Vert.x 3.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3181
SocketAddressImpl constructor leads to NullPointerException if the InetSocketAddress is unresolved · Issue #3181 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As reported here quarkusio/quarkus#5247, the stacktrace shows that constructing a io.vertx.core.net.impl.SocketAddressImpl leads to a NullPointerException if the passed InetSocketAddress is "unresolved".
This is due to the code in SocketAddressImpl which looks like:
this(address.getPort(), address.getAddress().getHostAddress());

The address.getAddress() can return null (as stated in its javadoc) if the address is unresolved. I think a better/safer way to instantiate this would be to:
this(address.getPort(), address.getAddress() == null ? address.getHostString() : address.getAddress().getHostAddress());
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3182
Configurable WorkerExecutorFactory by rvansa · Pull Request #3182 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I can create another PR for master of course.
My implementation that works much better in Quarkus for REST calls handling is based on JCTools and I did not want to add a dependency to those; therefore I'll add that dependency rather to the Quarkus extension.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3183
Set periodic in Vertx does not getting triggered every time · Issue #3183 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Below is my setPeriodic code
        vertx.setPeriodic(300000, handler -> vc.myClass().myHandler());

I am running in Vertx 3.5.3 in Kubernetes. There is a logger inside myHandler but the log does not get printed every 5 minutes (time is in milliseconds). The pod is serving request properly throughout the day but the log line in myHandler does not get printed every 5 minutes. Logs gets printed for 1 hour and then stops for sometime. The behaviour is random.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3184
High contention on Worker thread pool queue · Issue #3184 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In VertxImpl, a 'Executors.newFixedThreadPool' is created for the worker thread pool ;
    ExecutorService workerExec = Executors.newFixedThreadPool(options.getWorkerPoolSize(),
        new VertxThreadFactory("vert.x-worker-thread-", checker, true, options.getMaxWorkerExecuteTime(), options.getMaxWorkerExecuteTimeUnit()));

Executors.newFixedThreadPool() allocates a LinkedBlockingQueue for the workQueue;
    public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) {
        return new ThreadPoolExecutor(nThreads, nThreads,
                                      0L, TimeUnit.MILLISECONDS,
                                      new LinkedBlockingQueue<Runnable>(),
                                      threadFactory);
    }

LinkedBlockingQueue shows up as a scalability bottleneck when heavily contended in systems where there are many cores (32 in our test case), the tasks delegated to the worker pool are fast and do not make blocking calls. We were unable to saturate 32 CPU cores with current implmentation.
Swapping the implementation to a data structure that scales better with high contention, we observed max throughput increase from 182k req/sec to 290k req/sec, and CPU cores became saturated.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3185
Cache ConnectionBase localAddress / remoteAddress instances · Issue #3185 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently ConnectionBase localAddress() and remoteAddress() are computed on each call. We should cache the allocated objects as it might be called multiple times for the same connection when using HTTP/1.1 keep-alive or HTTP/2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3186
Fixes incomplete promise when a child verticle could not be deployed … by zenios · Pull Request #3186 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you write a test for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3187
Vertx Sync support with ea-async or other frameworks · Issue #3187 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have used vertx Sync + Quasar and that is an awesome mix. but there are cases that implementing with quasar is hard obviously its java agent and transformation.
I think this can be a good feature to implement it with a simpler case like ea-async or other library for the same job.
I dont know is Vertx.Sync possible support to make a native image with GraalVM also or not.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3188
Could you tell me how to support Socket.IO？ · Issue #3188 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Previously, using Socket.IO in Node.js was a very convenient way to implement a chat room, but now I want to use Vert.x, and I don't know how to integrate Socket.IO into Vert.x, to see a project netty-socketio. Can you integrate it into Vert.x?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3189
Fixed a documentation typo by rcoelho · Pull Request #3189 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3190
I want to integrate with other libraries · Issue #3190 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to integrate some libraries into Vert.x, such as netty-socket.io,. I don't see in the documentation how to wrap a library as a mod, for Vert.x. Where should I start?
Sent from PPHub
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3191
Fix @code javadoc commands by dmitry-timofeev · Pull Request #3191 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the eclipse agreement ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3192
Change the Closeable contract to provide a promise instead of an handler · Issue #3192 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Closeable interface defines a close(Handler<AsyncResult<Void>>) to call when the call when close is completed. It would be better to use instead Promise<Void> instead of an Handler to signal the close operation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3193
Replace LinkedBlockingQueue with LinkedTransferQueue in worker-pool by rvansa · Pull Request #3193 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can we get the JMH benchmark as well in the PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3194
NPE in Http1xClientConnection · Issue #3194 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Have an application that executes a ton of outbound requests to various endpoints in a number of different ways. With vertx 3.7.1 I have no issues. After upgrading to 3.8.3 I started getting NPEs in the Http1xClientConnection class. I see the stacktrace in a couple different ways but they all end up in Http1xClientConnection.java:187. It doesnt happen very often but at 100k->200k requests a second across many boxes those add up quick. I havent been able to trace it down to any certain endpoint or particular post/get secure/non-secure scenario. Of course I have already made all the Promise/Future changes so its not an easy revert.
Stacktrace #1
at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.access$1800 (Http1xClientConnection.java:187)
at io.vertx.core.http.impl.Http1xClientConnection.handleResponseEnd (Http1xClientConnection.java:624)
at io.vertx.core.http.impl.Http1xClientConnection.handleHttpMessage (Http1xClientConnection.java:580)
at io.vertx.core.http.impl.Http1xClientConnection.handleMessage (Http1xClientConnection.java:562)
at io.vertx.core.impl.ContextImpl.executeTask (ContextImpl.java:369)
at io.vertx.core.impl.EventLoopContext.execute (EventLoopContext.java:43)
at io.vertx.core.impl.ContextImpl.executeFromIO (ContextImpl.java:232)
at io.vertx.core.net.impl.VertxHandler.channelRead (VertxHandler.java:173)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.codec.MessageToMessageDecoder.channelRead (MessageToMessageDecoder.java:102)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead (CombinedChannelDuplexHandler.java:438)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead (ByteToMessageDecoder.java:328)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:302)
at io.netty.channel.CombinedChannelDuplexHandler.channelRead (CombinedChannelDuplexHandler.java:253)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.timeout.IdleStateHandler.channelRead (IdleStateHandler.java:287)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.ssl.SslHandler.unwrap (SslHandler.java:1475)
at io.netty.handler.ssl.SslHandler.decodeJdkCompatible (SslHandler.java:1224)
at io.netty.handler.ssl.SslHandler.decode (SslHandler.java:1271)
at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection (ByteToMessageDecoder.java:505)
at io.netty.handler.codec.ByteToMessageDecoder.callDecode (ByteToMessageDecoder.java:444)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:283)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead (DefaultChannelPipeline.java:1422)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.DefaultChannelPipeline.fireChannelRead (DefaultChannelPipeline.java:931)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read (AbstractNioByteChannel.java:163)
at io.netty.channel.nio.NioEventLoop.processSelectedKey (NioEventLoop.java:700)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized (NioEventLoop.java:635)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys (NioEventLoop.java:552)
at io.netty.channel.nio.NioEventLoop.run (NioEventLoop.java:514)
at io.netty.util.concurrent.SingleThreadEventExecutor$6.run (SingleThreadEventExecutor.java:1044)
at io.netty.util.internal.ThreadExecutorMap$2.run (ThreadExecutorMap.java:74)
at io.netty.util.concurrent.FastThreadLocalRunnable.run (FastThreadLocalRunnable.java:30)
at java.lang.Thread.run (Thread.java:834)

Stacktrace #2
at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.access$1500 (Http1xClientConnection.java:187)
at io.vertx.core.http.impl.Http1xClientConnection.handleResponseBegin (Http1xClientConnection.java:601)
at io.vertx.core.http.impl.Http1xClientConnection.handleHttpMessage (Http1xClientConnection.java:572)
at io.vertx.core.http.impl.Http1xClientConnection.handleMessage (Http1xClientConnection.java:562)
at io.vertx.core.impl.ContextImpl.executeTask (ContextImpl.java:369)
at io.vertx.core.impl.EventLoopContext.execute (EventLoopContext.java:43)
at io.vertx.core.impl.ContextImpl.executeFromIO (ContextImpl.java:232)
at io.vertx.core.net.impl.VertxHandler.channelRead (VertxHandler.java:173)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.codec.MessageToMessageDecoder.channelRead (MessageToMessageDecoder.java:102)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead (CombinedChannelDuplexHandler.java:438)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead (ByteToMessageDecoder.java:328)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead (ByteToMessageDecoder.java:315)
at io.netty.handler.codec.ByteToMessageDecoder.callDecode (ByteToMessageDecoder.java:429)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:283)
at io.netty.channel.CombinedChannelDuplexHandler.channelRead (CombinedChannelDuplexHandler.java:253)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.timeout.IdleStateHandler.channelRead (IdleStateHandler.java:287)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.handler.ssl.SslHandler.unwrap (SslHandler.java:1475)
at io.netty.handler.ssl.SslHandler.decodeJdkCompatible (SslHandler.java:1224)
at io.netty.handler.ssl.SslHandler.decode (SslHandler.java:1271)
at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection (ByteToMessageDecoder.java:505)
at io.netty.handler.codec.ByteToMessageDecoder.callDecode (ByteToMessageDecoder.java:444)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:283)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:352)
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead (DefaultChannelPipeline.java:1422)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:374)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:360)
at io.netty.channel.DefaultChannelPipeline.fireChannelRead (DefaultChannelPipeline.java:931)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read (AbstractNioByteChannel.java:163)
at io.netty.channel.nio.NioEventLoop.processSelectedKey (NioEventLoop.java:700)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized (NioEventLoop.java:635)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys (NioEventLoop.java:552)
at io.netty.channel.nio.NioEventLoop.run (NioEventLoop.java:514)
at io.netty.util.concurrent.SingleThreadEventExecutor$6.run (SingleThreadEventExecutor.java:1044)
at io.netty.util.internal.ThreadExecutorMap$2.run (ThreadExecutorMap.java:74)
at io.netty.util.concurrent.FastThreadLocalRunnable.run (FastThreadLocalRunnable.java:30)
at java.lang.Thread.run (Thread.java:834)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3195
VerticleFactory creation refactor · Issue #3195 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the VerticleFactory provides a synchronous contract for instantiating a Verticle. We are changing this contract to become asynchronous and provide instead a Callable<Verticle> instead of a single Verticle, allowing the deployment phase to call this method once and later on invoke the returned callable many times for creating instances.
The blockingCreate() setting that instruct the deployer to execute the factory creation within executeBlocking is not necessary anymore as the VerticleFactory can itself perform the executeBlocking execution when it needs it.
// Before
Verticle createVerticle(String verticleName, ClassLoader classLoader) throws Exception;

// Now
void createVerticle(String verticleName, ClassLoader classLoader, Promise<Callable<Verticle>> promise);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3196
HTTP/1 stream should synchronise when updating the connection stream · Issue #3196 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently when sending the request the HTTP/1 stream will update the connection state without synchronisation which can lead to race conditions. We should synchronise properly so the other parts reading the state will see the correct state.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3197
Code changed to solve the JSON RFCs by pmlopes · Pull Request #3197 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you avoid un-necessary code reformatting to make the review easier to read ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3198
Context duplicate breaks equality check · Issue #3198 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In many parts of vertx (vertx-sql-client) a context equality check (context == Vertx.currentContext) is done in order to know if we are running in the same event loop else runOnContext
With the introduction of context duplicate this equality check is not functioning correctly
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3199
Annotate EventBus body parameters with Nullable · Issue #3199 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3200
deleteRecursive does not need a recursive parameter · Issue #3200 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vert.x/src/main/java/io/vertx/core/file/FileSystem.java
    
    
         Line 418
      in
      6b13bdc
    
  
  
    

        
          
           FileSystem deleteRecursive(String path, boolean recursive, Handler<AsyncResult<Void>> handler); 
        
    
  


Since we are changing the API i am not sure if it should be considered a breaking change
Do you want me to make a PR?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3201
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3202
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3203
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3204
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3205
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3206
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3207
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3208
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3209
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3210
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3211
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3212
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3213
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3214
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3215
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3216
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3217
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3218
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3219
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3220
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3221
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3222
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3223
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3224
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3225
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3226
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3227
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3228
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3229
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3230
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3231
Update HttpMethod to include all known HTTP verbs listed on RFCs by pmlopes · Pull Request #3231 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I highly appreciate the additional keyword support. It allows us to implement http based round-trip file editing (webDAV - the same approach Sharepoint takes) and support for calDAV to have read/write support for calendar entries.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3232
Vertx#close Future will not callback the handler · Issue #3232 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Future returned by vertx.close() never completes because the thread pool has been shut down.
The first of these works, the second doesn't:
  @Test
  public void testPromise() throws Throwable {
    Vertx vertx = Vertx.vertx();
    logger.debug("Shutting down with promise");
    Promise<Void> promise = Promise.<Void>promise();
    vertx.close(promise);
    Sync.await(promise.future());
    logger.debug("Shut down with promise");
  }
  
  @Test
  public void testFuture() throws Throwable {
    
    Vertx vertx = Vertx.vertx();

    logger.debug("Shutting down with future");
    Sync.await(vertx.close());
    logger.debug("Shut down with future");
  }

Sync.await is just a blocking method that waits for a future to complete using setHandler.
The output from that is:
14:11:43.941 [main] DEBUG c.g.shared.minimal.vertx.VertxTest 28 - Shutting down with promise
14:11:43.980 [main] DEBUG c.g.shared.minimal.vertx.VertxTest 32 - Shut down with promise
14:11:44.001 [main] DEBUG c.g.shared.minimal.vertx.VertxTest 40 - Shutting down with future
Exception in thread "vert.x-eventloop-thread-24" java.util.concurrent.RejectedExecutionException: event executor terminated
	at io.netty.util.concurrent.SingleThreadEventExecutor.reject(SingleThreadEventExecutor.java:981)
	at io.netty.util.concurrent.SingleThreadEventExecutor.offerTask(SingleThreadEventExecutor.java:388)
	at io.netty.util.concurrent.SingleThreadEventExecutor.addTask(SingleThreadEventExecutor.java:381)
	at io.netty.util.concurrent.SingleThreadEventExecutor.execute(SingleThreadEventExecutor.java:880)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:42)
	at io.vertx.core.impl.EventLoopContext.dispatch(EventLoopContext.java:77)
	at io.vertx.core.impl.EventLoopContext.dispatch(EventLoopContext.java:65)
	at io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:125)
	at io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119)
	at io.vertx.core.impl.FutureImpl.tryComplete(FutureImpl.java:149)
	at io.vertx.core.Promise.complete(Promise.java:67)
	at io.vertx.core.Promise.handle(Promise.java:52)
	at io.vertx.core.Promise.handle(Promise.java:30)
	at io.vertx.core.impl.VertxImpl$1$1.lambda$operationComplete$0(VertxImpl.java:919)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:830)

and it never completes.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3233
General errorHandler does not allow me send my own response · Issue #3233 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following allows me to log any uncaught exception in a route, but it does not allow me to send the response I would like. Instead I get an IllegalState exception about response already having been send.
What can I do so that I'm in control of the response?
        router.errorHandler(500) { ctx ->
            if (ctx.failure() != null) {
                LOGGER.error("Uncaught exception from routing", ctx.failure())
            } else {
                LOGGER.error { "Context failed during routing" }
            }

            val buffer = Buffer.buffer(BadServerResponse.BYTES)
            ctx.response().setStatusCode(500).end(buffer)
        }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3234
WebSocket  API renaming · Issue #3234 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 3.x provides an inconsistent naming concerning for WebSocket, it is often spelled as Websocket. We should address this in Vert.x 4 whenever possible and provide deprecation for incorrect names.
We can fix all of them but the WebsocketVersion that would be breaking. In 3.x we provide deprecations along with correctly spelled equivalents:

HttpServerOptions properties

spelling fixes
the fixed sub-protocols uses now List<String> instead of a coma separated string


HttpClientOptions properties
HttpServer handlers (websocketHandler, websocketStream)
WebsocketRejectedException now extends the more generic UpgradeRejectedException
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3235
WebSocket API cleanup · Issue #3235 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 3.x provides an inconsistent naming concerning for WebSocket, it is often spelled as Websocket. We are addressing this in Vert.x 4
We can fix all of them but the WebsocketVersion that would be too breaky. In 3.x we provide deprecations along with correctly spelled equivalents and in Vert.x 4 we remove them:

HttpServerOptions properties

spelling fixes
the fixed sub-protocols uses now List<String> instead of a coma separated string


HttpClientOptions spelling fixes
HttpServer handlers are renamed (websocketHandler, websocketStream)
WebsocketRejectedException is removed for UpgradeRejectedException
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3236
Fairness in SharedData Lock · Issue #3236 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi authors and developers,
I have a use-case in which ordering of locks requested is required. It seems vert.x does not support fairness provided by java.util.concurrent.locks.Lock . It also seems among different cluster manager providers, ignite supports fairness while hazelcast does not support it.
I wanted to confirm if my understanding is correct and in case it is correct, then are there any chances of vert.x introducing fairness concept in distributed locks?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3237
3.7.1.1 by azhu003 · Pull Request #3237 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3238
fileUpload & sendFile in HTTP2  ,  · Issue #3238 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following code works correctly in HTTP1.X
server.requestHandler(request->{
request.setExpectMultipart(true);
request.uploadHandler(file->{
file.streamToFileSystem("d:\"+file.filename());
});
request.response().sendFile("./webroot/index.html");
});
But it won't work when using HTTP2 , unless :
server.requestHandler(request->{
request.setExpectMultipart(true);
request.uploadHandler(file->{
file.streamToFileSystem("d:\"+file.filename());
});
request.endHandler(aVoid -> {
request.response().sendFile("./webroot/index.html");
});
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3239
Added default value for query parameters. by hradecek · Pull Request #3239 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you add a simple test for this in HttpTest ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3240
NPE in Http1xClientConnection · Issue #3240 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello
We get rare NPE's on high load in Http1xClientConnection
Vert.x: 3.8.4
Stacktrace:
java.lang.NullPointerException: null
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.access$2000(Http1xClientConnection.java:237)
	at io.vertx.core.http.impl.Http1xClientConnection.handleResponseEnd(Http1xClientConnection.java:628)
	at io.vertx.core.http.impl.Http1xClientConnection.handleHttpMessage(Http1xClientConnection.java:584)
	at io.vertx.core.http.impl.Http1xClientConnection.handleMessage(Http1xClientConnection.java:566)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:369)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:232)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:173)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328)
	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:387)
	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:358)
	at io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:285)
	at io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:223)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:257)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:243)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:236)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1417)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:257)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:243)
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:913)
	at io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:819)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:510)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:413)
	at io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1050)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3241
Sequential composition in vertx from list of items · Issue #3241 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to execute sequential composition of futures in Vertx Java. I have an array (it could also be a list with unknown number) that I need to loop through and call the db server via reactive mysql (that is on vertx) This is the code:
`
DbTransferRecord[] arrayData = new DbTransferRecord[4];
arrayData[0].setID(1);
arrayData[0].setName("John");
arrayData[0].setLastName("Smith");
arrayData[1].setID(2);
arrayData[1].setName("Johnas");
arrayData[1].setLastName("Smith");
int arrayDataLength = arrayData.length;
for (int i = 0; i < arrayDataLength; i++) {
dbSaveData(arrayData[i].getId(), arrayData[i].getName(). arrayData[i].getLastName());
}
public Future dbSaveData (id, name, lastName) throws Exception{
Promise = Promise.promise();
....
return promise.future();
}
`
I need to chain every call from dbSaveData sequentially,so if one of the calls to db fails, a handler should be called to clean up (rollback) the data. The documentation is very limited. I could not find how to create sequential composition from list, and I could not understand it enough from the information I found on stackoverflow and the internet. Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3242
CompositeFuture multiple handlers not working · Issue #3242 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It looks like CompositeFuture is not supporting multiple handlers as implemented for "regular" futures in #3174
Reproduced on both 3.8.4 and 4.0.0-milestone4
The following code is calling the onSuccess handler (because it is the last that was added) and is not calling the onFailure handler.
	public static void main(String[] args)
	{
		Promise<Integer> p1 = Promise.promise();
		Promise<Integer> p2 = Promise.promise();
		
		CompositeFuture.all(p1.future(), p2.future())
			.onFailure(t -> t.printStackTrace())
			.onSuccess(cf -> System.out.println("Completed"));
		
		p1.complete(1);
		p2.fail(new RuntimeException("FAILED"));
	}
The following code is calling the onFailure handler (because it is the last that was added) and is not calling the onSuccess handler.
	public static void main(String[] args)
	{
		Promise<Integer> p1 = Promise.promise();
		Promise<Integer> p2 = Promise.promise();
		
		CompositeFuture.all(p1.future(), p2.future())
			.onSuccess(cf -> System.out.println("Completed"))
			.onFailure(t -> t.printStackTrace())
			;
		
		p1.complete(1);
		p2.complete(2);
	}
The invoked handlers do not print anything on screen because of these guards (example for onSuccess):

  
    
      vert.x/src/main/java/io/vertx/core/Future.java
    
    
        Lines 128 to 134
      in
      5a585a1
    
  
  
    

        
          
           default Future<T> onSuccess(Handler<T> handler) { 
        

        
          
             return onComplete(ar -> { 
        

        
          
               if (ar.succeeded()) { 
        

        
          
                 handler.handle(ar.result()); 
        

        
          
               } 
        

        
          
             }); 
        

        
          
           }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3243
Updating from 3.x to 4.x breaks · Issue #3243 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When I try to upgrade vertx-core from 3.x to 4.x. The following code breaks.
package test;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Future;
import io.vertx.ext.web.Router;
import io.vertx.ext.web.handler.BodyHandler;

public class Demo extends AbstractVerticle{
	
    @Override
    public void start(Future<Void> startFuture) {

        Router router = Router.router(vertx);

        router.route().handler(BodyHandler.create());
        router.route("/").handler(req -> {
            req.response()
                    .putHeader("content-type", "text/plain")
                    .end("Money transfer test!");
        });



        vertx.createHttpServer().requestHandler(router::accept).listen(8080, http -> {
            if (http.succeeded()) {
                startFuture.complete();
                System.out.println("HTTP server started on http://localhost:8080");
            } else {
                startFuture.fail(http.cause());
            }
        });
    }

}


The code should pass, but it throws an error:
[ERROR] /Demo.java:[10,5] method does not override or implement a method from a supertype
[ERROR] /Demo.java:[26,28] cannot find symbol
[ERROR] symbol:   method complete()
[ERROR] location: variable startFuture of type io.vertx.core.Future<java.lang.Void>
[ERROR] /Demo.java:[29,28] cannot find symbol
[ERROR] symbol:   method fail(java.lang.Throwable)
[ERROR] location: variable startFuture of type io.vertx.core.Future<java.lang.Void>
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3244
Expose setTimer and setPeriodic on ContextInternal by tsegismont · Pull Request #3244 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This can simplify code when a component is bound to a context and we have to schedule async tasks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3245
HttpServer continues processing requests after closing httpconnection · Issue #3245 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It looks like httpserver will continue processing requests after closing httpconnection in #2542
We closes the connection in connectionHandler when a new connection happens above the limit. But the requestHandler will continue processing.
So for the client side, it won't get any response because of the closed connection but the httpServer has already handled the request, which is out of our expectations.
I want to stop processing any request after the httpconnection closed, any good idea?
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3246
HttpMethod is an interface · Issue #3246 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Vert.x 2 and 3, the HttpMethod is declared as an enum. This leashes the extensibility of HTTP and prevents modelling other HTTP methods with this type unless using HttpMethod#OTHER in addition with the rawMethod attribute on HttpServerRequest and HttpClientRequest.
We can turn this enum into an interface in Vert.x 4 with a few benefits:

non predefined HTTP methods are now handled like others without special handling
one can define its own HTTP method constant for other protocols (like

And at the expanse of 2 breakages:

the enum cannot be used as is dispatching a call with a switch construct. Instead the switch must be done on the HttpMethod#name() string value.
the rawMethod property is removed because now the HttpMethod can model the raw value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3247
HttpMethod is an interface by vietj · Pull Request #3247 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
after this is merged we should check whether it breaks other projects in the stack
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3248
OpenSSLEngineOptions Parameters · Issue #3248 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
How can we configure OpenSSLEngineOptions in a way that it calls specific openssl-engine ( such as pkcs11 from a configuration) and is it possible to give option that it establishes ssl connection with the private key stored in the hsm device.
More information about the problem can be found in the link:
https://stackoverflow.com/questions/59631596/ssl-connection-with-private-keys-in-hsm
Thanks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3249
Connection should not process messages when in closed state · Issue #3249 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently connections can process messages when the connection is closed. Since channels become inactive asynchronously, closing a channel when handling messages will deliver the signal after the messages are processed. We need to keep track of the closed status within the connection and avoid processing messages when the connection is closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3250
Fix a typo in the javadoc for HttpConnection.localAddress by Apache9 · Pull Request #3250 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse agreement to accept your commit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3251
Fully @GenIgnore CompletionStage interop methods by tsegismont · Pull Request #3251 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Otherwise it breaks Rx generation and there's no real interest in these methods there.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3252
Missing methods from rfcs by pmlopes · Pull Request #3252 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently HttpMethod includes the verbs defined in 2 RFCs:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3253
io.vertx.core.VertxException: Thread blocked · Issue #3253 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
2020-01-11 15:43:58.007 |-WARN  [vertx-blocked-thread-checker] io.vertx.core.impl.BlockedThreadChecker [55] -| Thread Thread[vert.x-eventloop-thread-21,5,main] has been blocked for 315077 ms, time limit is 2000 ms
io.vertx.core.VertxException: Thread blocked
at java.lang.Object.hashCode(Native Method)
at java.util.ResourceBundle$CacheKey.calculateHashCode(ResourceBundle.java:658)
at java.util.ResourceBundle$CacheKey.setLocale(ResourceBundle.java:606)
at java.util.ResourceBundle.findBundle(ResourceBundle.java:1456)
at java.util.ResourceBundle.findBundle(ResourceBundle.java:1436)
at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1370)
at java.util.ResourceBundle.getBundle(ResourceBundle.java:899)
at sun.util.resources.LocaleData$1.run(LocaleData.java:167)
at sun.util.resources.LocaleData$1.run(LocaleData.java:163)
at java.security.AccessController.doPrivileged(Native Method)
at sun.util.resources.LocaleData.getBundle(LocaleData.java:163)
at sun.util.resources.LocaleData.getTimeZoneNames(LocaleData.java:103)
at sun.util.locale.provider.LocaleResources.getTimeZoneNames(LocaleResources.java:262)
at sun.util.locale.provider.TimeZoneNameProviderImpl.getDisplayNameArray(TimeZoneNameProviderImpl.java:124)
at sun.util.locale.provider.TimeZoneNameProviderImpl.getGenericDisplayName(TimeZoneNameProviderImpl.java:113)
at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getName(TimeZoneNameUtility.java:246)
at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getObject(TimeZoneNameUtility.java:198)
at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getObject(TimeZoneNameUtility.java:184)
at sun.util.locale.provider.LocaleServiceProviderPool.getLocalizedObjectImpl(LocaleServiceProviderPool.java:281)
at sun.util.locale.provider.LocaleServiceProviderPool.getLocalizedObject(LocaleServiceProviderPool.java:265)
at sun.util.locale.provider.TimeZoneNameUtility.retrieveDisplayNamesImpl(TimeZoneNameUtility.java:166)
at sun.util.locale.provider.TimeZoneNameUtility.retrieveDisplayName(TimeZoneNameUtility.java:137)
at java.util.TimeZone.getDisplayName(TimeZone.java:400)
at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:1271)
at java.text.SimpleDateFormat.format(SimpleDateFormat.java:966)
at java.text.SimpleDateFormat.format(SimpleDateFormat.java:936)
at java.text.DateFormat.format(DateFormat.java:345)
at org.apache.servicecomb.transport.rest.vertx.accesslog.element.impl.DatetimeConfigurableItem.getFormattedItem(DatetimeConfigurableItem.java:89)
at org.apache.servicecomb.transport.rest.vertx.accesslog.AccessLogGenerator.generateLog(AccessLogGenerator.java:55)
at org.apache.servicecomb.transport.rest.vertx.accesslog.impl.AccessLogHandler.lambda$handle$0(AccessLogHandler.java:42)
at org.apache.servicecomb.transport.rest.vertx.accesslog.impl.AccessLogHandler$$Lambda$2602/13588106.handle(Unknown Source)
at io.vertx.core.http.impl.HttpServerResponseImpl.end(HttpServerResponseImpl.java:345)
at org.apache.servicecomb.foundation.vertx.http.VertxServerResponseToHttpServletResponse.internalFlushBuffer(VertxServerResponseToHttpServletResponse.java:122)
at org.apache.servicecomb.foundation.vertx.http.VertxServerResponseToHttpServletResponse.lambda$flushBuffer$0(VertxServerResponseToHttpServletResponse.java:112)
at org.apache.servicecomb.foundation.vertx.http.VertxServerResponseToHttpServletResponse$$Lambda$2632/987665463.handle(Unknown Source)
at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
at io.vertx.core.impl.EventLoopContext$$Lambda$724/880402766.run(Unknown Source)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:510)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:518)
at io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1050)
at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3254
Vert.x 4 JSON Regression, byte primitive breaks JsonObject/JsonArray.toString() · Issue #3254 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.0 Snapshot
Context
When you add a byte as JsonObject field or a byte as JsonArray element, it breaks the encode() method.
Reproducer
Just try the following statement:
new JsonObject().put("b", (byte)100).toString()
It should throw java.lang.UnsupportedOperationException:
java.lang.UnsupportedOperationException
        at io.vertx.core.json.jackson.JacksonCodec.encodeJson(JacksonCodec.java:297)
        at io.vertx.core.json.jackson.JacksonCodec.encodeJson(JacksonCodec.java:270)
        at io.vertx.core.json.jackson.JacksonCodec.toString(JacksonCodec.java:93)
        at io.vertx.core.json.JsonObject.encode(JsonObject.java:644)
        at io.vertx.core.json.JsonObject.toString(JsonObject.java:744)

Same for:
new JsonArray().add((byte)100).toString()
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3255
Fix https://github.com/eclipse-vertx/vert.x/issues/3254 by slinkydeveloper · Pull Request #3255 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fix #3254 to allow adding byte to JsonObject & JsonArray
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3256
Default param value in HttpServerRequest.getParam() method · Issue #3256 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi
Is it possible to extend HttpServerRequest.getParam method so it takes default value for request parameter and returns it if parameter is not there. I'm happy to create a PR for that.
Thanks,
Tim
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3257
Vertx need await / async feature java side · Issue #3257 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8
Context
Currently you have the choice between callback hell, ending with complex business code at tabulation 8192, or to rely on complex future headaches.
In both cases, you may/will end up, even with best efforts, with un-readable and/or un-maintainable complex business code.
RUST (https://rust-lang.github.io/async-book/01_getting_started/04_async_await_primer.html) and python 3 (https://docs.python.org/3/library/asyncio-task.html) have support for async / await syntax, which basically hides this boring level of useless complexity.
Some JS stuff try to mitigate also this problem (https://github.com/pmlopes/vertx3-nashorn.next/blob/master/examples/async-await/src/server.js).
I assume vertx, java server side, critically need this.
I didnt find any clues about this, so i open this bug. Feel free to do what you want with it, but i assume bypassing this may be a very bad idea for vertx.
Do you have a reproducer?
Refer to some samples, like https://stackoverflow.com/questions/49799865/how-to-refactor-chain-of-asynchronous-calls-in-vertx-to-avoid-the-callback-hell

Link to github project/gist

Steps to reproduce
Use vertx.
Extra
Vertx 3.8 and before.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3258
HttpClient improvements · Issue #3258 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A set of improvements done to improve the usability of the bare HTTP client.
Usual methods will send the request
In Vert.x 3.x most HttpClient methods will return an HttpClientRequest that is yet to send. There are a few alternate methods named *Now that will actually send the request on behalf of the user: getNow, optionsNow and headNow.
Vert.x 4 assumes that now the most usual methods behave like the *Now methods and will send the request allowing the user to pass the necessary information to perform the request.
// Get
Future<HttpClientResponse> f1 = client.get(8080, "localhost", "/uri", HttpHeaders.set("foo", "bar"));

// Post with a buffer body
Future<HttpClientResponse> f2 = client.post(8080, "localhost", "/uri", HttpHeaders.set("foo", "bar"), Buffer.buffer("some-data"));

// Post with a streaming body
Future<HttpClientResponse> f3 = client.post(8080, "localhost", "/uri", HttpHeaders.set("foo", "bar"), asyncFile);
New send method
The new send method is the generic way to send requests, i.e
// Is the same as callling get
Future<HttpClientResponse> f1 = client.send(HttpMethod.GET, 8080, "localhost", "/uri", HttpHeaders.set("foo", "bar"));
Enhanced request options
Vert.x 3 brought the RequestOptions for creating request data in a fluent manner, these options have been enhanced to carry

host
port
uri
ssl
headers (new)
follow redirect (new)
timeout (new)

Future<HttpClientResponse> fut = client.post(
   new RequestOptions()
      .host("example.com")
      .setURI("/resource")
      .addHeader("content-type", "application/json"),
   new JsonObject().put("hello", "world"));
Request based API
The HttpClient#request methods will create an HttpClientRequest that is yet to send, like in Vert.x 3.x . This allow to perform lower level interactions such as

just sending the request headers
HTTP/2 specific operations such as setting a push handler, setting stream priority, pings, etc...
creating a NetSocket tunnel
fine grained write control
stream reset
handling 100 continue headers manually

HttpClientRequest request = client.request(8080, "example.com", "/resource")
   .setHandler(res -> {
  // ...
   })
  .putHeader("content-type", "application/json")
  .end(new JsonObject().put("hello", "world"));
HttpHeaders enhancement
The HttpHeaders defines a bunch of useful HTTP header related constants. This is now an interface allowing to create MultiMap instances more easily:
// 3.x
MultiMap headers = MultiMap.caseInsensitiveMultiMap();

// 4.0
MultiMap headers = HttpHeaders.headers();

// 4.0
MultiMap headers = HttpHeaders.set("content-type", "application.data");
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3259
When the debug mode is running, the breakpoint does not take effect. · Issue #3259 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I downloaded the kotlin project on the official starter, and then I set breakpoints in IDEA with gradle, which did not take effect when debug mode was running. Could you tell me how to solve it?
Version
4.0.0 milestone 4
Context
None
Do you have a reproducer?
None
Extra

Anything that can be relevant such as OS version, JVM version

JVM: 13 OS: MacOS 10.15.2 IDEA:2019.3.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3260
JsonObject decodes first object in a list of objects (in invalid json string) instead of throwing an error · Issue #3260 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
3.8.5
Context
When creating a new JsonObject by passing in a json string, which contains more than one object separated by comma then JsonObject parses the first one and drops the rest.
Expected behaviour: JsonObject throws a DecodeException as the input json is invalid (missing surrounding parenthesis).
Background
This issue arises also in Vert.x web when retrieving the body of a request as json via: RoutingContext.getBodyAsJson() because it uses JsonObject for parsing under the hood.
Do you have a reproducer?
final String s = "{\"foo\":1},{\"bar\":2}";
JsonObject obj = new JsonObject(s);
System.out.println(obj);
// Output: {"foo":1}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3261
Vert.x transport should gracefully handle unresolved socket address conversion · Issue #3261 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Sometimes the channel will provide an unresolved socket address, when this happens calling remoteAddress() on an HttpConnection will lead to an NPE since the code assumes that the address will always be resolved.
We should handle this case and provide a best effort support.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3262
Feature Request : Add support for jceks keystore in KeyStoreHelper · Issue #3262 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Not present in 3.8.5
Context
JCEKS is now the default format for java keytool. Adding support for it in io.vertx.core.net.impl.KeyStoreHelper will avoid keystore file proliferation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3263
JsonObject.copy() does not create an identical internal map · Issue #3263 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Run the following unit test:
private static final String BODY = "{\n"
      + "  \"items\": [\n"
      + "    {\n"
      + "      \"swatches\": [\n"
      + "        {\n"
      + "          \"all_swatch_ids\": \"PX1|PC2|PG1\",\n"
      + "          \"all_swatch_links\": \"http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3\",\n"
      + "          \"all_swatch_images\": \"http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg\",\n"
      + "          \"all_swatch_names\": \"Product 1|Product 2|Product 3\",\n"
      + "          \"description\": \"Sample product 1 description\",\n"
      + "          \"title\": \"My product 1\"\n"
      + "        },\n"
      + "        {\n"
      + "          \"all_swatch_ids\": \"A1|A2|A3\",\n"
      + "          \"all_swatch_links\": \"http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3\",\n"
      + "          \"all_swatch_images\": \"http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg\",\n"
      + "          \"all_swatch_names\": \"Product 1|Product 2|Product 3\",\n"
      + "          \"description\": \"Sample product 2 description\",\n"
      + "          \"title\": \"My product 2\"\n"
      + "        }\n"
      + "      ]\n"
      + "    }\n"
      + "  ]\n"
      + "}";

  @Test
  @DisplayName("JSONObject map inequality")
  void jsonEquality() {
    JsonObject original = new JsonObject(BODY);
    assertEquals(original.getMap(), original.copy().getMap());
  }

The test fails with an error:
org.opentest4j.AssertionFailedError: 
Expected :{items=[{swatches=[{all_swatch_ids=PX1|PC2|PG1, all_swatch_links=http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3, all_swatch_images=http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg, all_swatch_names=Product 1|Product 2|Product 3, description=Sample product 1 description, title=My product 1}, {all_swatch_ids=A1|A2|A3, all_swatch_links=http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3, all_swatch_images=http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg, all_swatch_names=Product 1|Product 2|Product 3, description=Sample product 2 description, title=My product 2}]}]}
Actual   :{items=[{"swatches":[{"all_swatch_ids":"PX1|PC2|PG1","all_swatch_links":"http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3","all_swatch_images":"http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg","all_swatch_names":"Product 1|Product 2|Product 3","description":"Sample product 1 description","title":"My product 1"},{"all_swatch_ids":"A1|A2|A3","all_swatch_links":"http://my-website.com/products/1|http://my-website.com/products/2|http://my-website.com/products/3","all_swatch_images":"http://my-images.com/swatch1.jpg|http://my-images.com/swatch2.jpg|http://my-images.com/swatch3.jpg","all_swatch_names":"Product 1|Product 2|Product 3","description":"Sample product 2 description","title":"My product 2"}]}]}

Version
3.8.4
Context
I encountered this issue when integrating Pebble template processor into Knot.x. I passed a map returned by JsonObject.getMap(), but the Engine failed to process the context. Then I noticed a copy() operator was used before. Removing the copy() operator fixes the issue, but is not feasible in the project.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3264
Added test for worker starvation when lock concurrency is greater than worker pool size by tsegismont · Pull Request #3264 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@fabienpomerol can you please take a look as well? Thank you
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3265
SocketAddress enhancements · Issue #3265 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Improve Vert.x SocketAddress API to provide a better access to the relevant information. Currently it provides host and port for inet addresses.
The new hostName and hostAddress will provide specific portions of an inet address whereas the host might return one or the other depending on whether the address is resolved or references an IP.
The implementation also now checks whether an host String represents an IP address so it can be used to avoid unnecessary host resolution when the host is an IP address.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3266
Avoid name resolution when providing an IP host for server bind operation · Issue #3266 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a server is bound we can avoid name resolution when the binding host is an IP address, even though the resolver will resolve it trivially.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3267
MultiMap#set operation with a null value shall remove the entry · Issue #3267 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently setting a null value on a MultiMap#set operation depends on the implementation. CaseInsensitiveMultiMap and VertxHttpHeaders accept the value and the map will contain an entry with such null value. Headers adaptors for HTTP/1 and HTTP/2 will throw a NullPointerException.
Setting such value should instead remove the entry in all cases.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3268
CaseInsensitiveHeaders deprecation · Issue #3268 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The CaseInsensitiveHeaders is the implementation of MultiMap obtained by MultiMap#caseInsensitiveMultiMap(). Users should never use the type CaseInsensitiveHeaders nor instantiate it, instead they should use MultiMap and MultiMap#caseInsensitiveMultiMap().
This class is deprecated in 3.8 and moved in 4.0 in an implementation package.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3269
Make CaseInsensitiveHeaders internal · Issue #3269 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The CaseInsensitiveHeaders implementation of MultiMap is deprecated in Vert.x 3.x and moved in the io.vertx.core.http.impl.headers package in Vert.x 4. This class does not expose more than the MultiMap contract.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3270
Eventbus error is not reported anymore to the metrics SPI · Issue #3270 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I "fixed" a broken integration test in micrometer metrics because it expected an eventbus error to be reported in metrics: vert-x3/vertx-micrometer-metrics#94
This "fix" is necessary to not block builds on master, but the root cause is not fixed and is probably in vertx-core.
To reproduce, we can just revert my change on VertxEventBusMetricsTest.java and run the test.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3271
NetSocketImpl Bug · Issue #3271 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
class NetSocketImpl.handler(Handler handler) handler throw Exception and  no print Exception on console
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3272
NetSocket data handler should report runtime failures to context exception handler · Issue #3272 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently NetSocket data handler will ignore any runtime failure. Those should be reported to the NetSocket context so they can be logged by default and handled by the context exception handler when set.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3273
Test to make sure eventbus exceptions are caught in metrics by jotak · Pull Request #3273 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3274
Isolated loading restricted to Java 8 · Issue #3274 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x has provided isolated class loading support in Vert.x 3 . This option cannot be properly supported above Java 8 due to the evolution of the Java runtime. In Vert.x 4 we continue provides a best effort support of this option for Java 8.
This relies on Multi-Release Jar support supporting this support for Java version < 11 exclusively. The DeploymentOptions class for Java >= 11 will not provide anymore the class loading related fields and the class loader manager implementation is a no-op implementation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3275
Isolated deployment for Java 8 only by vietj · Pull Request #3275 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3276
Message filtering on event bus · Issue #3276 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The event bus currently provides interceptors, but there are situations where to intercepting a message is not enough and it would be really useful to be able to prevent a consumer from getting executed and maybe replies can / should be produced on a central point.
IMHO the event bus is a really proper alternative to rest as general communication solution, but e.g. authentication / authorization is one of the missing features. I think such a possibility to filter message would be a good base to solve scenarios like that and may others as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3277
Simplify EventBusMetrics message delivery callback · Issue #3277 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently when a message is delivered to an handler, two callbacks are done (before and after). This is simplified to a single callback (messageDelivered) to simplify since there practically not much value having two callbacks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3278
Completed futures should operate on provided context by tsegismont · Pull Request #3278 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3279
Use super classes to search MessageCodecs. by rodrigoSaladoAnaya · Pull Request #3279 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I mentioned in this discussion (#2762 (comment)) we should have such approach, however this one does not seem recursive / generic enough. Would you mind improving your contribution for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3280
Implementation of a generic message codec. by rodrigoSaladoAnaya · Pull Request #3280 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
To switch the GenericMessageCodec install as this:
vertx.eventBus().registerDefaultCodec(GenericMessageCodec.class, new MyGenericCodec());
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3281
Metrics SPI not informed of messages discarded during unregister · Issue #3281 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.4
Context
When looking at the values reported for the "credit" EB addresses I noticed that they frequently got "stuck" with a non-zero value.  The cause of this is that the Micrometer implementation (and perhaps others) is not clearing the gauges during handlerUnregistered (I've logged vert-x3/vertx-micrometer-metrics#95 for this).  However, it would be a bit cleaner if the SPI were told about the discarded messages explicitly, rather than having to infer this.
Do you have a reproducer?
Simply running an application which uses a message producer (and thus the credit side-channel) at any reasonable scale will illustrate the issue.  You can also see that in HandlerRegistration.java between lines 168 and 177, any pending messages are discarded, but the SPI is not called (mainly because it lacks the entry point).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3282
Default USER_CODEC_ID field by rodrigoSaladoAnaya · Pull Request #3282 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Rodrigo Salado Anaya rodrigo.salado.anaya@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3283
Use a http server to hold the port busy before the real test. by rodrigoSaladoAnaya · Pull Request #3283 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Actually I meant rather the one defined in AsyncTestBase, e.g
server.listen(onSuccess(s ->
   // ...
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3284
Vert.x 4 milestone 4 Web Client maxPoolSize · Issue #3284 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using Vert.x 4 milestone 4, I am using Web Client.
My server program needs to request a third-party HTTP service in a request, and the performance index of my server program is: Requests per second: 9.44 [# / sec] (mean). In the stress test.
I checked the configuration parameters of Web Client. Found the maxPoolSize parameter, I set it to 20 (I did not find the upper and lower limit of this value), there is no significant improvement in the performance metrics, what can I do to support more HTTP requests at the same time?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3285
Upgrade Netty to 4.1.45.Final to fix CVE-2020-72381 · Issue #3285 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Do not use this issue tracker to ask questions, instead use one of these channels. Questions will likely be closed without notice.
Version
Affected: vert.x 3.8.5
Context
Running snyk against my app, gives this vulnerability report: https://app.snyk.io/vuln/SNYK-JAVA-IONETTY-543490
Basically it says there is invalid HTTP handling in Netty that has been fixed in 4.1.44.Final.
Do you have a reproducer?
Run sync monitor on any app that has vert.x 3.8.5 in the pom.xml file.

Link to github project/gist

Links

https://app.snyk.io/vuln/SNYK-JAVA-IONETTY-543490
netty/netty#9865
https://netty.io/news/2019/12/18/4-1-44-Final.html
jdordonezn/CVE-2020-72381#1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3286
HTTP/2 client clear text upgrade might corrupt the connection data with streamed bodies · Issue #3286 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
All.
Context
When using the Vert.x HttpClient with the HTTP/2 protocol in clear text, the default setting will perform an HTTP/1 connection upgrade with the first request. The connection is corrupted when the client receives the connection preface before the request is fully sent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3287
HTTP/2 client clear text upgrade should send the preface after the upgrade request · Issue #3287 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HttpClient will send the connection preface when it receives the server connection preface. This works when the upgrade request is sent in a single HTTP message but corrupts the connection when the request is not fully sent since the preface will be sent and will be interpreted as HTTP data by the server.
Adding the Http2ConnectionHandler to the pipeline has two effects:

it is required to process the server preface
it will send the request preface to the server

The Http2ConnectionHandler is added to the pipeline when we receive the 101 response from the server. This might send the client preface before the initial HTTP request (doing the upgrade) is fully sent, resulting in corrupting the protocol (the server might interpret it as an corrupted connection preface).
To properly solve this we should be able to process the server response (i.e the server preface and the server HTTP/2 traffic) while delaying the client preface write. Currently this does not seem possible because processing the server preface is done by the handler that will sent the client preface as soon as it is added to the pipeline.
Therefore we must buffer all pending messages until the request is fully sent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3288
CassandraClient.executeWithFullFetch doesn't return all rows · Issue #3288 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.5
Context
I have a Cassandra database with 7000 rows. When I query them all only 2000 are returned. I've tested with different fetch sizes. When using fetch size >= 7000 it works fine.
It is the last 2000 rows that are returned.
Looking into the code I can see that CassandraClientImpl calls ResultSetImpl.all. I believe I have found the bug in this method:
`private void loadMore(Context context, List loaded, Handler<AsyncResult<List>> handler) {
int availableWithoutFetching = resultSet.getAvailableWithoutFetching();
List rows = new ArrayList<>(loaded.size() + availableWithoutFetching);
for (int i = 0; i < availableWithoutFetching; i++) {
rows.add(resultSet.one());
}
if (!resultSet.isFullyFetched()) {
  handleOnContext(resultSet.fetchMoreResults(), context, ar -> {
    if (ar.succeeded()) {
      loadMore(context, rows, handler);
    } else {
      handler.handle(Future.failedFuture(ar.cause()));
    }
  });
} else {
  handler.handle(Future.succeededFuture(rows));
}

}`
The problem is that the loaded rows aren't added to the rows list (just the size is added).
I believe adding this row after the rows instantiation will solve this bug
rows.addAll(loaded)
Do you have a reproducer?
`
import io.vertx.cassandra.CassandraClient;
import io.vertx.core.Vertx;
import lombok.SneakyThrows;
public class CassandraTest {
@SneakyThrows
public static void main(String[] args) {
    Vertx vertx = Vertx.vertx();
    CassandraClient cassandraClient = null;
    try {
        cassandraClient = CassandraClient.create(vertx);

        cassandraClient.executeWithFullFetch("SELECT * FROM <keyspace>.<table>", ar -> {
            if (ar.succeeded()) {
                System.out.println("Number of rows fetched: " + ar.result().size());
            } else {
                System.out.println("Failed to fetch: " + ar.cause());
            }
        });

        Thread.sleep(5000);
    } finally {
        if(cassandraClient != null) {
            cassandraClient.close();
        }
        vertx.close();
    }
}

}`
Steps to reproduce

Add 7000 rows to Cassandra
Run the CassandraTest code above
Number of rows fetched: 2000 is printed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3289
Rename Buffer toJsonXXX() to mapToJsonXXX() · Issue #3289 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Buffer interface defines these methods:

toJsonObject(): parse the buffer content as a JSON object
toJsonArray(): parse the buffer content as a JSON array
toJson(): parse the buffer content as a JSON element or value

These methods are actually mapping methods a JSON element or value according whose type depends on the content of the buffer. The toJson() method convention is actually used to encode data objects to their JSON representation. e.g for a buffer it would actually encode a base 64 representation of the content like JsonObject does. The toJson() method will likely be changed in Vert.x 4 to return an encoded base 64 String.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3290
Websocket ping message shouldn't trigger handler · Issue #3290 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.5
Context
Seems that vertx websocket ping message handling changed with 3.8.0 release.
Before 3.8.0  - ping messages weren't triggering handler to be called.
After 3.8.0 - when websocket ping message received websocket handler would be called.
Is it a bug or an intended change?
Do you have a reproducer?
Server:
        vertx.createHttpServer()
                .websocketHandler(ws -> {
                    ws.handler(buf -> {
                        System.out.println("RECEIVED: " + buf.toString());
                        ws.write(buf);
                    });
                })
                .listen(8080);


Client:
       vertx.createHttpClient().websocket(8080, "localhost", "/test", ws -> {
            ws.writePing(Buffer.buffer("PING"));
            ws.writeTextMessage("MESSAGE");
        });

Server output with 3.8.0+:

RECEIVED: PING
RECEIVED: MESSAGE

with 3.4-3.7:

RECEIVED: MESSAGE

Steps to reproduce

run server verticle
run client verticle
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3291
WebSocket should delay all handlers when paused · Issue #3291 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the WebSocket implementation will deliver frame and pong to the respective handlers when it is in paused state. The implementation will only queue the frame containing application buffers when in paused state. We should instead manage a queue of frames instead of application buffers and the queue handler should dispatch those messages to the respective handlers, applying the queue processing state to all handlers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3292
Removed deprecated Starter class by tsegismont · Pull Request #3292 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj when this is merged I'll update the breaking changes page
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3293
Make testHttpServerWithIdleTimeoutSendChunkedFile reliably in CI by rodrigoSaladoAnaya · Pull Request #3293 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you describe how you are attempting to improve the test ?
note: you can test this in your own fork if you have travis enabled, the travis script are designed to work with repo forks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3294
Removed multithreaded worker verticles from the doc by tsegismont · Pull Request #3294 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj if you're fine with this, I'll upgrade the 3.9 branch too. Then I can update the website with an override.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3295
io.vertx.core.file.impl.FileResolver.resolveFile() has a bug · Issue #3295 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
io.vertx.core.file.impl.FileResolver.resolveFile(fileName) use a ClassLoader to resolve resource. It always return null when getResource() has been called. Because the fileName which send to resolveFile alway starts with '/'.
The resolveFile method will been used in StaticHandler and HttpServerResponse.
It will cause an error when sending the file to the client, the first time it is called, and the subsequent time it will not see an error because it reads from the cache and did not execute getResource
This leads to program instability.
Version
3.8.5
Context
resolveFile:143, FileResolver (io.vertx.core.file.impl)
resolveFile:805, VertxImpl (io.vertx.core.impl)
:933, FileSystemImpl$20 (io.vertx.core.file.impl)
existsInternal:932, FileSystemImpl (io.vertx.core.file.impl)
exists:340, FileSystemImpl (io.vertx.core.file.impl)
lambda$isFileExisting$2:283, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
call:-1, 1512148561 (io.vertx.ext.web.handler.impl.StaticHandlerImpl$$Lambda$234)
wrapInTCCLSwitch:266, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
isFileExisting:283, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
sendStatic:192, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
handle:145, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
handle:51, StaticHandlerImpl (io.vertx.ext.web.handler.impl)
Do you have a reproducer?
See the source code, everything is there.
Extra
OS: Windows 10
JVM: OpenJDK 12
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3296
Fixes #3289 : Renames toJsonXXX() methods from Buffer to mapToJsonXXX() by jlengrand · Pull Request #3296 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closing because I did not signoff my commit
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3297
Fixes #3289 : Renames toJsonXXX() methods from Buffer to mapToJsonXXX() by jlengrand · Pull Request #3297 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
we decided to not go forward with this change
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3298
JsonObject does not exist in node_modules/@vertx/core · Issue #3298 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to follow any basic example here:
https://vertx.io/docs/vertx-config/js/#_additional_formats
If I do the following:
import { ConfigRetriever } from '@vertx/config';
import { ConfigStoreOptions } from '@vertx/config/options';
import { JsonObject } from '@vertx/core';
const fileStore = new ConfigStoreOptions().setType("file").setConfig(new JsonObject().put('foo', 'bar'));

I will get an error that JsonObject is not found.
If I look at the @vertx/core/index.js file I can clearly see it missing.
FWIW I tried another way and seem to have gotten a workaround, but JsonObject should still be exposed for other use cases.
The workaround can be found here: #3308
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3299
JsonArray constructor produces objects that violate `equals` contract · Issue #3299 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JsonArray should obey the condition that two arrays having same toString() representations are considered equal. This issue provides a counterexample to that.
The reason behind this is that the JsonArray constructor taking a list does not check the actual types of objects. Provided with a json-unfriendly type, it is being converted when reading. If the types of the objects were validated , IllegalArgumentException would be thrown - this would prevent confusion caused by implicit conversion on reading from array.
Version
3.8.4
Do you have a reproducer?
  @Test
  @DisplayName("Expect JsonArrays with equal toString() result to be equal")
  void jsonArrayLeadingToWeirdResults() {
    class SomeClass {
      private String field;

      SomeClass(String field) {
        this.field = field;
      }

      public String getField() {
        return field;
      }

      public JsonObject toJson() {
        return new JsonObject()
            .put("field", field);
      }
    }

    SomeClass instance = new SomeClass("fieldValue");

    JsonArray expected = new JsonArray().add(instance.toJson());
    JsonArray actual = new JsonArray(Collections.singletonList(instance));

    assertEquals(expected.toString(), actual.toString());
    assertEquals(expected, actual);
  }
Context
The issue was encountered when implementing unit tests for an utility class transforming metadata to a custom Json representation. See Knotx/knotx-fragments#92
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3300
Adding context-euality-check-methods · Issue #3300 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4
this topic is related to this one: #3198
We should have methods like this:
context.checkContextFamilyEquality(otherContext);
-> its true if the context is related to otherContext, cause one of them is a duplicated one of the other one
context.checkThreadEquality(otherContext)
-> its true if both live in/on the same-eventloopthread/same-thread.
it capsulate code like this: ctx.nettyEventLoop().inEventLoop()
if it changes in the future, we dont have to adjust these code snippet in x-files of the vertx project, but only in one^^
=> And also its a better code design, not relying on concrete implementations but on abstractions^^
context.checkEquality(otherContext)
-> its true if context==otherContext
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3301
One verticle context, other and different contexts on each http-request to that verticle · Issue #3301 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4
if i instantiate a verticle and start a http-server in it.
Each request is executed on a other context (not the verticle context itself)
So context-equality checks breaks and i cant use the context-locals
For the context-equality-checks there would be a documentation good, what we should use then.
Maybe a solution i referenced here: #3300
But that solves not the context-locals-problem.
We need there more clarification.
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3302
Adding a second and faster runOnContextTWO() · Issue #3302 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4 (feature-request)
actually we have the contextA.runOnContext(Handler h)-method that do something like this:
it switch to the contextA and switch the eventloop to that in which contextA lives.
it does this that way without exception.
contextA.runOnContextTWO(Handler h):
here it should do that context switch to contextA also without exception.
But if the program sees here that eventloopThread from currentContext is the same as the eventloopThread of contextA then it should not do that eventloop-switch (do not a push to that mpsc-queue). Here in that case it should run the code directly, after "switching" the context.
Why we need both?
the first runOnContext is more fair. If i call in a forloop 1000times the runOnContext, thousand mpsc-queue-pushes are done. So other "events" have the chance to run, before the 1000 completed.
In the secound one (runOnContextTwo), if i call this method in a for-loop 1000times and the caller-eventloop is the same as the contextA-loop, then the 1000events are executed without a break. No other events have the chance to run in between. So its not so fair. But in sum faster.  (Cause i dont have 1000 expensive mpsc-queue pushes)
=> So the use case later decides, if the user want to use the fair or unfair runOnContext()-solution
Maybe the secound solution is also interessting for some internal stuff^^
Where we want to change the context, but dont do an expensiver one eventloop-switch to the same eventloop (if the eventloops from contextA and callerContext are the same^^)
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3303
Adding runOnContext() with results · Issue #3303 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4 (feature request)
(1)
public  Future runAndGetFuture(Handler<Promise> runnable)
(2)
public  void run(Handler<Promise> ressourceRunner, Handler<AsyncResult> callerRunner)
Both methods are methods from the context-class and both should do the same:
They should run on that context. The result in case (1) can be fetched with the help of a future on the callerContext. In case (2) its similar to the method executeBlocking(..) The result can be fetched in that callbackmethod callerRunner.
Why these functionalitly?
-> The user dont have to write this code on his own; cause vertx have it^^
More informations and details you can get here: https://groups.google.com/forum/#!topic/vertx-dev/P1aDU1i1Tyg
in that Google-Forum-Topic you find links to a example-implementation by me of that functionality
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3304
Invalid docs for passing options to createHttpServer · Issue #3304 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to follow the basic example here:
https://vertx.io/docs/vertx-core/js/#_configuring_an_http_server
Which shows:
var options = {
  "maxWebSocketFrameSize" : 1000000
};

var server = vertx.createHttpServer(options);

I am using Vue, and I place that code in my index.js file.  When I do an npm run build;npm start; I see the following error in the logs
Failed in deploying verticle caused by TypeError: invokeMember (createHttpServer) on JavaObject[io.vertx.core.impl.VertxImpl failed due to: no applicable overload found
(overloads: [
Method[public io.vertx.core.http.HttpServer io.vertx.core.impl.VertxImpl.createHttpServer(io.vertx.core.http.HttpServerOptions)],
Method[public io.vertx.core.http.HttpServer io.vertx.core.impl.VertxImpl.createHttpServer()],
], arguments: [DynamicObject<JSUserObject> (DynamicObjectBasic)])

It seems to work when I do:
import { HttpServerOptions } from '@vertx/core/options';
var server = vertx.createHttpServer(new HttpServerOptions().setMaxWebsocketFrameSize(1000000));

I suggest updating the docs to reflect the correct way to do it
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3305
Error: JksOptions is not a constructor · Issue #3305 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to add jks options to my vertx server in javascript like so.
import { HttpServerOptions, JKSOptions } from '@vertx/core/options';

const myJks = new JKSOptions().setPath('/foo/bar.jks')
  .setPassword('baloneySandwich');

const server = vertx.createHttpServer(new HttpServerOptions()
  .setSsl(true)
  .setKeyStoreOptions(myJks));

It barfs with the following error:

TypeError: JKSOptions is not a constructor
at  load(file://node_modules/.lib/es4x-0.10.1.jar!/io/reactiverse/es4x/jvm-npm.js:97:3264-3345)

FWIW I am using GraalVM 19.2.1 CE (Which has NPM 6.9.0/ OpenJDK v 1.8.0_232), Vertx 3.8.5 and ES4X-pm 0.10.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3306
Big Bug: Future/Promise-context-binding shall be on onComplete()-time not constructor-time · Issue #3306 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx4
Actually im some cases a context is injected to the Future/Promise.
Later the resultHandler(s) is/are executed on that context.
The context is injected at Constructor-Time. Its the context of the caller, so that the handler is later executed on the right context.
actually it is also so that there exists cases, in which no context is injected.
So this is very inconsistenst and error-prone.
So the solution of that bug can be the following:
No-Context-Constructor-Injection, BUT
at the time the handler is registered to that future/promise, the context should be captured.
So i get the following benefits:

if i register a handler to that future on a other context, where the future is created, the result is executed in that case on the right context.
if i register different handlers from different context, each handler then is called on the correct context.

These two benefits i dont have in the acutally future-constructor-context-injection-solution.
More informations and details you can get here: https://groups.google.com/forum/#!topic/vertx-dev/F3w-AyiobF8
in that Google-Forum-Topic you find links to a example-implementation by me of that.
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3307
Adding Timeout-(handler-based)-method to Future/Promise · Issue #3307 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4 (feature request)
the following method we should add to the Future-Interface:
public Future onComplete(Handler<AsyncResult> h, long timeout)
its easy to implement. We wrap in that method the handler into a TimeoutHandlerWrapper.
Take a look to my detailed informations in google-groups: https://groups.google.com/forum/#!topic/vertx-dev/r-0y-SzELzU
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3308
Invalid docs for ConfigRetriever · Issue #3308 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It appears that the config retriever is passing futures by default.  I don't see anything in the docs about this:
https://vertx.io/docs/vertx-config/js/#_configuring_a_single_verticle
The code below works, and the docs may want to change to reflect something similar
import { ConfigRetriever } from '@vertx/config';
import { ConfigStoreOptions, ConfigRetrieverOptions } from '@vertx/config/options';

const fileStore = new ConfigStoreOptions().setType('file')
  .setFormat('properties')
  .setConfig({ 'path': '/foo/bar.properties' });
const configRetrieverOptions = new ConfigRetrieverOptions().addStore(fileStore);
const retriever = ConfigRetriever.create(vertx, configRetrieverOptions);

retriever.getConfig((futureResult, json_err) => {
  if (json_err != null) {
    console.error(json_err);
    return;
  }
  futureResult.onSuccess((result) => {
    console.log('From Future:', JSON.stringify(result)));
    // Do your work in here instead
  );}
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3309
ConfigRetriever incorrectly parses numbers · Issue #3309 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have a myVertxConfig.properties file. In it I have:
  port=8080
If I load the properties file using the following code as example (#3308) I will see an output of 8080.0  (It adds a dot and then a zero)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3310
NPE in Http1xServerConnection · Issue #3310 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x version 3.7.0
We are getting these rare errors (happened around 9 times in the last 90 days).
Not exactly sure how to reproduce these but it seems like this happens during high load.
Unhandled exception java.lang.NullPointerException at io.vertx.core.http.impl.Http1xServerConnection.handleInterestedOpsChanged(Http1xServerConnection.java:415)
	at io.vertx.core.net.impl.VertxHandler.lambda$channelWritabilityChanged$3(VertxHandler.java:136)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:320)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:188)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:180)
	at io.vertx.core.net.impl.VertxHandler.channelWritabilityChanged(VertxHandler.java:136)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:436)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:423)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.handler.stream.ChunkedWriteHandler.channelWritabilityChanged(ChunkedWriteHandler.java:150)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:436)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:423)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:416)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1431)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:436)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:423)
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:942)
	at io.netty.channel.ChannelOutboundBuffer$2.run(ChannelOutboundBuffer.java:620)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:405)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:906)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3311
Handle unsolicited HTTP messages in client · Issue #3311 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the HTTP client will assume that all HTTP messages are received in response of a request it sent which is correct. Some servers might send unsolicited message (e.g upon a connection close) and are misbehaving this way.
Such messages will trigger NullPointerException in the client because it is in a state assuming no message can be received.
java.lang.NullPointerException: null
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.access$2000(Http1xClientConnection.java:237)
	at io.vertx.core.http.impl.Http1xClientConnection.handleResponseEnd(Http1xClientConnection.java:628)
	at io.vertx.core.http.impl.Http1xClientConnection.handleHttpMessage(Http1xClientConnection.java:584)
	at io.vertx.core.http.impl.Http1xClientConnection.handleMessage(Http1xClientConnection.java:566)

The client needs to handle unsolicited messages to avoid such errors polluting the logs and potentially creating  performance issues.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3312
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3313
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3314
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3315
[]
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3316
Hanlde exception in the last handler by dejanb · Pull Request #3316 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
do you know how to reproduce it ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3317
Behavior of setHandler is not consistent · Issue #3317 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.1
Do you have a reproducer?
        Promise<String> p = Promise.promise();

        p.complete("Foo");

        p.future()
                .setHandler(ar -> {
                    System.out.format("1: %s%n", ar.result());
                })
                .setHandler(ar -> {
                    System.out.format("2: %s%n", ar.result());
                });
vs:
        Promise<String> p = Promise.promise();

        p.future()
                .setHandler(ar -> {
                    System.out.format("1: %s%n", ar.result());
                })
                .setHandler(ar -> {
                    System.out.format("2: %s%n", ar.result());
                });

        p.complete("Foo");
Steps to reproduce

... Run the two samples above

Extra
When the "complete" method is called after setting up the two handlers, only one handler is being called:
2: Foo

When complete is called before setting up the handler, both handlers get called:
1: Foo
2: Foo

My expectation would be that, now matter when the future gets completed, always the same handlers get called.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3318
Bug: In existing FutureImpl: Wrong exception-handling · Issue #3318 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4 milestone 4
private void doDispatch(Handler<AsyncResult<T>> handler) {
    if (context != null) {
      context.dispatch(this, handler);
    } else {
      handler.handle(this);
    }
  }


thats the existing doDispatch-Method in your Future-Implementation.
The Problem is in the else-path.
if the handler throws an exception, the caller-side in the if-path is not abborted, cause the exception is caught anywhere in the context.dispatch......
in the else-path the exception abborts the caller-side.
So we have there a different behaviour in the cases if in the promise/Future is a context registered or not.
I guess we need here something like this:
} else {
try
{
      handler.handle(this);
}
catch(Throwable t)
{
//report t to the current-Context
}
}

that should not abbort the caller-side
lg knotenpunkt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3319
3.9 by CaoYusong · Pull Request #3319 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3320
avoid rawtype warning by CaoYusong · Pull Request #3320 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this code cannot currently compile because the code generator does not support wildcards, so we cannot have such PR until the code generator supports. We are planning to try having this for Vert.x 4.0, for now i'll just close the PR because if we do support wildcard, the only use case we know in codebase is this one for now.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3321
Critical CVEs in jackson-databind · Issue #3321 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vertx 3.8.5
Context
Found via OWASP dependency check
Do you have a reproducer?
NVD link has details on all issue from jackson-databind 2.9.9.  It appears jackson-databind 2.9.10.3 will cover all of these issues.
NVD: https://nvd.nist.gov/vuln/search/results?form_type=Advanced&results_type=overview&search_type=all&cpe_vendor=cpe%3A%2F%3Afasterxml&cpe_product=cpe%3A%2F%3Afasterxml%3Ajackson-databind&cpe_version=cpe%3A%2F%3Afasterxml%3Ajackson-databind%3A2.9.9
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3322
Removed multithreaded worker verticles from the doc by tsegismont · Pull Request #3322 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Recreated #3294 for 3.9
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3323
Static resources are not served when browsing through SSL/TLS · Issue #3323 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.4
Context
At work, I'm developing a web application based on Vert.x: a main verticle that spawns 2 verticles. One for a RESTful API (with internal and public endpoints), and one for UI (static resources, among which a bundled ReactJS front app).
An end-user request transits through those architecture tiers: (HTTPS) 1x Microsoft IIS SSL-enabling frontend --> (HTTP) 1x authentication gateway --> (HTTP) 1x Vert.x app.
When upgrading from Vert.x 3.7.1 to Vert.x 3.8.4 with minimal compilation-required changes (i.e. resolving the new Vert.x Promises into app well-known Futures), I observe a consistent regression when accessing https://myhost.mydomain/myappcontextpath/foofileinsidewebroot.html from outside the Vert.x app host machine:

Firefox states a PR_CONNECT_RESET_ERROR, therefore gets no response from the server
Visually in the browser taskbar, the SSL handshake phase seems to enter a looping-behavior ("Establishing TLS connection..", "TLS connection established.", looping ~5 times, what is observed only once when page loads properly)
(may be unrelated) In the browser network monitoring tools: the TLS handshake phase takes longer than usual, and HSTS (HTTP Strict Transport Security) appears disabled (in our setup, it's enabled when page loads properly)
In the Vert.x app request logs, I see the request, I see an HTTP 200 Ok response status, and I see the proper response size
(may be unreliable due to logging misconfiguration in my app) The app logs state no error message nor exception stacktrace. Parameterizing logging to full-verbose outputs nothing more in logs

Reverting changes and downgrading to 3.7.1 extinguishes the issue.
Alternatively, regression is worked around by replacing the StaticHandler (i.e. router.route().handler(StaticHandler.create());) with this impl: CustomStaticHandlerServiceImpl_java.txt
Do you have a reproducer?
No
Steps to reproduce

Build and deploy a Vert.x app using the StaticHandler and having a foofileinsidewebroot.html file dropped in the Vert.x default webroot directory
Have a Microsoft IIS front with SSL-enabled (may reproduce with any web server), ideally on another host
Have this front pointing to your Vert.x app HTTP (non-secured) URL
From a public machine, browse https://myhost.mydomain/myappcontextpath/foofileinsidewebroot.html in Firefox, and assert: that you get a PR_CONNECT_RESET_ERROR

Extra

I realize this issue is not fully narrowed down and debugged, therefore not easily reproductible most probably. It's intended as an "heads up" ticket, in case the Vert.x developers may think of anything related to that regressive behavior
Updating to Vert.x 3.8.5 didn't solve the issue
When running the Vert.x app locally and accessing it directly (i.e. http://127.0.0.1:myappport/foofileinsidewebroot.html), issue is not reproduced. The same observation is made when performing a local attempt from the deployment machine. As such, issue is definitely SSL-related
When running in the bug context, where the UI static resource URL is not reachable, the public API endpoints still are: so the app-defined Vert.x router routes didn't fully regressed
The suggested workaround duplicates parts of the StaticHandler (reading the static files directory, writing the HTTP response headers, writing a file in the HTTP response body). As such, it disqualifies a regression cause in Netty?
In the Vert.x revisions, I see no changes made to the StaticHandler between version 3.7.1 and 3.8.4, so the problem would occur deeper in the Vert.x classes?
Due to a tight schedule, I didn't go deeper:



Didn't attempt to configure app into a debug mode in order to remotely attach a debugger, having our operations team to manage security/access/routing for the debugging port
Didn't attempt with in-between Vert.x releases (3.8.0, 3.8.1, 3.8.2 and 3.8.3) in order to identify when it regressed
Didn't attempt to monitor the network trafic on the architecture tiers (with Wireshark or any other monitoring tool)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3324
setHost/setPublicHost and WARN i.v.c.e.i.clustered.ConnectionHolder - Connecting to server localhost:xxx failed · Issue #3324 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.4
Context
Trying to set eventbus options so that bidirectional messaging is possible between to members.
Do you have a reproducer?
https://github.com/rc-dukes/dukes
Steps to reproduce
Start member verticles e.g. with CarServer or DukesFx App on a Mac OS laptop
Start member verticles on Raspberry PI
Use Echo functionality.
Message on Raspberry is received. Publishing a reply fails with different error messages depending on eventbus configuration. There is no known working configuration at this time.
Issue
The issue here is that there seem to be hidden features that lead to the situation.
The documentation e.g. for https://vertx.io/docs/apidocs/io/vertx/core/eventbus/EventBusOptions.html#setHost-java.lang.String-
is
Sets the host.
Which is not sufficient to explain what is going on.
https://vertx.io/docs/apidocs/io/vertx/core/eventbus/EventBusOptions.html#setClusterPublicHost-java.lang.String-
Says:
_Set the public facing hostname to be used for clustering. Sometimes, e.g. when running on certain clouds, the local address the server listens on for clustering is not the same address that other nodes connect to it at, as the OS / cloud infrastructure does some kind of proxying. If this is the case you can specify a public hostname which is different from the hostname the server listens at.
The default value is null which means use the same as the cluster hostname._
but does not describe why e.g.


https://stackoverflow.com/questions/49025541/in-vertx-clustering-whats-the-difference-between-cluster-host-port-and-public/49028531#49028531


rc-dukes/dukes#19
happen


#3229


e.g. states
when i use config
host: 0.0.0.0
this problem resolved
Which does not explain why 0.0.0.0 is a valid value and how this should work. I tried it and it leads to the other member to not know what to do with 0.0.0.0 ...

#2696
adds to the confusion instead of resolving it.
#1529
also adds more input that does not lead to clarification

Where is the reproducer that proves that things are not systematically broken?
I am in the process of modifying RemoteCar.java to allow specifying Host and ClusterPublicHost via command line. Do I also need to be able to modify the ports? Which is the valid setting that should work and where is this documented?
Please do not close this as a question - i have the feeling that there are quite a few people out there which ran into similar issues due to missing documentation/examples and clarification.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3325
Client pool and connection manager improvements · Issue #3325 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the client connection Pool although takes care of closing the pool when it becomes empty in order to remove itself from the ConnectionManager. The ConnectionManager is actually coupled to the HTTP protocol and the Pool making it impossible to reuse for other purpose than HTTP connection management.
We want to decouple the ConnectionManager from HTTP and from the Pool and give flexibility by allowing a endpoint management. The manager will only now maintain of map of endpoint keys to Endpoint where the Endpoint is responsible for managing the connections, eventually with a Pool. It will also be responsible for maintaining managing the endpoint lifecycle relieving the pool from this responsibility.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3326
WebSocket client connection improvements · Issue #3326 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently WebSockets are pooled like other HTTP connections and therefore are naturally associated with the Context of the Pool. We actually want to remove this coupling such as opening a WebSocket from a context will use that context. We could have a specific Context for WebSocket and perform message passing between the underlying channel and the user context, however this adds un-necessary complexity and potential bugs because WebSocket are closed after usage and thus not pooled.
We implement a different policy for WebSocket management that maintains a maximum set of connections for a given endpoint in order to satisfy the max pool size management as well as a list of waiters for connections, however we will not use a pool because connections are simply closed when the WebSocket closes the connection.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3327
HTTP client per pool context · Issue #3327 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClient will maintain a single context for the client. This requirement is quite strong and actually be relaxed to maintain a context per endpoint for pooled connections. This will improve the shared client in the future as well.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3328
Deprecate the Future setHandler method · Issue #3328 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x supports multiple handler per future since the 3.8.4 release. The setHandler method does convey the meaning that a single handler per future can be set and unset and the onComplete, onSuccess, onFailure methods shall be used instead.
The setHandler method usage should be replaced by the onComplete method, e.g
// Before
Future<String> fut = getSomeFuture();
fut.setHandler(ar -> ...);

// After
Future<String> fut = getSomeFuture();
fut.onComplete(ar -> ...);
The setHandler will be removed in Vert.x 4.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3329
Remove the Future setHandler method · Issue #3329 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x supports multiple handler per future in 4.0. The setHandler method does convey the meaning that a single handler per future can be set and unset and the onComplete, onSuccess, onFailure methods shall be used instead.
The setHandler method usage must be replaced by the onComplete method, e.g
// Before
Future<String> fut = getSomeFuture();
fut.setHandler(ar -> ...);

// After
Future<String> fut = getSomeFuture();
fut.onComplete(ar -> ...);
The setHandler is deprecated in Vert.x 3.9
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3330
Remove doc for pump and replace by pipe by vietj · Pull Request #3330 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'll backport this PR after (minus removing the pump doc section).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3331
AsyncFileImpl - flush() and close() use the internal ordered task queue · Issue #3331 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.5.2, 3.8.5
Context
Performing flush and close on multiple AsyncFiles results in each one being closed synchronously, one by one, since they are submitted to the internal ordered task queue. This results in performance degradation.
Originally these operations were executed on the event loop, but were moved since they are blocking operations that can take a while. However, I don't think the intention was to execute them one by one - though there could be something I am missing.
See https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/file/impl/AsyncFileImpl.java#L434
and
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/file/impl/AsyncFileImpl.java#L542
I think it would be more appropriate to send them to an unordered task queue / worker pool so that they can be flushed or closed in parallel.
Do you have a reproducer?
Obtain multiple references of AsyncFile by using fileSystem().open() and call flush or close on each one.
Steps to reproduce
See above.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3332
Make field private by blindpirate · Pull Request #3332 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3333
Event bus metrics reports discarded messages · Issue #3333 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a consumer discards a message (i.e unregistration, message overflow) it will drop messages.
A metrics implementation may maintain count pending message (incremented when a message is scheduled / decremented when a message is delivered). On a message discard, this value will not reflect the actual value.
Signalling an implementation that a message is discarded allows to maintain a correct count and also enables this implementation to be aware of it (i.e it could trigger a warn, etc...)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3334
a future should support cancellation · Issue #3334 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I like the introduced state splitting between promises and futures in the upcoming 4.x version. I was just reasoning how we can escalate an exception back to the code that is running/backing the future without a signature to ask for it.
Reference to Java
https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel(boolean)
Version
4.0.0-milestone4
Context
We are currently (miss) using the tryFail signature to signal an exception to the executing code and ask for an interrupt.
Possible use cases

resource management to abort non relevant processes
graceful shutdown of running processes

Do you have a reproducer?
Migration to 4.x would lead to a compilation error
Extra
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3335
FileSystemImpl.existsInternal can block event loop thread · Issue #3335 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.5
Context
Invoking vertx.filesystem().exists() can block the event loop thread. This is because resolveFile() runs in the event loop thread instead of in the worker thread:
See https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/file/impl/FileSystemImpl.java#L1113:
  private BlockingAction<Boolean> existsInternal(String path) {
    Objects.requireNonNull(path);
    return new BlockingAction<Boolean>() {
      File file = vertx.resolveFile(path);
      public Boolean perform() {
        return file.exists();
      }
    };
  }

resolveFile should instead be called in the perform() method:
  private BlockingAction<Boolean> existsInternal(String path) {
    Objects.requireNonNull(path);
    return new BlockingAction<Boolean>() {
      public Boolean perform() {
        File file = vertx.resolveFile(path);
        return file.exists();
      }
    };
  }

Do you have a reproducer?
You can mock calls to resolveFile() to sleep for any amount of time or set a breakpoint on the resolveFile call as a test runs. Wait up to the blocked thread checker interval and unpause execution. BlockedThreadChecker will report that the thread has been blocked.
Steps to reproduce
See above.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3336
HttpClientRequest set timeout when request begins · Issue #3336 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClientRequest timeout is created when upon call of setTimeout method. This may trigger the timeout when the request is not yet begun (i.e before it is in internal connecting state) causing timeout miss, leading to a racy situation.
We should create the timeout after the request has begun (i.e after it is set connecting or has a stream).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3337
Disable EDNS by default · Issue #3337 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
EDNS is an extension mechanism for DNS (https://fr.wikipedia.org/wiki/EDNS) that should be disabled by default. It might cause unwanted issue such as #3150 .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3338
Disable EDNS by default - fixes #3337 by vietj · Pull Request #3338 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3339
Event bus metrics schedule event should be delivered when message is received · Issue #3339 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The EventBusMetrics#scheduleMessage event in 3.x is called when the message will be scheduled for delivery by the registration handler. Most metrics implementations will increase a pending count on this event. However there is no guarantee that the message will actually be processed, e.g the message is scheduled on a registration but this registration is unregistered before it receives the message leading to an incorrect metric value.
The scheduleMessage method should be called within the registration handler before the message is added to the internal pending list or processed or discarded.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3340
Improve JavaDocs for `Future.otherwise` and `Future.recover` · Issue #3340 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.5
Context
When attempting to use Future.otherwise and Future.recover it was not clear what the intended differences were meant to be.
Do you have a reproducer?
No, N/A
Extra
I intend to submit a PR with a proposed update to the JavaDocs and perhaps the Vert.x documentation in order to make the use of these methods more clear in a broader context.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3341
NPE in SSLHelper · Issue #3341 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am trying to use AmqpClient with a keystore and am getting a nonhelpful message of
SEVERE: Unhandled exception
io.vert.core.VertException: java.lang.NullPointerException
 at io.vertx.core.net.impl.SSLHelper.createContext(SSLHelper.java:303)
 at io.vertx.core.net.impl.SSLHelper.getContext(SSLHelper.java:478)


What is happening is that the catch block inside createContext is swallowing the stacktrace of the NPE, so I have no idea where/how it's originating inside that method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3342
Allow Buffer side by side with byte[] by pmlopes · Pull Request #3342 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See: vert-x3/issues#500
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3343
Bug when unregistering a message consumer and registering a handler again by jponge · Pull Request #3343 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
You can safely ignore the ECA check failure. I signed off my commits and GPG-signed them with my Red Hat address, so... we're covered.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3344
Clustered start failure does not close resources · Issue #3344 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a clustered vertx instance fails to start (i.e event bus start failure, cluster join failures, etc...), resources allocated in the vertx instance are not released.
On a start failure, the created vertx instance should be closed to release resources.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3345
Clustered start failure does not close resources - closes #3344 by vietj · Pull Request #3345 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3346
HttpServerRequest multipart expectation should fail when request say otherwise · Issue #3346 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpServerRequest only setup the request decoder when the content-type header and the method say so. When it does not it should fail instead of being a no-op.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3347
feat: add keepAliveTTL to evict connection even if active by srijan02420 · Pull Request #3347 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@srijan02420 there is no test for this feature
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3348
remove clustered flag in favor of createClusteredVertx by wowselim · Pull Request #3348 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks like the ECA check is based on my email address. I'm using different addresses for GitHub and eclipse.org. Any advice?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3349
Use try -with-resources statement ensures that resource is close by panchmp · Pull Request #3349 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Michael Panchenko panchmp@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3350
remove clustered flag in favor of createClusteredVertx by wowselim · Pull Request #3350 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is one test where I don't know whether it should still exist or not:
LauncherExtensibilityTest#testThatCustomLauncherCanCustomizeTheClusteredOption

To me it's fine if a custom launcher  cannot customize this option. If this level of flexibility is needed by the user, then creating a custom main class is the alternative.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3351
Add a method to the RoutingContext to allow cleanup whenever a request ends · Issue #3351 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
When a request is received in a Vert.x server, you might open clients to perform tasks related to the call that was made. Those clients need to be closed when the response is sent or something goes wrong to prevent leaks. The solution could be implemented as discussed in https://groups.google.com/forum/?fromgroups=#!topic/vertx/B1AQUQrOn4Y
which is:
on vertx web RoutingContext we can add a method:
addEndHandler(Handler<AsyncResult<Void>> handler)
This handler would attach to 3 core HttpServerResponse handlers:

closeHandler when the client just closes the connection
exceptionHandler when there's a socket IO error
endHandler when the response cleanly ends

This way it would behave just like the other addXXXHandler() methods already listed on the RoutingContext.
Currently using endHandler is insufficient as it gets overwritten if used somewhere else in the codebase for the same routingContext. Leading to the add terminology and behaviour
Use cases
A request comes in, and a client is opened to do some processing with the request. As soon as the client is opened routingContext.addEndHandler(v -> client.close()) is called, so now the client is guaranteed to be closed when handling of the routingContext ends. the handler for this context then calls next() and the next handler opens a different client and again calls routingContext.addEndHandler(v -> client.close()), so that the second client is also guaranteed to be closed.
Contribution
@gmcrobert and I can work on implementing it with some guidance from someone more experienced with the codebase
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3352
Remove Future#getHandler · Issue #3352 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
and check the entire stack because it might be used
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3353
Vert.x doesn't handle Transfer-Encoding properly · Issue #3353 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.8.5
Context
When a client sends "Transfer-Encoding: gzip, chunked", Vert.x resets the client connection without sending a response.
Do you have a reproducer?
https://github.com/cristianokbc/vertx-starter
Steps to reproduce

Clone the repository https://github.com/cristianokbc/vertx-starter
Start it using mvn clean compile java:exec
Make a POST request using the following curl command:

curl http://localhost:8888 -H "Transfer-Encoding: gzip, chunked" -d @./data.gz -X POST -v
The client will be disconnected without any response:
* About to connect() to localhost port 8888 (#0)
*   Trying 127.0.0.1...
* Connected to localhost (127.0.0.1) port 8888 (#0)
> POST / HTTP/1.1
> User-Agent: curl/7.29.0
> Host: localhost:8888
> Accept: */*
> Transfer-Encoding: gzip, chunked
> Content-Type: application/x-www-form-urlencoded
> 
> 8
* upload completely sent off: 15 out of 8 bytes
* Empty reply from server
* Connection #0 to host localhost left intact
curl: (52) Empty reply from server
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3354
Deprecate the start/stop Future-based methods in AbstractVerticle by jponge · Pull Request #3354 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3355
TCP socket options should not be applied when using domain socket wit… by BillyYccc · Pull Request #3355 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you backport this to 3.9 branch and set the issue fix version to 3.9.1 ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3356
TCP socket options should not be applied when using domain socket wit… by BillyYccc · Pull Request #3356 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…h epoll - fixes #3125
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3357
Add Future#compose(Supplier<U> supplier) method by aguibert · Pull Request #3357 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we need support of Supplier in codegen and other languages before so it can be translated.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3358
HAProxy protocol support by zenios · Pull Request #3358 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj i have a question in NetSupport
If we have a netserver that receives shorts messages under 12 bytes
then the message will not pass through since OptionalHAProxyMessageDecoder will wait for at least 12 bytes to decide if its an HAProxy message or not.
How shall we handle this cases?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3359
Add `then` method in Promise for GraalJS  · Issue #3359 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
public class Db {
    public void tx(Function<Transaction, Promise> fn) {
         Transaction tx = this.beginTransaction();
         Handler resolve = v -> { tx.commit(); };
         Handler reject = e -> { tx.rollback(); throw e; };
         
         Promise p = fn.apply(tx);
         p.future().onSuccess(resolve).onFailure(reject).onComplete(r -> tx.close());
    }
} 

// in java, every thing is perfect because we create a PromiseImpl instance to handle the future callback
// this is java code
db.tx(tx -> {
    Promise p = Promise.promise();
    ...
    return p;
});

// but in js (GraalJS or Nashorn), the async/await keyword will generate and return a JS Promise object which provide a then member method to be callback
// this is js code
db.tx(async tx => { 
    const result = await jdbc.query(...);
    ...
});

// we get a JS Promise object in java runtime, it has no .future() method
Promise p = fn.apply(tx);
p.future()... // will throw exception here

// so, if our Promise interface has .then(resolve, reject) method, that will be nice for both Java and JS developer.
Use cases
ES4X, GraalJS, Nashorn
Contribution
I will do it
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3360
AbstractVerticle not havr starrt(Promise<Void> startPromise) · Issue #3360 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

= 3.8.0

Context
AbstractVerticle start method not have promise version.
The docs says breaking changes that future is deprecatedm, and tell us to change to Promise. but the AbstractVerticle class still use Future
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3361
Shared HttpClient support · Issue #3361 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A few Vert.x clients (e.g. JDBC, Cassandra, Mongo) have createShared methods. The purpose of these creation methods is that, when you deploy multiple verticle instances, a single resource (JDBC datasource, Mongo client, Cassandra session) is created and reused.
While this requirement was obvious for Vert.x clients wrapping existing libraries, most built-in clients don't have them. So if a user has to open at most C connections to an HTTP backend, and deploys V verticle instances, it is advised to create an HttpClient with C/V as max pool size.
On the upside, the user will get maximum performance because the HttpClient will be operated on the verticle context. On the downside, the configuration process is not straightforward.
For Vert.x 4, HttpClient (and some other built-in clients too) have been made safe to use on different contexts. So it is possible to add createShared methods now.
The benefit is simplified configuration. The drawback is that this will require an extra hop between the context that actually created the HttpClient and the context using it. This should be acceptable by most apps though (the user pays at least this price when sending messages over the eventbus).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3362
SslHandskaheTImeout is not applied on HttpServer · Issue #3362 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3363
SslHandshakeCompletionHandler should use Netty promise · Issue #3363 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since SslHandshakeCompletionHandler is a netty handler it should use netty promises instead of vertxHandler
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3364
Fixes #3362 SslHandskaheTImeout is not applied on HttpServer by zenios · Pull Request #3364 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can  you rebase the PR on the latest master I think one class got renamed - thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3365
Fixes #3363 SslHandshakeCompletionHandler should use Netty promise by zenios · Pull Request #3365 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you rebase on latest master ? some files were changed - thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3366
1.Fix HA PROXY tests that were failing when run with -PtestDomainSockets by zenios · Pull Request #3366 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
2.Restore tests that were disabled due to netty/netty#9113
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3367
Provide Automatic-Module-Name attribute in MANIFEST.MF · Issue #3367 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Feature Description
Provide Automatic-Module-Name attribute in MANIFEST.MF file.
Use cases
Provides a reliable module name, instead of using the name derived from the JAR file, without having to target Java 9+ and/or use module-info java/class file. This can be used until there is a module-info file.
Contribution
If this feature request were to be approved I would be happy to work on it.
I believe that this change would require some additional configuration in the pom.xml maven jar plugin, something of this sort:

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifestEntries>
                <Automatic-Module-Name>io.vertx.core</Automatic-Module-Name>
            </manifestEntries>
        </archive>
    </configuration>
</plugin>


The 'io.vertx.core' name seems most intuitive to me, but that is just my opionion. There are some rules to take into accout when deciding on the module name to use.
Additional notes
I apologize if some issue/discussion already exists for this. I was not able to find an issue for this topic. I did find discussions about JPMS support (module-info, split packages, moditect, etc), but not automatic module name.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3368
ServerWebSocket does not expose host() and scheme() · Issue #3368 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ServerWebSocket exposes  headers, query, path and uri but does not expose host and scheme
Following is answers to some questions that might be asked :)

Why dont you get host and scheme before upgrading

There are cases that we dont have control over the upgrade request. One case is graphql-subscriptions.

Why dont you get the host from the headers

Since vertx 4 supports parsing X-FORWARD headers getting host from headers directly, might not return the valid result
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3369
Bug 3368 ServerWebSocket does not expose host() and scheme() by zenios · Pull Request #3369 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3370
Fixes #3368 ServerWebSocket does not expose host() and scheme() by zenios · Pull Request #3370 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Dimitris Zenios dimitris.zenios@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3371
ctrl+c not working correctly · Issue #3371 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In all my abstract verticles I have logging in the stop method and none of that shows up when I press ctrl+c
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3372
Doubled paths using the file resolver on Windows · Issue #3372 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See:
quarkusio/quarkus#8518
On windows, something has changed in the file resolver between 3.8.5 and 3.9.0:
2020-04-11T08:12:02.1127183Z 2020-04-11 08:12:02,096 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-3) HTTP Request to /abc/not_found failed, error id: 8d6f8a61-e0f1-4141-9fbe-0b54e7e5cc50-1: java.nio.file.InvalidPathException: Illegal char <:> at index 120: D:\a\quarkus\quarkus\extensions\resteasy\deployment\target\vertx-cache\file-cache-93439211-4463-4880-bc3e-6fd8101e95a4\D:\a\quarkus\quarkus\extensions\resteasy\deployment\target\quarkus-dev-mode-test9360317579511630399\src\main\resources\META-INF\resources\index.html
2020-04-11T08:12:02.1131329Z 	at java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)
2020-04-11T08:12:02.1131593Z 	at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)
2020-04-11T08:12:02.1131836Z 	at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)
2020-04-11T08:12:02.1132039Z 	at java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)
2020-04-11T08:12:02.1132255Z 	at java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:229)
2020-04-11T08:12:02.1132461Z 	at java.base/java.io.File.toPath(File.java:2292)
2020-04-11T08:12:02.1132669Z 	at io.vertx.core.file.impl.FileResolver.unpackFromFileURL(FileResolver.java:178)
2020-04-11T08:12:02.1132881Z 	at io.vertx.core.file.impl.FileResolver.unpackFromFileURL(FileResolver.java:192)
2020-04-11T08:12:02.1133089Z 	at io.vertx.core.file.impl.FileResolver.unpackUrlResource(FileResolver.java:156)
2020-04-11T08:12:02.1133273Z 	at io.vertx.core.file.impl.FileResolver.resolveFile(FileResolver.java:139)
2020-04-11T08:12:02.1133487Z 	at io.vertx.core.impl.VertxImpl.resolveFile(VertxImpl.java:805)
2020-04-11T08:12:02.1133697Z 	at io.vertx.core.file.impl.FileSystemImpl$20.perform(FileSystemImpl.java:934)
2020-04-11T08:12:02.1133913Z 	at io.vertx.core.file.impl.FileSystemImpl$20.perform(FileSystemImpl.java:932)
2020-04-11T08:12:02.1134139Z 	at io.vertx.core.file.impl.FileSystemImpl$BlockingAction.handle(FileSystemImpl.java:975)
2020-04-11T08:12:02.1134357Z 	at io.vertx.core.file.impl.FileSystemImpl$BlockingAction.handle(FileSystemImpl.java:955)
2020-04-11T08:12:02.1134547Z 	at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$2(ContextImpl.java:316)
2020-04-11T08:12:02.1134754Z 	at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
2020-04-11T08:12:02.1134972Z 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
2020-04-11T08:12:02.1135194Z 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
2020-04-11T08:12:02.1135409Z 	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
2020-04-11T08:12:02.1135613Z 	at java.base/java.lang.Thread.run(Thread.java:834)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3373
TCP server lifecycle unification · Issue #3373 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Rework TCP server implementation to share server lifecycle and management code between NetServer and HttpServer, noticeable changes:

TCP server metrics are instantiated a single time per server instead of several times like it used to be
TCP server does not maintain anymore a connection map and instead uses a ChannelGroup to close open sockets
the HandlerManager class has been reworked in a ServerChannelLoadBalancer that will do the actual channel initialisation and close open sockets
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3374
Async client close · Issue #3374 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient and NetClient don't provide asynchronous result of the client close operation. We should add them.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3375
Does EventBus have a unified message decoder for non-clustered environments · Issue #3375 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Now I have to write an encoder for each pojo, but they are only used in a non-clustered environment. Is there a better way? Thank you.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3376
File resolver should not cache cacheable entries with an invalid name · Issue #3376 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The file resolver assumes URL returned by the current class loader leads to valid cache names. A class loader might returns an URL for an un-cacheable file name and in this situation we should assume such file does not exist because we cannot cache it.
We could attempt to cache the file and replace the faulty char with another one, e.g replace \u0000 by _ on unix, but that would lead to potential collision and lead to security issues. For the moment such issues mostly never happen in practice and it is therefore better this way.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3377
An infinite loop in VertxHttpHeader while add and remove entry in iterator · Issue #3377 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.0
Context
As the title said,if you remove a entry and then add another one in a iterator loop, you will encounter with an infinite loop.
Do you have a reproducer?
a simple example to reproduce this issue :
MultiMap map = new VertxHttpHeaders();                              
map.add("a","a");                                                   
map.add("b","a");                                                   
map.add("c","a");                                                   
map.add("d","a");                                                   
                                                                                                                                      
for (Map.Entry<String, String> entry : map) {                       
    map.remove(entry.getKey()).add(entry.getKey(),entry.getValue());
}                                                                   

Extra
I think this issue is caused by the circular linked list,just break the circular and this issue could be solved.
I would like to provide a PR if you don't mind.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3378
Clarify that HTTP keep alive value 0 means no eviction · Issue #3378 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently it is unclear about what setting HTTP keep alive value to 0 means. This specific value should imply that the connection is not evicted from the pool until it is closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3379
Pool delegates the validity check for checking connection closing · Issue #3379 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently the Pool manages the expiration time stamp and use a clock to check the connection shall be closed when it remains too long in the pool. The pool now delegates this check to the ConnectionProvider allowing the provider to provide a custom policy.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3380
Async file drain handler shall not be cleared after drain · Issue #3380 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The AsyncFile implementation clears the drain handler after it has been called assuming the caller will set it each time WriteStream#writeQueueFull() returns true which is not always the case. Other implementations behave this way and AsyncFile shall align on this (less racy) behavior.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3381
Fixes #3362 SslHandskaheTImeout is not applied on HttpServer by zenios · Pull Request #3381 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Dimitris Zenios dimitris.zenios@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3382
HTTP/1.x client connection shutdown · Issue #3382 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HTTP/2 supports a graceful connection shutdown that relies on go away frames. We can provide a degraded support for HTTP/1.x for client connection that will have a similar effect since the client initiates the requests.
A HTTP/1.x client connection shutdown evicts the connection from the pool and waits until all current requests are terminated to close the connection.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3383
Implementation of HTTP/1 client connection shutdown by vietj · Pull Request #3383 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3384
Implementation of HTTP/1.x client connection shutdown by vietj · Pull Request #3384 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3385
wmic deprecated in win10 · Issue #3385 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
In method io.vertx.core.impl.launcher.commands.StopCommand.terminateWindowsApplication:
  private void terminateWindowsApplication() {
    // Use wmic.
    List<String> cmd = Arrays.asList(
        "WMIC",
        "PROCESS",
        "WHERE",
        "CommandLine like '%vertx.id=" + id + "%'",
        "CALL",
        "TERMINATE"
    );
since WMIC is about to sunset in future, and already deprecated in Win 10, one of our interns are using win 10 and found this issue, so should we use Get-CimInstance to replace it?
reference: https://stackoverflow.com/questions/57121875/what-can-i-do-about-wmic-is-deprecated
Use cases
We are using Windows 10 & vertx-maven-plugin to build vert.x project and it breaks when redeploying the project using vertx-maven-plugin
while it works in macOS
Contribution
@tsegismont may help solve this issue
original issue: reactiverse/vertx-maven-plugin#205
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3386
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3387
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3388
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3389
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3390
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3391
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3392
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3393
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3394
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3395
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3396
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3397
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3398
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3399
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3400
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3401
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3402
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3403
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3404
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3405
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3406
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3407
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3408
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3409
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3410
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3411
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3412
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3413
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3414
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3415
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3416
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3417
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3418
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3419
Restore ability to measure number of scheduled, but not yet run, EventBus handlers. · Issue #3419 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
This lies somewhere between bug and feature.  In Vert.x 3.9.x the call to EventBusMetrics.scheduleMessage was moved from EventBusImpl.deliverToHander to HandlerRegistration.handle.  The call to EventBusMetrics.beginHandleMessage remains where it was before.
With the old placement it was possible to measure the number of EventBus messages that had been received and turned into Netty tasks, but which had not yet been run by Netty (since the call to scheduleMessage occurred before the task was created and the call to beginHandleMessage occurs only once the task has started running).
With the new placement this is no longer possible.  The only thing you can measure is the depth of the internal pending queue, which will only be used if the event consumer is paused for some reason (which our application never does).
If possible we would like the old capability restored in some fashion.  If it isn't feasible to move the call to schedule back where it was, then perhaps a new entry point to EventBusMetrics could be added to replace it.  The inability to measure the number of backlogged tasks hampers our performance analysis.
Use cases
Understanding (in detail) how work is flowing through the system when running at high throughput rates (>100K/s) is critical to both application tuning and provisioning.  The Netty task backlog is an important metric in understanding when and where incoming work is overwhelming the system's ability to process it.  Netty itself provides very little in the way of instrumentation so measuring it via Vert.x was the best we could do.
Contribution
I would be happy to contribute this change, though I've never done any work on the actual Vert.x core (I do have a current Eclipse contributor agreement).  Beyond that I don't know who the appropriate person might be to do the implementation.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3420
HttpClient/WebClient not closing connection after request done. · Issue #3420 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I am using ServiceDiscovery to publish httpclient/webclient record. But find out connections is not closed. And it consume all my client ports rapidly and report "cannot assgin address" error.
Version
3.9.1 and 4.0.0-M4
reproducer
https://github.com/chinfeng/vertx-conn-leaks-reproducer
Steps to reproduce

run gateway
run foo
visit http://127.0.0.1/foo/metrics in browser
refresh browser, see "open-connections" counter, it grow every refresh and no release at all.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3421
Extend AsyncMap supported key/values types with codecs · Issue #3421 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
At the moment AsyncMap-s provided by SharedData have key and value type restrictions: primitive types, java.io.Serializable and io.vertx.core.shareddata.impl.ClusterSerializable. None of these could be used for POJO objects that doesn't implement Serializable (ClusterSerializable is internal interface - so it's very unlikely someone to implement it).
Support for AsyncMap key.value types could be extended using the same approach used in EventBus - by registering codecs. Codecs in both cases could even use the same interface - after all they would serve single concept - serialize and deserialiize custom objects.
Note: If such support is added, vertx could auto register codecs for JsonObject/JsonArray/Buffer instead of implementing ClusterSerializable (which is not public class and seems little strange in the documentation) . Probably ClusterSerializable could be even removed.
I don't see in current SharedData doc any notice which types are supported. And it would be little hard to explain because of internal ClusterSerializable.
Note: Event bus supports byte[]. There's no reason for AsymcMap to do not support byte[] as value type (at least to have similar supported types for event bus and AsyncMap)
Use cases
Having a cluster wide async map with key.value types that are legacy or not in developer control e.g. POJOs.
Contribution
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3422
Jackson Databind is still required for parsing json file · Issue #3422 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
java.lang.UnsupportedOperationException: Mapping is not available without Jackson Databind on the classpath
at io.vertx.core.json.jackson.JacksonCodec.fromValue(JacksonCodec.java:79)
at io.vertx.core.json.JsonObject.mapFrom(JsonObject.java:107)
Seems like JsonObject.mapFrom operation still need jackson databind dependency while vertx-core won't automatically import this dependency for 4.0 - m4
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.9.10.3</version>
</dependency>

if we manually add this dependency, it won't throw exceptions
Version
4.0.0 - milestone 4
Context
4.0.0 - milestone 4
Do you have a reproducer?
it happens in our open source project:
https://github.com/whitewoodcity/social-vertex
https://github.com/whitewoodcity/social-vertex/blob/master/src/main/java/cn/net/polyglot/MainVerticle.java
line 42:
config.mergeIn(JsonObject.mapFrom(ar.result()));
if we place a json config file(config.json) and main verticle will load the file and then parse it into json format and it will fail without jackson-databind dependency
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3423
Make NodeInfo and RegistrationInfo implement ClusterSerializable by tsegismont · Pull Request #3423 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This will ease CM implementations:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3424
Json ClusterSerializable: skip intermediate String conversion by tsegismont · Pull Request #3424 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
JsonObject and JsonArray serialization create an intermediate String conversion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3425
The shutdown hook wasn't starting the right thread and leaking the ca… by pmlopes · Pull Request #3425 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3426
Provides feature that can be implemented using a customize Clustered-EventBus · Issue #3426 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The "VertxImpl.java" constructor method force to create default ClusteredEventBus implementation, there is no way to create my specific implementation.
public class VertxImpl implements VertxInternal, MetricsProvider {
...
 private final EventBusInternal eventBus;
...
 VertxImpl(VertxOptions options, ClusterManager clusterManager, NodeSelector nodeSelector, VertxMetrics metrics, VertxTracer<?, ?> tracer, Transport transport, FileResolver fileResolver) {
 ...
 ...
 this.eventBus = clusterManager != null ? new ClusteredEventBus(this, options, clusterManager, nodeSelector) : new EventBusImpl(this);
 ...
 ...
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3427
Ensure EventBusMetrics message schedule event is called before the event-loop action · Issue #3427 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The EventBusMetrics#scheduleMessage method was changed to be called on the event-loop in order to avoid incorrect counter in metrics implementations (that needed to compensate and correct the counter value) when a message consumer is unregistered.
It is more interesting to have the event delivered on the thread scheduling the delivery action on the event-loop as it provides a better observation of the latency of a message dispatch after is has been received.
We should compensate a consumer unregistration with a discard message event so the metrics implementation will be aware of this and compensate the actual value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3428
Issue 3427 by vietj · Pull Request #3428 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Implementation of a fix for #3427 and proper testing. Testing for metrics race has also been added.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3429
Replace readFileSync by readFileBlocking in javadoc by julianladisch · Pull Request #3429 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
do you mind backporting to 3 ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3430
Context affinity for non Vert.x thread · Issue #3430 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x 3 creates a new instance of io.vertx.core.Context each time it is called from a non Vert.x thread. In Vert.x 4 we use a future model and this model does not work well for code wrapping Vert.x objects and compose them, e.g
public Future<Integer> doSomething() {
  Future<Integer> result1 = getSomeResult();
  Future<Integer> result2 = getOtherResult();
  return CompositeFuture.all(result1, result2).map(this::composteResults);
}
When this is executed from a non Vert.x thread, two contexts will be created and the final result might be on either context.
This feature associates non Vert.x threads with a context the first time a context is created, hence allowing:
new Thread() -> {
  assertEquals(vertx.getOrCreateContext(), vertx.getOrCreateContext());
}).start();
This does is not a breaking change per se, since the getOrCreateContext() method either create or return an existing context. The only affected code will be code that relies on this implementation detail to create contexts instead of using a Verticle.
The implementation uses weak references to keep track of the context in the thread local to allow releasing contexts when the thread ends, although this is not a realistic use case.
Consequently, the trick in the event-bus that uses a specific contexts for ordering messages sent from a non Vert.x thread is not necessary anymore and it can simply use the context without worrying of this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3431
Event loop affinity by vietj · Pull Request #3431 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Overall LGTM, and a welcomed change. I'm just really wondering about the opportunity to move createEventLoopContext to the public APIs.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3432
Prune verticle deployement metrics · Issue #3432 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Remove the metrics SPI verticleDeployed / verticleUndeployed events. Such events are not really in the scope of what metrics should measure. They are removed in Vert.x 4.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3433
Vertx http client endAwait function hangs execution · Issue #3433 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Calling endAwait on the vertx http client causes the program execution to hang and not proceed
Version
3.9.0
Do you have a reproducer?
suspend fun main() {
  val vertx = Vertx.vertx()
  val httpClient = vertx.createHttpClient()
  println("before")
  httpClient.getAbs("https://reqres.in/api/users/1").handler { }.endAwait()
  println("after") // never prints
}

Extra
It does work if I change the endAwait to just end - which might be ok? Not sure if I can call end directly in a suspend function [blocking?]
But even if I call endAwait - after finishing the code in the handler it should proceed to the next line
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3434
Enable service loadable external ExecutorService Factory via SPI · Issue #3434 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Provide an SPI Interface for an executor service that can be used to fulfill executeBlocking requests and Java service load and use an implementation of the SPI that is found on the classpath at runtime.
Use cases
I want to be able to run a Vert.x application in a managed environment that makes use of Vert.x in its implementation to run 'blocking' work asynchronously but I need to be able to control various aspects of the threads and threadpool that is used in order to be able to maintain my requirements on system management, tuning and so on.
As I do not have direct control of the application source code I want to be able to get
Vert.x to use my executor service without making changes to the current Vert.x APIs
or requiring the application to call any new APIs.
I do not want to have a large surface area of new API's for tuning and thread control
in Vert.x that I have to get approved, implement and then call and I also want to ability to handle
more than one Vert.x application that issues executeBlocking calls in the JVM at
one time. I want to be able to externalize my configuration in a way that is idiomatic
to my environment and this can be acheived by encapsulating this in my own implementation
of the SPI.
Similarly, I do not think I have a requirement to interject at the level of the Context class
(or the class that implements executeBlocking). I want to continue to have Vert.x handle
such issues as 'ordered', metrics plug-in points, handler callbacks and so on.
However, SPI insertion 'after' task queueing is too low level, as to maintain recognisable interfaces in the SPI we would probably 'wrap' any Callable/Runnable that gets submitted inorder to retrieve what contexts we needed when it was run.
It may make sense to have the SPI as a vanilla ExecutorService and leave in place
the Vert.x WorkerPool in order for that to handle metrics or other related requirements
but have WorkerPool::executor return the service loaded ExecutorService that has
been loaded off the classpath.
OpenLiberty embedding Vert.x
The first use case I have for this is to use it to enable the @Blocking annotation in
SmallRye Reactive Messaging 2.0+ in the context of the Liberty application server.
Note that as the service loaded ExecutorService may have a thread pool that grows
and shrinks, although Vert.x may schedule ordered=true blocking tasks one at
a time it may not be possible to run all tasks from a single Vert.x context on a the
same thread from the pool.
The SPI could be the standard j.u.c.ExecutorService but it is probably better to have
a Vert.x specific interface that can be used to obtain the ExecutorService as well as to provide better support for 'named' worker pools being backed by the external ExecutorService.
Contribution
All being well with my employer, I would be happy to implement a PR for this feature along with the normal level of test and documentation assets using the standard Vert.x processes.
This is different from #1539 (apologies for typing so much text in that issue)
as this feature is simpler and explicitly avoids API changes in Vert.x
which is a useful feature for our use case.
References
Netty 5
Of interest is that Netty 5 will switch to using a Executor/ExecutorFactory  in place of a ThreadFactory which would enable the loaded ExecutorFactory to be used for all Netty tasks.
( /netty/netty#2250 ). However, according to this "There is currently no clear timeline for Netty5"!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3435
`listenMulticastGroup` is not ready when the handler succeeds, tests exhibit flakiness · Issue #3435 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx 3.8.3-3.9.1
Context
listenMulticastGroup isn't ready the first time it is invoked on a vertx instance when its future completes. Delaying for an unusually long time seems to work around the issue.
Do you have a reproducer?
https://github.com/hiddenswitch/udp-broadcast-reproducer
You can use ./gradlew test --tests "udp.broadcast.reproducer.AppTest.testUdpBroadcastResponseInjected"
Steps to reproduce

Create a udp socket (socket "recipient").
Listen to a multicast group.
Send a packet from another udp socket to that group (socket "sender").
Observe that sometimes, the recipient does not receive the message even though the future indicating it is listening has completed.
Observe that injecting the vertx instance using vertx-junit5 100% reproduces the issue on the first invocation when no delay is used between completing the listening future and sending the packet.
Observe that the next invocation, which also uses no delay, even when a different port (multicast group) is listened to, the test passes.
Observe that on my machine, the minimum delay for the first invocation appears to be about 952 +/- 3ms. Not sure of the significance of this.

Extra
Platform: macOS 10.15.5 (Darwin MacBook-Pro.local 19.5.0 Darwin Kernel Version 19.5.0: Thu Apr 30 18:25:59 PDT 2020; root:xnu-6153.121.1~7/RELEASE_X86_64 x86_64)
Java:
openjdk version "13.0.2" 2020-01-14
OpenJDK Runtime Environment (build 13.0.2+8)
OpenJDK 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3436
`listenMulticastGroup` doesn't work with a null NetworkInterface · Issue #3436 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
At least vertx 3.8.3-3.9.1
Context
listenMulticastGroup throws a NullPointerException when it is called with the listenMulticastGroup(string multicastAddress, Handler<AsyncResult<DatagramSocket>> handler) signature.
Do you have a reproducer?
https://github.com/hiddenswitch/udp-broadcast-reproducer
You can use ./gradlew test --tests "udp.broadcast.reproducer.AppTest.testUdpListensNullInterface"
Steps to reproduce

Create a udp socket (socket "receipient").
Listen to a multicast group with the specified overload.
Observe a null pointer exception (see below).
Observe that heuristically choosing an interface works.

SEVERE: Unhandled exception
java.lang.NullPointerException: networkInterface
	at io.netty.util.internal.ObjectUtil.checkNotNull(ObjectUtil.java:33)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:409)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:371)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:365)
	at io.vertx.core.datagram.impl.DatagramSocketImpl.listenMulticastGroup(DatagramSocketImpl.java:96)
	at udp.broadcast.reproducer.AppTest.lambda$testUdpListensNullInterface$0(AppTest.java:31)
	at io.vertx.junit5.VertxTestContext.lambda$succeeding$1(VertxTestContext.java:182)
	at io.vertx.core.datagram.impl.DatagramSocketImpl.lambda$null$0(DatagramSocketImpl.java:206)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:366)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:229)
	at io.vertx.core.net.impl.ChannelFutureListenerAdapter.operationComplete(ChannelFutureListenerAdapter.java:39)
	at io.vertx.core.net.impl.ChannelFutureListenerAdapter.operationComplete(ChannelFutureListenerAdapter.java:24)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:551)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:604)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104)
	at io.netty.channel.DefaultChannelPromise.trySuccess(DefaultChannelPromise.java:84)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetSuccess(AbstractChannel.java:984)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:566)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)
	at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506)
	at io.netty.channel.AbstractChannelHandlerContext.access$900(AbstractChannelHandlerContext.java:61)
	at io.netty.channel.AbstractChannelHandlerContext$8.run(AbstractChannelHandlerContext.java:496)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:830)

Extra
Platform: macOS 10.15.5 (Darwin MacBook-Pro.local 19.5.0 Darwin Kernel Version 19.5.0: Thu Apr 30 18:25:59 PDT 2020; root:xnu-6153.121.1~7/RELEASE_X86_64 x86_64)
Java:
openjdk version "13.0.2" 2020-01-14
OpenJDK Runtime Environment (build 13.0.2+8)
OpenJDK 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3437
Java 14: Failed to create a new resolver · Issue #3437 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Do not use this issue tracker to ask questions, instead use one of these channels. Questions will likely be closed without notice.
Version
Which version(s) did you encounter this bug ?
4.0.0-milestone5
Context
I encountered an exception which looks suspicious while ...
Do you have a reproducer?
This is my test code:
@RunWith(VertxUnitRunner.class)
public class SimpleRESTVerticleTests {
	private Vertx vertx_;
	private int port = 8081;
	@Before
	public void setup(TestContext context) throws IOException {
		vertx_ = Vertx.vertx();
		// Pick an available and random port number
		ServerSocket socket = new ServerSocket(0);
		port = socket.getLocalPort();
		socket.close();
		//System.out.println("port: "+port);
        DeploymentOptions options = new DeploymentOptions().setConfig(new JsonObject().put("http.port", port));
        vertx_.deployVerticle(SimpleRESTVerticle.class.getName(), options, context.asyncAssertSuccess());		
	}
	@Test
	public void successTest(TestContext context) {
		WebClient client = WebClient.create(vertx_);
		// Send a GET request
		client
		  .get(port, "localhost", "/api/v1/books/book/123")
		  .send(ar -> {
			  System.out.println(">>> SimpleRESTVerticleTests: ar: "+ar);
			  if (!ar.succeeded())
				  System.out.println("SimpleRESTVerticleTests Something went wrong: " + ar.cause().getMessage());
			  context.assertTrue(ar.succeeded());
		      // Obtain response
		      HttpResponse<Buffer> response = ar.result();
			  System.out.println("Status Code: " + response.statusCode());		      
		      context.assertEquals(200, response.statusCode());
		      context.assertTrue(response.body().toString().contains("Vertx HTTP Server"));
		  });		
	}
	@After
	public void tearDown(TestContext context) {
		vertx_.close(context.asyncAssertSuccess());
	}
}

Stack trace:
[INFO] Running com.restapi.vertx.test.SimpleRESTVerticleTests
Jun 05, 2020 8:47:26 PM io.vertx.core.impl.ContextImpl
SEVERE: Unhandled exception
java.lang.AssertionError: Expected true
        at io.vertx.ext.unit.impl.TestContextImpl.reportAssertionError(TestContextImpl.java:362)
        at io.vertx.ext.unit.impl.TestContextImpl.assertTrue(TestContextImpl.java:202)
        at io.vertx.ext.unit.impl.TestContextImpl.assertTrue(TestContextImpl.java:208)
        at com.restapi.vertx.test.SimpleRESTVerticleTests.lambda$successTest$0(SimpleRESTVerticleTests.java:44)
        at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:303)
        at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:297)
        at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:269)
        at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
        at io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
        at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:266)
        at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:276)
        at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:256)
        at io.vertx.ext.web.client.impl.HttpContext.lambda$handleSendRequest$8(HttpContext.java:416)
        at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181)
        at io.vertx.core.impl.AbstractContext.lambda$dispatch$0(AbstractContext.java:84)
        at io.vertx.core.impl.EventLoopContext.schedule(EventLoopContext.java:59)
        at io.vertx.core.impl.AbstractContext.schedule(AbstractContext.java:94)
        at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:84)
        at io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:125)
        at io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119)
        at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:170)
        at io.vertx.core.http.impl.HttpClientRequestBase.fail(HttpClientRequestBase.java:112)
        at io.vertx.core.http.impl.HttpClientRequestBase.handleException(HttpClientRequestBase.java:107)
        at io.vertx.core.http.impl.HttpClientRequestImpl.handleException(HttpClientRequestImpl.java:87)
        at io.vertx.core.http.impl.HttpClientRequestImpl.lambda$connect$2(HttpClientRequestImpl.java:433)
        at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181)
        at io.vertx.core.http.impl.HttpClientImpl.lambda$getConnectionForRequest$6(HttpClientImpl.java:1292)
        at io.vertx.core.net.impl.clientconnection.Endpoint.lambda$getConnection$0(Endpoint.java:51)
        at io.vertx.core.net.impl.clientconnection.Pool.connectFailed(Pool.java:389)
        at io.vertx.core.net.impl.clientconnection.Pool.access$600(Pool.java:89)
        at io.vertx.core.net.impl.clientconnection.Pool$Holder.lambda$connect$0(Pool.java:130)
        at io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:127)
        at io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119)
        at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:170)
        at io.vertx.core.http.impl.HttpChannelConnector.connectFailed(HttpChannelConnector.java:272)
        at io.vertx.core.http.impl.HttpChannelConnector.lambda$doConnect$0(HttpChannelConnector.java:186)
        at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577)
        at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:551)
        at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490)
        at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615)
        at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:608)
        at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:109)
        at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:141)
        at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577)
        at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:570)
        at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:549)
        at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490)
        at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615)
        at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:608)
        at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:117)
        at io.netty.channel.nio.AbstractNioChannel.doClose(AbstractNioChannel.java:502)
        at io.netty.channel.socket.nio.NioSocketChannel.doClose(NioSocketChannel.java:342)
        at io.netty.channel.AbstractChannel$AbstractUnsafe.doClose0(AbstractChannel.java:759)
        at io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:736)
        at io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:607)
        at io.netty.channel.nio.NioEventLoop.closeAll(NioEventLoop.java:762)
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:524)
        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
        at java.base/java.lang.Thread.run(Thread.java:832)

Jun 05, 2020 8:47:26 PM io.vertx.core.http.impl.HttpClientRequestImpl
SEVERE: java.nio.channels.ClosedChannelException


Link to github project/gist

Steps to reproduce

...
...
...
...

Extra

Anything that can be relevant such as OS version, JVM version
Windows 10

>java -version
java version "14.0.1" 2020-04-14
Java(TM) SE Runtime Environment (build 14.0.1+7)
Java HotSpot(TM) 64-Bit Server VM (build 14.0.1+7, mixed mode, sharing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3438
Race Condition in HttpClientImpl.getConnectionForRequest, ConnectionManager.getConnection · Issue #3438 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using the Vert.x 4.0.0-SNAPSHOT stack with an AdoptOpenJDK 11.0.7 on Ubuntu 20.04. The first time I encountered this was with a Hazelcast-managed distibuted Vertx system (with only one node) with both a standard HTTP server and a vertx-grpc server running on two different ports (both with TLS/SNI enabled). After making a few successful calls to both, I closed the client (cleanly) and I let it rest for a few minutes. Then the console started to output that same error at what seems to be a sub-second interval :
[2020-06-05 13:06:34,190] [WARN] [io.vertx.core.impl.BlockedThreadChecker] [] [vertx-blocked-thread-checker] - Thread Thread[vert.x-eventloop-thread-9,5,main] has been blocked for 1120705 ms, time limit is 2000 ms MDC: {}
io.vertx.core.VertxException: Thread blocked
        at java.base@11.0.7/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1691)
        at app//io.vertx.core.net.impl.clientconnection.ConnectionManager.getConnection(ConnectionManager.java:46)
        at app//io.vertx.core.http.impl.HttpClientImpl.getConnectionForRequest(HttpClientImpl.java:1288)
        at app//io.vertx.core.http.impl.HttpClientRequestImpl.connect(HttpClientRequestImpl.java:422)
        at app//io.vertx.core.http.impl.HttpClientRequestImpl.sendHead(HttpClientRequestImpl.java:258)
        at app//io.vertx.ext.web.client.impl.HttpContext.handleSendRequest(HttpContext.java:501)
        at app//io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:285)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:269)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:266)
        at app//io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:276)
        at app//io.vertx.ext.web.client.impl.HttpContext.sendRequest(HttpContext.java:178)
        at app//io.vertx.ext.web.client.impl.HttpContext.handlePrepareRequest(HttpContext.java:353)
        at app//io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:282)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:269)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:266)
        at app//io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:276)
        at app//io.vertx.ext.web.client.impl.HttpContext.prepareRequest(HttpContext.java:165)
        at app//io.vertx.ext.web.client.impl.HttpRequestImpl.send(HttpRequestImpl.java:318)
        at app//io.vertx.ext.web.client.impl.HttpRequestImpl.send(HttpRequestImpl.java:288)
        at app//io.vertx.reactivex.ext.web.client.HttpRequest.send(HttpRequest.java:694)
        at app//io.vertx.reactivex.ext.web.client.HttpRequest.lambda$rxSend$20(HttpRequest.java:718)
        at app//io.vertx.reactivex.ext.web.client.HttpRequest$$Lambda$314/0x00000008405c5c40.accept(Unknown Source)
        at app//io.vertx.reactivex.impl.AsyncResultSingle.subscribeActual(AsyncResultSingle.java:45)
        at app//io.reactivex.Single.subscribe(Single.java:3603)
        at app//io.reactivex.internal.operators.single.SingleFlatMap.subscribeActual(SingleFlatMap.java:36)
        at app//io.reactivex.Single.subscribe(Single.java:3603)
        at app//io.reactivex.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:34)
        at app//io.reactivex.Single.subscribe(Single.java:3603)
        at app//io.reactivex.internal.operators.maybe.MaybeFilterSingle.subscribeActual(MaybeFilterSingle.java:40)
        at app//io.reactivex.Maybe.subscribe(Maybe.java:4290)
        at app//io.reactivex.internal.operators.maybe.MaybeMap.subscribeActual(MaybeMap.java:40)
        at app//io.reactivex.Maybe.subscribe(Maybe.java:4290)
        at app//io.reactivex.internal.operators.maybe.MaybeFilter.subscribeActual(MaybeFilter.java:39)
        at app//io.reactivex.Maybe.subscribe(Maybe.java:4290)
        at app//io.reactivex.internal.operators.maybe.MaybeMap.subscribeActual(MaybeMap.java:40)
        at app//io.reactivex.Maybe.subscribe(Maybe.java:4290)
        at app//io.reactivex.internal.operators.mixed.MaybeFlatMapPublisher.subscribeActual(MaybeFlatMapPublisher.java:50)
        at app//io.reactivex.Flowable.subscribe(Flowable.java:14918)
        at app//io.reactivex.internal.operators.flowable.FlowableFlatMapCompletableCompletable.subscribeActual(FlowableFlatMapCompletableCompletable.java:56)
        at app//io.reactivex.Completable.subscribe(Completable.java:2309)
        at app//io.reactivex.internal.operators.completable.CompletableOnErrorComplete.subscribeActual(CompletableOnErrorComplete.java:35)
        at app//io.reactivex.Completable.subscribe(Completable.java:2309)
        at app//io.reactivex.internal.operators.completable.CompletableToFlowable.subscribeActual(CompletableToFlowable.java:32)
        at app//io.reactivex.Flowable.subscribe(Flowable.java:14918)
        at app//io.reactivex.Flowable.subscribe(Flowable.java:14865)
        at app//io.reactivex.internal.operators.flowable.FlowableRepeat$RepeatSubscriber.subscribeNext(FlowableRepeat.java:101)
        at app//io.reactivex.internal.operators.flowable.FlowableRepeat$RepeatSubscriber.onComplete(FlowableRepeat.java:80)
        at app//io.reactivex.internal.observers.SubscriberCompletableObserver.onComplete(SubscriberCompletableObserver.java:33)
        at app//io.reactivex.internal.operators.completable.CompletableOnErrorComplete$OnError.onError(CompletableOnErrorComplete.java:64)
        at app//io.reactivex.internal.operators.flowable.FlowableFlatMapCompletableCompletable$FlatMapCompletableMainSubscriber.onError(FlowableFlatMapCompletableCompletable.java:150)
        at app//io.reactivex.internal.operators.mixed.MaybeFlatMapPublisher$FlatMapPublisherSubscriber.onError(MaybeFlatMapPublisher.java:80)
        at app//io.reactivex.internal.operators.maybe.MaybeMap$MapMaybeObserver.onError(MaybeMap.java:94)
        at app//io.reactivex.internal.operators.maybe.MaybeFilter$FilterMaybeObserver.onError(MaybeFilter.java:97)
        at app//io.reactivex.internal.operators.maybe.MaybeMap$MapMaybeObserver.onError(MaybeMap.java:94)
        at app//io.reactivex.internal.operators.maybe.MaybeFilterSingle$FilterMaybeObserver.onError(MaybeFilterSingle.java:98)
        at app//io.reactivex.internal.operators.single.SingleMap$MapSingleObserver.onError(SingleMap.java:69)
        at app//io.reactivex.internal.operators.single.SingleFlatMap$SingleFlatMapCallback.onError(SingleFlatMap.java:90)
        at app//io.vertx.reactivex.impl.AsyncResultSingle.lambda$subscribeActual$0(AsyncResultSingle.java:56)
        at app//io.vertx.reactivex.impl.AsyncResultSingle$$Lambda$75/0x000000084015f040.handle(Unknown Source)
        at app//io.vertx.reactivex.ext.web.client.HttpRequest$10.handle(HttpRequest.java:699)
        at app//io.vertx.reactivex.ext.web.client.HttpRequest$10.handle(HttpRequest.java:694)
        at app//io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:303)
        at app//io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:297)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:269)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:69)
        at app//io.vertx.ext.web.client.impl.predicate.PredicateInterceptor.handle(PredicateInterceptor.java:32)
        at app//io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:266)
        at app//io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:276)
        at app//io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:256)
        at app//io.vertx.ext.web.client.impl.HttpContext.lambda$handleSendRequest$8(HttpContext.java:416)
        at app//io.vertx.ext.web.client.impl.HttpContext$$Lambda$320/0x00000008405c4440.handle(Unknown Source)
        at app//io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181)
        at app//io.vertx.core.impl.AbstractContext.lambda$dispatch$0(AbstractContext.java:84)
        at app//io.vertx.core.impl.AbstractContext$$Lambda$131/0x0000000840214c40.handle(Unknown Source)
        at app//io.vertx.core.impl.EventLoopContext.schedule(EventLoopContext.java:59)
        at app//io.vertx.core.impl.AbstractContext.schedule(AbstractContext.java:94)
        at app//io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:84)
        at app//io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:125)
        at app//io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119)
        at app//io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:170)
        at app//io.vertx.core.http.impl.HttpClientRequestBase.fail(HttpClientRequestBase.java:112)
        at app//io.vertx.core.http.impl.HttpClientRequestBase.handleException(HttpClientRequestBase.java:107)
        at app//io.vertx.core.http.impl.HttpClientRequestImpl.handleException(HttpClientRequestImpl.java:87)
        at app//io.vertx.core.http.impl.HttpClientRequestImpl.lambda$connect$2(HttpClientRequestImpl.java:433)
        at app//io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$323/0x00000008405c3040.handle(Unknown Source)
        at app//io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181)
        at app//io.vertx.core.http.impl.HttpClientImpl.lambda$getConnectionForRequest$6(HttpClientImpl.java:1292)
        at app//io.vertx.core.http.impl.HttpClientImpl$$Lambda$324/0x00000008405c3440.handle(Unknown Source)
        at app//io.vertx.core.net.impl.clientconnection.Endpoint.lambda$getConnection$0(Endpoint.java:51)
        at app//io.vertx.core.net.impl.clientconnection.Endpoint$$Lambda$329/0x00000008405c1840.handle(Unknown Source)
        at app//io.vertx.core.net.impl.clientconnection.Pool.connectFailed(Pool.java:389)
        at app//io.vertx.core.net.impl.clientconnection.Pool.access$600(Pool.java:89)
        at app//io.vertx.core.net.impl.clientconnection.Pool$Holder.lambda$connect$0(Pool.java:130)
        at app//io.vertx.core.net.impl.clientconnection.Pool$Holder$$Lambda$332/0x00000008405c0840.handle(Unknown Source)
        at app//io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:127)
        at app//io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119)
        at app//io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:170)
        at app//io.vertx.core.http.impl.HttpChannelConnector.connectFailed(HttpChannelConnector.java:272)
        at app//io.vertx.core.http.impl.HttpChannelConnector.lambda$doConnect$0(HttpChannelConnector.java:186)
        at app//io.vertx.core.http.impl.HttpChannelConnector$$Lambda$347/0x000000084060d440.operationComplete(Unknown Source)
        at app//io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577)
        at app//io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:551)
        at app//io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490)
        at app//io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615)
        at app//io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:608)
        at app//io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:109)
        at app//io.vertx.core.net.impl.ChannelProvider$1.userEventTriggered(ChannelProvider.java:113)
        at app//io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:346)
        at app//io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:332)
        at app//io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:324)
        at app//io.netty.handler.ssl.SslUtils.handleHandshakeFailure(SslUtils.java:347)
        at app//io.netty.handler.ssl.SslHandler$5.run(SslHandler.java:2058)
        at app//io.netty.util.concurrent.PromiseTask.runTask(PromiseTask.java:98)
        at app//io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:170)
        at app//io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
        at app//io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
        at app//io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
        at app//io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
        at app//io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
        at app//io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
        at java.base@11.0.7/java.lang.Thread.run(Thread.java:834)

Now I get it everytime I let the system run overnight. I'm the sole user of the system.
Does this ring a bell ? I can't try to use it with the 3.x stack because the Vertx-grpc has a completely different codebase fo 4.0.0.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3439
Add support for default values to Multimap#get by privettoli · Pull Request #3439 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we can have this however it should be named get following the same pattern than JsonObject and JsonArray uses
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3440
Router path matching does not match documentation · Issue #3440 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vertx-web 3.9.1, but it seems present since 3.8.3
Context
The documentation in https://vertx.io/docs/vertx-web/java/#_routing_by_paths_that_begin_with_something mentions that a route with path /some/path/* should match a request to /some/path but it does not. It did match before (at least in version 3.7.1) and thus this bug introduces a backwards incompatible change, in addition to the mismatch with the documentation.
I believe this was introduced in vert-x3/vertx-web@628f49c
Do you have a reproducer?
Can be reproduced with https://github.com/gabrielguernikatdiscovery/vertx-path-matching-issue/blob/220c7496629783e51fad90be4e24ccb541a007f2/src/test/java/io/vertx/starter/MainVerticleTest.java#L31
Steps to reproduce

With vertx-web, add a route with a path ending in /*, eg, router.route("/some/path/*"); and a proper handler
Make a request to /some/path
HTTP 200 should be returned
Actually, HTTP 404 is returned

Extra

Nothing relevant
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3441
Prevent extra buffer copies when parsing did not extract anything by tcataldo · Pull Request #3441 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you do a PR for 3.9 as well ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3442
Prevent extra buffer copies when parsing did not extract anything by tcataldo · Pull Request #3442 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Thomas Cataldo thomas.cataldo@blue-mind.net
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3443
testListenInvalidPort now valid for Windows and OSX by hutchig · Pull Request #3443 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #3444
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3444
testListenInvalidPort fails on OSX  · Issue #3444 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
On the master branch but also on 4.0 milestones and 3.9.1
Context
mvn clean install fails as the testcase testListenInvalidPort assumes that it is
not possible to bind to port 7 (echo). It is possible on OSX.
Do you have a reproducer?
on OSX 'mvn clean install' on the master branch of this project
commit 76418f2 (HEAD -> fix_testListenInvalidPort_On_OSX, my_fork/fix_testListenInvalidPort_On_OSX)
Will fail.
Steps to reproduce

Get a macbook
Clone this repo
'mvn clean install'

Extra
mvn -v
Apache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-04T20:00:29+01:00)
Maven home: /Users/hutchig/apache-maven-3.6.1
Java version: 14.0.1, vendor: AdoptOpenJDK, runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-14.jdk/Contents/Home
Default locale: en_GB, platform encoding: UTF-8
OS name: "mac os x", version: "10.15.5", arch: "x86_64", family: "mac"
java -version
openjdk version "14.0.1" 2020-04-14
OpenJDK Runtime Environment AdoptOpenJDK (build 14.0.1+7)
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 14.0.1+7, mixed mode, sharing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3445
MessageConsumer should be registered as close hook by vietj · Pull Request #3445 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
reported by @zenios
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3446
Add m4a mime mapping by meoyawn · Pull Request #3446 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jponge Hi Julien, can you please take a look at this simple change?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3447
Backport 3443 to 3.9 - reuse an assigned port in testListenInvalidPort by hutchig · Pull Request #3447 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks @hutchig !
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3448
Vertx web client sends server cookies back in multiple COOKIE headers and not anymore in a single semicolon separated field. · Issue #3448 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
Version
vertx-core: 3.8.5
vertx-web: 3.8.5
vertx-web-client: 3.8.5
Context
Vertx web client sends server cookies back in multiple COOKIE headers and not anymore in a single semicolon separated field.
As a result server handle only one cookie. It cause authentication/session issue.
Do you have a reproducer?
https://github.com/VMalko/vertx-cookie-test.git
There is cookieTest which fails as server handle only one cookie ("testName", "testValue")
Steps to reproduce

clone test project
execute cookieTest. Check that web client sends to server http endpoint "/cookieCheck" cookies back in multiple COOKIE headers and not anymore in a single semicolon separated field.
As a result server handle only one cookie ("testName", "testValue").

It is implemented with Vertx server. But external production server do the same - handle only one cookie.
Extra
HTTP protocol version 1.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3449
Ignored WebSocket sub protocols in http client · Issue #3449 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ? 3.9.1
Context
When using the setSubProtocols method defined in WebSocketConnectOptions and passing those options to rxWebSocket, I expect the websocket request to contain the sub protocols I specified. However, vert.x does instead send the sec-websocket-protocol header in the handshake set to null.
Do you have a reproducer?
No, but should be trivially reproduced in a test.
Steps to reproduce

Define WebSocketConnectOptions with websocket sub protocol.
Establish WebSocket connection with some server.
Print headers in server, you'll see "sec-websocket-protocol" -> "null" among other valid WebSocket handshake headers.

Extra

Java 11, OpenJDK, macOS Catalina
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3450
Add control over websocket header case · Issue #3450 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Add control over websocket headers case
Version
I use quarkus 1.4.1.Final
The related vertx version is :  3.8.5
And it uses the netty-all:5.0.0.Alpha2
Context
Netty set all the headers with the lower case. e.g : sec-websocket-key.
I have a PHP websocket server the handle the header with a specific case :
// check Sec-WebSocket-Key header was received and decoded value length is 16
    if (!isset($headersKeyed['Sec-WebSocket-Key']))
      return false;
This is why I got  : original problem
This is related to this post
An interesting read about headers case : this post
Do you have a reproducer?
Steps to reproduce

Have a WebSocket server which handle the headers is specific case way (PHP in my case)
Create a websocket client with vert.x
Try to make a connection

In whireshark I ve seen that I don't get the 101 Switch Protocol response as expected.
This is due to the wrong header case
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3451
Worker executors should be created with specified time unit · Issue #3451 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version 3.9.1
Context
I set the max worker execution time at Vertx creation as such:
new VertxOptions()
.setMaxWorkerExecuteTime(500).setMaxWorkerExecuteTimeUnit(TimeUnit.MILLISECONDS)
but then found these warnings in the logs:
Thread Thread[X-threadpool-19,5,main]=Thread[X-threadpool-19,5,main] has been blocked for 12 ms, time limit is 0 ms

on a worker executor created with default options:
WorkerExecutor executor = vertx.createSharedWorkerExecutor("X-threadpool");
This is because the short version of the createSharedWorkerExecutor method uses the specified time amount, but the default time unit. This can be fixed by applying the patch below.
diff --git a/src/main/java/io/vertx/core/impl/VertxImpl.java b/src/main/java/io/vertx/core/impl/VertxImpl.java
index b591fb575..efbfc9887 100644
--- a/src/main/java/io/vertx/core/impl/VertxImpl.java
+++ b/src/main/java/io/vertx/core/impl/VertxImpl.java
@@ -1092,7 +1092,7 @@ public class VertxImpl implements VertxInternal, MetricsProvider {
 
   @Override
   public synchronized WorkerExecutorImpl createSharedWorkerExecutor(String name, int poolSize, long maxExecuteTime) {
-    return createSharedWorkerExecutor(name, poolSize, maxExecuteTime, TimeUnit.NANOSECONDS);
+    return createSharedWorkerExecutor(name, poolSize, maxExecuteTime, maxWorkerExecTimeUnit);
   }
 
   @Override
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3452
Same password is used for KeyStore and entry · Issue #3452 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.0
Context
Using the io.vertx.core.net.PfxOptions it is possible to provide a "password". However, later on, in io.vertx.core.net.impl.KeyStoreHelper.create(VertxInternal, KeyCertOptions) this single password is being used for both opening the "key store" as well as opening the "entry" in the key store. However, this can be two different passwords.
So it is not possible to use an existing keystore, which has a different (or missing) password for one of the entries.
Do you have a reproducer?
import java.io.ByteArrayOutputStream;
import java.security.KeyStore;
import java.security.cert.Certificate;

import io.netty.handler.ssl.util.SelfSignedCertificate;
import io.vertx.core.Vertx;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.impl.VertxInternal;
import io.vertx.core.net.KeyCertOptions;
import io.vertx.core.net.PfxOptions;
import io.vertx.core.net.impl.KeyStoreHelper;

public class Application7 {
    public static void main(String[] args) throws Exception {

        var cert = new SelfSignedCertificate();

        final KeyStore result = KeyStore.getInstance("PKCS12");
        result.load(null, null);
        result.setKeyEntry("alias", cert.key(), "foo".toCharArray(), new Certificate[] {cert.cert()});

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        result.store(out, "bar".toCharArray());

        var vertx = Vertx.factory.vertx();
        var opts = new PfxOptions()
                .setPassword("foo")
                .setValue(Buffer.buffer(out.toByteArray()));
        var ks = KeyStoreHelper.create((VertxInternal) vertx, (KeyCertOptions)opts);

    }
}
Steps to reproduce

Run the reproducer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3453
vertx4m5 service proxy codegen error on windows · Issue #3453 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
stack trace：
Caused by: java.nio.file.InvalidPathException: Illegal char <:> at index 2: /C:/Users/***/target/classes/PathForCodeGenProcessor.class
at sun.nio.fs.WindowsPathParser.normalize (WindowsPathParser.java:182)
at sun.nio.fs.WindowsPathParser.parse (WindowsPathParser.java:153)
at sun.nio.fs.WindowsPathParser.parse (WindowsPathParser.java:77)
at sun.nio.fs.WindowsPath.parse (WindowsPath.java:92)
at sun.nio.fs.WindowsFileSystem.getPath (WindowsFileSystem.java:229)
at java.nio.file.Path.of (Path.java:147)
at java.nio.file.Paths.get (Paths.java:69)
at io.vertx.codegen.CodeGenProcessor.fetchSourcePath (CodeGenProcessor.java:152)
at io.vertx.codegen.CodeGenProcessor.loadJsonMappers (CodeGenProcessor.java:197)
at io.vertx.codegen.CodeGenProcessor.init (CodeGenProcessor.java:67)
at com.sun.tools.javac.processing.JavacProcessingEnvironment$ProcessorState. (JavacProcessingEnvironment.java:678)
at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.next (JavacProcessingEnvironment.java:778)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs (JavacProcessingEnvironment.java:873)
at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run (JavacProcessingEnvironment.java:1214)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing (JavacProcessingEnvironment.java:1326)
at com.sun.tools.javac.main.JavaCompiler.processAnnotations (JavaCompiler.java:1258)
at com.sun.tools.javac.main.JavaCompiler.compile (JavaCompiler.java:936)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3454
Remove CaseInsensitiveMultiMap · Issue #3454 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The CaseInsensitiveMultiMap implementation duplicates the logic currently in VertxHttpHeaders. The VertxHttpHeaders class is renamed to HeadersMultiMap and uses an optional validator for the entries and can be used instead CaseInsensitiveMultiMap.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3455
use rawPath for HttpUtils resolveURIReference(vertx-web#1637) by shenzhou-6 · Pull Request #3455 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[Fix Vertx-web ISSUES 1637] (vert-x3/vertx-web#1637)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3456
use rawPath for HttpUtils resolveURIReference(vertx-web#1637) by shenzhou-6 · Pull Request #3456 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you give a proper explanation of what is changed and the reason
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3457
Consider failing when number read from JsonObject would overflow · Issue #3457 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.1
Context
When reading a big number from a JsonObject the result may overflow.
I expect it to fail when it happens. Currently it succeeds silently with wrong value returned.
I believe this is dangerous for the majority of the use-cases. Same applies for JsonArray.
Do you have a reproducer?
var json = new JsonObject("{\"amount\": 21474836470}");
long a1 = json.getLong("amount");    // 21474836470
int  a2 = json.getInteger("amount"); // -10

var array = new JsonArray("[21474836470]");
int a3 = array.getInteger(0); // -10
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3458
Support header size limit exceeded with http status 431 by mihaico · Pull Request #3458 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
do you mind back port to 3.9 branch @mihaico ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3459
Support header size limit exceeded with http status 431 by mihaico · Pull Request #3459 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx does not return 431 Request Header Fields Too Large status for HTTP/1.1 (could not confirm how it works on HTTP/2.0), instead it falls back to the generic 400 Bad Message (only handling explicitly 414 URI Too Long).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3460
Add Http PATCH support to HTTPClient · Issue #3460 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Currently, HttpClient does support PUT, POST DELETE and GET. the PATCH method is not supported.
Use cases
Use the HTTPClient to submit patches through the JSON Patch format, using the corresponding HTTP verb.
Contribution
Pr incoming
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3461
[#3460] Add patch methods to HttpClient and implementation by jbtrystram · Pull Request #3461 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
as PATCH is quite rare to use, we haven't included it by default to keep the interface readable.
You can use the generic HttpClient#send(RequestOptions) method and RequestOptions has an HTTP method on it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3462
Reduced wrappers and copies on BufferImpl to reduce allocations and CPU usage by franz1981 · Pull Request #3462 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Note; I see that
  private Buffer append(String str, Charset charset) 

  private Buffer setBytes(int pos, String str, Charset charset)
these method needs some love ,(especially the latter) to save the intermediate allocation to happen but Netty is lacking some util method to make it easy, so I'm deferring fixing these until Netty will be fixed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3463
Reduced wrappers and copies on BufferImpl to reduce allocations and C… by franz1981 · Pull Request #3463 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Http2ServerResponseImpl need some refactoring as well to reduce the need to allocate BufferImpl instances
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3464
M5: Prometheus uses call no longer supported in Prometheus 1.5.1 · Issue #3464 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.0.0 M5
Context
We use Prometheus both for vert.x and application metrics. So our POM includes:
		<dependency>
			<groupId>io.micrometer</groupId>
			<artifactId>micrometer-registry-prometheus</artifactId>
			<version>${micrometer.version}</version>
		</dependency>

With micrometer.version = 1.3.5 all works, when upgrading to 1.5.1 (current version) vert.x start fails:
Exception in thread "vert.x-eventloop-thread-24" java.lang.NoSuchMethodError: io/micrometer/prometheus/PrometheusConfig.requireValid()V (loaded from file:/Users/stephan/.m2/repository/io/micrometer/micrometer-registry-prometheus/1.5.1/micrometer-registry-prometheus-1.5.1.jar by sun.misc.Launcher$AppClassLoader@edc88549) called from class io.micrometer.prometheus.PrometheusMeterRegistry (loaded from file:/Users/stephan/.m2/repository/io/micrometer/micrometer-registry-prometheus/1.5.1/micrometer-registry-prometheus-1.5.1.jar by sun.misc.Launcher$AppClassLoader@edc88549).
	at io.micrometer.prometheus.PrometheusMeterRegistry.<init>(PrometheusMeterRegistry.java:64)
	at io.micrometer.prometheus.PrometheusMeterRegistry.<init>(PrometheusMeterRegistry.java:58)
	at io.vertx.micrometer.backends.PrometheusBackendRegistry.<init>(PrometheusBackendRegistry.java:45)
	at io.vertx.micrometer.backends.BackendRegistries.lambda$setupBackend$0(BackendRegistries.java:71)
	at io.vertx.micrometer.backends.BackendRegistries$$Lambda$59.000000007CA4AE20.apply(Unknown Source)
	at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660)
	at io.vertx.micrometer.backends.BackendRegistries.setupBackend(BackendRegistries.java:58)
	at io.vertx.micrometer.impl.VertxMetricsFactoryImpl.metrics(VertxMetricsFactoryImpl.java:46)
	at io.vertx.core.impl.VertxFactory.createMetrics(VertxFactory.java:135)
	at io.vertx.core.impl.VertxFactory.vertx(VertxFactory.java:78)
	at io.vertx.core.Vertx.vertx(Vertx.java:86)
	at com.hcl.domino.keep.Launch.lambda$9(Launch.java:235)
	at com.hcl.domino.keep.Launch$$Lambda$41.000000007BD8F820.handle(Unknown Source)
	at io.vertx.core.impl.VertxImpl$1$1.lambda$operationComplete$0(VertxImpl.java:865)
	at io.vertx.core.impl.VertxImpl$1$1$$Lambda$56.000000007951F1D0.run(Unknown Source)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:819)

Steps to reproduce

Add dependency as above with version 1.5.1
Configure vert.x to run with micrometer

private static MicrometerMetricsOptions getMetricsOptions(final JsonObject config) {
    // Performance metrics using Micrometer

    final JsonObject promMetricsConfig =
        config.getJsonObject("prometheusMetrics", new JsonObject());
    final Integer port =8890;
    final HttpServerOptions serverOptions = new HttpServerOptions();
    serverOptions.setPort(port);
    final VertxPrometheusOptions prometheusOptions = new VertxPrometheusOptions(promMetricsConfig)
        .setEmbeddedServerOptions(serverOptions);
    final JsonObject metricsConfig = new JsonObject();
    final MicrometerMetricsOptions metricsOptions = new MicrometerMetricsOptions(metricsConfig)
        .setPrometheusOptions(prometheusOptions)
        .setEnabled(true);
    return metricsOptions;
  }

 options.setMetricsOptions(metricsOptions);
              final Vertx vertx = Vertx.vertx(options);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3465
Mix between HTTP/1.1 and HTTP/2 weight in HttpChannelConnector · Issue #3465 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think there is an typo-kind of error in HttpChannelConnector when assigning http1Weight and http2Weight. HTTP/1.1 weight is using the HTTP/2 pool size, and things are inverted for HTTP/2 as well.
    this.http1Weight = options.getHttp2MaxPoolSize();
    this.http2Weight = options.getMaxPoolSize();
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/http/impl/HttpChannelConnector.java#L86-L87
Version
3.9.1 but seems 3.8.5 has the same code so maybe earlier versions are impacted
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3466
Client metrics by vietj · Pull Request #3466 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3467
Client metrics · Issue #3467 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The metrics SPI supports metrics reported by Vert.x HTTP client. We should abstract this interface so any kind of client performing a request/response can report events that can be derived to compute request/response latencies.
The HTTP client metrics will be reworked to use this generic client metric interface. The endpoint lifecycle is replaced by the usage of the ClientMetrics interface and thus ClientMetrics are created and destroyed when endpoint are created / destroyed by the HTTP client.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3468
Thread blocked in io.vertx.core.net.impl.clientconnection.ConnectionManager.getConnection · Issue #3468 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
While upgrading https://github.com/folio-org/okapi from Vert.x 4.0.0 milestone 4 to milestone 5, we noticed a serious issue with HttpClient connections being thread blocked.. It seems to appear when connection can not be made to a remote host. Using same client and issuing another request that also fails results in a thread blocked warning and a halt of the event loop..
openjdk version "1.8.0_252"
OpenJDK Runtime Environment (build 1.8.0_252-8u252-b09-1ubuntu1-b09)
OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)
and
openjdk version "14.0.1" 2020-04-14
OpenJDK Runtime Environment (build 14.0.1+7-Ubuntu-1ubuntu1)
OpenJDK 64-Bit Server VM (build 14.0.1+7-Ubuntu-1ubuntu1, mixed mode, sharing)
Host: Ubuntu 20.04 amd64
Log:

[INFO] Running org.folio.okapi.common.HttpClientDoubleFail
10:54:37 WARN  ?                    Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 2883 ms, time limit is 2000 ms
10:54:38 WARN  ?                    Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 3883 ms, time limit is 2000 ms
10:54:39 WARN  ?                    Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 4883 ms, time limit is 2000 ms
10:54:40 WARN  ?                    Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 5883 ms, time limit is 2000 ms
io.vertx.core.VertxException: Thread blocked
	at io.vertx.core.net.impl.clientconnection.ConnectionManager.getConnection(ConnectionManager.java:46) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientImpl.getConnectionForRequest(HttpClientImpl.java:1288) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.connect(HttpClientRequestImpl.java:422) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.write(HttpClientRequestImpl.java:614) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.end(HttpClientRequestImpl.java:527) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.end(HttpClientRequestImpl.java:521) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at org.folio.okapi.common.HttpClientDoubleFail.lambda$test$2(HttpClientDoubleFail.java:45) ~[test-classes/:?]
	at org.folio.okapi.common.HttpClientDoubleFail$$Lambda$34/1409160703.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.AbstractContext.lambda$dispatch$0(AbstractContext.java:84) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.AbstractContext$$Lambda$52/1790422902.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.EventLoopContext.schedule(EventLoopContext.java:59) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.AbstractContext.schedule(AbstractContext.java:94) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:84) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleException(HttpClientRequestImpl.java:97) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl.lambda$connect$2(HttpClientRequestImpl.java:433) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientRequestImpl$$Lambda$37/2097905212.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:181) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientImpl.lambda$getConnectionForRequest$6(HttpClientImpl.java:1292) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpClientImpl$$Lambda$38/1265900909.handle(Unknown Source) ~[?:?]
	at io.vertx.core.net.impl.clientconnection.Endpoint.lambda$getConnection$0(Endpoint.java:51) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.net.impl.clientconnection.Endpoint$$Lambda$43/2130192211.handle(Unknown Source) ~[?:?]
	at io.vertx.core.net.impl.clientconnection.Pool.connectFailed(Pool.java:389) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.net.impl.clientconnection.Pool.access$600(Pool.java:89) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.net.impl.clientconnection.Pool$Holder.lambda$connect$0(Pool.java:130) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.net.impl.clientconnection.Pool$Holder$$Lambda$46/1046834544.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.FutureImpl.doDispatch(FutureImpl.java:127) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.FutureImpl.dispatch(FutureImpl.java:119) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:170) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpChannelConnector.connectFailed(HttpChannelConnector.java:272) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpChannelConnector.lambda$doConnect$0(HttpChannelConnector.java:186) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.http.impl.HttpChannelConnector$$Lambda$51/1800691917.operationComplete(Unknown Source) ~[?:?]
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:551) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:608) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:109) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:141) ~[vertx-core-4.0.0-milestone5.jar:4.0.0-milestone5]
	at io.vertx.core.net.impl.ChannelProvider$$Lambda$50/214530301.operationComplete(Unknown Source) ~[?:?]
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:570) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:549) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:608) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:117) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:321) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:337) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:702) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:650) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:576) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493) ~[netty-transport-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.49.Final.jar:4.1.49.Final]
	at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_252]
10:54:41 WARN  ?                    Thread Thread[vert.x-eventloop-thread-1,5,main] has been blocked for 6884 ms, time limit is 2000 ms

Test case:
RunWith(VertxUnitRunner.class)
public class HttpClientFail2Test {
  private Vertx vertx;

  @Before
  public void setUp(TestContext context) {
    vertx = Vertx.vertx();
  }

  @After
  public void tearDown(TestContext context) {
    vertx.close(context.asyncAssertSuccess());
  }

  @Test
  public void test(TestContext context) {
    Async async = context.async();

    HttpClient client = vertx.createHttpClient();
    HttpClientRequest req1 = client.request(
        new RequestOptions().setAbsoluteURI("http://localhost:9292"))
        .exceptionHandler(res1 -> {
          HttpClientRequest req2 = client.request(
              new RequestOptions().setAbsoluteURI("http://localhost:9292"))
              .exceptionHandler(res2 -> async.complete())
              .onSuccess(res2 -> {
                context.fail("unexpected success; something running?");
                async.complete();
              });
          req2.end();
        })
        .onSuccess(
            res1 -> {
              context.fail("unexpected success; something running?");
              async.complete();
            });
    req1.end();
    async.await(5000);
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3469
HTTP client retry on same host can self deadlock · Issue #3469 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HTTP client retrying the same host on a failure can self deadlock because it will close the pool after it performs the callback. It should close the pool before so when it retries and fail it does not retry indefinitely.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3470
There is a bug with multi-file uploads · Issue #3470 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
There is a bug with multi-file uploads.It may be changed the length of a boundary token.Occasional.
Version
3.9.1
Example
The client
        var request = WebClient.create(Vertx.vertx()).postAbs("http://localhost:8080/test");

        for (var i = 0; i < 50; i++) {

            var body = MultipartForm.create();

            body.binaryFileUpload("files", "1.jpg", "/tmp/xx/a.jpg", "image/jpeg");
            body.binaryFileUpload("files", "2.jpg", "/tmp/xx/b.jpg", "image/jpeg");

            request.sendMultipartForm(body, r -> {

                if (r.failed()) {
                    System.err.println(r.cause());
                    return;
                }
                System.out.println(r.result());
            });
        }
The server(springboot:2.3.1.RELEASE)
    @ResponseBody
    @RequestMapping("/test")
    public Map<String, Object> mail(@RequestParam(value = "files", required = false) MultipartFile[] files) {
        return Collections.EMPTY_MAP;
    }
The error
org.apache.tomcat.util.http.fileupload.MultipartStream$IllegalBoundaryException: The length of a boundary token cannot be changed
	at org.apache.tomcat.util.http.fileupload.MultipartStream.setBoundary(MultipartStream.java:459)
	at org.apache.tomcat.util.http.fileupload.impl.FileItemIteratorImpl.findNextItem(FileItemIteratorImpl.java:244)
	at org.apache.tomcat.util.http.fileupload.impl.FileItemIteratorImpl.<init>(FileItemIteratorImpl.java:131)
	at org.apache.tomcat.util.http.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:255)
	at org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:279)
 ...
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3471
HttpClient not able to send multiple POST request to HTTP/2 server · Issue #3471 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
vertx-core:3.9.1
Context
We want to use vert.x for HTTP/2 client to connect to a HTTP/2 service.
We are using a single HttpClient's instance to send multiple requests to HTTP/2 service. We observe that if we send multiple GET requests, they get processed but if we send multiple POST requests, only the first one gets processed and the latter ones fail.
Do you have a reproducer?
Yes, i have a reproducer uploaded to github repo : https://github.com/sandeep14-singh/vertxpoc.git
Please read "Steps to reproduce" section  to see how to reproduce this issue from this project

Link to github project/gist
https://github.com/sandeep14-singh/vertxpoc.git

Steps to reproduce

Kindly pull the code : git clone https://github.com/sandeep14-singh/vertxpoc.git
Open the project "vertxpoc" in intellij
Under the project, open "Application" class and run it. This will bring up a HTTP/2 enabled server : https://localhost:8443. We are using Micronaut framework, which brings up the server with self signed certificate.
Goto chrome and perform a quick check to see if HTTP/2 is enabled or not : Open a new tab in chrome, press F12 and open Network tab After this, type in "https://localhost:8443/demo/testGet" in address bar and hit enter.
After this, hit "Advanced" and "Proceed to localhost (unsafe)". You should see the response "Test succeeded on GET" and on you should also see the protocol "h2" being used in the Network tab.
Open VertxGetClient class and run it. This class sends 2 GET requests and they get processed all fine -- this is good enough.
Open VertxPostClient class and run it. This class sends 2 POST requests and the first one gets processed but the second one does not. We get :
Jul 01, 2020 7:31:01 AM io.vertx.core.http.impl.HttpClientRequestImpl
SEVERE: io.vertx.core.VertxException: Connection was closed
In the documentation "https://vertx.io/docs/vertx-core/java/", under "HTTP/2 multiplexing", its stated that :
"HTTP/2 connections will not be closed by the client automatically. To close them you can call close or close the client instance."
So, in our use case also, we do not want to close the connection.
We want to have single connection to send multiple requests, i was hoping this could be achieved by using single client to send multiple requests as shown the project but its not working

Extra
We are using openjdk1.8
Question :
Please confirm if this is a bug. If this is not a bug, please let us know what are we doing wrong in terms of configurations etc.
Please tell us how we can have single connection to send multiple requests. We were hoping this could be achieved by using single client to send multiple requests as shown the project but its not working.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3472
HTTP client redirection does not correctly resolve percent encoded redirections · Issue #3472 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The default HTTP client redirection strategy will decode the redirect location and interpret any percent encoded URL. It should keep the redirect location intact when resolving the URI reference.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3473
Annotated data object should always be considered as data object · Issue #3473 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently @DataObject annotated are only considered as data object when they provide both a serializer and deserializer which leads to incorrect error message reporting. When a class is annotated and does not provide serializer + deserialized then it should still carry a data object with null serializer and deserializer.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3474
Thread blocked with drainHandler, writeQueueFull  · Issue #3474 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
POSTing many buffers to an echoing server gives thread blocked failures when we use drainHandler+writeQueueFull approach.
The same POST with write and a completion handler does not.
Write with handler is a much simpler strategy, but from documentation it's not clear whether it's an alternative for drainHandler. In any case we cannot explain our thread blocked problems with drainHandler.
What's the best strategy for writing?
Environment
Using vertx-core-4.0.0-milestone4 on Ubuntu 20.04 LTS amd64.
Reproducer
Below is a unit test with test methods drainHandler and  writeHandler. Each test sends 10 times 2 GB to an echoing server (part of unit test).
import io.vertx.core.Vertx;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.http.HttpClient;
import io.vertx.core.http.HttpClientRequest;
import io.vertx.core.http.HttpClientResponse;
import io.vertx.core.streams.Pump;
import io.vertx.core.streams.WriteStream;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import java.util.concurrent.atomic.AtomicLong;

@RunWith(VertxUnitRunner.class)
public class WriteTest {
  Vertx vertx;
  int port = 9210;

  @Before
  public void setUp(TestContext context) {
    vertx = Vertx.vertx();
    vertx.createHttpServer()
        .requestHandler(h -> {
          h.response().setChunked(true);
          h.endHandler(x -> h.response().end());
          Pump.pump(h, h.response()).start();
        }).listen(port, context.asyncAssertSuccess());
  }

  @After
  public void tearDown(TestContext context) {
    vertx.close();
  }

  @Test
  public void drainHandler(TestContext context) {
    testUpload(context, true);
  }

  @Test
  public void writeHandler(TestContext context) {
    testUpload(context, false);
  }

  private void testUpload(TestContext context, boolean useDrain) {
    int bufSz = 200000;
    long bufCnt = 10000;
    long total = bufSz * bufCnt;
    HttpClient client = vertx.createHttpClient();
    for (int loop = 0; loop < 10; loop++) {
      System.out.println("Sending " + total / 1e9 + " GB");
      Async async = context.async();
      HttpClientRequest request = client.postAbs("http://localhost:" + port, res1 -> {
        context.assertTrue(res1.succeeded());
        HttpClientResponse res = res1.result();
        context.assertEquals(200, res.statusCode());
        AtomicLong cnt = new AtomicLong();
        res.handler(h -> cnt.addAndGet(h.length()));
        res.exceptionHandler(ex -> {
          context.fail(ex);
          async.complete();
        });
        res.endHandler(end -> {
          context.assertEquals(total, cnt.get());
          async.complete();
        });
      });
      request.exceptionHandler(ex -> {
        context.fail(ex.getCause());
        async.complete();
      });
      request.putHeader("Content-Type", "text/plain");
      request.setChunked(true);
      Buffer buffer = Buffer.buffer();
      for (int j = 0; j < bufSz; j++) {
        buffer.appendString("X");
      }
      request.setWriteQueueMaxSize(16384);
      if (useDrain) {
        endRequestDrainHandler(request, buffer, 0, bufCnt);
      } else {
        endRequestWriteHandler(request, buffer, 0, bufCnt);
      }
      async.await(50000);
    }
  }

  void endRequestWriteHandler(WriteStream<Buffer> req, Buffer buffer, long i, long cnt) {
    if (i < cnt) {
      req.write(buffer, res -> endRequestWriteHandler(req, buffer, i + 1, cnt));
      return;
    }
    req.end();
  }

  void endRequestDrainHandler(WriteStream<Buffer> req, Buffer buffer, long i, long cnt) {
    req.drainHandler(null);
    while (i < cnt) {
      req.write(buffer);
      i++;
      long next = i;
      if (req.writeQueueFull()) {
        req.drainHandler(res -> endRequestDrainHandler(req, buffer, next, cnt));
        return;
      }
    }
    req.end();
  }
}

Output
Example run:
mvn -Dtest=WriteTest#drainHandler test`

Sending 2.0 GB
Sending 2.0 GB
12:44:27 WARN  ?                    Thread Thread[vert.x-eventloop-thread-6,5,main] has been blocked for 2662 ms, time limit is 2000 ms
12:44:28 WARN  ?                    Thread Thread[vert.x-eventloop-thread-6,5,main] has been blocked for 3663 ms, time limit is 2000 ms
12:44:29 WARN  ?                    Thread Thread[vert.x-eventloop-thread-6,5,main] has been blocked for 4663 ms, time limit is 2000 ms
12:44:30 WARN  ?                    Thread Thread[vert.x-eventloop-thread-6,5,main] has been blocked for 5663 ms, time limit is 2000 ms
io.vertx.core.VertxException: Thread blocked
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.isNotWritable(Http1xClientConnection.java:383) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.HttpClientRequestImpl.writeQueueFull(HttpClientRequestImpl.java:221) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at WriteTest.endRequestDrainHandler(WriteTest.java:105) ~[test-classes/:?]
	at WriteTest.lambda$endRequestDrainHandler$8(WriteTest.java:106) ~[test-classes/:?]
	at WriteTest$$Lambda$98/596706728.handle(Unknown Source) ~[?:?]
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleDrained(HttpClientRequestImpl.java:344) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.handleWritabilityChanged(Http1xClientConnection.java:436) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.Http1xClientConnection$$Lambda$74/255332034.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:183) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.impl.EventLoopContext.lambda$execute$0(EventLoopContext.java:42) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.impl.EventLoopContext$$Lambda$39/347978868.run(Unknown Source) ~[?:?]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:510) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:518) ~[netty-transport-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1044) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_252]
12:44:31 WARN  ?                    Thread Thread[vert.x-eventloop-thread-6,5,main] has been blocked for 6664 ms, time limit is 2000 ms
io.vertx.core.VertxException: Thread blocked
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.isNotWritable(Http1xClientConnection.java:383) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.HttpClientRequestImpl.writeQueueFull(HttpClientRequestImpl.java:221) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at WriteTest.endRequestDrainHandler(WriteTest.java:105) ~[test-classes/:?]
	at WriteTest.lambda$endRequestDrainHandler$8(WriteTest.java:106) ~[test-classes/:?]
	at WriteTest$$Lambda$98/596706728.handle(Unknown Source) ~[?:?]
	at io.vertx.core.http.impl.HttpClientRequestImpl.handleDrained(HttpClientRequestImpl.java:344) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.Http1xClientConnection$StreamImpl.handleWritabilityChanged(Http1xClientConnection.java:436) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.http.impl.Http1xClientConnection$$Lambda$74/255332034.handle(Unknown Source) ~[?:?]
	at io.vertx.core.impl.AbstractContext.emit(AbstractContext.java:183) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.impl.EventLoopContext.lambda$execute$0(EventLoopContext.java:42) ~[vertx-core-4.0.0-milestone4.jar:4.0.0-milestone4]
	at io.vertx.core.impl.EventLoopContext$$Lambda$39/347978868.run(Unknown Source) ~[?:?]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:510) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:518) ~[netty-transport-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1044) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.42.Final.jar:4.1.42.Final]
	at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_252]

Running
mvn -Dtest=WriteTest#writeHandler test

always completes and memory usage is low.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3475
Explain WriteStream.write internal queue and Handler/Future by julianladisch · Pull Request #3475 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I did a general refresh of the documentation @julianladisch 6124eb7
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3476
File Upload failed when Content-Disposition has a "filename*" field · Issue #3476 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
when upload a nonascii named file, there's a field "filename*" in "Content-Disposition" header , then vertx will throw IllegalCharsetNameException
Version
3.8.5
Context
Content-Disposition: form-data; name="eml"; filename="Reminder_ Join the ...Postman 101... Webinar on June 30.eml"; filename*="UTF-8''Reminder_%20Join%20the%20%E2%80%9CPostman%20101%E2%80%9D%20Webinar%20on%20June%2030.eml".
Content-Type: message/rfc822.
Do you have a reproducer?
allways
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3477
ClassCastException in VertxHttpHeaders.add  · Issue #3477 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
original encounter: 3.8.5
reproducer: 3.9.1
Context
I encountered a suspicious "500 Internal Server Error" when trying to add a "vary" response header with multiple header names in the value using the method add(CharSequence name, Iterable<CharSequence> values) of the MultiMap interface. Trying to create a reproducer (see below) revealed the following exception:
java.lang.ClassCastException: io.netty.util.AsciiString cannot be cast to java.lang.String
        at io.vertx.core.http.impl.headers.VertxHttpHeaders.add(VertxHttpHeaders.java:93)

Do you have a reproducer?
https://github.com/hjhill/vertx-maven-starter/tree/reproducer-multimap-add
master contains the default starter project - please take care to checkout the branch reproducer-multimap-add. In this branch, I have only modified the request handler..
Steps to reproduce

Check out the branch reproducer-multimap-add of the Github repository linked above.
Run it with mvn compile exec:java (see below about using test)
Use any tool to create an HTTP request to http://localhost:8080.

The request will hang and you'll see the exception on the console.
Even simpler: if you use mvn test exec:java the exception will already show up in the test, but the test will then be hanging indefinitely.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3478
Why does vert.x core use jdk "Files" api which are blocking? · Issue #3478 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
java.nio.channels.AsynchronousFileChannel (with callback) is faster
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3479
VertxHttpHeaders add(CharSequence, Iterable<CharSequence>) casts to String instead of CharSequence · Issue #3479 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of Vertx#add(CharSequence, Iterable<CharSequence>) casts the iterable elements to String instead of CharSequence leading to class cast exceptions when adding CharSequence which are not String
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3480
Add getNumber() to JSON types by pmlopes · Pull Request #3480 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3481
Replace readFileSync by readFileBlocking in javadoc by julianladisch · Pull Request #3481 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thank you @julianladisch !
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3482
Expand getters of io.vertx.core.http.Cookie · Issue #3482 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I want to be able to read the following attributes of my Cookie object (io.vertx.core.http.Cookie):

httpOnly
secure
sameSite

Use cases

Improves consistency with existing get/set methods on other attributes.
Enables cleaner testing of code that uses vertx for cookie construction.

Contribution
I can open a PR.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3483
#3482 Additional getter methods for Cookie by CBrowne · Pull Request #3483 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3484
#3482 Add getSameSite, isHttpOnly and isSecure to Cookie interface by CBrowne · Pull Request #3484 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you provide a PR for the 3.9 branch ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3485
Unmaintained or buggy cluster managers need to be removed · Issue #3485 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx-core:3.9.1
Context
My application uses locks with long timeouts and may scale up and down. Previously, I used a forked version of AtomixClusterManager brought into my tree. atomix appears to have the best API and cleanest semantics for clustering.
However, atomix appears to have a showstopping bug (see atomix/atomix#1077) that I reproduced when doing integration tests with my app. Long ago, I had tried the Hazelcast cluster manager, but it had many mysterious issues, sometimes related to vertx-sync, sometimes bugs, and sometimes performance regressions.
Today, I tried migrating to both vertx-zookeeper:3.9.1 and vertx-ignite:3.9.1, neither of which worked.

vertx-zookeeper issues:

It uses an out of date version of org.apache.curator and org.apache.zookeeper, bringing in Netty 3. This has been fixed for 3 years.
It has bugs like vert-x3/vertx-zookeeper#100 and vert-x3/vertx-zookeeper#99
It does not appear that locks by the same name can be waited on concurrently, regardless of how many internal event loop threads are made.


vertx-ignite issues:

It also uses a version of Ignite so out of date it does not run on Java 11.
ignite TCP discovery does not work when two or more instances are started simultaneously on the same JVM, a normal thing to attempt in an integration test.
Its locks implementation is really badly broken.



I know you are migrating to a new SPI. So maybe that will help. But overall I think the cluster managers are falling into disrepair. You may consider adopting something like atomix or building on top of etcd (like everyone else) and just fixing it as a standard feature.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3486
#3482 Add getSameSite, isHttpOnly and isSecure to Cookie interface by CBrowne · Pull Request #3486 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Follow up from: #3484
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3487
Null pointer exception in MultiMap.set · Issue #3487 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
While upgrading Okapi to latest Vert.x core we encounter null pointer exceptions in io.vertx.core.http.impl.headers.HeadersMultiMap$MapEntry.remove(HeadersMultiMap.java:494)
Using  commit 8377be6 (HEAD -> master, origin/master, origin/HEAD)
Author: Caleb Browne caleb@ploceus.co.uk
Date:   Tue Jul 7 00:02:22 2020 +0100
Here's a test case that demonstrates the issue .. can be added to VertxHttpHeadersTest.java.
  @Test
  public void test1() {
    MultiMap mmap = newMultiMap();
    mmap.set("k", "v");
    for (int i = 0; i < 500; i++) {
      mmap.add(String.valueOf(i), "foo");
    }
    mmap.remove("k");
    mmap.set("k", "w");
    assertEquals("w", mmap.get("k"));
  }

We get a null pointer exception in last mmap.set, due to MapEntry.before == null.
The for loop is added to get a hash collision for value of "k".
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3488
Fix Null pointer exception in MultiMap.set #3487 by adamdickmeiss · Pull Request #3488 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@adamdickmeiss can you sign the Eclipse Contributor Agreement and update your PR ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3489
Add missing (but common Vary header name) by pmlopes · Pull Request #3489 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3490
Add ability to safely add path fragments to HttpRequest · Issue #3490 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Add ability to safely add path params to io.vertx.ext.web.client.HttpRequest
When coming from Spring, it's possible to use uri variables / path parameters / fragments like this:
webClient.get()
      .uri("https://github.com/{userName}", name)
      .exchange()
It's achieved internally in Spring by using org.springframework.web.util.UriComponentsBuilder
It escapes non-ASCII symbols.
Suggestion is to add methods:
io.vertx.ext.web.client.WebClient#post(int port, String host, String requestURI, Map<String, ?> uriVariables)
io.vertx.ext.web.client.HttpRequest#uriVariable(String name, ? value)
io.vertx.ext.web.client.HttpRequest#addPathFragment(String fragment)
Use cases
When the path fragment might need to be encoded or might contain / (slash symbol), we want to safely encode it instead of unsafely concatenate the string.
Contribution
I'm volunteering.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3491
ClusteredEventBus config improvements by tsegismont · Pull Request #3491 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do not merge yet, the PR still misses doc updates and new tests.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3492
Coherence cluster implementation · Issue #3492 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
https://github.com/oracle/coherence is now open source. I'm not aware of their licence but a cluster implementation using it seems to be very interesting.
I know Vert.x 4 redesigned clustering SPI. I will study how to implement it but anyway I'd like to give this suggestion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3493
Wildcard port (i.e. port 0) should be shared when created by several instances of the same Verticle · Issue #3493 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The full details are in this Quarkus issue, but as far as I can see this is only vert.x code so I don't think the Quarkus part is relevant: quarkusio/quarkus#9890
If you set the HTTP port to 0 the every IO thread will open its own HTTP port, but only the last opened one will be reported as the actual port. For HTTPS this causes other problems as the binding is relativity expensive and happens in a sync block, so if you have lots of IO threads they all wait at the sync block and the blocked thread detector prints a warning.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3494
If port 0 is selected only select a single port by stuartwdouglas · Pull Request #3494 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This would need to be backported to the master branch (the PR is targeting 3.9)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3495
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3496
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3497
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3498
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3499
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3500
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3501
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3502
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3503
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3504
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3505
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3506
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3507
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3508
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3509
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3510
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3511
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3512
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3513
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3514
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3515
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3516
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3517
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3518
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3519
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3520
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3521
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3522
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3523
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3524
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3525
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3526
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3527
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3528
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3529
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3530
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3531
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3532
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3533
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3534
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3535
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3536
Unexpected behavior of Promise.future() in Groovy · Issue #3536 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I use vertx 3.9.2 and run the same code bellow in Java : the console print 1, but in Groovy it prints 4 (Each time calling the future() will create a new Future).
   public static void main(String[] args) {
        Promise<Long> promise = Promise.promise();
        promise.complete(10L);

        Set<Future<Long>> futures = new HashSet<>(
            Arrays.asList(promise.future(), promise.future(), promise.future(), promise.future())
        );
        System.out.println(futures.size());
    }

vertx 3.9.2, groovy: 2.5.8, gradle: 5.2.1
Some time Groovy still prints 1, let run gradle clean.

I think it's Groovy's problem but also posting it here so that everyone can check and avoid unnecessary bugs.
You can clone and run at my repo .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3537
New method: AsyncMap::setTtl · Issue #3537 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In addition to the existing method AsyncMap::put(K k, V v, long ttl, Handler<AsyncResult<Void>> completionHandler) it is very useful to add a new method AsyncMap::setTtl(K k, long ttl, Handler<AsyncResult<Boolean>> completionHandler). There is a corresponding method in hazelcast's IMap, for other implementations we can return false.
I can try to prepare a PR if it is approved
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3538
Remove future factory · Issue #3538 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x provides a FutureFactory SPI.
With Vert.x 4 using relying more on futures, we need to precisely control the implementation of io.vertx.core.Future in order to deliver the most performing and reliable model.
Therefore we remove this SPI in Vert.x 4.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3539
Fix wrong IP when resolving many domain names (conflict) by Joxit · Pull Request #3539 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add tests for this @Joxit ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3540
DatagramSocket multicast group listen improvement · Issue #3540 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The DatagramSocket#listenMulticastGroup(String, Handler<AsyncResult<DatagramSocket>>) is almost impossible to use because it will not be able to select a valid network interface, ending up with:
SEVERE: Unhandled exception
java.lang.NullPointerException: networkInterface
	at io.netty.util.internal.ObjectUtil.checkNotNull(ObjectUtil.java:33)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:409)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:371)
	at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:365)
	at io.vertx.core.datagram.impl.DatagramSocketImpl.listenMulticastGroup(DatagramSocketImpl.java:96)

Vert.x delegates the call to the Netty datagram channel joinGroup(InetAddress) which fails. This method is actually not tested in Netty, which makes me think that it is error prone.
We should either
1/ keep it and do a better job at finding a valid network interface
2/ an issue should be opened in Netty to improve the behavior of this method (perhaps it is not possible)
3/ the method should be deprecated in Vert.x 3 and removed in Vert.x 4 to force users to provide a network interface
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3541
HTTP with TLS should disable H2C · Issue #3541 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
H2C is restricted to plain text, the HTTP server should not configure any H2C handler (direct or with HTTP upgrade) when running a TLS configured server. Currently it configures Http1xUpgradeToH2CHandler but not Http1xOrH2CHandler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3542
Server WebSocket close operation should not throw IllegalStateException when already closed · Issue #3542 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Like WebSocket client, also there is strong point for doing this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3543
HTTP client request timeout will not reschedule a timer when response data has been received · Issue #3543 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The handling of the HTTP client request internal for request timeout might be not rescheduled when the timer fires and data has been received. This happens because the timer handling will not reset the request timer state and will reschedule a timer that will cancel the timer that has just been reset.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3544
[Doc] Broken link on https://vertx.io/docs/vertx-junit5/java/ · Issue #3544 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On https://vertx.io/docs/vertx-junit5/java/, there is a broken link at the bottom of the page: on the JUnit 5 additional extensions, the
link to Vert.x Junit 5 Web Client leads to a 404
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3545
Enabling Micrometer metrics while using a UNIX native domain socket causes NPE · Issue #3545 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
If having enabled MicrometerMetrics while connecting to an UNIX native domain socket it result in an NPE when io.vertx.core.net.impl.SocketAddressImpl is instantiated. The SocketAddress is instantiated with a port, host constructor but the host argument is null and it has a require not null check in the constructor.
The issue can be avoided by turning off Micrometer but a more precise solution is to disable NET_CLIENT Metrics domain.
The stack trace:
java.lang.NullPointerException: no null host accepted at java.util.Objects.requireNonNull(Objects.java:247) ~[?:?] at io.vertx.core.net.impl.SocketAddressImpl.<init>(SocketAddressImpl.java:30) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.micrometer.impl.VertxNetClientMetrics$Instance.connected(VertxNetClientMetrics.java:65) ~[vertx-micrometer-metrics-3.9.2.jar:3.9.2] at io.vertx.micrometer.impl.VertxNetClientMetrics$Instance.connected(VertxNetClientMetrics.java:56) ~[vertx-micrometer-metrics-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.NetClientImpl.lambda$null$5(NetClientImpl.java:223) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:366) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:229) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:221) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.NetClientImpl.lambda$connected$6(NetClientImpl.java:221) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.VertxHandler.setConnection(VertxHandler.java:85) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.VertxHandler.handlerAdded(VertxHandler.java:102) ~[vertx-core-3.9.2.jar:3.9.2] at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:938) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:223) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:195) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.vertx.core.net.impl.NetClientImpl.connected(NetClientImpl.java:232) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.NetClientImpl.lambda$doConnect$3(NetClientImpl.java:187) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.ChannelProvider.lambda$connect$1(ChannelProvider.java:78) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.ChannelProvider.connected(ChannelProvider.java:160) ~[vertx-core-3.9.2.jar:3.9.2] at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$2(ChannelProvider.java:143) ~[vertx-core-3.9.2.jar:3.9.2] at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:577) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:551) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:490) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:615) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:604) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPromise.trySuccess(DefaultChannelPromise.java:84) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.fulfillConnectPromise(AbstractEpollChannel.java:615) ~[netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.connect(AbstractEpollChannel.java:563) ~[netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline$HeadContext.connect(DefaultChannelPipeline.java:1342) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeConnect(AbstractChannelHandlerContext.java:548) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.connect(AbstractChannelHandlerContext.java:533) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.connect(AbstractChannelHandlerContext.java:517) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline.connect(DefaultChannelPipeline.java:978) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannel.connect(AbstractChannel.java:253) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.bootstrap.Bootstrap$3.run(Bootstrap.java:250) ~[netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:387) ~[netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.51.Final.jar:4.1.51.Final] at java.lang.Thread.run(Thread.java:830) [?:?] 
Version
3.9.2 (and all down to 3.9.0). Haven't tested 3.8.X because the Redis client that we use for the native socket was added in 3.9.
Context
I ran into the issue when combining the Vertex Redis client to connect via UNIX domain socket while having Vertx Micrometer active.
Do you have a reproducer?
https://github.com/Stimzz/vertx-metrics-native-socket-reproducer
Run the unit test and the test will crash with NPE. Uncomment the .addDisabledMetricsCategory(MetricsDomain.NET_CLIENT) line in the test when setting MetricsOptions and the case will succeed (to prevent Micrometer client from attempting to log the connection event on the domain socket).
The unit test just use the the NetClient directly on a domain socket. We initially discovered this when using the Redis client but this works as well more directly.
Steps to reproduce

Activate Vertx micrometer
Activate native transport and attempt connecting to a UNIX domain socket. The connection will throw a NPE.

Extra
Observed on Ubuntu 18.04 and 20.04 both running Adoptopenjdk 13 hotspot.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3546
`RecordParser` issue in Vert.x 3.9.2 · Issue #3546 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.2
Context
Unfortunately this commit broke something for us after upgrading to 3.9.2. We use a RecordParser to parse a chunked http response. The RecordParser is trying to re-use the input buffers for parsing but when using ssl, the response buffers returned by netty have their internal maxCapacity set to the length of the chunk, which means nothing can be added to these buffers. As a consequence, the following exception occurs:
java.lang.IndexOutOfBoundsException: writerIndex(1) + minWritableBytes(1) exceeds maxCapacity(1): UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeDirectByteBuf(ridx: 0, widx: 1, cap: 1/1)
  at io.netty.buffer.AbstractByteBuf.ensureWritable0(AbstractByteBuf.java:295)
  at io.netty.buffer.AbstractByteBuf.ensureWritable(AbstractByteBuf.java:282)
  at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1104)
  at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1097)
  at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1088)
  at io.netty.buffer.WrappedByteBuf.writeBytes(WrappedByteBuf.java:780)
  at io.vertx.core.buffer.impl.BufferImpl.appendBuffer(BufferImpl.java:209)
  at io.vertx.core.parsetools.impl.RecordParserImpl.handle(RecordParserImpl.java:283)
  at io.vertx.reactivex.core.parsetools.RecordParser.handle(RecordParser.java:460)

Reproducer
Here is a reproducer that succeeds with Vert.x 3.9.1 but fails with Vert.x 3.9.2:
@Test
public void testRecordParser(TestContext ctx) {
  var o = Observable.fromArray("a", "\n", "b\nc")
    // this is how the buffers are returned from netty in a chunked ssl http response:
    .map(s -> Buffer.buffer(UnpooledByteBufAllocator.DEFAULT.directBuffer(s.length(), s.length())).appendString(s));
    
  RecordParser.newDelimited("\n", o).toObservable()
    .doOnNext(b -> System.out.println("parsed: " + b.toString()))
    .ignoreElements()
    .subscribe(CompletableHelper.toObserver(ctx.asyncAssertSuccess()));
}
So in a nutshell the RecordParser now expects the buffers that it is given to be writeable which was not the case in the previous version. Was that change intentional?
Other Reproducer
Here's another reproducer that demonstrates how we ran into this issue. The following test also passes with Vert.x 3.9.1 and fails/hangs with Vert.x 3.9.2 (we use H2 but it happens for both protocols):
@RunWith(VertxUnitRunner.class)
public class RecordParserTest {

  private Vertx vertx;
  private int port;

  @Before
  public void setUp(TestContext ctx) {
    vertx = Vertx.vertx();
    vertx.createHttpServer(new HttpServerOptions()
      .setSsl(true)
      .setPemKeyCertOptions(new PemKeyCertOptions()
        // openssl req -x509 -newkey rsa:4096 -nodes -keyout key.pem -out cert.pem -days 365
        .setKeyPath("key.pem")
        .setCertPath("cert.pem")))
      .requestHandler(req -> req.response()
        .setChunked(true)
        .write(Buffer.buffer("a"))
        .write(Buffer.buffer("\n"))
        .write(Buffer.buffer("b\nc"))
        .end())
      .rxListen(0)
      .doOnSuccess(s -> port = s.actualPort())
      .subscribe(SingleHelper.toObserver(ctx.asyncAssertSuccess()));
  }

  @Test
  public void testGet(TestContext ctx) {
    var req = vertx.createHttpClient(new HttpClientOptions()
      .setSsl(true)
      .setTrustAll(true)
      .setDefaultPort(port)).get("/");

    var res = req.toObservable()
      .firstOrError()
      .flatMapObservable(HttpClientResponse::toObservable);

    RecordParser.newDelimited("\n", res).toObservable()
      .doOnNext(b -> System.out.println("received: " + b.toString()))
      .count()
      .doOnSuccess(n -> ctx.assertEquals(3L, n))
      .subscribe(SingleHelper.toObserver(ctx.asyncAssertSuccess()));

    req.end();
  }
}
Our workaround for now is to copy the buffers before passing them to the RecordParser but I think it'd be better for the RecordParser to treat its input as read-only and manage the buffers it needs for parsing internally.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3547
Added a method to CompositeFuture to retrieve all failure causes by slinkydeveloper · Pull Request #3547 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3548
Verticles deployed with multiple instances do not scale processing evenly over the event loop threads · Issue #3548 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Observation
Observed during profiling cpu processing that vertx event loop threads are not evenly utilized in the scenario where multiple verticle instances are deployed.
Expectation
Expected that with multi-reactor pattern, the event loop thread processing could be delegated evenly over the number of processing cores of the server.
Version
3.9.1
Context
During performance testing with vertx http servers listening and created over multiple verticle instances, we see in profiling that only 1 of the vert event loop threads are using for processing incoming http requests handled on the Router.
Steps to reproduce

Start a http server using code similar to below test listeing on port 8080.
Start http traffic into the server with a client tool.  I used 5 requests per second with client written using vertx and http2 protocol.  I can show the code for this client if needed.
With a profiler (used yourkit), observe the threads cpu utilization and filter out the vertx event loop threads.
Observe only 1 of the threads is used while the others are used in processing.

Extra
Related question on stack overflow:
https://stackoverflow.com/questions/63678151/vertxs-netty-event-loop-using-only-single-thread
public class WorkerTest {

    public void testServer() throws Exception {

        final Vertx vertx = Vertx.vertx(new VertxOptions());

        vertx.exceptionHandler(new Handler<Throwable>() {
            @Override
            public void handle(Throwable ex) {
                ex.printStackTrace();
            }
        });

        int threadCount = Runtime.getRuntime().availableProcessors() * 2;

        DeploymentOptions dop = new DeploymentOptions()
        .setInstances(threadCount);

        vertx.deployVerticle(TestVerticle.class.getName(), dop, (event) -> {
            if (!event.failed()) {

            } else {
                event.cause().printStackTrace();
            }
        });


        Thread.sleep(120_000_000);
    }

    public static class TestVerticle extends AbstractVerticle {

        @Override
        public void start() throws Exception {

            System.out.println("verticle starting " + this.deploymentID() + " context " + this.context.hashCode() + " inst count " + this.context.getInstanceCount());

            final Router router = Router.router(this.vertx);

            router.putWithRegex("/nnrf-nfm/.*").handler(h -> {
                HttpServerResponse response = h.response();
                response.setStatusCode(200);
                response.end();
            });

            HttpServer httpServer = this.vertx
                    .createHttpServer(new HttpServerOptions().setHost("localhost").setPort(8080))
                    .requestHandler(router)
                    .listen();
        }
    }

}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3549
HttpServerResponse send method · Issue #3549 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClientRequest has a new send method in 4.0 to simplify sending a stream and providing a Future<HttpClientResponse>. We should the same method in HttpServerResponse.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3550
HttpServerResponse send method by vietj · Pull Request #3550 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
close #3549
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3551
WebSocket handshake issue when enabling ALPN on the client with an HTTP2 server · Issue #3551 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I get the following error when I do setup an HttpClient with ALPN enabled, talking with TLS to an HTTP2 server:
io.vertx.core.http.impl.Http2ClientConnection cannot be cast to io.vertx.core.http.impl.Http1xClientConnection 

This can be reproduce with the following test case (in WebSocketTest.java):
  @Test
  public void testTlsClientWebSocketWithHttp2Server() throws Exception {
    HttpClientOptions clientOptions = new HttpClientOptions();
    // true => error
    // false => works okay
    clientOptions.setUseAlpn(true);
    clientOptions.setSsl(true);
    clientOptions.setTrustAll(true);
    clientOptions.setAlpnVersions(Arrays.asList(HttpVersion.HTTP_2,
                                                HttpVersion.HTTP_1_1));
    //clientOptions.setHttp2ClearTextUpgrade(false);
    client = vertx.createHttpClient(clientOptions);

    HttpServerOptions serverOptions =
      new HttpServerOptions().setPort(DEFAULT_HTTPS_PORT);
    serverOptions.setSsl(true);
    serverOptions.setUseAlpn(true);
    serverOptions.setSni(true);
    //serverOptions.setAlpnVersions(Arrays.asList(HttpVersion.HTTP_2,
    //                                            HttpVersion.HTTP_1_1));
    //serverOptions.setTrustOptions(Cert.SERVER.get());
    serverOptions.setKeyCertOptions(Cert.SERVER_PEM.get());
    server = vertx.createHttpServer(serverOptions);
    server.requestHandler(req -> {
      req.response().setChunked(true).write("connect");
    });
    server.webSocketHandler(ws -> {
      ws.writeFinalTextFrame("ok");
    });
    server.listen(onSuccess(server -> {
      client.request(new RequestOptions().setPort(DEFAULT_HTTPS_PORT)
                                         .setHost(DEFAULT_HTTPS_HOST))
            .onComplete(onSuccess(req -> {
              req.onComplete(onSuccess(resp -> {
                WebSocketConnectOptions wsOptions =
                  new WebSocketConnectOptions();
                //wsOptions.setSsl(true);
                wsOptions.setPort(DEFAULT_HTTPS_PORT);
                wsOptions.setHost(DEFAULT_HTTPS_HOST);
                wsOptions.setURI("/");
                client.webSocket(wsOptions,
                                 onSuccess(ws -> {
                  ws.handler(buff -> {
                    assertEquals("ok", buff.toString());
                    testComplete();
                  });
                }));
              })).end();
            }));
    }));
    await();
  }
I must admit, I was a bit surprised to see that HTTP/2 going on for the websocket connection establishment, IIRC the websocket ConnectionManager in the HttpClient is explicitely configured to mandate HTTP/1.1.
So I was wondering, given that the Vert.x websocket client is bound to HTTP/1.1 (no RFC 8441 support yet), if ALPN should also be disabled automatically for websocket connections...
BTW, I tried this test on the master branch of this repo (Vert.x 4), but I'm seeing the exact same message on Vert.x 3.9.2.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3552
`Http1xServerResponse.setStatusCode()` doesn't check `headerWritten` · Issue #3552 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Context
Today I noticed that if you set status code after writing to Http1xServerResponse, the status code will be discarded silently. Seems like Http2ServerResponseImpl does check if the header is already written before setting status code: 
  
    
      vert.x/src/main/java/io/vertx/core/http/impl/Http2ServerResponseImpl.java
    
    
         Line 158
      in
      b8e58e5
    
  
  
    

        
          
           checkHeadWritten(); 
        
    
  


This confuses me a lot. I think an early exception would be better in this case.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3553
Stream based DSL · Issue #3553 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Feature description
Provide a DSL (domain specific language) that can be used to execute chain sync and async methods on a context object.  The context object contains the state and provides business methods to manipulate that state.
Sync logic is provided in a classical methods, with the constraint that methods returns void and the outcome is reflexed in the state of the context object.
Async logic is split in 2 business methods.  The first method contains all logic leading up to the async call that gets a Handler<AsyncResult> that is needed to execute the 'technical' async method and in general stops when the technical methods is called.  The second business method is invoked when the result is ready and should processes it, not returning any value but reflex it in the state of the context object.
An example of such an context object:
class Ctx {
    private final String path;
    private String output;

    public void syncBusiness()  { ... }

    public void startAsyncBusiness(Future<HttpResponse<Buffer>> next) { 
        WebClient.create(vertx).get(path).send(next);
    }

    public void processAsyncBusinessResult(HttpResponse<Buffer> result) {
        output = result.body().toString();
    }
 }
Vert.x provides a interface, with implementation, to chain the operations as a simple sequence but also in more complex ways like loops, conditional, ...
An example of such a chaining:
Sequencer.start(new TxnCtx(txn))
    .startVoid(TxnCtx::retrieveInfo)
    .startVoid(TxnCtx::setupConfigParams)
    .split(TxnCtx::getTokenContexts)
    .startAndProcessAsync(TxnTokenCtx::startCreateToken, TxnTokenCtx::processCreateTokenResult)
        .when(TxnTokenCtx::requireSignature)
            .startVoid(TxnTokenCtx::signToken)
        .end()
        .when(TxnTokenCtx::requireEncryption)
            .startVoid(TxnTokenCtx::retrievePublicKeyFromState)
            .when(TxnTokenCtx::requireFetchingOfPublicKeyFromServer)
                .startAndProcessAsync(TxnTokenCtx::startFetchPublicKeyFromServer, TxnTokenCtx::processFetchPublicKeyFromServerResult)
                .startVoid(TxnTokenCtx::savePublicKeyInState)
            .end()
            .startVoid(TxnTokenCtx::encryptToken)
        .end()
    .endForEach(TxnCtx::addTokenToParams)
    .startVoid(TxnCtx::calcBaseUrl)
    .when(TxnCtx::requiresQueryString)
        .startAndProcessAsync(TxnCtx::startCreateQueryString, TxnCtx::processCreateQueryStringResult)
    .end()
    .when(TxnCtx::requiresBody)
        .startAndProcessAsync(TxnCtx::startCreateBody, TxnCtx::processCreateBodyResult)
    .end()
    .finish(TxnCtx::toOperationResponse, response);
Use cases
Async programming is complicated, handlers do not make for very readable code.  Async Coordination helps, but has it limitations.  RxJava2 is a more complete solution but (to my personal flavor) is a little too complex; both when it comes to writing code and understanding the result.
The proposed DSL aims to simply but rich async programming by levering the capabilities of Vert.x core.  The objective is to protect the developer using Vert.x from the difficulties of async programming and result in code that resembles regular programming as much as possible.
Contribution
As you can see from the examples, I have an implementation that I'm willing to share but it definitely needs some refinement and feedback on naming and extra features.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3554
Vert.x should copy buffers before wrapping them · Issue #3554 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current implementation does copy ByteBuf when it is a direct buffer or a composite buffer. This can produce buffer with a bound max capacity in some cases (e.g chunked encoded HTTP/1 over SSL that slices the HTTP/1 buffer to produce ByteBuf chunks). Such buffers cannot be appended to resulting in trying to write a bounded buffer and throwing a java.lang.IndexOutOfBoundsException.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3555
Buffer wrapped a ByteBuf with a bound max capacity should copy them when necessary · Issue #3555 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Buffer wrapping a ByteBuf with a bound maxCapacity (usually obtained from a slice operation) should copy the ByteBuf on any operation requiring to increase the capacity larger than the maxCapacity.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3556
Buffer optimisation of the internal ByteBuf · Issue #3556 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We can perform several optimisation of the Buffer usage of the internal ByteBuf.
The Buffer implementation holds a reference on an unreleasable wrapper of the original ByteBuf. The getByteBuf() implementation returns a duplicate of this reference that will duplicate the original ByteBuf and then wrap it with an unreleasable wrapper again. The Buffer can instead hold directly a reference to the original ByteBuf and have the getByteBuf() method returns an unreleasable wrapper of the duplicate, the returned ByteBuf will be the same than in the current case (an unreleasable wrapper of a duplicate). This avoid to instantiate an unreleasable wrapper then a Buffer is created. In addition most Buffer operations will be faster as they will operate on the original ByteBuf instead of the unreleasable wrapper.
In addition the Buffer implementation can optimistically cast Buffer arguments when possible (e.g Buffer#appendBuffer(Buffer)) and use the ByteBuf references instead of calling getByteBuf() resulting in less faster operations and avoid unnecessary unreleasable wrapper duplication.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3557
Error 500 when trying to call GraphQL subscription query · Issue #3557 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?

io.vertx:vertx-core:3.9.2
io.vertx:vertx-web-graphql:3.9.2
com.graphql-java:graphql-java:15.0

Context
Trying to implement a GraphQL subscription I'm getting the following error when executing the query (and recieving a 500)
Exception in thread "vert.x-eventloop-thread-1":
java.util.concurrent.CompletionException: io.vertx.core.json.EncodeException: Failed to encode as JSON: No serializer found for class graphql.execution.reactive.CompletionStageMappingPublisher and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.LinkedHashMap["data"])
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:314)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:319)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:645)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.postFire(CompletableFuture.java:610)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:649)
	at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:478)
	at io.vertx.ext.web.handler.graphql.impl.GraphQLHandlerImpl.lambda$null$9(GraphQLHandlerImpl.java:288)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:366)
	at io.vertx.core.impl.EventLoopContext.lambda$executeAsync$0(EventLoopContext.java:38)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: io.vertx.core.json.EncodeException: Failed to encode as JSON: No serializer found for class graphql.execution.reactive.CompletionStageMappingPublisher and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.LinkedHashMap["data"])
	at io.vertx.core.json.jackson.JacksonCodec.toBuffer(JacksonCodec.java:176)
	at io.vertx.core.json.JsonObject.toBuffer(JsonObject.java:832)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:642)
	... 14 more
Here is some code to reproduce
import io.reactivex.rxjava3.core.BackpressureStrategy;
import io.reactivex.rxjava3.core.Flowable;
import io.reactivex.rxjava3.subjects.PublishSubject;

PublishSubject<Sign> provider = PublishSubject.create();
Flowable<Sign> publisher = provider.toFlowable(BackpressureStrategy.BUFFER);

RuntimeWiring runtimeWiring = RuntimeWiring.newRuntimeWiring()
        .type("Subscription", wiring -> wiring
            .dataFetcher("subscribeSigns", environment -> publisher)
         ).build();

provider.onNext(obj);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3558
Various optimizations by vietj · Pull Request #3558 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3559
Optimized heap buffers by vietj · Pull Request #3559 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3560
Optimize heap buffers · Issue #3560 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Heap Buffer created with Unpooled.buffer(...) are instrumented and maintain a reference counting. This reference counting requires to wrap the current ByteBuf duplicate with an unreleasable wrapper so that the returned duplicate will not affect the actual ByteBuf hold by BufferImpl.
We can optimize these buffers by using instead custom subclasses of UnpooledHeapByteBuf and UnpooledUnsafeHeapByteBuf instead to avoid un-necessary operations. Such classes will be un-instrumented and reference counting methods can be overridden to disable reference counting which avoids to wrap the ByteBuf duplicate with an unreleasable wrapper.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3561
Various 4.0 optimizations by vietj · Pull Request #3561 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3562
HTTP server TCP tunnelling API rework · Issue #3562 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The 3.x NetSocket upgrade API is not entirely satisfying.
This API is synchronous on the server and performs pipeline modifications. This can be racy when using a worker server processor as the pipeline might be decoding buffers while the request handler decides to obtain a NetSocket. We should offer an asynchronous API for this feature.
The HTTP/1.x implementation works for arbitrary requests and the HTTP/2 is restricted to HTTP/2 . The HTTP/1.1 should follow the HTTP/2 behavior, since the API should be used creating TCP tunnels with the client and should not be used otherwise. We might offer in the future to turn an HttpConnection into a NetSocket allowing such behavior instead.
The method will be renamed toNetSocket and back-ported in 3.x as a simple delegate to the existing API. The existing API will be deprecated.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3563
Duplicated context improvements by vietj · Pull Request #3563 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3564
HTTP server WebSocket upgrade improvements · Issue #3564 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The 3.x WebSocket API upgrade is not entirely satisfying.
This API is synchronous on the server and performs pipeline modifications. This can be racy when using a worker server processor as the pipeline might be decoding buffers while the request handler decides to obtain a WebSocket. We should offer an asynchronous API for this feature.
The implementation shall also be improved to buffer the upgrade request in the toWebSocket method instead of being done in Http1xServerRequestHandler. This allow request handlers set to receive all HTTP events when the application decides to not call toWebSocket.
The method will be renamed toWebSocket and back-ported in 3.x as a simple delegate to the existing API. The existing API will be deprecated.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3565
Deprecate HttpServerRequest#upgrade removed in 4.0 in favor of HttpServerRequest#toWebSocket · Issue #3565 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #3564
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3566
Deprecate HttpServerRequest#netSocket removed in 4.0 in favor of HttpServerRequest#toNetSocket · Issue #3566 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #3562
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3567
HTTP server upgrade/tunnel improvements by vietj · Pull Request #3567 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3568
HTTP server response methods impacting the response head should be guarded against head sent · Issue #3568 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There are a few methods impacting the HTTP response head (like setStatusCode(int)), such methods should throw an exception when the response head has already been written.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3569
WebSocket should not use ALPN when configured from HTTP client options · Issue #3569 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HTTP client WebSocket configuration inherits from the client options configuration. When the client options configures ALPN, the WebSocket configuration will therefore try to establish an HTTP/2 connection, when it succeeds it will not work since WebSocket assumes HTTP/1.1 to be used.
The WebSocket configuration should force the usage of ALPN to false.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3570
Evict local lock timed out waiters · Issue #3570 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Shared data local lock maintains a list of waiters, entries are evicted from this list when on lock release. When a lock times out, it does not remove the entry from the list and instead relies on the cooperation of the lock owners to remove the entry from the list. We can improve this and evict the waiter from the waiters list when the timeout fires.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3571
Local lock improvements by vietj · Pull Request #3571 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont I updated the eviction to handle all cases properly, I haven't added yet tests for such case but I will try (it's not obvious to do so).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3572
Issues/cookie expires improvement by pmlopes · Pull Request #3572 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
does it need to be in 3.9.3 ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3573
HttpClientOptions SSL setServerNameIndication API missing · Issue #3573 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Observation
When using vertx HttpClientOptions with the SSL setForceSni option, the server name indicated in the first message of the SSL handshake is the host as specified on the request.
Expectation
Shall be possihble to indicate the server name explicitly.  Example API usage below with "setServerNameIndicator".  This allows a single address to be used with multiple individual server certificates, while avoiding DNS server changes to provision all the different server names.
RequestOptions options = new RequestOptions()
.setMethod(HttpMethod.PUT)
.setHost("proxy.provider.com")
.setPort(8081)
.setURI("/proxy");

HttpClientRequest request = client.request(options);

HttpClientOptions clientOptions = new HttpClientOptions();
clientOptions.setProtocolVersion(HttpVersion.HTTP_2);
clientOptions.setSsl(true);
clientOptions.setUseAlpn(true);
clientOptions.setForceSni(true);
clientOptions.setServerNameIndicator("verizon.provider.com");

Version
3.9.1 and 4.0.0 mil5
Context
Running secure HTTP2 requests into HttpServer with SNI.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3574
Allow to define a timer with no delay (handler is invoked immediately) by Xophe · Pull Request #3574 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'll retry in a better way.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3575
Allow to pass a delay of 0 to setTimer() by Xophe · Pull Request #3575 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Allow to pass a delay of 0 to setTimer() (handler is called back immediately).
First motivation : have the same code whether delay is zero or more
Second motivation : break callback chain by sometimes invoking setTimer(0, l -> cb()); in order to have the cb invoked by the mainloop instead of by the current code.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3576
Dont call client metrics reset when the request has not been sent · Issue #3576 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When an HTTP client request has been reset soon after it was scheduled, the client will assume that the request was sent and emit a reset event to the metrics implementation. The metrics implementation truthfully assume that a request begin event was previously emitted and it might not be the case leading to an unexpected state. We should only emit a reset event when an HTTP request object has been created.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3577
End handler not invoked when Websocket is closed on server side (without receipt of close frame) · Issue #3577 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.2
Context
Websocket converted to a FlowableReadStream no longer signals completion if the socket is closed without the receipt of a close frame.  We noticed this because our metrics told us that we were "leaking" web socket connections after we switched to Vert.x 3.9.x.  The decrement of the value used for this gauge occurs when the FlowableReadStream created from a web-socket (using FlowableHelper.toFlowable) completes for any reason.  However, this is no longer occurring when the socket is closed due to an idle timeout in our Nginx layer.
Do you have a reproducer?
https://gist.github.com/sfitts/395223e48491782e5837378772bc95bf
The referenced test passes on 3.8.5 and fails on 3.9.2.
Extra
This behavior change is due to the fact that the "endHandler" is no longer invoked as part of explicit close processing.  That change was made in commit -- 763b9b5.  Note that prior to this the endHandler was invoked during handleClosed, now it is only invoked on the receipt of an explicit close frame.
If the new behavior is expected/correct, then the FlowableReadStream will need to be modified so that it can terminate when a close occurs in this manner (I'm not sure if it can since I don't see any place to hook when that happens).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3578
Rework HttpClient tunnel creation by vietj · Pull Request #3578 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A few important improvements concerning NetSocket on top of HTTP.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3579
Add some form of attribute storage to HttpServerRequest · Issue #3579 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
At the moment there is no way to attach arbitrary data to the HttpServerRequest. If you are using Vert.x Web the RoutingContext has the ability to store arbitrary data in the context, it would be very helpful if this was also added to the HttpServerRequest (with the routing context changed so it's attributes are backed by the request, so you don't have two attribute maps).
Some of the use cases we have for this in Quarkus:

The metrics object that is created by io.vertx.core.spi.metrics.HttpServerMetrics#requestBegin is not available to any handlers that want to add data to it, and there is no way to propagate it to these handlers. If we had an attribute map we could store it as an attribute.
We have a QuarkusRequestWrapper that adds some extra functionality (such as configurable SameSite support for cookies), but there is no way to access this object once it has been passed into the router (as the router also wraps the request). If there was an attribute map this would be much easier (at the moment we use a fake Cookie implementation and use the cookies map as an attribute map).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3580
Integrate DSL-Json in vertx for default data binding instead of Jackson  · Issue #3580 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Team ,
please look DSL-JSON library as default option for data binding instead of jackson , its quite faster for serialization/deserialization
https://github.com/ngs-doo/dsl-json
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3581
Fixes Resolver delete race against file resolve by pmlopes · Pull Request #3581 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I've applied the "fixes" from the comments and added a few extra checks:

on close, if the shutdown hook is null, avoid enter a synchronized block.
the shutdown hook thread, will not spawn a new thread with deadline to delete the cache if a delete is already in progress.
the resolve file operation will throw ISE if the cache dir is being deleted

All validation tests pass on my side + the issue that was used to identify the problem (vertx-web tests) also pass on my side (no leaks of caches to the CWD or TMP.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3582
Expect to configure decoders when using NetServer · Issue #3582 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
When I use the following code
NetServer server = vertx.createNetServer();
server.connectHandler(socket -> {
  socket.handler(buffer -> {
    System.out.println("I received some bytes: " + buffer.length());
  });
});
The objects I receive are always of type Buffer,Is it possible to add a configuration item to be able to add netty decoders,and adding a method to the NetSocket interface to receive the decoded object.
NetSocket handlerMessage(Handler<Object> obj);
It works like this
    NetServer server = vertx.createNetServer();

    server.configureChannelPipeline(pipeline->{
      //pipeline is io.netty.channel.ChannelPipeline
      pipeline.addFirst("myDecoder", new MyDecoder());
    });

    server.connectHandler(socket -> {
      socket.handlerMessage(msg -> {
        //msg is of type Object
        if(msg instanceof CustomMessage){
          //...
        }
      });
    });
Or is there a way to implement this feature in the current version
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3583
InternalError eventbus failure type by tsegismont · Pull Request #3583 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj when this PR is approved, I will merge it and cherry-pick to 3.9 branch. Then I will update the master branch to bump the protocol version.
See the Proposal section of #3406.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3584
Vert.x HTTP server on port 0 and MQTT client issue · Issue #3584 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
This issue has been reproduced in Quarkus, but looks Vert.x specific.
In this use case, the HTTP verticle (start the HTTP server) instances (depending on the machine, but 8 in my case) are configured to listen on the port 0 (so dynamic binding). At the same time as the HTTP verticle start, an MQTT client is created and connect to an MQTT server.
The HTTP server cannot bind to the port, failing with a Bind exception.
Version
The code works with Quarkus 1.7 (Vert.x 3.8.5) and fails with Quarkus 1.8.1 (Vert.x 3.9.2).
Do you have a reproducer?
Reproducer available on:
smallrye/smallrye-reactive-messaging#778
Steps to reproduce

Download an unzip
Start MQTT server - docker run -p 8080:8080 -p 1883:1883 hivemq/hivemq4
mvn compile quarkus:dev
Boom

You can override the Vert.x version by declaring a dependency in the pom.xml file.
Extra

if you start the MQTT client before or after it works
if you debug, it works - probably a timing exception
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3585
HTTP streamed read/write event metrics reporting · Issue #3585 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of read/write metric events reports a single event with the total length when the stream lifecycle ends. While this is a correct way to proceed, it lacks of accuracy when streaming happens.
We can improve this behavior and instead report a read/write metric event when the accumulated value gets above a threshold (4K). e.g instead of reporting 17K at once, we might instead report (4K, 8K, 4K, 1K).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3586
Change the implementation of HTTP read/write metrics event to report … by vietj · Pull Request #3586 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you have a look @jotak ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3587
Update HttpServerMetrics to use observability HttpRequest/HttpRespons… by vietj · Pull Request #3587 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jotak here is the PR for the changes we discussed
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3588
Fix NPE: call metrics callback in block finally by jotak · Pull Request #3588 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj I think there was still an issue with metrics, here's a fix
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3589
Adding the cause to the ISE by pmlopes · Pull Request #3589 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3590
Multiple web client connections created instead of utilizing existing initial connection · Issue #3590 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
If we set the server to a larger number of max concurrent threads like 250 streams, and only send 100 requests on the webclient, which is using a max pool size of 8, it seems that 8 connections are created instead of using the single connection for all the streams.
Version
3.9.1
Context
See reproducer
Do you have a reproducer?
A reproducer is a simple project hosted on GitHub (or another forge supporting git clone operation) that has a build file that can be executed to reproduce the issue.
Reproducers are very helpful for contributors and will likely help them fixing your bug faster.
https://github.com/pantinor/vertx.issues/blob/main/issues/src/test/java/vertx/demo/StreamsVertxOnlyTest.java
Steps to reproduce
Run the test above, note the failure on the assertion for expecting 1 connection instead of 8.
Extra

Anything that can be relevant such as OS version, JVM version
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3591
Generic keystore based KeyCert/Trust options · Issue #3591 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x provides specialized usage of KeyStore for loading KeyCertOptions and TrustOptions as JksOptions and PfxOptions.
Sometimes it can be desirable to use another implementation such as the ones provided by Bouncy Castle. We can add a more generic KeyStoreOptions to serve that purpose.
Fixes also #3262
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3592
New generic KeyStoreOptions by vietj · Pull Request #3592 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
PTAL @pmlopes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3593
Set appropriate permissions for cache directory · Issue #3593 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3594
Issues/3593 by pmlopes · Pull Request #3594 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3595
CompositeFuture.allOf, anyOf, joinOf with generics by julianladisch · Pull Request #3595 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
for the moment we cannot accept this as we would like this to avoid using @GenIgnore
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3596
Allow to specify use setInstances in deployVerticle for non default Constructor · Issue #3596 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Currently it is only possible to pass DeploymentOptions().setInstances(int x) when deployVerticle(String var1, DeploymentOptions var2) is used. In other words if you have a verticle that has non default empty constructor you can not deploy multiple instaces using DeploymentOptions().setInstances(int x) as you will get error: Can't specify > 1 instances for already created verticle
To bypass this you can create a for loop like this:
for(int i = 0; i < x; i++) {
  vertx.deployVerticle(new SomeVerticle(object1, object2), new DeploymentOptions());
}

Also if you are using javarx2 you can do something like this:
vertx.rxDeployVerticle(new SomeVerticle(object1, object2),
                new DeploymentOptions())
                .repeat(x)
                .toList()
                .ignoreElement();

I would suggest to allow this via DeploymentOptions().setInstances(int x) as clearly end result is same and I don't see the point having this exception.
Expected to work after enhancement:
vertx.deployVerticle(new SomeVerticle(object1, object2), new DeploymentOptions().setInstances(int x));
@pmlopes mentioned on gitter that it is possible to achieve in vertx 4 with Supplier API.
vertx.deployVerticle(() -> new SomeVerticle(object1, object2), deploymentOptions)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3597
Server/client bypassing the WebSocket close frame · Issue #3597 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClient and HttpServer are omitting to send a WebSocket close frame when a connection a WebSocket. When an HTTP connection is closed, the connection should close the underlying WebSocketBase in order to send the close frame instead of merely closing the HTTP connection.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3598
WebClient HttpRequest.sendStream() hangs when server close connection · Issue #3598 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx-core: 3.8.5
vertx-web: 3.8.5
vertx-web-client: 3.8.5
Context
We have noticed that WebClient HttpRequest.sendStream() hangs when Server close connection
There are a few steps to catch it:

Execute WebClient HttpRequest.sendStream (https://vertx.io/docs/kdoc/vertx/io.vertx.ext.web.client/-http-request/send-stream.html) to send body as stream to external server. In our case it is Vertx HttpServer.
After some time external HttpServer close connection by some reason (machine restarted/fall down or idleTimeout is reached).
We expect to see that client will catch error "connection was closed". But there are no any errors and client simply hangs... and waiting for response...

That is really strange for us because other method HttpRequest.sendBuffer catch it.
Reproducer
See project on github. Class WebClientSendStreamTest.java and method uploadStreamRequestTest()
https://github.com/VMalko/vertx-send-stream/blob/master/src/test/java/WebClientSendStreamTest.java
Steps to reproduce

Execute method uploadStreamRequestTest() of class WebClientSendStreamTest.java
After 2 sec HttpServer will close connection
Client will hangs on it...
...

Extra
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3599
Fix incorrect behavior for `SucceededFuture#otherwise(Object)` since 4224779 by hltj · Pull Request #3599 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
cool thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3600
Vertx.deployVerticle(…); calls completion handler on different context · Issue #3600 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm using io.vertx:vertx-core:3.9.3 and I have some code in a Verticle that looks similar to this:
assert Vertx.currentContext() == context;
vertx.deployVerticle(someVerticle, new DeploymentOptions().setWorker(true), result -> {
  assert Vertx.currentContext() == context; // <-- AssertionError is thrown here
  ...
});
The second assertion sometimes fails. I expect deployVerticle(…) to always call the completion handler in the context from where it was called. Was this assumption wrong or is this a bug in Vert.x? The Javadoc does not say anything about it but here is a quote from the manual:

When you call any other methods that takes a handler on a core API from an event loop then Vert.x will guarantee that those handlers, when called, will be executed on the same event loop.

I also noticed that the assertion only seems to fail when the deployment fails with the following reason.

Verticle deployment failed.Could not be added as child of parent verticle

In my experience, this means that the Verticle where I call the method was stopped. When the assertion fails, the context returned by Vertx.currentContext() outside and inside the completion handler are named like EventLoopContext@35d0ced2 and io.vertx.core.impl.WorkerContext@1bf4c13e respectively. (Maybe Vert.x calls the handler from the context of the worker which was about to be started?)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3601
eventbus inboundInterceptor event executed out of context · Issue #3601 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vertx 4.0.0.beta3
As part of contextual data flow we found that insight inboundInterceptor event, vertx context is null. Following unit test that reproduce the issue:
package io.vertx.ext.contextual.tracing;

import java.util.Objects;
import java.util.UUID;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Promise;
import io.vertx.core.Vertx;
import io.vertx.core.impl.ContextInternal;
import io.vertx.core.logging.Log4j2LogDelegateFactory;
import io.vertx.junit5.VertxExtension;
import io.vertx.junit5.VertxTestContext;

@ExtendWith(VertxExtension.class)
class EventBusTest2 {
	static{
		System.setProperty("vertx.logger-delegate-factory-class-name",
				Log4j2LogDelegateFactory.class.getName());	
	}
	
	private static final String EVENT_ADDRESS = ".eventbus.test1";
	private static final String CONTEXTUAL_KEY = "val";
	
	private static Logger logger = LogManager.getLogger(EventBusTest2.class);
	
	private static class TestVerticle extends AbstractVerticle {
		
		private static Logger internalLogger = LogManager.getLogger(TestVerticle.class);
		private VertxTestContext testContext;
		
		public TestVerticle(VertxTestContext testContext) {
			this.testContext = testContext;
		}
		
		@Override
		public void start(Promise<Void> startPromise) throws Exception {
			vertx.eventBus().addInboundInterceptor(event ->{
				var value = event.message().headers().get(CONTEXTUAL_KEY);
				if(null != value) {
					logger.trace("put value: {} to context", value);
					put(CONTEXTUAL_KEY, value);
					if(null == Vertx.currentContext()) {
						logger.trace("No context found");
					}
				}
				event.next();
			});
			
			vertx.eventBus().consumer(EVENT_ADDRESS).handler(msg -> {
				logger.trace("msg:{}", msg.body());
				var expected = msg.body().toString();
				var actual = get(CONTEXTUAL_KEY);
				try {
					Assertions.assertEquals(expected, actual, CONTEXTUAL_KEY);
					testContext.completeNow();
				} catch(Throwable t) {
					testContext.failNow(t);
				}
			});
			
			startPromise.complete();
		}
	}
	
	@BeforeEach
	void setUp(Vertx vertx) throws Exception {
		
	}

	@Test
	void testPublish(Vertx vertx, VertxTestContext context) {
		logger.trace("testPublish");
		vertx.runOnContext(nil -> {
			vertx.eventBus().addOutboundInterceptor(event-> {
				var value = get(CONTEXTUAL_KEY);
				if(null != value) {
					logger.trace("put contextual value: {} to header", value);
					event.message().headers().add(CONTEXTUAL_KEY, value);
				}
				event.next();
			});
			vertx.deployVerticle(new TestVerticle(context))
			.map(id -> {
				String value = UUID.randomUUID().toString();
				put(CONTEXTUAL_KEY, value);
				logger.trace("publish:{}", value);
				vertx.eventBus().publish(EVENT_ADDRESS, value);
				return null;
			});
		});	
	}
	
	@Test
	void testSend(Vertx vertx, VertxTestContext context) {
		logger.trace("testSend");
		vertx.runOnContext(nil -> {
			vertx.eventBus().addOutboundInterceptor(event-> {
				var value = get(CONTEXTUAL_KEY);
				if(null != value) {
					logger.trace("put contextual value: {} to header", value);
					event.message().headers().add(CONTEXTUAL_KEY, value);
				}
				event.next();
			});
			vertx.deployVerticle(new TestVerticle(context))
			.map(id -> {
				String value = UUID.randomUUID().toString();
				put(CONTEXTUAL_KEY, value);
				logger.trace("send:{}", value);
				vertx.eventBus().send(EVENT_ADDRESS, value);
				return null;
			});
		});	
	}
	
	private static String put(String key, String value) {
		Objects.requireNonNull(key);
		Objects.requireNonNull(value);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx == null) {
			if (logger.isTraceEnabled()) {
				logger.trace("Attempt to set contextual data from a non Vert.x thread");
			}
			return null;
		} else {
			return contextualDataMap(ctx).put(key, value);
		}
	}

	public static String get(String key) {
		Objects.requireNonNull(key);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx != null) {
			return contextualDataMap(ctx).get(key);
		}
		return null;
	}
	
	private static ConcurrentMap<String, String> contextualDataMap(ContextInternal ctx) {
		Objects.requireNonNull(ctx);
		return (ConcurrentMap<String, String>) ctx.localContextData().computeIfAbsent(EventBusTest2.class, k -> new ConcurrentHashMap<String,String>());
	}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3602
Worker thread pool name doesn't work well with Graphite · Issue #3602 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.2
Context
Graphite uses a dot . to separate metric paths into folders. So a metric such as vertx.http.servers.<host>:<port> will be separated into vertx / http / servers / <host>:<port>.
The problem is with the worker thread pool name that is being set in io.vertx.core.impl.VertxImpl:
PoolMetrics workerPoolMetrics = metrics != null ? metrics.createPoolMetrics("worker", "vert.x-worker-thread", options.getWorkerPoolSize()) : null;
Because it uses "vert.x" instead of "vertx" like in other places, it will create the wrong folder structure -
vertx/ pools / worker /vert / x-worker-thread
It would be much better if the dot can be removed from names that are used in metrics.
Extra
I am using vertx-dropwizard-metrics.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3603
Parent child deployment: verify context by tsegismont · Pull Request #3603 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #3600
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3604
Deployment failure was reported on wrong context by tsegismont · Pull Request #3604 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #3600
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3605
Filesystem classloader resolution by vietj · Pull Request #3605 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@pmlopes this is a draft PR for allowing the creation of an (internal) FileSystem that resolve resources using a classloader.

the FileResolver was refactored to encapsulate cache operations in a FileCache class so 2 instances of a FileResolver will use the same instance to access the Vert.x resolver cache.
the FileSystem was updated to use FileResolver instead of VertxInternal#resolveFile
VertxInternal now can create a FileSystem using a class loader, this shall be used by StaticHandler when passed a class loader
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3606
Verticle deployment class loader · Issue #3606 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Verticle deployment has been using the implicit thread context classloader for the VerticleFactory and the io.vertx.core.Context class loader. This classloader is used indirectly by code that needs to resolve file in some places (e.g HttpServerResponse#sendFile(String)). Until now the only possibility to use a specific classloader was the set a temporary thread context classloader in some places (such as deploying a verticle or sending a file).
The DeploymentOptions will now hold an optional classloader that will be passed to the VerticleFactory and associated with the Context. When no classloader is provided, the current thread context classloader is used.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3607
Verticle deployment class loader - fixes #3606 by vietj · Pull Request #3607 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@pmlopes @cescoffier this is the deployment context classloader PR
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3608
Minor Optimisations by stuartwdouglas · Pull Request #3608 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3609
Allow JsonObject.put(Entry) - or - let MultiMap.forEach return (key, value) · Issue #3609 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Small improvement to code readability when dealing with Maps/Multimaps
When I want to store a map (after filter, map etc) into a JsonObject I can write
Map myMap = .....;
JsonObject result;

myMap.forEach(result::put);

with a MultiMap I need to write:
MultiMap myMultiMap = .....;
JsonObject result;

myMultiMap.forEach(entry -> result.put(entry.getKey(), entry.getValue());

Letting JsonObject.put accept an Entry<String, Object> would make code for Map and Multimap look similar/nicer
Of course having MultiMap emit (k,v) would be more universal, but a breaking change (which might not be worth it_
Use cases
Clean code
Contribution
I could give it a stab
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3610
Issue on vertx4 milestone 5 replacement of VertxFactory class. · Issue #3610 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I am trying to upgrade my vertx 3.6.3 app to vertx 4 and I noticed that there is one issue that might be a problem in this vertx change.
It moved io.vertx.core.spi.VertxFactory to io.vertx.core.impl.VertxFactory, but the file in META-INF/ is still called io.vertx.core.spi.VertxFactory, so, whenever I call ServiceHelper.loadFactory(VertxFactory.class); I get

Cannot find META-INF/services/io.vertx.core.impl.VertxFactory on classpath

Shouldn't the file be renamed too?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3611
Add a tracing policy to enable fine grained tracing per component con… by vietj · Pull Request #3611 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ping @jotak
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3612
Reverse proxy solution from Vertx · Issue #3612 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Is there any reverse proxy solution available from Vertx like Netflix zuul?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3613
Enhance `RecordParser` to support customer protocols · Issue #3613 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Enhance RecordParser to support customer protocols
just like what LengthFieldBasedFrameDecoder in netty does
in vertx 3.9.3
I have used this way to parser my customer protocol that contains length fields in the header
public class ParserVerticle extends AbstractVerticle {
  RecordParser parser = RecordParser.newFixed(4);
  int length = -1;
  @Override
  public void start(Promise<Void> startPromise) throws Exception {
    parser.setOutput(b -> {
      if (length == -1){
        length = b.getInt(0);
        parser.fixedSizeMode(length);
      }else {
        String s = b.toString(StandardCharsets.UTF_8);
        System.out.println(s);
        parser.fixedSizeMode(4);
        length = -1;
      }
    });
    byte[] b1 = "dreamlike".getBytes(StandardCharsets.UTF_8);
    byte[] b2 = "ocean".getBytes(Charset.defaultCharset());
    Buffer buffer = Buffer.buffer().appendInt(b1.length + b2.length).appendBytes(b1);
    parser.handle(buffer);
    //Simulate chunk transfer
    parser.handle(Buffer.buffer(b2));
  }
}
Use cases
A more elegant way to parse it
Contribution
I don't have the ability to finish it，sorry
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3614
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3615
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3616
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3617
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3618
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3619
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3620
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3621
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3622
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3623
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3624
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3625
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3626
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3627
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3628
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3629
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3630
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3631
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3632
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3633
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3634
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3635
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3636
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3637
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3638
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3639
Fixes #3629: runs the upload handler on the caller context by pmlopes · Pull Request #3639 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
failed to merge this for 4.0.0 and somebody provided a similar PR we merged
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3640
Event bus improvements by vietj · Pull Request #3640 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@tsegismont you can review each commit separately to avoid mixing concerns
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3641
Minor update of Serializer for readability by tsegismont · Pull Request #3641 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj here's the minor update I talked about when reviewing #3640
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3642
JavaDoc that JsonObject#copy and JsonArray#copy make a deep copy by julianladisch · Pull Request #3642 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The JavaDoc should state whether the copy is shallow or deep.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3643
Add Future.toCompletableFuture() by julianladisch · Pull Request #3643 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@julianladisch the choice of exposing CompletionStage only was debated on vertx-dev and we made a decision.
Be careful with:
future.toCompletionStage().toCompletableFuture().get()
Most often the future will be completed on an event loop, so this will block it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3644
Allow space in Windows file path. by julianladisch · Pull Request #3644 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Now we can run tests on windows, but a few of them are failing. We should fix these tests first to have windows CI operational and then merge this PR as it specifically targets windows
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3645
HTTP server streaming file upload cancellation · Issue #3645 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current API does not allow to gracefully cancel a streaming file upload.
We should provide a cancel operation that cancels the file upload in progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3646
HTTP server file upload should delete incomplete uploads · Issue #3646 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HTTP server file upload should delete the created file upload when a streaming operation is aborted either due to a stream failure or if it was purposely cancelled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3647
Pipe operation should always end the write stream asynchronously · Issue #3647 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the pipe operation ends the write stream, it only uses the async operation on a success. On a failure the asynchronous version should be also used to complete to pipe completion future.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3648
Http server file upload improvements by vietj · Pull Request #3648 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A few improvements for the HTTP server improvements to simplify the cleanup operation in vertx-web upload handler
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3649
Run GitHub Action CI on windows · Issue #3649 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Currently a few tests are failing and we should fix them to have windows based CI.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3650
java.lang.IllegalStateException: Illegal type in JsonObject: class java.time.LocalDateTime · Issue #3650 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3651
Revert "Allow space in Windows file path." by vietj · Pull Request #3651 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Reverts #3644
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3652
Options are not redirected to redeploy · Issue #3652 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.4
Context
I was developing a vertx verticle using redeployment. When adding metrics, it seemed to not honor options properties. If I removed redeploy, it started working.
Do you have a reproducer?
Steps to reproduce

Add dependencies io.vertx.vertx-micrometer-metrics and io.micrometer.micrometer-registry-prometheus
In the start of the verticle create an httpServer and add this:


router.route("/metrics").handler(PrometheusScrapingHandler.create());
MeterRegistry registry = BackendRegistries.getDefaultNow();
new JvmMemoryMetrics().bindTo(registry);
new JvmThreadMetrics().bindTo(registry);


start with redeploy: run  -options "{\"metricsOptions\": {\"enabled\": true,\"prometheusOptions\": {\"enabled\": true}}}" com.package.MyVerticle --launcher-class=io.vertx.core.Launcher --redeploy=**/*.java
Fails:


2020-11-17 18:11:47.390 [GRAVE        ] io.vertx.core.impl.ContextImpl                               Unhandled exception
java.lang.NullPointerException
at io.micrometer.core.instrument.Gauge$Builder.register(Gauge.java:190)
at io.micrometer.core.instrument.binder.jvm.JvmMemoryMetrics.bindTo(JvmMemoryMetrics.java:62)

Extra
If you remove --redeploy:
run  -options "{\"metricsOptions\": {\"enabled\": true,\"prometheusOptions\": {\"enabled\": true}}}" com.package.MyVerticle --launcher-class=io.vertx.core.Launcher
It does work and you can see the metrics.
I found this could be a missing in io.vertx.core.impl.launcher.commands.RunCommand.startAsBackgroundApplication method. It copies "allArguments", but options are not included (maybe because they are in BareCommand), as others like ha, cluster, conf, etc. Those others are added manually, but not options.
I tried debugging to add options (just like conf, as two arguments) and it works. I suggest to added, don't know about what could imply, but seems to be reasonable to me.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3653
Allow space in Windows file path by julianladisch · Pull Request #3653 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@julianladisch I'm working on a PR that run test on windows, we should review and merge this PR after the window test PR.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3654
File resolver does partial cached class path directory listing · Issue #3654 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation takes care of unpacking the full content of an file's parent directory to ensure that listing this directory will return all the entries in the class path.
This works only for a single level and therefore the issue happens with 2 directories, e.g resolving the file /foo/bar/juu leads to listing /foo/bar to be correct but /foo will only contain /foo/bar.
There are several possible strategies to solve this:

simply unpack everything recursively: this is simple but can lead to performance issues, i.e it might introduce some spikes when cache is populated
add some state to record whether the listing is full or partial, this could be saved on disk (a dot file)
we only cache file and not directories, so directory listing would trigger a class path resolution and content listing, note this impacts the FileResolver API that always returns a File for a directory or a file.

Reproducer: modify FileResolverTestBase
  @Test
  public void testReadFileInDirThenReadDir() {
    Buffer buff = vertx.fileSystem().readFileBlocking("webroot/subdir/subfile.html");
    assertEquals(buff.toString(), "<html><body>subfile</body></html>");
    Function<List<String>, Set<String>> fx = l -> l.stream().map(path -> {
      int idx = path.lastIndexOf(File.separator);
      return idx == -1 ? path : path.substring(idx + 1);
    }).collect(Collectors.toSet());
    Set<String> names = fx.apply(vertx.fileSystem().readDirBlocking("webroot/subdir"));
    assertEquals(names, new HashSet<>(Arrays.asList("subdir2", "subfile.html")));
    names = fx.apply(vertx.fileSystem().readDirBlocking("webroot"));
    assertEquals(names, new HashSet<>(Arrays.asList("subdir", "somefile.html", "someotherfile.html", "this+that")));
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3655
Replace SystemUtils.IS_OS_LINUX by julianladisch · Pull Request #3655 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you explain why it does not work with Java 11 on Windows?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3656
File resolver should replace the file separator before parent file class loader lookup · Issue #3656 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The FileResolver replaces the file separator for a ClassLoader lookup however it does not do it for the parent file ClassLoader leading to issues on Windows.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3657
Windows ci by vietj · Pull Request #3657 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Enable GitHub actions CI on Windows, this fixes issues found when running the CI on this OS.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3658
Race condition throws an unhandled exception in CompositeFuture.all · Issue #3658 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
3.9.2, but this is likely in newer versions as well.
Context
When at least two futures executing on different threads are passed to CompositeFuture.all(), there is a race condition throwing an unhandled and unexpected exception if the futures both fail at virtually the same time.
The gap between this synchronized block in all method reached when a future fails
} else {
    synchronized(composite) {
        if (composite.isComplete()) {
            return;
        }
    }

    composite.fail(ar.cause());
}

and the synchronized block in doComplete method
private boolean doComplete(Object result) {
    synchronized(this) {
        if (this.result != null) {
            return false;
        }

        this.result = result;
    }

    this.promise.handle(this);
    return true;
}

can create a situation where a subsequent future/thread sees that composite.isComplete() is false, yet making it to doComplete method, returning false after seeing result is not null.
After returning from tryFail method, this then throws the unhandled and unexpected exception in fail method
public void fail(Throwable cause) {
    if (!this.tryFail(cause)) {
        throw new IllegalStateException("Result is already complete: " + (this.result == this ? "succeeded" : "failed"));
    }
}

Steps to reproduce
Here is a simple test with @RunWith(VertxUnitRunner.class) treating unhandled exceptions as unit test failures.
@RunWith(VertxUnitRunner.class)
public class CompositeFutureRaceConditionTest {

    private static final int NUM_ITERATIONS = 5000;
    private static final int NUM_THREADS = 4;

    @Test
    public void testRaceConditionRepeatedly(TestContext context) throws Exception {
        for (int i = 0; i < NUM_ITERATIONS; ++i) {
            raceCondition(context);
        }
    }

    private void raceCondition(TestContext context) throws Exception {
        List<Promise> promises = IntStream.range(0, NUM_THREADS)
                                          .mapToObj(i -> Promise.promise()).collect(Collectors.toList());
        List<Future> futures = promises.stream().map(Promise::future).collect(Collectors.toList());
        CompositeFuture compositeFuture = CompositeFuture.all(futures);

        ExecutorService executorService = Executors.newFixedThreadPool(NUM_THREADS);
        CountDownLatch countDownLatch = new CountDownLatch(NUM_THREADS);

        for (int i = 0; i < NUM_THREADS; ++i) {
            final int x = i;
            executorService.submit(() -> {
                countDownLatch.countDown();
                try {
                    countDownLatch.await();
                    System.out.println("Start fail: " + x + " | Thread: " + Thread.currentThread().getName());
                    promises.get(x).fail("Fail " + x);
                    System.out.println("End fail: " + x + " | Thread: " + Thread.currentThread().getName());
                } catch (Throwable t) {
                    t.printStackTrace();
                    context.fail(t.getMessage());
                }
            });
        }

        compositeFuture.onComplete(x -> {
            System.out.println("CompositeFuture onComplete called: " + x);
        });

        executorService.shutdown();
        boolean terminatedSuccessfully = executorService.awaitTermination(30, TimeUnit.SECONDS);
        context.assertTrue(terminatedSuccessfully);
    }
}

which should throw at least one exception, depending on the number of executions.
java.lang.IllegalStateException: Result is already complete: failed
	at io.vertx.core.impl.CompositeFutureImpl.fail(CompositeFutureImpl.java:214)
	at io.vertx.core.impl.CompositeFutureImpl.lambda$all$0(CompositeFutureImpl.java:46)
	at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:195)
	at io.vertx.core.impl.FutureImpl.tryFail(FutureImpl.java:202)
	at io.vertx.core.impl.FutureImpl.fail(FutureImpl.java:132)

Extra
Mac OS 10.15.7

openjdk version "11.0.6" 2020-01-14
OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.6+10)
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.6+10, mixed mode)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3659
Fix completion handling when removing sub by tsegismont · Pull Request #3659 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj this is the behavior of 4.0 already, no need for a master branch PR.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3660
Customized local port on Net/Http client by hradecek · Pull Request #3660 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For HTTP I think we should use instead RequestOptions so its specified per request and not globally
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3661
Generated Converters ignore base classes - JSON cannot be used to configure RabbitMQ · Issue #3661 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0.CR1
Context
From RabbitMQClient:
  static RabbitMQClient create(Vertx vertx, JsonObject config) {
    return new RabbitMQClientImpl(vertx, new RabbitMQOptions(config));
  }

From RabbitMQOptions:
public class RabbitMQOptions extends NetClientOptions {

  public RabbitMQOptions(JsonObject json) {
    super(json);
    init();
    RabbitMQOptionsConverter.fromJson(json, this);
  }

From RabbitMQOptionsConverter:
  public static void fromJson(Iterable<java.util.Map.Entry<String, Object>> json, RabbitMQOptions obj) {
    // No mention of super
    // No mention of NetClientOptions 
    // No mention of reconnectAttempts (or a bunch of other properties that RabbitMQ requires)
  }

Steps to reproduce

Create a JsonObject containing reconnectAttempts.
Create a RabbitMQOptions from it.
See that the reconnectAttempts is set to the default value (which is no reconnects)

Extra
From a RabbitMQ point of view this means that PR 106 breaks JSON configuration quite terminally.
I think this is a fundamental problem with the generated Converters, but it might be felt that the fix should just be in RabbitMQOptions (calling each converter in turn).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3662
Clustered consumer keeps local registration when unregistered · Issue #3662 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A method name was changed in EventBusImpl but not updated in ClusteredEventBus while re-working the clustering SPI.
This might have happened while rebasing #3132 on master.
The bug was not caught because we didn't have a test for unregistration.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3663
Clustered consumer keeps local registration when unregistered by tsegismont · Pull Request #3663 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
tests seem to pass but it looks like the failure is coming from the junit publish results.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3664
WebClient/HttpClient timeouts randomly · Issue #3664 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.4; 4.0.0.CR1
Context
We've built a "reverse proxy" that routes the incoming requests to a cluster of backend services based on a request header (X-Target-Host & Port).
The code is pretty simple and straightforward. We created an HttpServer that receives the connections on port 8080, and then a request handler with a single WebClient instance creates a new request and forwards it to the backend service.
On Mac OS:
When testing locally with jmeter, whenever we reach a total 8171/8170 requests, the WebClient timeouts for the in-flight requests. After a few timeouts it recovers and works again for another 8000 requests or so.
The backend service is mocked. We mocked it by creating another verticle, and we also tested with "mockserver".
On Windows:
It seems to work just fine.
On our production env on debian:slim:
In here we are using a real backend service. We noticed that these timeouts occur after just a 30, 40 requests. It seems that the error is more frequent when the response time of the backend service is higher.
What we tried so far:
We originally wrote the code with Vertx 3.9.4. We migrated to 4.0.0.CR1 but the error persists.
We also reimplemented it several times using Webclient and HttpClient.
We also wrote it using just callbacks, futures and promises.
We tried deploying 3 instances of our verticle instead of 1.
We tried with jdk8 and 11.
Tried on two different macs, and the same error occurs.
We extended the connection pools.
Tried with native transport.
Played a bit with keep-alive, notcpdelay, etc.
We wrote the entire buffer to the requests. We tried streaming. The behaviour is always the same.
Do you have a reproducer?
Yes

Link to github project/gist
https://github.com/diegomoreira001/reproducer-webclient-timeout

Inside the project there is a .jmx file with the jmeter test prepared.
This is a convoluted version of the code after many trials and errors. We wrapped everything inside a circuit breaker, we also tried executeBlocking, we tried creating one instance of webclient per request, etc...
Even with the simplest version of the code (without circuit breaker, without executeBlocking, etc.), we got the same error.
Steps to reproduce
On Mac:

Compile & package the project: mvn clean package:
Run the fat jar:
java -jar ./target/whatsapp-router-1.0-SNAPSHOT-fat.jar
Run jmeter, import the project .jmx file, and press play (or use the batch version).
It is currently configured with 2 threads and 5000 loops (it should die after 8170 requests aprox.)

There is also a JFR file included in the project generated with JDK8.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3665
CompositeFuture concurrent races · Issue #3665 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of CompositeFuture#all, CompositeFuture#any and CompositeFuture#join has races leading to throwing an exception to the caller when it should not. Those races don't affect the correctness of the future outcome.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3666
Rewrite the state management of composite future by vietj · Pull Request #3666 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3667
Rework generic KeyStoreOptions by vietj · Pull Request #3667 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I updated the PR with the provider, I think now this is ready for review.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3668
Connection pool exhausted when proxying with Pump and client closes connection prematurely · Issue #3668 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.3.3, 3.9.4
Context
Connection pool exhausted when proxying requests with Pump and application client closes connection before it is fully processed by the server.
Do you have a reproducer?
https://gist.github.com/cartmanez/e719e753fadec4b53058be948617a898
Steps to reproduce
To reproduce I run
ab -n 1000 -c 50 http://localhost:8080/

and stop it in the middle of execution. After that connection pool is exhausted and any request to demo app just hangs forever.
Output of lsof -i shows that there are unclosed by the app connections that eventually have CLOSE_WAIT status
Extra
This issue seems to be exact duplicate of #1244 . The issue was closed however I doubt it was fixed.
Relevant discussions in google groups:
https://groups.google.com/g/vertx/c/77_JUc3mEuY/m/7akDHTrXCwAJ
https://groups.google.com/g/vertx/c/9x2p7AGx7kM/m/6w4mIfXQCgAJ
As far as I understand my possible solutions are a) stop using Pump or b) stop using connection pooling. I do not like both
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3669
Intermittent failure in testClusteredUnregistration by tsegismont · Pull Request #3669 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This fixes the issue with Hazelcast CM build.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3670
Throws IllegalStateException("cacheDir is null") when using filesystem in JVM shutdown hook · Issue #3670 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
When using vertx filesystem operation in a JVM shutdown hook, it throws  java.lang.IllegalStateException: cacheDir is null.
My code is :
import io.vertx.core.Vertx
import org.scalatest.FunSuite
import org.slf4j.LoggerFactory

class Vertx4Test extends FunSuite {
  private val log = LoggerFactory.getLogger(getClass)

  test("vertx4ShutdownHookTest") {
    val vertx = Vertx.vertx
    Runtime.getRuntime.addShutdownHook(new Thread(() => {
      val fileName = "test.txt"
      val exist = vertx.fileSystem().existsBlocking(fileName) //other filesystem operations behave as same
      log.info("{} exists?{}", fileName, exist)
    }))
  }
}
Console output:
Exception in thread "Thread-2" java.lang.IllegalStateException: cacheDir is null
	at io.vertx.core.file.impl.FileCache.getFile(FileCache.java:138)
	at io.vertx.core.file.impl.FileResolver.resolveFile(FileResolver.java:135)
	at io.vertx.core.impl.VertxImpl.resolveFile(VertxImpl.java:825)
	at io.vertx.core.file.impl.FileSystemImpl$20.perform(FileSystemImpl.java:1110)
	at io.vertx.core.file.impl.FileSystemImpl$20.perform(FileSystemImpl.java:1108)
	at io.vertx.core.file.impl.FileSystemImpl.existsBlocking(FileSystemImpl.java:491)
	at io.github.leibnizhu.repeater.http.Vertx4Test.$anonfun$new$2(Vertx4Test.scala:18)
	at java.lang.Thread.run(Thread.java:748)
Version
When runing this test with vert.X 4.0.0.CR2 or 4.0.0.CR1, it happens;
But it runs normally with 4.0.0-milestone5, with console output as below:
2020-11-26_10:08:56 [Thread-2] INFO i.g.l.r.h.Vertx4Test:18: test.txt exists?false
Context
None
Do you have a reproducer?
Refer to the code above...
or in github: https://github.com/Leibnizhu/WecomBotRepeater/blob/master/src/test/scala/io/github/leibnizhu/repeater/http/Vertx4Test.scala
Steps to reproduce

clone git code in https://github.com/Leibnizhu/WecomBotRepeater/ ;
execute  mvn -Dsuites=io.github.leibnizhu.repeater.http.Vertx4Test test, and test pass ;
change vertx version in pom.xml, line 21, to '4.0.0.CR2' or '4.0.0.CR1' ;
execute  mvn -Dsuites=io.github.leibnizhu.repeater.http.Vertx4Test test, and throws java.lang.IllegalStateException

Extra
Other modules/software/jvm versions:

scala.version: 2.12.4
scala-test.version: 3.0.5
JVM: 1.8.0_162
System: MacOS big sur 11.0.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3671
integration with log4j2: [NullPointerException] An exception occurred processing Appender Console · Issue #3671 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
When I set Log4j2's pattern of Console with "%highlight" or "%style", a NullPointerException was threw.
Version
4.0.0.CR2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3672
HttpServer is still listening after close() if there is 2 instance listened on the same port · Issue #3672 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
If main verticle deploy just one sub verticle, the server will be closed successfully. But it will failed if there is more than one sub verticle.
Steps to reproduce

I deploy a main verticle and it will start a http server listening on the port 8000.
The main verticle will deploy 2 sub verticle after I request  "/strart".
Each sub verticle will start a http server listening on the port 9000, and now I can request "/hello".
Request "/stop" to stop the 2 sub verticle, but I can still get a response when I request "/hello".

Version
The version of vertx-core and vertx-web is 3.9.0
JDK is graalvm-ee-java11-20.1.1
Code
MainVerticle.java
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpServer;
import io.vertx.ext.web.Router;

public class MainVerticle extends AbstractVerticle {
    private HttpServer httpServer;
    private SubVerticle verticle1;
    private SubVerticle verticle2;

    @Override
    public void start() throws Exception {
        httpServer = vertx.createHttpServer();

        Router router = Router.router(vertx);
        router.route("/start").handler(routingContext -> {
            verticle1 = new SubVerticle();
            vertx.deployVerticle(verticle1);
            verticle2 = new SubVerticle();
            vertx.deployVerticle(verticle2);
            routingContext.response().end("start");
        });
        router.route("/stop").handler(routingContext -> {
            vertx.undeploy(verticle1.deploymentID());
            vertx.undeploy(verticle2.deploymentID());
            routingContext.response().end("stop");
        });

        httpServer.requestHandler(router);
        httpServer.listen(8000, ar -> {
            if (ar.succeeded()) {
                System.out.println("main server is listening in port: " + httpServer.actualPort());
            }
        });
    }

    @Override
    public void stop() throws Exception {
        httpServer.close(ar -> {
            if (ar.succeeded()) {
                System.out.println("main server closed!");
            }
        });
    }

    public static void main(String[] args) {
        Vertx vertx = Vertx.vertx();
        vertx.deployVerticle(new MainVerticle());
    }
}

SubVerticle.java
import io.vertx.core.AbstractVerticle;
import io.vertx.core.http.HttpServer;
import io.vertx.ext.web.Router;

public class SubVerticle extends AbstractVerticle {
    private HttpServer httpServer;

    @Override
    public void start() throws Exception {
        httpServer = vertx.createHttpServer();
        Router router = Router.router(vertx);
        router.route("/hello").handler(routingContext -> {
            routingContext.response().end("hello world!");
        });
        httpServer.requestHandler(router);
        httpServer.listen(9000, ar -> {
            if (ar.succeeded()) {
                System.out.println("sub server is listening in port: " + httpServer.actualPort());
            }
        });
    }

    @Override
    public void stop() throws Exception {
        httpServer.close(ar -> {
            if (ar.succeeded()) {
                System.out.println("sub server is closed!");
            }
        });
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3673
Generic KeyStoreOptions · Issue #3673 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vert.x provides specialized usage of KeyStore for loading KeyCertOptions and TrustOptions as JksOptions and PfxOptions.
Sometimes it can be desirable to use another implementation such as the ones provided by Bouncy Castle. We can add a more generic KeyStoreOptions to serve that purpose.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3674
streamId missing in HttpServerRequest · Issue #3674 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As simple as that.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3675
Header Guard not compatible with the Server-Sent Events specification · Issue #3675 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Regarding the specification for Server-Sent Events multiple EventSource objects can share the same HTTP2 stream:
"It's possible for one active network connection to be shared by multiple EventSource objects and their fetch algorithms,"
I have inspected the HTTP2 stream of the vert.x server and I can approve that the Browsers (both Chromte and Firefox) use the same HTTP2 streamId for multiple EventSource objects.
The new Header guard as implemented in the HTTP2ServerResponseImpl prevents the browser to share multiple EventSource objects on the same stream. The vert.x server throws an exception "Header already sent" (more details in the linked issue )
For the EventSource to complete the handshake the server should respond with a specific header which in turn would conflict the HTTP protocol. I guess that the browsers should not share the same HTTP stream for multiple EventSource objects. What do you think?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3676
Native image: Issues with VertxUnsafeHeapByteBuf · Issue #3676 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
My native-image.properties are
Args = --initialize-at-build-time=io.netty,io.vertx,com.fasterxml.jackson,org.slf4j,software.amazon.awssdk\
       --initialize-at-run-time=com.google.protobuf.ExtensionRegistryFactory,io.netty.handler.ssl.ReferenceCountedOpenSslServerContext,io.netty.handler.ssl.JdkNpnApplicationProtocolNegotiator,io.netty.handler.ssl.ReferenceCountedOpenSslEngine,io.netty.handler.ssl.ConscryptAlpnSslEngine,io.netty.handler.ssl.JettyNpnSslEngine,io.netty.handler.ssl.ReferenceCountedOpenSslClientContext,io.vertx.core.net.impl.transport.EpollTransport,io.vertx.core.net.impl.transport.KQueueTransport,io.netty.handler.ssl.ReferenceCountedOpenSslContext,io.netty.handler.ssl.JettyAlpnSslEngine$ServerEngine,io.netty.handler.ssl.JettyAlpnSslEngine$ClientEngine,io.netty.util.internal.logging.Log4JLogger\
       --enable-url-protocols=http,https \
       -H:+UseServiceLoaderFeature \
       -H:IncludeResources=(META-INF/|vertx-default-jul-logging).* \
       -H:ReflectionConfigurationFiles=classes/${.}/reflection.json

and I have the following error:
Error: Classes that should be initialized at run time got initialized during image building:
 io.vertx.core.buffer.impl.VertxUnsafeHeapByteBuf the class was requested to be initialized at run time (subtype of io.netty.buffer.AbstractReferenceCountedByteBuf). To see why io.vertx.core.buffer.impl.VertxUnsafeHeapByteBuf got initialized use --trace-class-initialization=io.vertx.core.buffer.impl.VertxUnsafeHeapByteBuf

However, if I add all listed classes to -initialize-at-run-time, I get the following error:
Error: Incompatible change of initialization policy for io.netty.buffer.PooledByteBufAllocator: trying to change RUN_TIME from the command line to BUILD_TIME from the command line
Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception
Error: Image build request failed with exit status 1
com.oracle.svm.driver.NativeImage$NativeImageError: Image build request failed with exit status 1
        at com.oracle.svm.driver.NativeImage.showError(NativeImage.java:1647)
        at com.oracle.svm.driver.NativeImage.build(NativeImage.java:1397)
        at com.oracle.svm.driver.NativeImage.performBuild(NativeImage.java:1358)
        at com.oracle.svm.driver.NativeImage.main(NativeImage.java:1317)
        at com.oracle.svm.driver.NativeImage$JDK9Plus.main(NativeImage.java:1829)

Version
Vertx 4.0.0 CR 2
Do you have a reproducer?

https://github.com/aws-samples/reactive-refarch-cloudformation

Steps to reproduce

Check out project
cd reactive-refarch-cloudformation/services/tracking-service/reactive-vertx
docker build . -t smoell/reactive-vertx:2.0-native -f Dockerfile-native
Change native-image.properties
Build again
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3677
Doc improvements for v4 by vietj · Pull Request #3677 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@jponge added feedback, PTAL :-)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3678
minor cleanups by dfa1 · Pull Request #3678 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thank you @julianladisch  for your review. I tried to fix everything you mentioned, please have another look.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3679
using empty array for Collection.toArray() by dfa1 · Pull Request #3679 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The posted motivation text is the same as https://github.com/JetBrains/intellij-community/blob/master/plugins/InspectionGadgets/src/inspectionDescriptions/ToArrayCallWithZeroLengthArrayArgument.html and should have proper attribution.
For background information please visit https://shipilev.net/blog/2016/arrays-wisdom-ancients/
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3680
Hostname validation by default, fixes SSL/TLS certificate host mismatch by julianladisch · Pull Request #3680 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I don't think it is correct to set the default value to HTTPS in NetClientOptions, setting this value should be done in HttpClientOptions subclass only
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3681
HTTP client max WebSockets · Issue #3681 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The max number of WebSocket is defined by the HTTP client pool size (HttpClientOptions#maxPoolSize). In Vert.x 4 there is no pooling of WebSocket TCP connections (since those are closed after usage) and they use a different pool than HTTP connections used for request/response. Both use maxPoolSize.
We should have a different setting with a better name : maxWebSockets with a default of 50 per endpoint instead of 4.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3682
FutureBase should additionally check if the context belongs to a closed vertx instance · Issue #3682 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
vert.x/src/main/java/io/vertx/core/impl/future/FutureBase.java
    
    
         Line 49
      in
      85ac0ea
    
  
  
    

        
          
           if (context != null && !context.isRunningOnContext()) { 
        
    
  



  
    
      vert.x/src/main/java/io/vertx/core/impl/future/FutureBase.java
    
    
         Line 66
      in
      85ac0ea
    
  
  
    

        
          
           if (context != null && !context.isRunningOnContext()) { 
        
    
  


These checks should also check if the context does not belong to a Vertx instance that has been close (i.e. a shut down event loop). vertx.close().onComplete( ... ) will create a Future referencing a context on the Vertx instance that was just closed. Then, the lambda passed to onComplete will execute in that closed context, which throws a RejectedExecutionException since the context's event loop group is shut down.
This is very puzzling, because vertx.close() creates a promise without a context.
This crops up in tests of mine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3683
TracingPolicy is used in public options so it should be annotated too by pmlopes · Pull Request #3683 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3684
publish,send not work · Issue #3684 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
EventBus publish send not work. consumer nerver target.
Version
3.9.4,
4.0.0.Beta3
,4.0.0.CR2,
4.0.0.CR1
Context
EventBus publish send to the address, the handler never target. but request can work.
Do you have a reproducer?
no
Reproducers are very helpful for contributors and will likely help them fixing your bug faster.

Link to github project/gist

Steps to reproduce
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.eventbus.EventBus;
public class WhatsHappened {
public static void main(String[] args) {
Vertx vertx = Vertx.vertx();
EventBus bus = vertx.eventBus();
vertx.deployVerticle(new NerverTarget());
// bus.consumer("",a->{});
bus.publish("target","1");
bus.send("target","2");
bus.request("target","3");
}
static class NerverTarget extends AbstractVerticle{
@OverRide
public void start() throws Exception {
vertx.eventBus().consumer("target",h->{
System.out.println(h.body());
});
}
}
}
result : 3
open comment : bus.consumer("",a->{});
result: 1,2,3
Extra
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3685
Future eventually transformation · Issue #3685 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Future type is missing an async transformation that is called independently of the result.
This type already have:

compose(Function<T, Future<U>>,Function<Throwable, Future<U>>)
compose(Function<T, Future<U>>)
recover(Function<Throwable, Future<U>>)

We are missing

eventually(Function<Void, Future<U>>)

This is useful for applying a finally semantic, e.g we have currently in SQL client pool the following code:
return pool.close(). compose(v -> {
  PromiseInternal<Void> promise = context.promise();
  factory.close(promise);
  return promise;
}).onComplete(v -> {
  if (metrics != null) {
    metrics.close();
  }
});
which should actually be:
return pool.close().compose(v -> {
  PromiseInternal<Void> promise = context.promise();
  factory.close(promise);
  return promise;
}, err -> {
  PromiseInternal<Void> promise = context.promise();
  factory.close(promise);
  return promise;
}).onComplete(v -> {
  if (metrics != null) {
    metrics.close();
  }
});
and with the new eventually:
return pool.close().eventually(v -> {
  PromiseInternal<Void> promise = context.promise();
  factory.close(promise);
  return promise;
}).onComplete(v -> {
  if (metrics != null) {
    metrics.close();
  }
});
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3686
Future eventually transformation - close #3685 by vietj · Pull Request #3686 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3687
Connection pool can create connections which ignore keep alive settings · Issue #3687 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.1 but this also happens on latest commit
Context
Since some time we've seen WebClient throwing Connection reset error on first request after a period of inactivity. I know that our gateway closes inactive connections after some time. The question was why WebClient doesn't close such connections, the default keep alive settings should remove inactive connections after 60 seconds. After some debugging I tracked the issue down to Pool having connections that don't have expirationTimestamp set. I believe there's some race condition with how connections are created and consumed. The flow is like this:

First request is started. First connection will be created but it takes significant time for it to be connected.
In the same time a second request is started. A second connection will be created but this one connects instantly.
Second request finishes.
Second connection is now available and it's used to complete the first request.
First connection has finished connecting but the waiter list is empty. It will sit unused in the pool. expirationTimestamp is not set so keep alive settings are ignored.
After some time our gateway closes the inactive connection by sending RST packet.
Third request is started, it will use that first connection (now closed on the gateway side) and throw Connection reset error.

Do you have a reproducer?
See here.
Note that I added a delay in HttpChannelConnector to simulate slow first connection. This reproduces the issue reliably. Of course in our environment I can reproduce the issue with unchanged vertx 3.9.1 and 3.9.4.
Steps to reproduce

Run IssueReproducer.java
Output should look like this

Connection satisfied waiters: 1
Request response: 200
Request response: 200
Connection with expiration
Connection with expiration
Connection with expiration
Connection with expiration
Connection satisfied waiters: 0
Connection with expiration
Connection with no expiration
Connection with expiration
Connection with no expiration
Connection with no expiration
...


A pool now has a connection that won't be removed even if its keep alive time passes (expirationTimestamp of this connection is 0).

Extra
Tested on Linux and macOS. JVM 11.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3688
No message codec for type should probably return a Future.failedFuture not throw · Issue #3688 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0.CR2
Context
Sending a message on the event bus with a missing codec throws an exception instead of returning a failed future.
java.lang.IllegalArgumentException: No message codec for type: class com.hiddenswitch.framework.impl.ConfigurationRequest
	at io.vertx.core.eventbus.impl.CodecManager.lookupCodec(CodecManager.java:101)
	at io.vertx.core.eventbus.impl.EventBusImpl.createMessage(EventBusImpl.java:232)
	at io.vertx.core.eventbus.impl.EventBusImpl.request(EventBusImpl.java:109)
	at io.vertx.core.eventbus.EventBus.request(EventBus.java:81)

Do you have a reproducer?
class SomeClass {
}
Vertx.vertx().eventBus().publish("1", new SomeClass());
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3689
Context close hooks need some kind of priority to prevent closing e.g. a PgPool used for undeployment · Issue #3689 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0.CR2
Context and Reproduction
Depending on when you create e.g. a PgPool, its close hook may run before or after a verticle stop in a way that is unexpected. In particular there are closeable resources you almost always want to run last. This is the case with the clustered event bus, for example, but is not well defined for things like database pools.
In this example, the verticle tries to use the pool while closing. This is okay:
class SomeVerticle extends AbstractVerticle {
  ...
  PgPool pool;
  void start(Promise<Void> promise) {
    ...
    pool = PgPool.pool(vertx, ...);
  }
  void stop(Promise<Void> promise) {
    pool.getConnection()
      .compose(conn -> ...)
      .map((Void)null)
      .onComplete(promise);
  }
}

vertx.deployVerticle(new SomeVerticle())
  .compose(vertx.close());

This will throw an exception that the pool is closed:
class SomeVerticle extends AbstractVerticle {
  ...
  PgPool pool;
  void start(Promise<Void> promise) {
    ...
  }
  void stop(Promise<Void> promise) {
    pool.getConnection()
      .compose(conn -> ...)
      .map((Void)null)
      .onComplete(promise);
  }
}

var pool = PgPool.pool(vertx, ...);
var verticle = new SomeVerticle();
verticle.pool = pool;
vertx.deployVerticle(verticle)
  .compose(vertx.close());

In one case, the pool is closed after the verticle's stop is complete. In another case, the pool is closed before the verticle's stop is complete, and its stop will fail with Pool is closed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3690
interface io.vertx.ext.auth.User · Issue #3690 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
public interface User {

  @Fluent
  @Deprecated
  User isAuthorized(String authority, Handler<AsyncResult<Boolean>> resultHandler);

  @Deprecated
  @Fluent
  default User isAuthorised(String authority, Handler<AsyncResult<Boolean>> resultHandler) {
    return isAuthorized(authority, resultHandler);
  }
}

Version
vertx-auth-common:3.9.4
Context
both isAuthorized(String authority, Handler<AsyncResult<Boolean>> resultHandler) and isAuthorised(String authority, Handler<AsyncResult<Boolean>> resultHandler)  declare   @Deprecated
so what method should i use in inteface User to authorise
the entire classpath is io.vertx.ext.auth.User
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3691
An event bus consumer handler's Message<> could benefit from a .reply() promise · Issue #3691 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Message<T> should have an API like
/**
 * Completable with a reply message, or fails if isSend was false.
 */
<T> Promise<V> reply();

Use cases
eventBus.<T>consumer("address", message -> doAsyncWork().onComplete(message.reply()));

Observe it ought to infer the arguments by the Future<V> returned by doAsyncWork().
It also gives you a handy way to tap into enhancements to Future, like reifying the stack for tracing or transmitting error messages via VertxException, the more APIs that look like this the better!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3692
HTTP 1.x client connection can get invalid keep alive value · Issue #3692 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of the HTTP 1.x client connection assumes that a client connection will always be used and thus the expiration timestamp is computed when the connection is recycled. In some case, a connection can be created but not used and then immediately stored in the pool. When this happen, the connection in the pool will have a different validity expectation as it will be considered as forever valid.
The connection validity should return a valid value before the connection gets recycled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3693
fix - remove ascii encoding from docs by kacperfronc · Pull Request #3693 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse contributor agreement ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3694
HTTP/2 server request stream identifier · Issue #3694 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A getter for the HTTP/2 stream id of a server request.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3695
Redeploy mode ignores --options arg by tsegismont · Pull Request #3695 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj can you please review? I will backport to 3.9 after it's merged (see related issue)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3696
Merge pull request #1 from eclipse/master by rammygit · Pull Request #3696 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
pulling from base
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3697
Future eventually returns the wrong Future · Issue #3697 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The new eventually method on Future returns an incorrect future:
<U> Future<U> eventually(Function<Void, Future<U>);
As we want to have a finally like semantic, the outcome of the future returned by the mapper function should not override the outcome of the original future on which eventually is called. The fixed signature is:
<U> Future<T> eventually(Function<Void, Future<U>>);
The returned future will get the outcome of the original future when the future returned by the mapper function completes.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3698
Future transform method · Issue #3698 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The Future type can be improved with this transform method:
<U> Future<U> transform(Function<AsyncResult<T>, Future<U>>);
This method is syntactic sugar for compose(Function<T, Future<U>>, Function<Throwable, Future<U>>).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3699
Improve Vert.x Future by fixing the eventually method (#3697) and add… by vietj · Pull Request #3699 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
…ing a transform method (#3698).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3700
Security addition on proxy protocol (real remote and source addresses) · Issue #3700 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Get an access to the real remote address when using Proxy Protocol. In the current implementation of proxy protocol, the field remoteAddress is replaced by the source IP from the proxy protocol request (and that shouldn't change). We should add the original source and destination IP somewhere in the context.
Use cases
The proxy protocol is used between a Load Balancer and servers. For security, servers should only accept requests from the Load Balancers to avoid malicious requests. Anyone familiar with this protocol can create requests and pretend to have a different IP.
Here is a plain text example of the protocol:
PROXY TCP4 {source IP} {destination IP} {source port} {destination port}
GET / HTTP/1.1


In this example, allowed requests from IP x.x.x.x should be something like :
PROXY TCP4 x.x.x.x a.a.a.a 58965 443
GET / HTTP/1.1

But a hacker can build wrong requests, for example a requests from h.h.h.h to y.y.y.y (he stole the IP x.x.x.x). The application will think that it was x who made the request. Which is wrong.
PROXY TCP4 x.x.x.x y.y.y.y 58965 443
GET / HTTP/1.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3701
sendForm(MultiMap) does not include Content-Length header leading to hung request · Issue #3701 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0
Context
I have a vertx+rxjava webclient trying to POST to a PHP application
Vertx WebClient > Docker (Caddy > PHP-FPM)
Caddy config:
handle {
	php_fastcgi phpfpm:9000
}

Do you have a reproducer?
MultiMap values = MultiMap.caseInsensitiveMultiMap();
values.add("field1", "value1");
values.add("field2", "value2");
WebClient client = WebClient.create(vertx);
HttpRequest<Buffer> request = client.post(80, "localhost", "/");
HttpResponse<Buffer> response = request
		.rxSendForm(values)
		.blockingGet();
log.info(response.bodyAsString());
client.close();

Results in this HTTP request as seen from Wireshark:
POST / HTTP/1.1
user-agent: Vert.x-WebClient/4.0.0
content-type: application/x-www-form-urlencoded
host: localhost:8080
transfer-encoding: chunked

field1=value1&field2=value2

I never get a response, wireshark never logs a response, the Single never completes, an XDEBUG breakpoint on the first line is never hit, and neither PHP nor Caddy log the request.
I believe the lack of content-length in the request is leaving the PHP server waiting. It appears to tie-up one of the FPM workers as running numerous requests like this concurrently results in an error:
[pool www] server reached pm.max_children setting (5), consider raising it

And all subsequent requests, no matter what the client, hang, at least until I quit the vertx app and wait for all the TCP timeouts to timeout.
I've tried changing the content type to multipart/form-data or using rxSendMultipartForm() but no luck. I did try posting to google.com and I immediately get an error but I think it's because its seeing the POST and rejecting it early.
Changing the request to be a simple POST via rxSend() works fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3702
Docs: there is no start(Future<Void>) in the AbstractVerticle · Issue #3702 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is a start(Future<Void>) in the Vertx Core docs.
But in Vertx 4.0, the start method in the AbstractVerticle and Verticle only accept a Promise<Void> paratmeter.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3703
ByteBuf leak reported by netty's ResourceLeakDetector · Issue #3703 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions

Is this a false positive?
how to supress this warning?

2020-12-14 16:40:57,871 ERROR [vert.x-eventloop-thread-1] io.netty.util.ResourceLeakDetector:reportTracedLeak[319] - LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.
Recent access records: 
Created at:
	io.netty.buffer.UnpooledByteBufAllocator.newDirectBuffer(UnpooledByteBufAllocator.java:96)
	io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:187)
	io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:178)
	io.netty.buffer.AbstractByteBufAllocator.buffer(AbstractByteBufAllocator.java:115)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.decodeAttribute(HttpPostStandardRequestDecoder.java:667)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.setFinalBuffer(HttpPostStandardRequestDecoder.java:640)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.parseBodyAttributes(HttpPostStandardRequestDecoder.java:612)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.parseBody(HttpPostStandardRequestDecoder.java:378)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.offer(HttpPostStandardRequestDecoder.java:310)
	io.netty.handler.codec.http.multipart.HttpPostStandardRequestDecoder.offer(HttpPostStandardRequestDecoder.java:49)
	io.netty.handler.codec.http.multipart.HttpPostRequestDecoder.offer(HttpPostRequestDecoder.java:223)
	io.vertx.core.http.impl.Http1xServerRequest.endDecode(Http1xServerRequest.java:555)
	io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:543)
	io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:535)
	io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:73)
	io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:189)
	io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:200)
	io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:187)
	io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:156)
	io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:144)
	io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:151)
	io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:144)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:102)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)
	io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:296)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:480)
	io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:378)
	io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	java.base/java.lang.Thread.run(Unknown Source)

Version
4.0.0
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3704
rxjava2: reactive Vertx should be injected in Junit 5 · Issue #3704 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In Vertx Rxjava 2 sample, I tried to use all vertx-rx-rxjava2 APIs instead of the vertex core.
But the io.vertx.reactivex.core.Vertx can not be injected in the JUnit 5 methods like the normal Vertx.
My application is based on the following stack:

Vertx 4.0.0
Java 11
Windows 10

I have to wrap it myself like this:
WebClient client = WebClient.create(new io.vertx.reactivex.core.Vertx(vertx));
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3705
rxjava2: ValidationHandler builder `build` method should return a rxjava2 specific ValidationHandler · Issue #3705 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I added web validaiton and rxjava 2 in my Rxjava project.
I used the  io.vertx.reactivex.ext.web.validation.ValidationHandler.
 ValidationHandler
                .builder(schemaParser)
                .body(Bodies.json(bodySchemaBuilder))
                //.body(Bodies.formUrlEncoded(bodySchemaBuilder))
                .build()
But the build() method returns io.vertx.ext.web.validation.ValidationHandler. I think it should be  io.vertx.reactivex.ext.web.validation.ValidationHandler.
Before applying it to the routing handlers, I have to wrap it again.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3706
The official website is not accessible · Issue #3706 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Cannot access vertx.io：ERR_SSL_VERSION_OR_CIPHER_MISMATCH
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3707
Fix intermittent failure with ZK cluster manager by tsegismont · Pull Request #3707 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes vert-x3/vertx-zookeeper#111
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3708
doc fixes by okou19900722 · Pull Request #3708 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3709
ConfigRetriever doesn't load properties file + small typo in factory name · Issue #3709 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0.CR1
Context
I have a verticle with example code for loading properties from documentation but nothing is loaded.
resources/conf/raw.properties
server.host=localhost
server.port=8080
multiple.values=1,2,3

code in verticle
ConfigStoreOptions propertyWithRawData = new ConfigStoreOptions()
    .setFormat("properties")
    .setType("file")
    .setConfig(new JsonObject().put("path", "conf/raw.properties").put("raw-data", true).put("hierarchical", true)
    );

ConfigRetriever configRetriever = ConfigRetriever.create(vertx, new ConfigRetrieverOptions().addStore(propertyWithRawData));

After handling of configRetriever.getConfig() the result is empty.
I do have another configuration config.json in resources/conf folder and that one is loaded properly by default.
I have also tried with Directory config store and "*.properties" pattern but with no luck.
Also during investigation I found a typo in io.vertx.config.impl.spi.FileConfigtoreFactory (missing 'S').
Lastly, I found it a bit difficult to use json files as properties source because in case of try/catch situations you can't just quickly comment out the setting if needed or add comments which describes each setting because json doesn't allow comments. That's also reason why I need loading of standard properties. There you can easily comment out the line and have the property loaded from another file due to overloading.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3710
Multipart attributes corrupted after upgrading netty to 4.1.51 · Issue #3710 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.5
Context
After upgrading the netty to 4.1.51, multipart form attributes is corrupted when file size is larger than buffer size in the netty.
Seems the attribute value is replaced by the file content

Link to github project/gist
https://gist.github.com/ngyukman/c48def66b414881dae919893389dfbd6

Steps to reproduce

start the server from gist
post with multipart and attribute test + a big file afterward (around 10MB is fine)
it returns bytes from binaries in the file with the same length of the sent attribute length, but not the correct value just sent in step 2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3711
[Regression] Vertx4 HttpServerRequest.uploadHandler() erases context. (2) · Issue #3711 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This is the same issue as #3629 , where the UploadHandler erases the context.
The reproducer from the original ticket: https://github.com/oscarfh/vertx-upload-handler-context is still reproducing the issue.
I am researching to add any new findings on this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3712
Add context to file upload handlers by oscarfh · Pull Request #3712 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
we need to have a test for this, otherwise the regression might come again
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3713
JsonObject.getInstant() doesn't work for timezone other than Z · Issue #3713 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.4
Context
JsonObject.getInstant() doesn't work if the date in the JSON contains a timezone other than 'Z'.
JsonObject o = new JsonObject();
o.put("good", "2020-12-17T15:10:11.002Z");
o.put("bad",  "2020-12-17T10:10:11.002-05:00");
//This works...
o.getInstant("good");
//This results in a DateTimeParseException: Text '2020-12-17T10:10:11.002-05:00' could not be parsed at index 23
o.getInstant("bad");

The JavaDoc of the functions says it complies with RFC-7493 so it assumes the date is encoded ISO 8601. RFC-7493 refers to RFC-3339 for definition of ISO 8601, which allows for offset timezones (time-zone = "Z" / time-numoffset).
I see in the code that ISO_INSTANT is used for formatting and parsing. Looks like it cannot parse anything other than Z for timezone. Seems to me that ISO_OFFSET_DATE_TIME would work better for parsing, but I'm not sure I understand all the subtle details between the two.
If the change can't be done, the JavaDoc should change to make it explicit that only dates formatted with the 'Z' timezone are accepted.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3714
WebSocket server connection close timeout · Issue #3714 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a WebSocket is closed by the server, it sends a close frame and  waits until it receives the echo close frame to close the TCP connection. We should have a timeout to close the TCP connection to prevent a server from keeping a WebSocket without receiving a close frame.
NOTE: this will not happen when an idle timeout is configured on the server which is a recommended practice.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3715
Incorrect default WebSocket client timeout value · Issue #3715 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClientOptions#DEFAULT_WEBSOCKET_CLOSING_TIMEOUT is 10000, however the value is in seconds and it should be 10 instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3716
Close WebSocket connection when the timeout value is zero · Issue #3716 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClientOptions#webSocketClosingTimeout timeout is disabled when the value is zero or negative. It can be useful to immediately close the connection when the value is set to 0 instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3717
A few WebSocket improvements - close #3716 - close #3715 - close #3714 by vietj · Pull Request #3717 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A few improvements related to the WebSocket close handshake and the TCP connection close.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3718
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3719
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3720
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3721
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3722
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3723
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3724
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3725
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3726
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3727
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3728
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3729
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3730
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3731
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3732
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3733
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3734
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3735
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3736
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3737
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3738
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3739
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3740
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3741
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3742
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3743
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3744
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3745
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3746
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3747
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3748
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3749
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3750
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3751
Respond with a 400 status to invalid HTTP requests by vietj · Pull Request #3751 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3752
Respond with a 400 status to invalid HTTP requests by vietj · Pull Request #3752 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3753
CompositeFuture toString gives stack overflow for completed composite future · Issue #3753 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0
Context
I get a stack overflow exception while logging a completed CompositeFuture
Do you have a reproducer?
Yes:
import io.vertx.core.CompositeFuture;
import static io.vertx.core.Future.succeededFuture;
import static java.util.Collections.singletonList;
public class Simple {
    public static void main(String[] args) {
        CompositeFuture compositeFuture = CompositeFuture.all(singletonList(succeededFuture()));
        System.out.println(compositeFuture.toString());
    }
}

The code above gives a stack overflow exception
Steps to reproduce
Run program above
Extra
Java 11
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3754
Fix stackoverflow error with CompositeFuture#toString and make an actually useful output by vietj · Pull Request #3754 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3755
When does vert.x support http3? · Issue #3755 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When will vert.x support http3? Do you have a plan yet?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3756
Still have ... undecoded bytes, should not call 'feedInput' · Issue #3756 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Working with a JSON Stream via the Vert.x Web Client, I get a com.fasterxml.jackson.core.JsonParseException with the message Still have ... undecoded bytes, should not call 'feedInput'.
I dug a bit deeper into io.vertx.core.parsetools.impl.JsonParserImpl and was just wondering if it could be an issue:
JsonParserImpl#handle just calls parser.feedInput() without checking parser.needMoreInput() first.
However, com.fasterxml.jackson.core.async.ByteArrayFeeder, states that "caller must ensure data remains stable until it is fully processed (which is true when needMoreInput returns true)".
Could it be that we need to call needMoreInput() first?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3757
P12 Keystore for Signing JWTs · Issue #3757 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am running into issues using a P12 keystore to generate a JWT:
java.lang.RuntimeException: Algorithm not supported: HS384
	at io.vertx.ext.auth.impl.jose.JWT.sign(JWT.java:334) ~[vertx-auth-common-4.0.0.jar:4.0.0]
	at io.vertx.ext.auth.jwt.impl.JWTAuthProviderImpl.generateToken(JWTAuthProviderImpl.java:182) ~[vertx-auth-jwt-4.0.0.jar:4.0.0]

I am using Java11, Gradle 6.6 with the following dependencies:
implementation 'io.vertx:vertx-web:4.0.0'
implementation 'io.vertx:vertx-auth-jwt:4.0.0'

I have a simple verticle that is attempting to write out a user credential JSON to a JWT. I configure the JWTAuth as such:
KeyStoreOptions keyStoreOptions = new KeyStoreOptions().setPath(keystore).setPassword(keystorePassword);
JWTAuthOptions authOptions = new JWTAuthOptions().setKeyStore(keyStoreOptions);
this.provider = JWTAuth.create(vertx, authOptions);
In a login handler, I am doing the following:
ObjectMapper mapper = new ObjectMapper();
String entityJson = mapper.writeValueAsString(entity);
String token = this.provider.generateToken(new JsonObject(entityJson), new JWTOptions().setAlgorithm("HS384"));
Any suggestions?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3758
You think you can get away without putting one out for scala? · Issue #3758 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
:)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3759
Disable fail-fast for tests. by jameshilliard · Pull Request #3759 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
By default github cancels matrix tests if one fails, this behavior makes debugging test failures more difficult to isolate as it is not obvious if a failure is common to other tests if they get cancelled automatically.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3760
Form upload attribute might get corrupted · Issue #3760 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current server form upload processing will create the form multi-map when the HTTP server request ends. Some attributes might use ByteBuf that can be recycled by the request decoder overwriting the attribute value. We should capture the request form attribute value as a string to avoid this case.
This issue was found when upgrading to Netty 4.1.52.Final, this version changes the implementation of the post request decoder and this situation happens with very large file upload (32M) and was found in vertx-web-client tests.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3761
Avoid lazy server form upload attribute creation by vietj · Pull Request #3761 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Reverted as create undesirable side effects (regressions).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3762
Avoid lazy server form upload attribute creation by vietj · Pull Request #3762 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Reverted as create undesirable side effects (regressions).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3763
clientRequest not available in Interceptor · Issue #3763 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx 4.0.0
Context
In my interceptor, I want to know (once the request was done) what the request method was. To me it looks like I should retrieve the clientRequest from the HttpContext and from that object i can ask getMethod(). But the clientRequest method always returns null (although according to documentation, this should only happen during PREPARE_REQUEST phase, not in later phases.
Reproducer

https://github.com/LarsEckart/vertx-local-context-data-example/blob/main/src/test/java/com/larseckart/vertx/example/example/WebClientInterceptorTest.java

this test prints
09:50:27.871 [Test worker]  INFO  c.l.v.e.e.WebClientInterceptorTest - PREPARE_REQUEST
09:50:27.871 [Test worker]  INFO  c.l.v.e.e.WebClientInterceptorTest - SEND_REQUEST
09:50:27.871 [Test worker]  ERROR c.l.v.e.e.WebClientInterceptorTest - didn't expect clientRequest to be null
09:50:27.891 [vert.x-eventloop-thread-0]  INFO  c.l.v.e.e.WebClientInterceptorTest - RECEIVE_RESPONSE
09:50:27.891 [vert.x-eventloop-thread-0]  ERROR c.l.v.e.e.WebClientInterceptorTest - didn't expect clientRequest to be null
09:50:27.897 [vert.x-eventloop-thread-0]  INFO  c.l.v.e.e.WebClientInterceptorTest - DISPATCH_RESPONSE
09:50:27.897 [vert.x-eventloop-thread-0]  ERROR c.l.v.e.e.WebClientInterceptorTest - didn't expect clientRequest to be null
ignore the rest of the project, that was for another issue.
Extra
I debugged a bit. in HttpContext line 558, clientRequest field is assigned, and I figured that cool, it must be working. But when i let the code continue to execute, breakpoint at line 549 is hit and clientRequest is again set to null. So looks like there is a race condition or so between the request's onComplete handler and the continuation handler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3764
Capture form upload attribute value by vietj · Pull Request #3764 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3765
Capture form upload attribute value 3.9 by vietj · Pull Request #3765 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3766
Indeterministic JsonCodec lookup  · Issue #3766 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
At the moment the lookup for implementation of the JsonCodec SPI is indeterministic and depends on the classpath ordering and packaging of the application. Thus, the same application may end up with the built-in Jackson code or with a custom one.
In my case, I must ensure that it loads the custom one regardless of the classpath ordering and packaging.
I can see two approaches:

have the possibility to ignore the built-in codec, if there is another one available
have a smarter way to load the SPI sorting the implementation by priority

In my case, the first approach is enough, but the second one allows handling situations where 3 or more implementations are available.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3767
Vertx thread customization · Issue #3767 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In some environment in which Vert.x is embedded it can be desirable to customize or subclass the base thread used by Vert.x (VertxThread).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3768
Configurable tracing policy in DeliveryOptions by tsegismont · Pull Request #3768 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Yes, a pull request for vertx-tracing parent is coming (docs+tests).
I got some doubts about the test in this PR, I may push another commit later. In this case, I'll ping you. Otherwise, I'll go ahead and merge.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3769
Performance problem in EventBus messages dispatch implementation · Issue #3769 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
4.0.0
Context
I found a performance related problem in the class ReplyHandler: the message decoding of my message codecs always happen inside the event loop, regardless on where I call .body().
When a message gets big, this bug can block the event loop for a moment.
Do you have a reproducer?
No, the bug can be easily fixed, it involves changing just one line of code.
Steps to reproduce

Create a custom MessageCodec for the event bus
Set a breakpoint on the decodeFromWire function
See from where the call originates
It will be from io.vertx.core.eventbus.impl.ReplyHandler, line 89

Extra
This bug can be fixed by not calling "reply.body()" in line 89 of ReplyHandler.
That code in ReplyHandler checks if the decoded message is "ReplyException", but it can't be a ReplyException if the message codec is a custom one.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3770
SyntaxError: /@vertx/core/options.js:17:65 Expected ; but found SSLEngineOptions KeyCertOptions · Issue #3770 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There is a syntax error which is causing things like es4x to barf.  It is:
SyntaxError: /usr/src/app/node_modules/@vertx/core/options.js:17:65 Expected ; but found SSLEngineOptions KeyCertOptions: Java.type('io.vertx.core.net.KeyCertOptions') SSLEngineOptions: Java.type('io.vertx.core.net.SSLEngineOptions') TrustOptions: Java.type('io.vertx.core.net.TrustOptions')/// <reference types="@vertx/core/options" />
at org.graalvm.sdk/org.graalvm.polyglot.Context.eval(Context.java:347)
at io.reactiverse.es4x.Runtime$1.apply(Runtime.java:103)
at io.reactiverse.es4x.Runtime$1.apply(Runtime.java:58)
at js _load(file:/usr/src/app/node_modules/.lib/es4x-0.14.0.jar!/io/reactiverse/es4x/jvm-npm.js:68-71:2056-2187)

If you open the @vertx/core/options.js file on line 17 , you will notice the semi-colons are missing before SSLEngineOptions and before TrustOptions
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3771
Vert.x Service Provider bootstrap by vietj · Pull Request #3771 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
scoped for 4.1.0 but it could be I think in 4.0.1 as there are no external breaking changes
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3772
Vertx SPI configuration and loading · Issue #3772 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A Vertx instance is configured with a set of service (cluster manager, metrics, tracer, name resolver, etc...)
When a Vertx instance is created:

some of these are loaded using the Java service loading mechanism (e.g cluster manager)
some are hard wired (e.g transport or file resolver)
some can be provided programmatically (e.g cluster manager)

We shall provide a clear and controllable mechanism to create a Vertx instance that is used by Vert.vertx() or the CLI (BareCommand), but that also could be used directly to override services before or after the initialization has been performed, e.g to specify an alternative transport configuration or a different file resolver when Vert.x is embedded.
It also provides a unified way to load service providers and replace the existing Java service loading mechanisms.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3773
EventBus Tracing: change message tag name to message_bus.destination · Issue #3773 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
MessageTagExtractor uses peer.service tag name for eventbus address. According to the conventions doc, it should be message_bus.destination.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3774
MessageTagExtractor: change message tag name to message_bus.destination by tsegismont · Pull Request #3774 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #3773
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3775
Buffer get by index should check against the buffer length · Issue #3775 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The default implementation of the Buffer by index accessors (e.g getInt(int)) relies on ByteBuf to check the index respects the upper bound. Since this is an absolute operation for this buffer, the ByteBuf capacity is used instead which allows to access data beyond the Buffer length.
We need this implementation of Buffer to perform a check against the ByteBuf writer index to ensure the correctness.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3776
Buffer get by index should check against the buffer length by vietj · Pull Request #3776 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3777
Buffer get by index should check against the buffer length by vietj · Pull Request #3777 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3778
Buffer get by index should check against the buffer length by vietj · Pull Request #3778 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3779
Service verticle factory does not rested worker setting · Issue #3779 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version 4.0
I deploy most of the vertices as services with a json service descriptor.
When moving from 3.x to 4  I noticed that services that are marked as 'worker:true' are not being deployed as worker vertices and are executed in a even loop thread.
How to reproduce:
1.- Deploy any service verticle as a worker verticle (worker:true in the json descriptor in the 'options' section)
2.- The easiest way to verify if it is a worker verticle is to log something and check the thread name. Otherwise, you can use VertxThread.isWorker()
Seems to be an issue with the code in the service Factory, when it merges the config from the context.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3780
TLS Certificates hitless rotation · Issue #3780 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
We need a way to automatically reload certificates from files when they're expired.
Use cases
In Kubernetes and other orchestration platforms it's very common to have a system that automagically rotate self-signed TLS certificates when expired https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/. These systems simply replace the .ca and .key files with new valid values.
Prior art in Golang: https://diogomonica.com/2017/01/11/hitless-tls-certificate-rotation-in-go/
Possible solutions
Every time a certificate is requested during the TLS handshake, Vert.x could check if the actual certificate is expired and, if that's the case, it can try reload it from file.
Another solution could be a more generic method like GetCertificate in Golang that is invoked every time a new certificate is requested. Inside it, the user can do whatever it wants (reload every time from file, have some cache that refreshes the certificate asynchronously, etc)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3781
duplicate message in `ClusteredEventBusTestBase.testPublish` by jo5ef · Pull Request #3781 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think the intention of ClusteredEventBusTestBase.testPublish is to
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3782
Allow enabling Netty resource leak detection by pepijnve · Pull Request #3782 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
right, it was introduced by 25bbc9f#diff-38e15c129e2f81ad425c1bbe0005b26df5a661c05b6c2938d774d95879959cef
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3783
Flood control · Issue #3783 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I built RestEasy server under Netty and Vert.x
Now I transfer a huge file from the server's database to the client wia java stream
Client and network too slow for this huge file, and Netty consume all memory while allocating io.netty.channel.ChannelOutboundBuffer$Entry. It occured because RestEasy and Vert.x don't communicate with Netty about flood control.
Maybe exists some techniques for such flooding?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3784
 Why did Connection was closed appear after NoStackTraceTimeoutException · Issue #3784 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
HttpClient encounters io.vertx.core.http.impl.NoStackTraceTimeoutException (the timeout I set is 3 seconds) when sending a request. After being caught by the exceptionHandler, this exception is printed in the exceptionHandler, but then io.vertx.core is captured. VertxException: Connection was closed (the idle time I set was 10 minutes), which caused me to print two exceptions. Why did Connection was closed appear after NoStackTraceTimeoutException?
Version
3.9.4
HttpClientRequest outgoingRequest = httpClient.requestAbs(incomingRequest.method(), fullUrl)
                .setFollowRedirects(true)
                .handler(clientResponse -> handleProxyResponse(pc, clientResponse))
                .exceptionHandler(t -> {
                    //在这里我会打印出两个日志，一个是NoStackTraceTimeoutException，另一个是Connection was closed，但是我仅仅触发了NoStackTraceTimeoutException
                    log.error("handle proxying error, traceId {}, original request {}, proxying request {}", pc.traceId(), incomingRequest.absoluteURI(), fullUrl);
                    quickCloseResponse(pc, t);
                });
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3785
WebSocket closeHandler not invoked when call close() when network  barrier between client and server · Issue #3785 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
websocket conentcion:  client ->  nginx -> sever (websocket)
when network  barrier between client and nginx.   and server call WebSocet close() function, closeHandler will not be invoked.
in previous version, it will invoked, and i notice this issue: #3531
this will be fine when network is OK.  in my secene (network barrier, cannot ping to client), this will not work, due to no close frame echo back.
can i have some other close() funciton to invoke clsoeHandler directly?
Version
3.9.3
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3786
Shared worker pool terminated after verticle undeployment · Issue #3786 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This applies to Vert.x 4.0.0
Reproduction steps:

deploy a verticle with shared worker pool name set in DeploymentOptions
do some work
undeploy

Expected:
The shared worker pool name can be reused
Actual:
The shared worker pool is terminated and remains in the shared worker map.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3787
Missing ByteBuf releases · Issue #3787 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
There are a few places where Vert.x does not release ByteBuf.
We should release those ByteBuf to avoid leaks and return them to the pool or free the direct memory.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3788
Missing ByteBuf releases fix by vietj · Pull Request #3788 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3789
SharedWorkerPool close method should not force executor termination by tsegismont · Pull Request #3789 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
it looks fine but can you describe the issue that is solved in addition of describing what you do instead of what was done in your commit message ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3790
DuplicatedContext can cause unexpected behavior · Issue #3790 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The following code will run a bunch of blocking tasks all with ordered=true
public static void main(String[] args){
Context context0 = Vertx.vertx().getOrCreateContext();
context0.runOnContext(ignored0 -> {
	Vertx vertx = Vertx.currentContext().owner();
	vertx.eventBus().consumer("eb_address", m -> runTask(m.body().toString()));
	runTask("Task 1");
	runTask("Task 3");
	vertx.eventBus().publish("eb_address", "Task 2");
	vertx.setTimer(1, t -> {
		runTask("Task 4");
		vertx.eventBus().publish("eb_address", "Task 5");
	});
});
}

public static void runTask(String name){
        Vertx.currentContext().executeBlocking(promise -> {
	        System.out.println(name + " start");
	        try {
		        Thread.sleep(1000);
	        }catch(Exception e){
		        promise.fail(e);
		        return;
	        }
	        System.out.println(name + " done");
	        promise.complete();
        }, true);
}
This is the output:
Task 1 start
Task 2 start
Task 5 start
Task 1 done
Task 3 start
Task 2 done
Task 5 done
Task 3 done
Task 4 start
Task 4 done

Given that ordered=true, the output is odd, as conventional wisdom (and the documentation) would say that for any Task n start the message that should always follow it is Task n done. Of course ordering is only the case when the calls take place within the same context, and they all are called from the same context. Right?
I know that's not the case, but for any person that hasn't read the implementation, they should reasonably expect that everything that I wrote above is all run from the same context. That's the core of this issue, certain handlers are called with a DuplicatedContext and it causes unusual behavior because it creates a view of the parent context with the blocking TaskQueue being independant of the parent. Also, these side effects are completely undocumented.
I understand why DuplicatedContext exists, and I also know why we made the DuplicatedContext use its own TaskQueue, but I don't think the different TaskQueue was a good idea. It will cause issues for developers that will not be discovered immediately and in its current form make implementing the scheduler for RxJava imposible (For reasons why see: vert-x3/vertx-rx#245 (comment)) Personally I think it should be removed, and jdbc-client should revert back to the old solution (it appears to be the only thing that should use TaskQueue, but it doesn't look like it was properly implemented, see:  vert-x3/vertx-jdbc-client#203 (comment)). Even though that is what I think, I don't think that is something that is going to happen, so I have a simpler solution. Do not create a seperate TaskQueue unless explicitly specified. This way the DuplicatedContext behaves exactly like its parent for all actions (though of course the localData map is not preserved between the two)
I'm already busy on a PR to make a couple of changes around DuplicatedContext
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3791
SLF4JLogDelegateFactory is going to leak forever · Issue #3791 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
System.setErr(new PrintStream(new ByteArrayOutputStream())) has to leak. The ByteArrayOutputStream has a buffer buf which limit would always grow. In order to prevent the buffer from growing infinitelly you have to override the write(int b) and write(byte b[], int off, int len) methods to be empty.
IMO you used ByteArrayOutputStream because you did not want to crearte a new class. I am the Apache developer who develops Surefire Plugin. My recommendation for you is to follow the hint in Surefire and implement the same NullOutputStream and use it instead of ByteArrayOutputStream.
Version
4.0.2
Context
I am going to implement my own DelegateFactory for slf4j-simple and I have found the implementation of SLF4JLogDelegateFactory in the JAR of the core.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3792
HTTP server request should provide access to the context it is associated to · Issue #3792 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpServerRequest should provide a way to access the server request it is currently associated with.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3793
Add SubstitutedContext and make DuplicatedContext use delegate TaskQueue by Gattag · Pull Request #3793 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this seems like a lot of changes and additions, I'll have a look myself
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3794
Form attribute size is limited to 1024 in Vert.x 4 · Issue #3794 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.2
Context
Processing of forms with large attribute values is not possible in Vert.x 4 because maximum attribute size is hardcoded to 1024 in NettyFileUploadDataFactory / VertxAttribute class. It works without problems in Vert.x 3.9.5 or when setMaxSize() argument is changed to bigger value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3795
Set proxy per request · Issue #3795 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
We ported our service to use Vert.x awhile ago. While using Vert.x we still used Apache HTTP client without problems. However, now I tried to port also this functionality to Vert.x and I hit a problem.
It seems that Vert.x HttpClient does not allow to set a proxy per request, only on the client level. We use 1000+ proxies simultaneously to scrape websites.
Is there any workaround? How feasible is to create an instance per request?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3796
TCP metrics, Active server connections with negative values · Issue #3796 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx-core 4.0.0
vertx-micrometer-metrics 4.0.0
Context
We noticed that one of our positive-only metric is having negative values on several instances.
Using micrometer library, metric is named vertx_http_server_active_connections
This problem is however related to vertx-core metric abstraction. More precisely, how vertx-core handles connection opening and active connections metric increase.
Steps to reproduce
Reproducer: https://github.com/Mersenne255/vertx_issue_3796_reproducer
We've been able to easily reproduce metric going into negative values using vertx HTTP/2.0 server with SSL enabled.
But I believe this issue is relevant for all types of connections.
Idea how to reproduce is to close the TCP connection right after it was initialized, but connection number wasn't increased yet.
Connections metric decrease is abstracted inside class io.vertx.core.net.impl.ConnectionBase, so even when the connection count wasn't increased on connection open, it would still be decreased on connection close.

Start HTTP/2.0 vertx server over SSL
Run a client of this service, with io.vertx.core.net.TCPSSLOptions#sslHandshakeTimeout of ~100-200ms (for local run) - this might take multiple tries, as client closing connection must hit precisely timeframe within server processing, when connection was already established, but metrics not yet increased

Extra
JVM 15
OS version: fedora-coreos-31
Hosted on AWS EC2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3797
EventBus consumer and localConsumer scalability when deployed clustered · Issue #3797 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0-milestone5
Change clustered registration model
Context
Clustered application crashes in production since upgrading to VertX 4.0.1.
This application uses a WebSocket to EventBus bridge creating MessageConsumers 1:1 to websocket connections.
These Websockets are used by end-user UI and therefore has to scale on both establishing connections and active connection dimensions.
In VertX 3.9.5 up to M5 this was not an issue because registration only happend on a per node basis.
Do you have a reproducer?
https://github.com/DemonicTutor/vertx-clustereventbus-performance
Steps to reproduce

clustered VertX application
deploy 2 or more nodes
create consumers / localConsumers or unregister them - both trigger the issue

Extra
openJdk 15
Details
previously ClusteredEventBus ignored localOnly

https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/eventbus/impl/clustered/ClusteredEventBus.java#L128
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/eventbus/impl/clustered/ClusteredEventBus.java#L147

a) this seems useless to me because Selector filters localOnly out again
b) because of this there is no easy way to simply avoid the cluster-overhead
Selectors implementation evaluates all registrations on update - does not scale if adding more consumers
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/spi/cluster/impl/selector/Selectors.java#L75
also in case of adding nodes / startup of the entire cluster this approach seems wasteful ?
when one node is running and another starts up the first node would get each created consumer via update - reading the entire clustered map for each update.
So if we create 10 consumers in an application it would

update 1
read 1
update 2
read 2
and so on...
and because the clustered Map is based on address it reads every node
so if you have a cluster of 10 nodes - add node 11 - you fetch data from all 11 nodes.

Update Event only allows updating all registrations
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/spi/cluster/RegistrationUpdateEvent.java
SubsMapHelper does not scale - uses a LOT of network / cpu
https://github.com/vert-x3/vertx-hazelcast/blob/master/src/main/java/io/vertx/spi/cluster/hazelcast/impl/SubsMapHelper.java
While only adding a few consumers this is fine.
But if you either need "a lot" of consumers or need to create them dynamically (as is our case) this simply does not scale
for every single added consumer the entire map is read and triggers the update.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3798
A single Verticle consumer is processing messages concurrently for a worker thread pool · Issue #3798 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version did you encounter this bug? 4.0.2
Context
I'm using Vert.x Verticles to process messages sequentially per given address, up to 3.9.5 a consumer would only process messages in a sequential order but now they seem to be doing that concurrently.
Do you have a reproducer?
Yes, here is a simple unit test, it passes with 3.9.5 and fails with 4.0.2:
https://gist.github.com/guidomedina/ff20d1531bf59e046dd5fd5599918052
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3799
VertxThread factory · Issue #3799 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A runtime embedding might want to have Vert.x uses a specific subclass of VertxThread. This is a port of #3749 using the Vert.x 4 service provider mechanism and with a simplification of the factory responsibility.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3800
VertxThreadFactory service provider by vietj · Pull Request #3800 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@geoand @FroMage this is the port of the thread customization to 4, can you have a look?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3801
ExecutorServiceFactory implementation by vietj · Pull Request #3801 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3802
Worker verticle execution should always be serialized by vietj · Pull Request #3802 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
if there is an exception then the test fails.
…
On Fri, Feb 12, 2021 at 12:20 PM Guido Medina ***@***.***> wrote:
 ***@***.**** commented on this pull request.
 ------------------------------

 In src/test/java/io/vertx/core/ContextTest.java
 <#3802 (comment)>:

 > +    ContextInternal worker = ((VertxInternal)vertx).createWorkerContext();
 +    ContextInternal[] contexts = new ContextInternal[] { worker.duplicate(), worker.duplicate()};
 +    waitFor(contexts.length);
 +    AtomicBoolean owner = new AtomicBoolean();
 +    CountDownLatch latch = new CountDownLatch(contexts.length);
 +    for (ContextInternal context : contexts) {
 +      task.accept(context, () -> {
 +        try {
 +          assertTrue(owner.compareAndSet(false, true));
 +          Thread.sleep(200);
 +        } catch (InterruptedException e) {
 +          Thread.currentThread().interrupt();
 +        } finally {
 +          owner.set(false);
 +        }
 +        latch.countDown();

 Actually, now I remember why I have 2 try blocks, here is how I would had
 that code:

 try {
   assertTrue(owner.compareAndSet(false, true));
   try {
     Thread.sleep(200);
   } catch (InterruptedException e) {
     Thread.currentThread().interrupt();
   } finally {
    // if we reach this finally the owner was successfully set to true by this thread
     owner.set(false);
   }
 } finally {
   // Regardless of success or any exception always decrement the latch
   latch.countDown();
 }

 —
 You are receiving this because you authored the thread.
 Reply to this email directly, view it on GitHub
 <#3802 (comment)>,
 or unsubscribe
 <https://github.com/notifications/unsubscribe-auth/AABXDCSIPXZIP3F4NUEZAJ3S6UFILANCNFSM4XOORDNA>
 .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3803
Support for passing URL in RequestOptions · Issue #3803 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
The io.vertx.core.http.RequestOptions in Vert.x 4.0.0 allows to set up instance with absolute Uri as a String via RequestOptions().setAbsoluteUri(...).  Could be this extended also for providing Uri as a java.net.URL ?
Use cases
In our calls we have a request uri directly in java.net.URL . For creating RequestOptions instance, we have to convert URL to String, enabling us to call setAbsoluteUri. But inside of this String is immediately parsed back to URL via RequestOptions.parseUrl() which is ineffective (as parseUrl correctly mentions it in Note).
Contribution
I have zero experience with contributing to any library but this could be easy done via splitting setAbsoluteUri into parsing and processing method:
  public RequestOptions setAbsoluteURI(String absoluteURI) {
    Objects.requireNonNull(absoluteURI, "Cannot set a null absolute URI");
    return this.setAbsoluteURI(parseUrl(absoluteURI));
  }

  public RequestOptions setAbsoluteURI(URL url) {
    Objects.requireNonNull(absoluteURI, "Cannot set a null absolute URI");
    Boolean ssl = false;
    int port = url.getPort();
    String relativeUri = url.getPath().isEmpty() ? "/" + url.getFile() : url.getFile();
    String protocol = url.getProtocol();
    switch (protocol) {
      case "http":
        if (port == -1) {
          port = 80;
        }
        break;
      case "https": {
        ssl = true;
        if (port == -1) {
          port = 443;
        }
        break;
      }
      default:
        throw new IllegalArgumentException();
    }
    this.uri = relativeUri;
    this.port = port;
    this.ssl = ssl;
    this.host = url.getHost();
    return this;
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3804
Cannot modify metrics options via sysprop or custom Launcher  · Issue #3804 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A custom Launcher is often used when you want to setup things like metrics options programmatically before Vert.x is started.
Since #3771 , it is no longer possible to do this because the builder init method is invoked before the Launcher callback.
Then it's too late to customize the metrics implementation.
This applies to other special options too, I think (e.g. tracing, cluster manager).
EDIT: actually, it's no longer possible to activate some metrics options with sysprops. From Dropwizard docs:
-Dvertx.metrics.options.enabled=true -Dvertx.metrics.options.jmxEnabled=true
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3805
httpclient connectTimeout does not work expected · Issue #3805 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
httpclient sets connecttimeout, when the connection fails (possibly due to network jitter or upstream performance issues), the duration of connect failed callback may be less than the connecttimeout.
CircuitBreaker '****' recorded an error: 'io.netty.channel.ConnectTimeoutException: connection timed out: */'. Elapsed time: 1 ms
io.netty.channel.ConnectTimeoutException: connection timed out: **
at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe$1.run(AbstractNioChannel.java:267)
at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38)
at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:127)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
Version
3.6.x - 3.9.x
Do you have a reproducer?
https://gist.github.com/jinwik/569938388962a457a93ee87d9b9c6732
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3806
Byte buf leak fixes by vietj · Pull Request #3806 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Backport work done in master around ByteBuf leaks.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3807
No default json codec descriptor by vietj · Pull Request #3807 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3808
Remove the default Jackson codec descriptor in vertx-core jar by vietj · Pull Request #3808 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier ping
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3809
Test: customize metrics and cluster manager in Launcher by tsegismont · Pull Request #3809 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3810
Make sure metrics and cluster manager can be customized in Launcher by tsegismont · Pull Request #3810 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the test fails is that expected ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3811
JsonFactory ordering mechanism by vietj · Pull Request #3811 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier ping, here is the order mechanism in master
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3812
add mimetype for es6 js modules by lordvlad · Pull Request #3812 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@lordvlad can you please sign the Eclipse Contributor Agreement?
https://www.eclipse.org/legal/ECA.php
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3813
feat: completion function to MessageConsumer returns a future by wem · Pull Request #3813 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3814
HttpClientRequest hangs on subsequent requests in worker verticle. · Issue #3814 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx-core 4.0.2
Context
We have encoured an issue whereby after a variable amount of subsequent reqeuests using HttpClientRequest, it appears that the subsequent response handlers are not called, and the request hangs.
We had used a variation of this pre vertx-core 4.0.0 which we cannot reproduce the issue on.
It appears to fail quicker when keep-alives are enabled, and quicker with a larger response size (256K and above).
This appears to only happen when running in a worker verticle, it is not reproducable when DeploymentOptions has worker set to false.
Do you have a reproducer?
https://github.com/russthom/vertx-httpclientrequest-issue
Steps to reproduce

mvn package
serve up 'testfile' on localhost:8080 (I generate a random 512K, e.g 'head -c 512K </dev/urandom > testfile')
run the jar (java -jar target/vertx-httpclient-test-0-jar-with-dependencies.jar)
it will hang on the request after 2/3rd run

Extra

Java 11, but also reproducable with Java 15.
Running on RHEL 8, but also reproducable on Arch.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3815
Does vertx support Transaction, like akka's STM feature? · Issue #3815 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,  I am new to vert.x, and I want to  find out Transaction on vert.x.
In akka's can do this. user STM, Coordinated transactions.
Scenario:
A user tranfers 100$ to B user. A's account deduct 100$, B's account increase 100$.
When B's increase fail, roll back A 's 100$.
I think transaction is very important for a reliable system. Does vertx miss this feature?
How can I do with Vertx, please help
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3816
config().getString is not perfect · Issue #3816 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Question
when i do not use "put("raw-data", true)"  ,if my config is :
password=123456
I get a value "123456.0" by this method config.getString("password");
but
when I use  "put("raw-data", true)", this problem is ok ，but i have an other config
port=80
I get an error  when i use config.getInteger("port")，because it was not supported.
Version
4.0.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3817
prepared query in conjunction with stream doesn't work for Oracle · Issue #3817 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Do not use this issue tracker to ask questions, instead use one of these channels. Questions will likely be closed without notice.
Version
4.0.2
Context
We tried to migrate our services from Legacy JDBC Client or SqlClient. For Postgres dbms everything works fine as expected, but with Oracle the following exception is signaled:
stream error java.sql.SQLException: Nicht unterstützte Funktion: getMetaData Feb. 18, 2021 7:03:02 VORM. io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
SEVERE: Failed in deploying verticle
java.sql.SQLException: Nicht unterstützte Funktion: getMetaData
at oracle.jdbc.driver.ArrayDataResultSet.getMetaData(ArrayDataResultSet.java:1080)
at io.agroal.pool.wrapper.ResultSetWrapper.getMetaData(ResultSetWrapper.java:460)
at io.vertx.jdbcclient.impl.actions.JDBCQueryAction.decodeReturnedKeys(JDBCQueryAction.java:182)
at io.vertx.jdbcclient.impl.actions.JDBCQueryAction.decode(JDBCQueryAction.java:59)
at io.vertx.jdbcclient.impl.actions.JDBCPreparedQuery.execute(JDBCPreparedQuery.java:69)
at io.vertx.jdbcclient.impl.actions.JDBCPreparedQuery.execute(JDBCPreparedQuery.java:39)
at io.vertx.ext.jdbc.impl.JDBCConnectionImpl.lambda$schedule$3(JDBCConnectionImpl.java:217)
at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:179)
at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:96)
at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:177)
at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.base/java.lang.Thread.run(Thread.java:834)
A similar error was described here: https://groups.google.com/g/vertx/c/H6jGDlkx9No/m/07et_foRDwAJ
Do you have a reproducer?
A reproducer is a simple project hosted on GitHub (or another forge supporting git clone operation) that has a build file that can be executed to reproduce the issue.
Reproducers are very helpful for contributors and will likely help them fixing your bug faster.

https://github.com/ukr15/sql-client-error

Steps to reproduce

Unpack archive
Move to src/main/java/de/testVertx4JdbcTest
The program is configured for a postgres database. Configure it for an Oracle Database
mvn clean install
java -jar target/vertx4-jdbc-test-1.0.0-fat.jar → one ore more records should be printed in dependence on the database

Extra

Testet under MacOS and some linux (oracle testing has been done by another party
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3818
Request options copy constructor does not copy followRedirects property · Issue #3818 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3819
RequestOptions: improve json conversion by tsegismont · Pull Request #3819 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The main problem is that the commit does not say what is improved and what changes. The linked issue references Jackson where you advocate to not use it and instead use the to/from JSON and does not seem related directly to the commit.
From what I can observe, I can see that the code uses HttpMethod.valueOf() as improvement and also implement missing headers conversion. I haven't look at it carefully.
My point is that we need to have the commit to describe what I said above, otherwise I cannot review that commit.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3820
RequestOptions: improve json conversion by tsegismont · Pull Request #3820 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closes #3735
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3821
Round Robin load balancing when DNS returns multiple addresses · Issue #3821 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Add a config property to AddressResolverOptions.
When round robin is enabled, use Netty's RoundRobinInetAddressResolver to enable load balancing.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3822
JsonParser NullPointerException · Issue #3822 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0-4.0.3-SNAPSHOT
Context
I used JsonParser.pause() and JsonParser.resume() methods between time-consuming operations with Vert.X v. 3.9.4.
Since I upgraded to v. 4.0.0 I started to get NullPointerException.
I've checked out latest snapshot version 4.0.3 but the problem is still there.
Do you have a reproducer?

Link to github project/gist

https://github.com/egorapolonov/vertx-4.0.0-jsonparser-issue/tree/master/vertx-4.0.0-jsonparser-issue
See JsonParserAsyncFileTest.java
Steps to reproduce

Try to parse JSON structure like "{...}{...}...{...}"
Have more than 2 objects there in JSON
See errors

java.lang.NullPointerException: Cannot invoke "io.vertx.core.parsetools.impl.JsonParserImpl$TokenParser.close()" because "this.buffer" is null
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:433)
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:388)
   at io.vertx.core.parsetools.impl.JsonParserImpl.checkPending(JsonParserImpl.java:241)
   at io.vertx.core.parsetools.impl.JsonParserImpl.fetch(JsonParserImpl.java:84)
   at io.vertx.core.parsetools.impl.JsonParserImpl.resume(JsonParserImpl.java:74)
   at com.vertx.reproducer.JsonParserAsyncFileTest.lambda$parseWithExceptionHandler$0(JsonParserAsyncFileTest.java:58)
   at io.vertx.core.parsetools.impl.JsonParserImpl.handleEvent(JsonParserImpl.java:121)
   at io.vertx.core.parsetools.impl.JsonParserImpl.lambda$objectValueMode$2(JsonParserImpl.java:285)
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:432)
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:388)
   at io.vertx.core.parsetools.impl.JsonParserImpl.checkPending(JsonParserImpl.java:241)
   at io.vertx.core.parsetools.impl.JsonParserImpl.fetch(JsonParserImpl.java:84)
   at io.vertx.core.parsetools.impl.JsonParserImpl.resume(JsonParserImpl.java:74)
   at com.vertx.reproducer.JsonParserAsyncFileTest.lambda$parseWithExceptionHandler$0(JsonParserAsyncFileTest.java:58)
   at io.vertx.core.parsetools.impl.JsonParserImpl.handleEvent(JsonParserImpl.java:121)
   at io.vertx.core.parsetools.impl.JsonParserImpl.lambda$objectValueMode$2(JsonParserImpl.java:285)
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:432)
   at io.vertx.core.parsetools.impl.JsonParserImpl$BufferingHandler.handle(JsonParserImpl.java:388)
   at io.vertx.core.parsetools.impl.JsonParserImpl.checkPending(JsonParserImpl.java:241)
   at io.vertx.core.parsetools.impl.JsonParserImpl.handle(JsonParserImpl.java:207)
   at io.vertx.core.parsetools.impl.JsonParserImpl.handle(JsonParserImpl.java:41)
   at io.vertx.core.file.impl.AsyncFileImpl.handleBuffer(AsyncFileImpl.java:425)
   at io.vertx.core.file.impl.AsyncFileImpl.lambda$new$0(AsyncFileImpl.java:110)
   at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:240)
   at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:130)
   at io.vertx.core.file.impl.AsyncFileImpl.lambda$doRead$5(AsyncFileImpl.java:407)
   at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:125)
   at io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:53)
   at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
   at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
   at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
   at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
   at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
   at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
   at java.base/java.lang.Thread.run(Thread.java:832)

Feb 23, 2021 10:20:27 PM com.vertx.reproducer.JsonParserAsyncFileTest
INFO: Successfully parsed 4 items of 4

Process finished with exit code 255

Extra

Ubuntu 20.04 x86_64, JVM openjdk-15.0.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3823
Implementation of JSON RFCs introduced inconsistency to Json{Object|Array} API · Issue #3823 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.0.0
Context
The implementation of the JSON RFCs (#3197) removed the type checking from methods JsonObject.put(String, Object) and JsonArray.add(int, Object) in order to allow future POJO mappings. Nevertheless the methods Json{Object|Array}.copy() are still checking types. This leads to the situation that developers are able to successfully create Json{Object|Array}s that cannot be copied afterwards.
When using the following piece of code for creating valid JsonObjects
  try {
    jsonObject.put(key, value);
  }
  catch (IllegalStateExcveption e) {
    jsonObject.put(key, value.toString());
  }

which are copied afterwards, #3197 breaks that piece of code and is not backward compatible.
Do you have a reproducer?
A small reproducer can be found at https://github.com/riemenschneider/JDBCPreparedQueryTest. The test fails with Vert.x 4.0.0 and runs successful using Vert.x 3.9.5.
Steps to reproduce

Clone the reproducer mentioned above.
Run gradlew test.
Change Vert.x dependency in build.gradle to io.vertx:vertx-core:3.9.5 and run again gradlew test.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3824
Implement round robin address selection by tsegismont · Pull Request #3824 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This PR brings the original contribution from @ybayk (yurgis.baykshtis[at]clarivate[dot]com) in #2902 with minor simplifications.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3825
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3826
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3827
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3828
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3829
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3830
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3831
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3832
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3833
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3834
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3835
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3836
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3837
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3838
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3839
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3840
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3841
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3842
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3843
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3844
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3845
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3846
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3847
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3848
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3849
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3850
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3851
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3852
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3853
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3854
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3855
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3856
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3857
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3858
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3859
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3860
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3861
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3862
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3863
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3864
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3865
Incompatibility between Vertx 3.9 and Netty 4.1.60.Final (the changes made to address CVE-2021-21295) · Issue #3865 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.0
3.9.6
Context
I'm in the process of upgrading an existing application that uses Vertx 3.9.  Part of the work includes a CVE remediation for CVE-2021-21295 Netty 4.1.60.Final.
I've discovered an incompatibility between the new Netty version and Vertx 3.9.  If the application receives a PUT that includes a Content-Length header, the request fails now within Vertx.   Rolling back to Netty 4.1.59, the problem disappears.  I'm not seeing an error in the logs, but by debugging I found the exception:
java.lang.ClassCastException: class java.lang.Long cannot be cast to class java.lang.CharSequence (java.lang.Long and java.lang.CharSequence are in module java.base of loader 'bootstrap')
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.set(VertxHttpHeaders.java:151)
	at io.vertx.core.http.impl.headers.VertxHttpHeaders.set(VertxHttpHeaders.java:40)
	at io.netty.handler.codec.http.HttpObjectDecoder.readHeaders(HttpObjectDecoder.java:641)
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:257)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1534)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1283)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1330)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)

Do you have a reproducer?
I don't have a standalone reproducer, but I'd be happy to make one.
Steps to reproduce

...
...
...
...

Extra
If I upgrade to Vertx 4.0, the problem disappears.  I notice that the HeadersMultiMap class (which seems to replace VertxHttpHeaders) handles non CharSequence header types.  Upgrading to Vertx 4.0 is not viable for me at this time, so I'm hoping for a defect fix on the 3.9 line.  WIth this in mind, I raised a PR against the 3.9 branch for consideration.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3866
Fix #3865: Allow VertxHttpHeaders to process none-CharSequence headers to restore compatibility with Netty 4.1.60 by k-wall · Pull Request #3866 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks, but I think I will rather port this PR directly : b101b12
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3867
Fix timeout reply exception message in ReplyHandler by zyclonite · Pull Request #3867 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj this should be a quick one ;)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3868
Netty 4.1.60.Final upgrade by vietj · Pull Request #3868 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3869
How to have a customized security handler in vertx4? · Issue #3869 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
How to have a customized security handler in vertx4?
Version
vertx4
Context
I am migrating to vertx4 and have a question about securityHandler (using openapi security scheme). In version 3.9.0 I was using OpenAPI3RouterFactory and with calling addSecurityHandler was able to pass my own customized security handler like:
OpenAPI3RouterFactory.create(vertx, "api.yaml", ar -> {
OpenAPI3RouterFactory rf = ar.result();
 rf.addSecurityHandler("permission1", this::permission1Handler);
 rf.addSecurityHandler("permission2", this::permission2Handler);
 rf.addSecurityHandler("permission3", this::permission3Handler);
}

where permission1, permission2, permission3 are security schemes in api.yaml file and permission1Handler, permission2Handler, and permission3Handler are my customized security handler. For example one of my apis has permission1 and permission2 in the yaml file as follows:
security:
 - permission1: []
 - permission2: []

If both permission1Handler and permission2Handler succeed, then the rest of the logic for that api get executed. Simply in each of the permission handlers if all the conditions are met I will call routingContext.next() otherwise routingContext.response().setStatusCode().end(). This is a very simple and convenient way of having security handlers.
But in version 4 I don't know how I can do that? In the documentation it says Use the RouterBuilder.securityHandler() method instead. But this method only accepts io.vertx.ext.web.handler.AuthenticationHandler as a handler. How can I have customized security handlers?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3870
MongoDB Client should support change streams · Issue #3870 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The MongoDB client API does not have the new feature of change streams that was introduced in MongoDB 3.6+ and is included in MongoDB Reactive Streams Driver. Would be very useful.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3871
HttpClientOptions.setConnectTimeout not work in version vertx-core 4.0.3 · Issue #3871 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
i try to set the HttpClient connect timeout as follow、but don't work、also 60 second
public HttpClient httpClient(){
HttpClientOptions httpClientOptions = new HttpClientOptions().setConnectTimeout(3000);
HttpClient httpClient = vertx().createHttpClient(httpClientOptions);
logger.info("httpClient connectTimeout[{}]",httpClientOptions.getConnectTimeout());
return httpClient;
}

in actually、the connect timeout use the NetClientOptions in NetClientImpl constructed as temp var we can't control it
as follow debugger details

then i debugger the source code with HttpClient.request
find the way to create tcp connection
in HttpChannelConnector.connect can find NetClientOptions as follow image:

then apply config to netty Bootstrap object as follow:

finally create tcp connection with bootstrap
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3872
HttpClientOptions.setConnectTimeout not work in version vertx-core 4.0.3 · Issue #3872 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
i try to set the HttpClient connect timeout as follow、but don't work、also 60 second
public HttpClient httpClient(){
HttpClientOptions httpClientOptions = new HttpClientOptions().setConnectTimeout(3000);
HttpClient httpClient = vertx().createHttpClient(httpClientOptions);
logger.info("httpClient connectTimeout[{}]",httpClientOptions.getConnectTimeout());
return httpClient;
}
Version
vertx-core 4.0.3
Extra
in actually、the connect timeout use the NetClientOptions in NetClientImpl constructed as temp var we can't control it  

as follow debugger details

i debugger the source code with HttpClient.request
find the way to create tcp connection
in HttpChannelConnector.connect can find NetClientOptions as follow image:

then apply config to netty Bootstrap object as follow:

finally create tcp connection with bootstrap :
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3873
JsonArray of enums stream() emits Strings instead of Enums · Issue #3873 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
JsonArray stream emits expected results for all boxed primitives and String, but not for enums.
Do you have a reproducer?
public class Test {
    public static void main(String[] args) {
        JsonArray array = new JsonArray().add(TimeUnit.DAYS).add(TimeUnit.MINUTES);
        array.stream().map(t -> {
            System.out.println(t +": " + t.getClass());
            return t;
        }).collect(Collectors.toList());
    }
}
result:

Task :Test.main()
DAYS: class java.lang.String
MINUTES: class java.lang.String
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3874
Explicitly document and test the 'stream()' contract by pmlopes · Pull Request #3874 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3875
TracingOptions handled differently in VertxOptions · Issue #3875 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
Reviewing Tracing SPI and usage I encountered a discrepancy between how MetricsOptions and TracingOptions are handled within VertxOptions.
TracingOptions is not initialized with a new instance on creation, see https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/VertxOptions.java#L123, but MetricsOptions is.
Also, TracingOptions is not present in toString(), see https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/VertxOptions.java#L642
Do you have a reproducer?
No
Extra
Happy to contribute a PR to fix, but want to make sure there aren't reasons for the differences?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3876
Minor fixes to VertxOptions by kenfinnigan · Pull Request #3876 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this looks good to merge @kenfinnigan ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3877
Expose pending size of MessageConsumerImpl · Issue #3877 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
The goal is to expose the message pending queue size of a message consumer.
Use cases

Metrics
Automatically deploy verticles when size has reached a limit

Contribution
I'm volunteer for implementing this feature if you need it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3878
JsonObject and JsonArray in Java streams causing ClassCastException · Issue #3878 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Issue
While trying to sort a stream of JsonObjects I encountered a ClassCastException, due to missing interface Comparable and thus missing implementation of compareTo on JsonObject (and also JsonArray).
Without knowing if this interface was omitted on purpose from those two datatypes, I am raising the question, if a simple implementation of Comparable on both JsonObject and JsonArray could be provided, so at least we don't get a ClassCastException, when working with Java Streams and alike?
Version
4.0.3
Reproduce JsonObject ClassCastException
List l1 = List.of(new JsonObject().put("foo", "bar"), new JsonObject().put("fnord", "fnord"));

l1.stream().sorted().collect(Collectors.toList())

Reproduce JsonArray ClassCastException
List l2 = List.of(new JsonArray(List.of("foo", "bar")), new JsonArray(List.of("fnord", "fnord")));

l2.stream().sorted().collect(Collectors.toList())
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3879
Change the sharedTCPServers method to work with custom implementation of HttpServerImpl and NetServerImpl by benjaminroux · Pull Request #3879 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Benjamin Roux ben.dev@outlook.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3880
Bug: Header names must be case insensitive · Issue #3880 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Regarding https://stackoverflow.com/questions/5258977/are-http-headers-case-sensitive HTTP header names are not case sensitive. The current behaviour of vert.x is that the header name is not found if there is a "difference in the case".
The issue affects this code (already tested the issue)::

  
    
      vert.x/src/main/java/io/vertx/core/http/HttpServerRequest.java
    
    
         Line 144
      in
      2dcbfac
    
  
  
    

        
          
           String getHeader(CharSequence headerName);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3881
NetServer and NetClient Communication too slow · Issue #3881 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hello,
I’ve build a simple Projekt with vertx for testing NetClient/NetServer Projekt to Test the Performance and the duration. It’s on my pc so on localhost. Sending and receiving takes 50-100ms, that way too slow and I don’t think this should be the case. I could not find any hint why this is the case. Example code below.
`
public class NetServerTest extends AbstractVerticle {
private NetServerOptions options = new NetServerOptions().setReceiveBufferSize(10000000).setSendBufferSize(1000000)
        .setTcpKeepAlive(true).setIdleTimeout(600);
private NetServer server;

public static void main(String[] args) throws IOException {
    Vertx.vertx().deployVerticle(new NetServerTest());
}

@Override
public void start() {
    server = vertx.createNetServer(options);
    startServerSocket();
}

private void startServerSocket() {
    server.connectHandler(socket -> {

        socket.write(Buffer.buffer(System.currentTimeMillis() + ""));

        socket.closeHandler(v -> {
            System.out.println("The client socket has been closed");
        });

    });

    server.listen(5555, "0.0.0.0", res ->

    {
        if (res.succeeded()) {
            System.out.println("Server is now listening!");
        } else {
            System.out.println("Failed to bind!");
        }
    });
}

}
public class NetClientTest extends AbstractVerticle {
private static NetClientOptions options = new NetClientOptions().setConnectTimeout(10000)
        .setReconnectAttempts(Integer.MAX_VALUE).setReconnectInterval(10000).setReceiveBufferSize(1000000)
        .setSendBufferSize(10000000).setTcpKeepAlive(true).setIdleTimeout(600);

public static void main(String[] args) throws UnknownHostException, IOException {
    Vertx.vertx().deployVerticle(new NetClientTest());
}

private NetClient client;

@Override
public void start() {
    client = vertx.createNetClient(options);

    connectClient();
}

private void connectClient() {
    client.connect(5555, "localhost", res -> {
        if (res.succeeded()) {
            NetSocket socket = res.result();

            socket.handler(inputBuffer -> {
                System.out.println(
                        "took " + (System.currentTimeMillis() - Long.parseLong(inputBuffer.toString())) + "ms");
            });

            socket.closeHandler(v -> {
                System.out.println("The server socket has been closed. Trying to connect again.");
            });

        } else {
            System.out.println("Failed to connect. Trying to connect again." + res.cause());
        }
    });
    System.out.println("connectClient end");
}

}
`
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3882
ClusteredEventBus publishes local subscription topics on the cluster · Issue #3882 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
Migrating socket application from stand alone to cluster mode using Zookeper. I have noticed that all socket write IDs are being published to the cluster, which seemed suspicious and possible scalability problem for very busy network applications.
Further reviewing to the code showed that NetSocket registration should only expose it's write ID locally, which makes sense to me. 
  
    
      vert.x/src/main/java/io/vertx/core/net/impl/NetSocketImpl.java
    
    
         Line 105
      in
      d7605ab
    
  
  
    

        
          
           registration = vertx.eventBus().<Buffer>localConsumer(writeHandlerID).handler(writeHandler); 
        
    
  


Do you have a reproducer?
I have not created a reproducer, but I have been reviewing the code and comparing Vert.X 3.9.6 and 4.0.3. Comparing the two branches the behavior is not consistent and it seems to me there is a bug.
When adding a new registration I see that the event bus, when clustered resolves to the following interactions in order.
On Vert.X 3.9.6:

Call addRegistration on EventBusImpl.java. 
  
    
      vert.x/src/main/java/io/vertx/core/eventbus/impl/EventBusImpl.java
    
    
         Line 235
      in
      d2b24fd
    
  
  
    

        
          
           protected <T> HandlerHolder<T> addRegistration(String address, HandlerRegistration<T> registration, 
        
    
  


Call  overridden addRegistration in ClusteredEventBus.java. This call explicitly looks at the localOnly flag and does not register the address in the cluster if its local only. 
  
    
      vert.x/src/main/java/io/vertx/core/eventbus/impl/clustered/ClusteredEventBus.java
    
    
         Line 186
      in
      d2b24fd
    
  
  
    

        
          
           protected <T> void addRegistration(boolean newAddress, String address, 
        
    
  



On Vert.X 4.0.3:

Call addRegistrationon EventBusImpl.java. 
  
    
      vert.x/src/main/java/io/vertx/core/eventbus/impl/EventBusImpl.java
    
    
         Line 238
      in
      d7605ab
    
  
  
    

        
          
           protected <T> HandlerHolder<T> addRegistration(String address, HandlerRegistration<T> registration, boolean replyHandler, boolean localOnly, Promise<Void> promise) { 
        
    
  


Call  overridden onLocalRegistration in ClusteredEventBus.java. This call does not take a localOnly flag and ends up registering the address in the cluster always. 
  
    
      vert.x/src/main/java/io/vertx/core/eventbus/impl/clustered/ClusteredEventBus.java
    
    
         Line 128
      in
      d7605ab
    
  
  
    

        
          
           protected <T> void onLocalRegistration(HandlerHolder<T> handlerHolder, Promise<Void> promise) { 
        
    
  



Steps to reproduce

Start application in clustered mode with Zookeper.
Create local consumer event handler with a subscription or open a NetSocket.
Inspect /io.vertx/__vertx.subs in Zookeper.
Local addresses or socket write IDs are published.

Extra
Tested on macOS 11, openJDK 11.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3883
Do not publish local consumer addressses to cluster by elventear · Pull Request #3883 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3884
Use Netty's DecoderResult.isSuccess() by yuzawa-san · Pull Request #3884 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks @yuzawa-san
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3885
Expose cluster manager from Vert.x instance · Issue #3885 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Expose the cluster manager instance from Vert.x Instance. Today, we must cast Vertx with VertxImpl in order to access to the cluster manager instance.
Use cases

Avoid to pass multiple parameters in method signature
When the cluster manager is created and configured by external file and system properties, there is no way to retrieve instance

Contribution
I'm volunteering for implementing this feature
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3886
JsonParserImpl fails after resume · Issue #3886 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.0
It is regression bug, it works well with 3.9.4
Context
We pipeTo(WriteStream<T> dst) method in JsonParser to implement batching of items, which are returned from web service. When the drainHandler is called, it calls resume() in JsonParserImpl. These methods are called at random time.
Reproducer

https://gist.github.com/MikhailFokanov/4137dcbaabbd033df0f081fca7101379

If the ROWS_NUMBER < 1000 it works well, otherwise fails.
Steps to reproduce

Run the reproducer
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3887
add lock and try lock by dratler · Pull Request #3887 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi @vietj ,
I have signed  the eca after the PR.
what else is missing ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3888
Update index.adoc by d892fc · Pull Request #3888 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Can you please sign the Eclipse Contributor Agreement?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3889
NullPointerException when create websocket · Issue #3889 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Promise<WebSocket> p = Promise.promise();
vertx.createHttpClient().webSocket(8080, "127.0.0.1", "", p);
p.future().onComplete(res -> {
    if (res.succeeded()) {
        System.out.println(res.result());
    } else {
        res.cause().printStackTrace();
    }
});

the code above will throw a NullPointerException
Exception in thread “main” java.lang.NullPointerException
	at io.vertx.core.http.impl.HttpClientImpl.webSocket(HttpClientImpl.java:299)
	at io.vertx.core.http.impl.HttpClientImpl.webSocket(HttpClientImpl.java:286)
	at io.vertx.core.http.impl.HttpClientImpl.webSocket(HttpClientImpl.java:351)

I wonder what will be the correct usage in this case?
Version
4.03
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3890
Verticle deployment hangs up application if config is missed · Issue #3890 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3 (MacOS 11.2.3)
Context
I try to deploy Verticle which is waiting for some config data.
No config was provided during deployment.
Verticle is hanging without any errors.
Sample code
Sample verticle
public final class SampleVerticle extends AbstractVerticle {

  @Override
  public void start(final Promise<Void> promise) {

    listenEventBus()
        .compose(v -> startTimer())
        .onSuccess(v -> LOG.info("Sample service is ready."))
        .onComplete(promise);
  }

  private Future<Void> listenEventBus() {

    final Promise<Void> result = Promise.promise();

    vertx
        .eventBus()
        .<JsonObject>consumer(
            SAMPLE_ADDRESS,
            msg -> processMessage(msg))
        .completionHandler(result);

    return result.future();
  }

  private Future<Void> startTimer() {

    final Integer period = config().getInteger("timer_period"); //NO VALUE IN CONFIG

    vertx.setPeriodic(period, timer -> LOG.info("Timer {} tick.", timer));

    return Future.succeededFuture();
  }
}

Deployment
public final class MainVerticle extends AbstractVerticle {

  @Override
  public void start() {

    vertx
        .deployVerticle(
            new SampleVerticle(),
            new DeploymentOptions()
//                .setConfig(config())
        );
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3891
Unwrapping a promise internal from an handler should always return a promise with a context · Issue #3891 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When the user provides a Promise as an Handler<AsyncResult<>> (which does not have a context), code expecting a context will throw an NPE. VertxInternal.promise(Handler<AsyncResult<T>>) should check when the promise does not have a context and act as if the promise was only an handler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3892
AsyncFile: allow access to file size · Issue #3892 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In quarkusio/quarkus#16286 we realised that AsyncFile does not provide access to the file count, so if we're using it to pump bytes into a response we can't set the Content-Length header. We can't trust the getReadLength() method as it defaults to Long.MAX_SIZE if not set, and does not reflect the file size. We also can't access the file size by asking the file system, since we have no access to the file path.
Could we get access to the file size, or if not, at least to the path?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3893
Possible fix for #3886 by adamdickmeiss · Pull Request #3893 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
we need a test for this
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3894
Expose AsyncFile size by tsegismont · Pull Request #3894 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In case someone has an alternative implementation.
…
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3895
HttpServer.exceptionHandler lacks basic information about attempted connection · Issue #3895 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
When an exception is thrown before a connection is established you can react to it by setting a HttpServer.exceptionHandler. Here it would be nice to be able to get the IP on the other end so it can be included in the log.
Use cases
Nice to have IP information about a DOS attack.
Contribution
It's a suggestion.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3896
Issues with FileUpload  · Issue #3896 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
4.0.3
Context
i am uploading file through any library or package (RestTemplate , okHttp or any other ) i am getting different size of file than actual file size .
FileUpload file = ctx.fileUploads().iterator().next();
file.size() = 2* actual file size (nearly)

byte a[] = vertx.fileSystem().readFileBlocking(file.uploadedFileName()).getBytes();
a.length = actual file size 


Map<String, Object> headers = new HashMap<>();
		headers.put(S3Constants.CONTENT_LENGTH, file.size());

producerTemplate.sendBodyAndHeaders("direct:syncUploadToS3",vertx.fileSystem().readFileBlocking(file.uploadedFileName()).getBytes(), headers);
	

whenever i tried to upload file from any of the resttemplate or any module i am getting this behavior.
com.amazonaws.SdkClientException: Data read has a different length than the expected: dataLength=116460; expectedLength=180846; includeSkipped=false; in.getClass()=class com.amazonaws.internal.ReleasableInputStream; markedSupported=true; marked=0; resetSinceLastMarked=false; markCount=1; resetCount=0
Whenever i tried with postman or curl behaviour is fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3897
Cannot invoke Http1xServerRequest.metric() because "request" is null · Issue #3897 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
In the logs of one server instance (that hosts a vertx-web based rest api) i see the following NPE every second with some pauses in between where the exception is not logged:
ContextImpl       vert.x-eventloop-thread-4  Unhandled exception
java.lang.NullPointerException: Cannot invoke "io.vertx.core.http.impl.Http1xServerRequest.metric()" because "request" is null
    at io.vertx.core.http.impl.Http1xServerConnection.reportResponseComplete(Http1xServerConnection.java:260)
    at io.vertx.core.http.impl.Http1xServerConnection.responseComplete(Http1xServerConnection.java:206)
    at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:409)
    at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:388)
    at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:444)
    at io.vertx.core.streams.impl.PipeImpl.handleSuccess(PipeImpl.java:116)
    at io.vertx.core.streams.impl.PipeImpl.lambda$to$2(PipeImpl.java:102)
    at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:124)
    at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
    at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
    at io.vertx.core.impl.future.PromiseImpl.tryComplete(PromiseImpl.java:23)
    at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:96)
    at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:59)
    at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
    at io.vertx.core.http.impl.HttpClientResponseImpl.handleEnd(HttpClientResponseImpl.java:250)
    at io.vertx.core.http.impl.Http2ClientConnection$StreamImpl.handleEnd(Http2ClientConnection.java:433)
    at io.vertx.core.http.impl.VertxHttp2Stream.lambda$new$1(VertxHttp2Stream.java:62)
    at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:240)
    at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:130)
    at io.vertx.core.impl.EventLoopContext.emit(EventLoopContext.java:52)
    at io.vertx.core.impl.DuplicatedContext.emit(DuplicatedContext.java:194)
    at io.vertx.core.http.impl.VertxHttp2Stream.onEnd(VertxHttp2Stream.java:134)
    at io.vertx.core.http.impl.Http2ClientConnection$Stream.onEnd(Http2ClientConnection.java:277)
    at io.vertx.core.http.impl.VertxHttp2Stream.onEnd(VertxHttp2Stream.java:129)
    at io.vertx.core.http.impl.Http2ConnectionBase.onDataRead(Http2ConnectionBase.java:316)
    at io.netty.handler.codec.http2.Http2FrameListenerDecorator.onDataRead(Http2FrameListenerDecorator.java:36)
    at io.netty.handler.codec.http2.Http2EmptyDataFrameListener.onDataRead(Http2EmptyDataFrameListener.java:49)
    at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onDataRead(DefaultHttp2ConnectionDecoder.java:318)
    at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readDataFrame(DefaultHttp2FrameReader.java:422)
    at io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:251)
    at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:160)
    at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:181)
    at io.netty.handler.codec.http2.DecoratingHttp2ConnectionDecoder.decodeFrame(DecoratingHttp2ConnectionDecoder.java:63)
    at io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378)
    at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)
    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
    at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:376)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1534)
    at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1283)
    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1330)
    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)
    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)
    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
    at java.base/java.lang.Thread.run(Thread.java:832)

As the StackTrace contains only classes from vertx and netty I don't know what to do about it or what might cause it, and as it's a NPE I think it might be interesting.
Extra
Windows Server 2019
AdoptOpenJDK 15.0.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3898
NullPointerException while handling HTTP message · Issue #3898 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
I encountered an exception while processing an HTTP request.
Do you have a reproducer?
The issue can be reproduced with https://github.com/TNG/keycloak-mock/tree/test/update-spring-boot
Steps to reproduce

Check out branch test/update-spring-boot
Run test com.tngtech.keycloakmock.examplebackend.AuthenticationTest in module example-backend
See a NullPointerException:

java.lang.NullPointerException: cause
	at io.netty.util.internal.ObjectUtil.checkNotNull(ObjectUtil.java:33) ~[netty-common-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:278) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:907) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.vertx.core.net.impl.ConnectionBase.fail(ConnectionBase.java:117) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.http.impl.Http1xServerConnection.handleError(Http1xServerConnection.java:531) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.http.impl.Http1xServerConnection.handleError(Http1xServerConnection.java:524) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:125) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:153) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:154) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:102) ~[netty-codec-http-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.vertx.core.http.impl.Http1xUpgradeToH2CHandler.channelRead(Http1xUpgradeToH2CHandler.java:115) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324) ~[netty-codec-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:296) ~[netty-codec-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:61) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:38) ~[vertx-core-4.0.3.jar:4.0.3]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493) ~[netty-transport-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) ~[netty-common-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.63.Final.jar:4.1.63.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.63.Final.jar:4.1.63.Final]
	at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_282]

Extra
As far as I can tell, the issue is caused by io.vertx.core.http.impl.Http1xServerConnection#handleMessage comparing the DecoderResult by value. With netty/netty@3f23f59 (released with Netty 4.1.61), Netty now creates its own HttpMessageDecoderResult instance, which is no longer value-equal to DecoderResult.SUCCESS.
This is not (yet) an issue with the netty version referenced in your project, but when used in combination with Spring boot 2.4.5, which pulls Netty 4.1.63, the issue arises.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3899
upgrading from 3.9.4 to 3.9.7 got NullPointerException for test case · Issue #3899 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
upgrading from 3.9.4 to 3.9.7
Context
A unit test case to deploy two vertical
    VertxUtils
        .blockDeploy(SharedVertxFactory.getSharedVertx(), TestServerVerticle.class, new DeploymentOptions());
    VertxUtils
        .blockDeploy(SharedVertxFactory.getSharedVertx(), TestClientVerticle.class, new DeploymentOptions());

got NullPointerException
java.lang.NullPointerException: cause
	at io.netty.util.internal.ObjectUtil.checkNotNull(ObjectUtil.java:33)
	at io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:278)
	at io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:907)
	at io.vertx.core.net.impl.VertxHandler.fail(VertxHandler.java:88)
	at io.vertx.core.net.impl.ConnectionBase.fail(ConnectionBase.java:86)
	at io.vertx.core.http.impl.Http1xServerConnection.handleError(Http1xServerConnection.java:495)
	at io.vertx.core.http.impl.Http1xServerConnection.handleError(Http1xServerConnection.java:488)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:121)
	at io.vertx.core.impl.ContextImpl.executeTask(ContextImpl.java:366)
	at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:43)
	at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:229)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:164)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:102)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.vertx.core.http.impl.Http1xUpgradeToH2CHandler.channelRead(Http1xUpgradeToH2CHandler.java:109)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:311)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:432)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:61)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:38)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

and cause application hang in second deployment.
Do you have a reproducer?
https://github.com/apache/servicecomb-java-chassis/blob/master/metrics/metrics-core/src/test/java/org/apache/servicecomb/metrics/core/TestVertxMetersInitializer.java
Steps to reproduce
see above
Extra
Check the lastest version, seems related to this change in the latest version:  957e9a5#diff-6066745d72c6f938f3c9b5b7f76471ede6d87c6372f30f2e104e62d083637e4a
if (request.decoderResult() != DecoderResult.SUCCESS) {

got true.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3900
Vert.x IO threads ending up with null TCCL · Issue #3900 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
We noticed an odd ClassLoading failure when running the MP Rest Client TCK against Resteasy Reactive, on investigation it turned out that the TCCL of the Vert.x thread was null.
Do you have a reproducer?
If you checkout Quarkus you can uncomment microprofile-rest-client-reactive in tcks/pom.xml and run e.g.
mvn clean install -Ptcks -pl tcks,tcks/microprofile-rest-client-reactive -Dtest=SslMutualTest
If you debug and set a breakpoint for ServiceConfigurationError you will see the TCCL is null. If you set <vertx.disableTCCL>true</vertx.disableTCCL> the test will pass.
Extra
The offending code seems to be in io.vertx.core.impl.AbstractContext#endDispatch(), which will null out the TCCL if the previous context is null, instead of returning it to the previous value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3901
Ensure that Vert.x respects the top level CL by vietj · Pull Request #3901 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
ping @cescoffier @stuartwdouglas
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3902
Log (LoggerHandlerImpl) gets swallowed if client closes connection. · Issue #3902 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.x
Context
Log is not logged
Do you have a reproducer?
No.
Steps to reproduce
This is coming from conversation here: https://groups.google.com/g/vertx/c/CZaPXYk2MA0
Add LoggerHandlerImpl to your route as early as possible. Make sure immediate is false, so that the log gets loged at the end of the request to ensure that context.addBodyEndHandler(v -> log(context, timestamp, remoteClient, version, method, uri)); is used.
Have client connect and drop close the connection before response is returned.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3903
Local codecs by slinkydeveloper · Pull Request #3903 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3904
Typo in the text by toir427 · Pull Request #3904 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse agreement @toir427 ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3905
HttpServer exceptionhandler error · Issue #3905 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
when i deploy an httpserver like this:
HttpServer server = vertx.createHttpServer(); server.requestHandler(router).listen(80),result ->{}).exceptionHandler(hr ->{});
it sometimes give an error like this:
16:01:44.158 [vert.x-acceptor-thread-0] WARN  i.n.util.concurrent.DefaultPromise - An exception was thrown by io.vertx.core.net.impl.TCPServerBase$$Lambda$103/478839936.operationComplete() java.lang.IllegalStateException: null
Version
vertx-core-4.0.3
Context
I encountered an exception which looks suspicious while ...
Do you have a reproducer?
step 1：Add breakpoint at IllegalStateException line 44
step 2：Add breakpoint at CloseHooks line 82
step 3：start application


Extra
when i remove exceptionHandler,the error is gone,like this
HttpServer server = vertx.createHttpServer(); server.requestHandler(router).listen(Integer.parseInt(config().getString("web.http.port")),result ->{});
and How did I find this problem？i deploy it in Linux ，the server cannot start，so i find this problem。but in my computer , i must Add breakpoint to reproducer this problem.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3906
Add cookie maxAge getter · Issue #3906 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
The Cookie Interface should have a method to access the maxAge property of a cookie. Right now, one can only set the max age of a cookie. but not read it.
Use cases
Give complete access to the wrapped netty default cookie. This is the only attribute one cannot read/write.
We would use this feature in a http proxy, where only a session cookie should be sent to the user agent and all other cookies from proxied requests/responses are stored in the proxy. To comply with RFC6265, we have to remove cookies from the storage when the maxAge is set to 0.
Contribution
I'd volunteer to implement this feature.
Implementation suggestion

add method getMaxAge() to Cookie interface
implement method getMagAge() in CookieImpl class
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3907
Remove System.setProperty("io.netty.noJdkZlibDecoder", "false") · Issue #3907 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Following the discussion in the following google group thread: https://groups.google.com/g/vertx/c/uRU6PYd3CKs/m/2nRuqCaEAgAJ
I would like to remove the redundant System.setProperty("io.netty.noJdkZlibDecoder", "false")
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3908
remove redundant call to set io.netty.noJdkZlibDecoder to false by tomfi · Pull Request #3908 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Following the discussion in the following google group thread: https://groups.google.com/g/vertx/c/uRU6PYd3CKs/m/2nRuqCaEAgAJ
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3909
RoutingContextImpl requires a request of type HttpServerRequestInternal and not HttpServerRequest as defined on the constructor · Issue #3909 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
On version 4.0.3, the constructor of the class RoutingContextImpl requires an HttpServerRequest object but this one will be cast later to HttpServerRequestInternal throwing a ClassCastException.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3910
fix: typo in OpenOptions javadoc by ytvnr · Pull Request #3910 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you sign the Eclipse Contributor Agreement ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3911
Consume all tokens of the internal parser of the JsonParser · Issue #3911 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of JsonParser is not able to handle parsing of several json objects when the parser is paused since we might not have consumed all the input of the internal parser.
The JsonParser instead should consume all tokens of the internal parser and buffer the corresponding events.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3912
Refactor JsonParser to consume all tokens and buffer events instead by vietj · Pull Request #3912 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj don't forget to close #3886
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3913
Fork HtthPostRequestDecoder that has performance fix by vietj · Pull Request #3913 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3914
Support jrt protocol in io.vertx.core.file.impl.FileResolver#unpackUrlResource · Issue #3914 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Read me
Read this first before creating an issue:

do not use this issue tracker to ask questions, instead use one of these channels. Questions will likely be closed without notice.
you shall create a feature request only when it is general purpose enough.
make sure that the feature is not already

Describe the feature
Add the jrt protocol to FileResolver.unpackUrlResource() method, so that vert.x can read files from resources when the app is a (jlink) run-time image.
Use cases
Jlink generated images
Contribution
private File unpackUrlResource(URL url, String fileName, ClassLoader cl, boolean isDir) {
    String prot = url.getProtocol();
    switch (prot) {
        case "file":
            return unpackFromFileURL(url, fileName, cl);
        case "jar":
            return unpackFromJarURL(url, fileName, cl);
        case "bundle": // Apache Felix, Knopflerfish
        case "bundleentry": // Equinox
        case "bundleresource": // Equinox
        case "jrt": // java run-time (JEP 220)    <<<================== Add jrt case
        case "resource":  // substratevm (graal native image)
            return unpackFromBundleURL(url, isDir);
        default:
            throw new IllegalStateException("Invalid url protocol: " + prot + " for url: " + url);
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3915
Semantic versioning for Vert.x releases · Issue #3915 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
As a user of Vert.x (in Java) it would make things a lot easier if Vert.x followed a semantic versioning policy. Excuse me if if that is already the policy.. If it is, it is not followed. Vert.x currently deprecates APIs and changes behavior within a patch release. And also bug fixes are not fixed in patches but moved to feature releases.
I know it's hard to do and there are always corner cases, where it's hard to judge whether a bug fix is really a breaking change or major change.. a bug fix is a deliberate change  - for a better behavior.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3916
Wrong implementation of how to identify cookies · Issue #3916 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Version: 4.0.3
Context
RFC 6265 HTTP State Management Mechanism, 5.3 Storage Model, Step 11 defines the tuple (name, domain, path) as the cookie identifier.
However, the implementation of Http1xServerResponse and Http2ServerResponse use only the cookie name as identifier.
Steps to reproduce

Set two cookies with the same name but different path in a response header with

public void handle(RoutingContext ctx) {
  Cookie cookie = Cookie.cookie("SOME_NAME", "foo").setPath("/");
  Cookie sameCookieWithDifferentPath = Cookie.cookie("SOME_NAME", "bar").setPath("/somePath");

  ctx.response().addCookie(cookie);
  ctx.response().addCookie(sameCookieWithDifferentPath);
  ctx.response().end();
}

Expect 2 cookies on the client, but only get 1.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3917
Add cookie maxAge getter by fbuetler · Pull Request #3917 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3918
JsonObject.hashCode() and JsonArray.hashCode() do not conform to contract · Issue #3918 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.0.3
Steps to reproduce
The implementation of hashCode() in JsonObject and JsonArray just returns the underlying list or map's hashCode() value. However, the corresponding equals() function in each class doesn't just return the underlying list or map's equals() value. Instead, a custom implementation is used. Specifically, numerical values have special handling in the equals() function in order to allow, e.g., Float and Integer objects to compare as equal if their underlying primitive values are equal. CharSequence objects are also have special handling.
This means that two objects could compare equal via equals() but return different hashCode() values. This violates the Java contract for equals() and hashCode(). This can be an issue when storing JsonObject and JsonArray objects in a HashSet or HashMap collection, since these collections assume that objects with different hashCode() values are not equal.
The recommended solution is to create a custom hashCode() implementation in both JsonObject and JsonArray that mimics the equals() implementation and so returns the same hashCode() value for any two objects if equals() returns true when called on those two objects.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3919
Client proxy enhancements by vietj · Pull Request #3919 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vsevel @cescoffier here is the proxy support enhancements for 4.1, do you mind having a look ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3920
worker verticle executed by multi thread concurrently · Issue #3920 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Hi, I deploy a worker verticle,, but i find that the worker verticle is execute by multi thread concurrently,
I am not sure if it is a multi-thread worker verticle or else.
follow is the description of worker verticle from vertx

Worker verticle instances are never executed concurrently by Vert.x by more than one thread, but can executed by different threads at different times.

Version
4.0.2
Context
here is my code, the count is less than 10000, does my code have error?
class MyVerticle extends AbstractVerticle {
    int count = 0;

    @Override
    public void start() throws Exception {
        this.vertx.eventBus().localConsumer("test_address", message -> {
            count++;
            message.reply(null);
        });
        this.vertx.eventBus().localConsumer("print", message -> {
            System.out.println(count);
        });
    }
}
import io.vertx.core.AbstractVerticle;
import io.vertx.core.DeploymentOptions;
import io.vertx.core.Future;
import io.vertx.core.Vertx;

import java.util.concurrent.CountDownLatch;

public class VertxTest {
    public static void main(String[] args) throws InterruptedException {
        Vertx vertx = Vertx.vertx();
        CountDownLatch latch = new CountDownLatch(10000);
        Future<String> stringFuture = vertx.deployVerticle(MyVerticle.class, new DeploymentOptions().setWorker(true));
        stringFuture.onComplete(result -> {
            for (int i = 0; i < 10000; i++) {
                vertx.eventBus().request("test_address", 123, message -> {
                    latch.countDown();
                });
            }
        });
        latch.await();
        vertx.eventBus().send("print", 123);
    }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3921
EventBus cannot handle received message when using Future inside · Issue #3921 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version

4.0.0
4.0.2
4.0.3
4.1.0.Beta1

Context
I encountered an exception which looks suspicious while executeBlocking when handling received message in EventBus MessageConsumer
Do you have a reproducer?
This is a test you can add it in LocalEventBusTest
  @Test
  public void testFuture() throws IOException {
    String path = File.createTempFile("vertx", ".json").toPath().toString();
    Function<String, Buffer> data = d -> new JsonObject().put("key", d).toBuffer();
    System.out.println(path);
    eb.<String>consumer(ADDRESS1)
      .handler((Message<String> msg) -> vertx.executeBlocking(
        p -> p.handle(vertx.fileSystem().writeFile(path, data.apply(msg.body())).map(ignore -> path)),
        ar -> {
          if (ar.failed()) {
            System.out.println("FAILED: " + ar.cause());
            return;
          }
          msg.reply(ar.result());
        }));
    eb.request(ADDRESS1, "whatever", ar -> {
      assertTrue(ar.succeeded());
      assertEquals(path, ar.result().body());
      testComplete();
    });
    await();
  }
It is exception when I debug in my project, hope this help
java.util.concurrent.RejectedExecutionException: Task io.vertx.core.impl.TaskQueue$$Lambda$337/1063462894@6ccba607 rejected from java.util.concurrent.ThreadPoolExecutor@22ad0c08[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 13]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379)
	at io.vertx.core.impl.TaskQueue.execute(TaskQueue.java:93)
	at io.vertx.core.impl.ContextImpl.executeBlocking(ContextImpl.java:190)
	at io.vertx.core.impl.DuplicatedContext.executeBlockingInternal(DuplicatedContext.java:158)
	at io.vertx.core.file.impl.FileSystemImpl$BlockingAction.run(FileSystemImpl.java:1143)
	at io.vertx.core.file.impl.FileSystemImpl.writeFile(FileSystemImpl.java:428)
	at io.zero88.qwe.file.TextFileOperatorImpl.lambda$null$6(TextFileOperatorImpl.java:47)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
	at io.vertx.core.impl.future.Mapping.onSuccess(Mapping.java:40)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
	at io.vertx.core.impl.future.Composition$1.onSuccess(Composition.java:62)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
	at io.vertx.core.impl.future.Mapping.onSuccess(Mapping.java:40)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
	at io.vertx.core.impl.future.Composition$1.onSuccess(Composition.java:62)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:179)
	at io.vertx.core.impl.future.Composition$1.onSuccess(Composition.java:62)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:62)
	at io.vertx.core.impl.future.SucceededFuture.addListener(SucceededFuture.java:82)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3922
Allow jrt protocol by pmlopes · Pull Request #3922 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
running checks to merge it for 4.1.0.CR1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3923
about future tryComplete · Issue #3923 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
When complete error is regarded as a normal result, the Listener's complete result is inconsistent
Version
current(4.0.3)
Do you have a reproducer?
    public static void main(String[] args) {

        Promise<Object> promise = Promise.promise();
        promise.future()
                .onSuccess(v -> {
                    System.out.println("1.succeeded ");
                })
                .onFailure(v -> {
                    System.out.println("1.failed");
                });
        promise.complete(new RuntimeException());

        promise.future()
                .onSuccess(v -> {
                    System.out.println("2.succeeded ");
                })
                .onFailure(v -> {
                    System.out.println("2.failed ");
                });
    }

result
1.succeeded 
2.failed 

expect
1.succeeded 
2. succeeded
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3924
Fix future tryComplete. by wang007 · Pull Request #3924 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
see issue:  about future tryComplete #3923
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3925
Clustered eventbus not removing old node/pod on kubernetes rolling deployment · Issue #3925 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I have two vertx micro services running in cluster and communicate with each other using a headless service(link) in on premise cloud. Whenever I do a rolling deployment I am facing connectivity issue within services. When I analysed the log I can see that old node/pod is getting removed from cluster list but the event bus is not removing it and using it in round robin basis. I am pretty sure that event is passed to hazelcast but not to event bus. I am not sure if there is any listener that I could listen and remove dead pods.
Below is the member group information before deployment
Member [192.168.4.54]:5701 - ace32cef-8cb2-4a3b-b15a-2728db068b80        //pod 1
Member [192.168.4.54]:5705 - f0c39a6d-4834-4b1d-a179-1f0d74cabbce this
Member [192.168.101.79]:5701 - ac0dcea9-898a-4818-b7e2-e9f8aaefb447      //pod 2

When deployment is started, pod 2 gets removed from the member list,
[192.168.4.54]:5701 [dev] [4.0.2] Could not connect to: /192.168.101.79:5701. Reason: SocketException[Connection refused to address /192.168.101.79:5701]
Removing connection to endpoint [192.168.101.79]:5701 Cause => java.net.SocketException {Connection refused to address /192.168.101.79:5701}, Error-Count: 5
Removing Member [192.168.101.79]:5701 - ac0dcea9-898a-4818-b7e2-e9f8aaefb447

And new member is added
Member [192.168.4.54]:5701 - ace32cef-8cb2-4a3b-b15a-2728db068b80
Member [192.168.4.54]:5705 - f0c39a6d-4834-4b1d-a179-1f0d74cabbce this
Member [192.168.94.85]:5701 - 1347e755-1b55-45a3-bb9c-70e07a29d55b  //new pod
All migration tasks have been completed. (repartitionTime=Mon May 10 08:54:19 MST 2021, plannedMigrations=358, completedMigrations=358, remainingMigrations=0, totalCompletedMigrations=3348, elapsedMigrationTime=1948ms, totalElapsedMigrationTime=27796ms

I have two vertx micro services running in cluster and communicate with each other using a headless service(link) in on premise cloud. Whenever I do a rolling deployment I am facing connectivity issue within services. When I analysed the log I can see that old node/pod is getting removed from cluster list but the event bus is not removing it and using it in round robin basis.
Below is the member group information before deployment
    Member [192.168.4.54]:5701 - ace32cef-8cb2-4a3b-b15a-2728db068b80        //pod 1
    Member [192.168.4.54]:5705 - f0c39a6d-4834-4b1d-a179-1f0d74cabbce this
    Member [192.168.101.79]:5701 - ac0dcea9-898a-4818-b7e2-e9f8aaefb447      //pod 2

When deployment is started, pod 2 gets removed from the member list,
[192.168.4.54]:5701 [dev] [4.0.2] Could not connect to: /192.168.101.79:5701. Reason: SocketException[Connection refused to address /192.168.101.79:5701]
    Removing connection to endpoint [192.168.101.79]:5701 Cause => java.net.SocketException {Connection refused to address /192.168.101.79:5701}, Error-Count: 5
    Removing Member [192.168.101.79]:5701 - ac0dcea9-898a-4818-b7e2-e9f8aaefb447

And new member is added,
Member [192.168.4.54]:5701 - ace32cef-8cb2-4a3b-b15a-2728db068b80
    Member [192.168.4.54]:5705 - f0c39a6d-4834-4b1d-a179-1f0d74cabbce this
    Member [192.168.94.85]:5701 - 1347e755-1b55-45a3-bb9c-70e07a29d55b  //new pod
All migration tasks have been completed. (repartitionTime=Mon May 10 08:54:19 MST 2021, plannedMigrations=358, completedMigrations=358, remainingMigrations=0, totalCompletedMigrations=3348, elapsedMigrationTime=1948ms, totalElapsedMigrationTime=27796ms)

But when a request is made to the deployed service, event though old pod is removed from member group the event bus is using the old pod/service reference(ac0dcea9-898a-4818-b7e2-e9f8aaefb447)
`[vert.x-eventloop-thread-1] DEBUG io.vertx.core.eventbus.impl.clustered.ConnectionHolder - tx.id=f9f5cfc9-8ad8-4eb1-b12c-322feb0d1acd Not connected to server ac0dcea9-898a-4818-b7e2-e9f8aaefb447 - starting queuing`
### Version

I am using vertx 4.0.3 and hazelcast kubernetes 1.2.2. My verticle class is extending AbstractVerticle and deploying using,
Vertx.clusteredVertx(options, vertx -> {
vertx.result().deployVerticle(verticleName, deploymentOptions);
Sorry for the long post, any help is highly appreciated.
As mentioned earlier this happens only on deployment and if I restart the pods the issue is not getting reproduced.
This happens only on vertx4 4.0.3 and with vertx3 i haven't seen this issue.
Also I am not able to find event bus functionality that I can use it to removes the node info.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3926
Please enhance JksOptions to support selection of SSL key in keystore using an alias property · Issue #3926 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
For context, I asked this question originally for Quarkus (see:  https://quarkusio.zulipchat.com/#narrow/stream/187030-users/topic/Any.20way.20to.20specify.20SSL.20key.20alias.20when.20using.20a.20keystore.20.3F ) and was asked to raise an issue for a Vert.x change.
There is currently no way to choose the SSL key alias for cases where a java key store may contain more than one key, thus no way to ensure the correct key is used when presenting the server certificate for SSL.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3927
Equality comparison of DecoderResult instances · Issue #3927 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
In Http1xServerConnection.handleMessage, line 124 compares DefaultHttpRequest.decoderResult() with DecoderResult.SUCCESS
if (request.decoderResult() != DecoderResult.SUCCESS) {
In the latest version of Netty, these can be two different instances of DecoderResult and therefore may not be equal even if they are both SUCCESS.
DecoderResult.SUCCESS is of type DecoderResult. request.decoderResult is of type HttpMessageDecoderResult. Two instances of different classes cannot be the same.
Do you have a reproducer?
Could make one if it would be helpful.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3928
Add ability to enable/disable compression on a per request basis · Issue #3928 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
At the moment you can enable compression for HTTP responses, however this will compress every response. This means that responses that are already compressed such as images or videos will be doubly compressed, wasting lots of CPU cycles.
Use cases
This will allow end users to control which responses are compressed.
I propose that when compression is enabled we use a virtual header: X-Vertx-Disable-Compression. We can override beginEncode in `HttpChunkContentCompressor, and if this header is present remove it and disable compression.
Contribution
I can do it if you are ok, with the implementation. I don't particularly like the suggestion however I don't really see any other way to pass this info to Netty.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3929
HTTP redirect handler should remove the content-length header · Issue #3929 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current HTTP direction handler needs to remove the content-length header of the next HTTP request.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3930
HTTP redirect handler must propagates request headers to the next request · Issue #3930 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
An HTTP redirected request will have its headers propagated by the client after the redirect handler has provided the next request options. Instead the redirect handler needs to take care of the headers propagation so the redirect handler has full control over the next request.
This is a breaking change for existing handlers that should propagate the headers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3931
Add alias property in JksOptions for net/http servers by tsegismont · Pull Request #3931 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this brings some coupling between SSLHelper and JksOptions which is something I would like to avoid. When an alias is used, I think we could create a new KeyStore that contains the alias we extract from the original KeyStore instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3932
Netty 4.1.64.Final by vietj · Pull Request #3932 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3933
Add alias property in KeyStore options for net/http servers by tsegismont · Pull Request #3933 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I think we can avoid it since, the user simply should not set an alias on a
client JKS options
…
On Wed, May 19, 2021 at 3:56 PM Thomas Segismont ***@***.***> wrote:
 ***@***.**** commented on this pull request.
 ------------------------------

 In src/main/java/io/vertx/core/net/KeyCertOptions.java
 <#3933 (comment)>:

 > @@ -39,6 +39,17 @@
     */
    KeyManagerFactory getKeyManagerFactory(Vertx vertx) throws Exception;

 +  /**
 +   * Like ***@***.*** #getKeyManagerFactory}, except the underlying keystore can be filtered.
 +   * <p>
 +   * This should be called only when creating a ***@***.*** KeyManagerFactory} for a TCP or HTTP server.
 +   *
 +   * @param vertx the vertx instance
 +   * @return the key manager factory
 +   * @see JksOptions#setAlias(String)
 +   */
 +  KeyManagerFactory getKeyManagerFactory(Vertx vertx, boolean filter) throws Exception;

 Yes

 —
 You are receiving this because your review was requested.
 Reply to this email directly, view it on GitHub
 <#3933 (comment)>,
 or unsubscribe
 <https://github.com/notifications/unsubscribe-auth/AABXDCTOCDSH2AQREAFGAG3TOO7SFANCNFSM45EWQSYQ>
 .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3934
Modify ExecutorServiceFactory API to provide a way to distinguish between pool types · Issue #3934 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
When ExecutorServiceFactory.createExecutor() is called, provide a method on the API to distinguish the type of executor being created. Maybe it's as simple as passing the name the ThreadFactory is created with?
Use cases
In Quarkus we want the ability to replace the default Executor in some situations, such as the Vert.x worker thread pool, with a shared pool we've created, but other pools create their own Executor instance.
Contribution
Happy to contribute a PR once it's determined the best way to provide an indicator to differentiate the pool types
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3935
Incorrect sec-websocket-location header scheme value for WebSocket V00 · Issue #3935 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The sec-websocket-location header value sent by the server during the handshake of WebSocket V00 protocol has an incorrect scheme (wss and ws are swapped).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3936
Incorrect sec websocket location for v00 by vietj · Pull Request #3936 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Backport from master.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3937
Deprecate peerCertificateChains method · Issue #3937 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Java has deprecated SslSession#peerCertificateChains method for a long time. Recent Java versions will thrown an exception when calling it. These methods are deprecated in favor of peerCertificates() which return a List<java.security.cert.Certificate> on HttpConnection, WebSocketBase and NetSocket.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3938
Build passing for Java 16 · Issue #3938 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Ensure that Vert.x core (as part of the stack) build and is tested for Java 16. This is preparation work for the next Java 17 LTS.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3939
New peerCertificates method that returns a list of java.security.cert.Certificate · Issue #3939 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3940
Netty 4.1.65.Final · Issue #3940 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3941
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3942
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3943
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3944
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3945
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3946
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3947
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3948
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3949
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3950
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3951
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3952
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3953
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3954
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3955
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3956
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3957
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3958
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3959
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3960
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3961
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3962
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3963
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3964
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3965
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3966
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3967
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3968
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3969
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3970
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3971
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3972
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3973
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3974
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3975
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3976
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3977
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3978
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3979
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3980
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3981
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3982
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3983
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3984
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3985
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3986
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3987
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3988
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3989
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3990
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3991
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3992
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3993
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3994
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3995
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3996
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3997
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3998
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/3999
Random port server sharing by vietj · Pull Request #3999 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4000
local address  are registered to the cluster · Issue #4000 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I use websocket through vertx and enable the cluster (zookeeper). I noticed that when a websocket connection is created, an address will be generated and registered to the zookeeper. When the registration is cancelled, only the data in the address will be cleared, not clear the address, causing the zookeeper node to increase indefinitely,Many nodes like this:
__vertx.net.fe071115-964d-40d8-b908-3e764188d2ad
__vertx.ws.014f5f57-829e-45a8-9580-bc42007cb33b
Version
4.1.1
Context
i read the source code,found this :
class  NetSocketImpl

  void registerEventBusHandler() {
    Handler<Message<Buffer>> writeHandler = msg -> write(msg.body());
    registration = vertx.eventBus().<Buffer>localConsumer(writeHandlerID).handler(writeHandler);
  }
and
class  WebSocketImplBase

  void registerHandler(EventBus eventBus) {
    Handler<Message<Buffer>> binaryHandler = msg -> writeBinaryFrameInternal(msg.body());
    Handler<Message<String>> textHandler = msg -> writeTextFrameInternal(msg.body());
    binaryHandlerRegistration = eventBus.<Buffer>localConsumer(binaryHandlerID).handler(binaryHandler);
    textHandlerRegistration = eventBus.<String>localConsumer(textHandlerID).handler(textHandler);
  }
used  method   <T> MessageConsumer<T> localConsumer(String address)  when registering  ,
then will arrive this :
class ClusteredEventBus , method :
  @Override
  protected <T> void onLocalRegistration(HandlerHolder<T> handlerHolder, Promise<Void> promise) {
    if (!handlerHolder.isReplyHandler()) {
      RegistrationInfo registrationInfo = new RegistrationInfo(
        nodeId,
        handlerHolder.getSeq(),
        handlerHolder.isLocalOnly()
      );
      clusterManager.addRegistration(handlerHolder.getHandler().address, registrationInfo, Objects.requireNonNull(promise));
    } else if (promise != null) {
      promise.complete();
    }
  }
the handlerHolder，isReplyHandler() is false，but localOnly is  true，
so the address  is registered to the clusterManager。
I think this address should not be registered to the clusterManager,because  the address is registered with localConsumer method,
Maybe it should be so?
if (!handlerHolder.isReplyHandler() && !handlerHolder.isLocalOnly())
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4001
NetClient local connectTimeout support · Issue #4001 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
NetClient now use a global connectTimeout by NetClientOptions.
is that possible set a local connectTimeout when use NetClient.connect(xx) method ?
Use cases
so we can use a shared NetClient for tcp health check with difference upstream connect timeout.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4002
Unnecessary HttpClient socket event bus registration · Issue #4002 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Since the HttpClient uses a NetClient to manage sockets, the NetClient does register an event bus handler for the NetSocket. In such situation we should avoid this as this is not necessary.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4003
Backport from master by vietj · Pull Request #4003 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4004
Backport from master by vietj · Pull Request #4004 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4005
Do not create a VertxTracer if TracingOptions are null by Ultranium · Pull Request #4005 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks, can you add a test for this case ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4006
Standard verticles with worker pool name setted are not properly assigned event loop · Issue #4006 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Multiple standard verticles are assigned only the half of all event loops, and another half of event loops are always idle.
Version
3.9.4
Context
When deploying one verticle with worker pool name setted, vertx object's createSharedWorkerExecutor method is called, and in this method getOrCreateContext method is called to add close hook. and out of createSharedWorkerExecutor method the second time getOrCreateContext is called.
getOrCreateContext method returns event loop one after another, and in current scenario deploying one verticle vertx looped two event loops, and verticle is assigned the second event loop.
Unfortunately default event loop pool size is core*2, this means no matter how many verticle instances are deployed, they are assigned only the half of all event loops.
Steps to reproduce

Create vertx with default VertxOptions, and default event loop pool size is core*2.
Vertx vertx = Vertx.vertx(new VertxOptions());
Deploy verticles with worker pool name.
DeploymentOptions options = new DeploymentOptions().setInstances(2 * CpuCoreSensor.availableProcessors()).setWorkerPoolName("workerPoolName");
vertx.deployVerticle(bizVerticle, options, ar -> {
});
Analyze by VisualVM, and we will see the relations between verticles and eventloop is like this:
{verticle-0,eventloop-1},{verticle-1,eventloop-3},{verticle-2,eventloop-5},{verticle-3,eventloop-7},{verticle-4,eventloop-9}......
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4007
A VertxTracerFactory should not create a tracer when tracing options is null by vietj · Pull Request #4007 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4008
MetricsOptions Enabled Doesn't Work with SysProps · Issue #4008 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
-Dvertx.metrics.options.enabled=true does not seem to work anymore. It appears this might be related to #3804 / #3810 .
Changing the BareCommand.java code to move builder.init(); to where it originally was
if (options.getMetricsOptions() != null) {
    configureFromSystemProperties(options.getMetricsOptions(), METRICS_OPTIONS_PROP_PREFIX);
}
builder.init();

while keeping beforeStartingVertx(options); in the current location appears to fix the issue.
Do you have a reproducer?
Add to LauncherTest#testCustomMetricsOptions() assertTrue(launcher.getVertx().isMetricsEnabled()); and you will see that the assert fails. After moving the builder.init() back to the previous location, that assert will pass.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4009
Close long running connection · Issue #4009 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We have implemented k8s health checks(readiness and liveness) to ensure healthy containers. The problem I am facing is that when the liveness probe fails for 2 times, I want to close all the connected connections (some of them might be long running connections) before I can restart the containers. Is there any way I get get the list of all connected connections and close/terminate them. I am using vertx-web 4.x .
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4010
Vert.x WebClient should support Content-Encoding: gzip/deflate on POST/PUT · Issue #4010 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Vert.x WebClient at the moment does not support automatic decompression if the http response has Content-Encoding : gzip on POST/PUT Request.
If we add below code while creating Vert.x client, we only get below header in http response.
"Transfer-Encoding": "chunked".
public VertxHttpClient(Vertx vertx) {
    this(vertx, new WebClientOptions().setTryUseCompression(true));
}

Use cases
This automatic decompression of http response header and body should also work with other response compression algorithms [Accept-Encoding:gzip, deflate, br].
This feature needs to be implemented in vert.x core.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4011
Deployment named worker pool should not create a worker executor · Issue #4011 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A deployment using a named worker pool will create a worker executor and then unwraps the internal worker pool. The worker executor creation might create an extra vertx context potentially interfering with the deployment of multiple instance of the verticle that will be assigned only a portion of all available event loops.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4012
webSocket  EventBus  Timed out after waiting 30000(ms) for a reply · Issue #4012 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Timed out after waiting 30000(ms) for a reply.
@ExtendWith(VertxExtension.class)
public class VertxTest {
Vertx vertx = Vertx.vertx();
void start(Vertx vertx) throws InterruptedException {
EventBus bus = vertx.eventBus();
AtomicReference<String> id = new AtomicReference();
        vertx.createHttpServer().webSocketHandler(h -> {
            id.set(h.binaryHandlerID());
        }).listen(3000);
        vertx.createHttpClient().webSocket(3000, "127.0.0.1", "").onComplete(h -> {
            if (h.succeeded()) {
                WebSocket webSocket = h.result();
                webSocket.handler(h1->{
                   log.info(h1.toString()+" "+webSocket.binaryHandlerID()+">"+webSocket.textHandlerID());
                    webSocket.writeBinaryMessage(Buffer.buffer(">>>>1"));
                    webSocket.writeTextMessage("a");
                    webSocket.write(Buffer.buffer(">>>>2"));
               });
            }
        });
        TimeUnit.SECONDS.sleep(2);
        bus.request(id.get(), Buffer.buffer("1"),h->{
                if (h.succeeded()) {
                    log.info(h.result().body().toString());
                } else log.error(h.cause().getMessage());
        });
}
}
Version
4.1.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4013
Make sure metrics and cluster manager can be customized in Launcher by vietj · Pull Request #4013 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4014
do not create HAManager when it is disabled by DemonicTutor · Pull Request #4014 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@DemonicTutor Thomas is currently on PTO and I assigned this to review for 4.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4015
clear set all method when calling with Map. by phillip-kruger · Pull Request #4015 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks @phillip-kruger can you add a test for this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4016
requests to io.vertx.core.http.impl.Http1xServerRequest.trace() are throwing NullPointerException · Issue #4016 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.1.1
Context
After upgrading to Vert.x 4.1.1 we started experiencing these errors on our logs
java.lang.NullPointerException: Cannot invoke "io.vertx.core.http.impl.Http1xServerRequest.trace()" because "request" is null
at io.vertx.core.http.impl.Http1xServerConnection.reportResponseComplete(Http1xServerConnection.java:277) ~[vertx-core-4.1.1.jar:4.1.1]
at io.vertx.core.http.impl.Http1xServerConnection.responseComplete(Http1xServerConnection.java:211) ~[vertx-core-4.1.1.jar:4.1.1]
at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:409) ~[vertx-core-4.1.1.jar:4.1.1]
at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:388) ~[vertx-core-4.1.1.jar:4.1.1]
at io.vertx.core.http.impl.Http1xServerResponse.end(Http1xServerResponse.java:444) ~[vertx-core-4.1.1.jar:4.1.1]
at io.vertx.reactivex.core.http.HttpServerResponse.end(HttpServerResponse.java:156) ~[vertx-rx-java2-4.1.1.jar:4.1.1]
at io.vertx.reactivex.core.http.HttpServerResponse.end(HttpServerResponse.java:163) ~[vertx-rx-java2-4.1.1.jar:4.1.1]
something similar to #3897 but on the trace() call
Do you have a reproducer?
We found out that this snippet throws the exception:
private void setErrorResponse(HttpServerResponse response) {
        response
                .setStatusCode(INTERNAL_SERVER_ERROR.code())
                .putHeader(X_SHOULD_LOG_AS_WARNING, Boolean.TRUE.toString())
                .end();
    }
but this one doesn't
private void setErrorResponse(ServiceException exception, HttpServerResponse response) {
        int httpError = exception.getError().getHttpError();
        response
                .setStatusCode(httpError)
                .putHeader(X_SHOULD_LOG_AS_WARNING, Boolean.TRUE.toString())
                .end(Json.encode(exception));
    }
thanks in advance
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4017
a file download bug of static handler · Issue #4017 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
StaticHandler Bug!
Version
4.1.0
Context
My project is running on vert.x 4.1.0.
Some mp3 files need to be downloaded by url, /donwload/*.mp3, which is a static-handler router.
But the file downloaded by /downlaod/*.mp3 has a wrong file size and failed to read.
If rename the mp3 files as jpg，the client can get the right size files.
When i change vertx form 4.1.* to 3.9.*, all run good.
Do you have a reproducer?
https://github.com/WengYuehTing/StaticHandler-issue
Steps to reproduce

mvn package
java -jar target/bas-ws-0.0.1-fat.jar
test:
download the 2 files by url:
127.0.0.1:8099/test.mp3
127.0.0.1:8099/test.jpg

test.mp3 and test.jpg are the same files expcept names.
but client gets two different size files.
Extra
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4018
ConfigRetrieverImpl use equal() to compare two JsonObject · Issue #4018 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
ConfigRetrieverImpl use equal() to compare two JsonObject,thus it will be always be false.
Version
vertx.version is 4.1.1
original code
  private void scan() {
    Handler<Void> h;
    synchronized (this) {
      h = this.beforeScan;
    }
    if (h != null) {
      h.handle(null);
    }
    compute().onFailure(throwable -> {
      streamOfConfiguration.fail(throwable);
      LOGGER.error("Error while scanning configuration", throwable);
    }).onSuccess(result -> {
      JsonObject prev;
      List<Handler<ConfigChange>> handlers;
      synchronized (this) {
        // Check for changes
       //here will always be true so ithave been handler twice,ervn through the config does change
        if (!current.equals(result)) {
          prev = current;
          current = result;
          handlers = !listeners.isEmpty() ? new ArrayList<>(listeners) : Collections.emptyList();
        } else {
          prev = null;
          handlers = null;
        }
      }
      if (handlers != null) {
        handlers.forEach(changeHandler -> changeHandler.handle(new ConfigChange(prev, result)));
        streamOfConfiguration.handle(result);
      }
    });
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4019
Event Loop Thread Pool Size with Hyperthreading on Linux · Issue #4019 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Quarkus Vert.x - Final 1.12.1
Context
While testing out Vert.x i noticed that the size of the default Event Loop Thread Pool was 32-Threads on my linux-system.
However i have only 16 logical CPU's (8 physical-cores x 2 threads).
Shouldn't the default number of Event Loop Thread Pool be twice the number of physical CPU-Cores instead of logical CPU's (so 16 instead of 32)?
I checked 
  
    
      vert.x/src/main/java/io/vertx/core/impl/cpu/CpuCoreSensor.java
    
    
         Line 53
      in
      601bacc
    
  
  
    

        
          
           public static int availableProcessors() { 
        
    
  


and the value of 'Cpus_allowed' inside '/proc/self/status' seems to be the number of logical cpu's (so 16 for me), so hyperthreading was already calculated there. Therefore in my opinion it is not correct to double that size again.
Extra
Processor: AMD Ryzen 7 2700x eight-core processor x 16
OS: Fedora 34 (Workstation Edition)
Java Version: 11
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4020
Server WebSocket handshake should set the HttpServerResponse as written · Issue #4020 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The server WebSocket handshake sends directly a Netty response through the handshaker, it sets the responseInProgress field of the Http1xServerConnection appropriately but leaves the Http1xServerResponse as is.
When Http1xServerResponse is used after the handshake it might fail (see #4016), instead the response should be updated to become written and throw IllegalStateException when response write operations are performed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4021
Server WebSocket handshake should set the HttpServerResponse as written by vietj · Pull Request #4021 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4022
Rename HTTP client option tryUseCompression to decompressionSupported · Issue #4022 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The client tryUseCompression option seems misleading as it implies that it will try to compress the request and instead it means that it will send a request with an accepting-encoding header set to a compression algorithm to tell the server that it supports a compressed body and will inflate it.
The server can decompress HTTP client bodies and the option is named decompressionSupported. We could deprecate tryUseCompression and rename it decompressionSupported.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4023
add a method in HttpClientReuqest to get the request metric · Issue #4023 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
We are reporting metrics using VertxMetrics， and get metric object through
HttpClientRequest.connection().metric() .
This is fine to get TCPMetrics.
Request metric is accessable  in HttpClientStream, but it is a protected member of HttpClientRequest, and we can not get the request metrics.
Use cases
Report request metrics like time taken in request begin and end.
Contribution
I am not sure if it is suitable to add a method Object metric() in HttpClientRequest, and I can create a PR if it is fine.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4024
Concurrency issue in listener of TCPServerBase#listen · Issue #4024 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.1
Context
I stumbled upon a concurrency issue while debugging TCPServerBase in context of #3994:
There is a race between what's happening in that listener that is registered via bindFuture.addListener(...) and the code that is running directly in that listen method after doBind() is done.
(Important: bindFuture.addListener() says: The specified listener is notified when this future is done.)
That listener is setting the "outer" field id with the actual port but that field is also pre-set before that listener with port 0.
So dependening who is faster (the listener or the outer method code), the final sharedNetServers.put(id, this); will either pick up the id with the actual port or the one with 0. This is even less predictable due to id not having volatile or synchronized.
The effect while debugging was that if I waited before sharedNetServers.put(id, this);, I was getting another random port for each verticle (correct term?) while without debugging all got the same random port.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4025
Quarkus needs the ability to change the ClassLoader · Issue #4025 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Quarkus Development mode works by dropping and re-creating a class loader every time code is changed. As this is triggered by a HTTP request vert.x is not restarted each time, so the HTTP requests work as expected.
This is causing issues such as quarkusio/quarkus#18299 where vert.x is hanging onto the original ClassLoader that was passed in at creation time. With Vert.x 3 we worked around  this by manually scheduling a task on each IO thread that updated the Thread context ClassLoader, however this no longer works in Vert.x 4, as Vert.x is resetting the CL each time.
For now we are likely going to work around it via vertx.disableTCCL=true and filtering out the resulting warnings.
In terms of implementation I was thinking maybe instead of Vert.x taking a ClassLoader it could take a Supplier, and this could be use to obtain the correct TCCL each time.
Contribution
I can implement it if there is consensus on what it should look like.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4026
Make methods on io.vertx.core.impl.WorkerPool public by Sanne · Pull Request #4026 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Do you intent to use the worker pool directly ? using it directly will not report metrics as this is the raw pool.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4027
For vertx core of  Promise maybe offer a abstract Promise Impl · Issue #4027 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Use promise  every time，i will new an anonymous class， it's not so easy to use,just this:
 fun nodeInfo() {
            val mgr: ClusterManager = ZookeeperClusterManager()
            val options = VertxOptions().setClusterManager(mgr)
            Vertx.clusteredVertx(options) {
                if (it.succeeded()) {
                    mgr.nodes.forEach { node ->
                        mgr.getNodeInfo(node, object : Promise<NodeInfo> {
                            override fun tryFail(p0: Throwable): Boolean {
                                p0.printStackTrace()
                                return true
                            }

                            override fun future(): Future<NodeInfo>? = null
                            override fun tryComplete(p0: NodeInfo): Boolean {
                                println(p0)
                                return true
                            }
                        })
                    }
                }
            }
        }

For vertx core of  Promise maybe offer a abstract Promise Impl to simplification
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4028
Reuse emit func in FutureBase by drriguz · Pull Request #4028 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
this is done on purpose, because the issue of this PR is that it will instante an object because of listener::onSuccess and we want to avoid this creation
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4029
Make methods on io.vertx.core.impl.WorkerPool public by Sanne · Pull Request #4029 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Following up on #4026 (comment)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4030
backport from master of disabling HaManager (https://github.com/eclipse-vertx/vert.x/pull/4014) by DemonicTutor · Pull Request #4030 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Thank you @DemonicTutor but given this is a nice enhancement, not a fix for a blocking issue, I prefer not to backport it to a bugfix release.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4031
PKCS12 Keystore format when running in a FIPS-restricted JRE · Issue #4031 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
3.9.8, but later versions appear to have the same issue.
Context
We are developing a number of applications that need to be able to run in a JRE that has all non-FIPS compliant encryption formats disabled/removed. We have a BCFKS KeyStore, and we are able to read it in, however, we get an error because Vert.x then tries to initialize an internal PKCS12 KeyStore, which is not present in our environment:
io.vertx.core.VertxException: java.security.KeyStoreException: PKCS12 not found

We traced the issue to the createEmptyKeyStore function in /src/main/java/io/vertx/core/net/impl/KeyStoreHelper.java, which hard-codes the new empty keystore to the PKCS12 format. We verified that we could create a custom build of Vert.x with the hard-coded value changed to BCFKS, and Vert.x then successfully runs on the affected environment, however this is not a practical long-term solution.
Do you have a reproducer?
To reproduce, you will need to remove the PKCS12 KeyStore format from the JRE's lib/security/java.security file. To do this, find the list of providers and comment out the line containing com.sun.net.ssl.internal.ssl.Provider. Save the file, and then read in a (non-PKCS12) KeyStore using Vert.x.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4032
Promises/futures with context do not always use context exception handler · Issue #4032 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.2
Description
If a promise is completed or failed, any handler attached to the associated future may throw an exception. How that exception is handled currently depends on several factors:

Future has a context, but the future is completed/failed on a different context:

Behavior: The exception is given to context.reportException() and does not bubble up.


Future has a context, and the future is completed/failed on that context:

Behavior: The exception bubbles up to whatever completed/failed the promise.


Future does not have a context:

Behavior: The exception bubbles up to whatever completed/failed the promise.



The behavior of situation 2 should match 1. But it currently matches 3. This behavior is due to the if() statement at https://github.com/eclipse-vertx/vert.x/blob/4.1.2/src/main/java/io/vertx/core/impl/future/FutureBase.java#L50.
See #1568 for the discussion that led to the creation of this issue.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4033
Metric "vertx.eventbus.messages.pending" is not decreasing. · Issue #4033 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Metric vertx.eventbus.messages.pending is not decreasing in some cases.

In my application, it seems exact number of handlers going up and down well as time goes. while some of pending handlers seem to forget to decrease themselves metric.
At the end of the cliff, I had restarted the application.
I think this mismatch supposed to happen at the point of rapidly unregistering consumers... maybe?
I made a reproducer for it. @vietj
Version
using vertx 4.1.0.
Context
From #1480
Steps to reproduce

to run, clone https://github.com/dehypnosis/vertx-pending-handlers
and execute ./run.sh
check http://localhost:8080 with browser which shows weird prometheus metrics. You can see vertx.eventbus.messages.pending is stuck.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4034
Internal future listeners should report handler failures by vietj · Pull Request #4034 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4035
Disable TCCL propagation at the Vertx instance level · Issue #4035 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Vertx provides the vertx.disableTCCL property to disable thread context classloader propagation on context actions. Sometimes it is desirable to achieve the same behavior without relying on a system property.
We should introduce a disableTCCL property on VertxOptions to control this behavior and have the default value being set to false or configured to vertx.disableTCCL when present.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4036
Remove legacy TCCL check log · Issue #4036 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This log is not really helpful, in addition it is possible to disable TCCL and have a TCCL set to the non system classloader.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4037
Disable TCCL vertx options by vietj · Pull Request #4037 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@Sanne please have a look
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4038
Add support for Unix domain datagram sockets when using native epoll/kqueue transport · Issue #4038 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Now possible in Netty : netty/netty#11423
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4039
Vertx option to disable TCCL by vietj · Pull Request #4039 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4040
Vertx option to disable TCCL and remove irrelevant TCCL warn log by vietj · Pull Request #4040 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4041
Use KeyStore.getDefaultType() for internal KeyStore type, but use 'PKCS12' over 'JKS' if available by kjrokos · Pull Request #4041 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
do we need to document this as a breaking change @pmlopes ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4042
Vert.x 4.x swallows exceptions in UDP listenMulticastGroup · Issue #4042 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
Version: 4.x (currently using 4.1.2)
OS: Mac OS 11.5 Big Sur
JDK: 11.0.11.fx-zulu (I've tried other jdk11s also)
Context
When running the following code under 3.9.x I see the NullpointerException print out to the console.
However, when I use the same code under 4.1.2 the exception is swallowed and the "failed" method of the result is not called. I had to step through the debugger to find the exception.
I would like to listen on ALL interfaces without having to loop through the interfaces on my machine. I've done this in the past with other frameworks but was hoping that just using this method would do it.
I just wanted to make you aware of the exception handling differences between the two versions...
Do you have a reproducer?
import io.vertx.core.AbstractVerticle;
import io.vertx.core.Promise;
import io.vertx.core.Vertx;
import io.vertx.core.datagram.DatagramSocket;
import io.vertx.core.datagram.DatagramSocketOptions;

public class UdpTestVerticle extends AbstractVerticle {

    public static void main(String[] args) {
        Vertx vertx = Vertx.vertx();
        vertx.deployVerticle(new UdpTestVerticle());
    }
    
    @Override
    public void start(Promise<Void> promise) throws Exception {
        
        DatagramSocketOptions options = new DatagramSocketOptions()
                .setReuseAddress(true)
                .setReusePort(true);
        
        DatagramSocket socket = vertx.createDatagramSocket(options);
        
        // Listen on the port and all interfaces
        socket.listen(35057, "0.0.0.0", ar -> {
           if (ar.failed()) {
               promise.fail(ar.cause());
               return;
           } 
           
           // Under 3.9.8 this throws an exception
           // But in 4.x it swallows the Nullpointer and the failed() never gets called
           socket.listenMulticastGroup("224.0.0.224", listen -> {
               if (listen.failed()) {
                   promise.fail(listen.cause());
                   return;
               }
              
               System.out.println("All Good!");
           });
        });
    }                
}

Steps to reproduce

Run the above code under both 3.9.x and 4.1.x codebase and observe the differences in exception handling

Extra
I found this issue which shows the NullPointer issue on MacOs.
listenMulticastGroup doesn't work with a null NetworkInterface
Thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4043
Raise default value for maxFormAttributeSize on HttpServerOptions · Issue #4043 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
The default value for maxFormAttributeSize on HttpServerOptions is very low (2048 bytes), and can cause issues for those upgrading from Vert.x versions without a default (e.g. Vert.x 4.0.0). It personally was very unhelpful to me, and needed to be immediately raised. I recommend at least 5120 bytes, since that seems a more reasonable limit for modern machines. 5kb won't be a value large enough to fill up the memory of a machine with a reasonable amount of memory.
For those who did not set maxFormAttributeSize like myself, seeing a cryptic error like:
[vert.x-eventloop-thread-1] INFO io.vertx.ext.web.RoutingContext - RoutingContext failure (400)
java.io.IOException: Size exceed allowed maximum capacity

is confusing and does not give any useful keywords to work with on what to do. I only found out about maxFormAttributeSize after Googling the exact error and finding an answer on StackOverflow. In the Vert.x Discord, @vietj mentioned that a warning might be a good idea for dealing with this issue. Personally, I think it would be helpful if a warning was printed if a value is not specified for the size in Vertx.createHttpServer. I think this is justified because leaving such a value up to defaults that could change from version to version is a very bad practice and will end up in applications breaking.
I also believe maxFormAttributeSize should be used in the Vert.x Core docs, as well as the Vert.x Web docs because it is very relevent for those learning to use them.
@vietj was the one who brought up changing the default in the Discord, and I think he would be the best person to implement this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4044
4.1 by vietj · Pull Request #4044 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Change DEFAULT_MAX_FORM_ATTRIBUTE_SIZE to 8192 bytes instead of 2048 and document it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4045
Change DEFAULT_MAX_FORM_ATTRIBUTE_SIZE to 8192 bytes instead of 2048 and document it by vietj · Pull Request #4045 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4046
RoutingContextImpl always logs failures · Issue #4046 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
io.vertx.ext.web.impl.RoutingContextImpl#fail(int, java.lang.Throwable) will always log a failure at INFO. This is a problem as it means that later failure handlers can't choose to log or not to log.
I think this should be changed to a 'last resort' approach, where logging at error level only happens if it is not handled by the error routes.
In addition IMHO this should be logged at DEBUG for 4xx responses, and ERROR for 5xx responses. 4xx responses can be trivially caused by the client, and it is not a good idea to allow clients to generate arbitrary amounts of log messages.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4047
Have BlockedThreadChecker release memory on shutdown by Sanne · Pull Request #4047 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you provide a 4.1 backport @Sanne ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4048
vertx-health-check does not respond properly if using mountSubRouter() · Issue #4048 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The health check returns {"message": "Not found"} if you use sub-router with the application path '/'.
You want to send the request http://127.0.0.1:8080/productsAPI/health and you observe the JSON {"status":"UP","checks":[{"id":"measured-data-adapter","status":"UP"}],"outcome":"UP"} which works fine! But you observe  {"message": "Not found"} if the main router path turns from productsAPI to /.
Prometheus is has a very similar programming approach but it is not buggy and it works as expected with any path in the main router.
Version
4.1.2
My code looks like this:
restAPI.route("/health")
    .order(1)
    .handler(HealthCheckHandler.create(vertx).register("measured-data-adapter", p -> p.complete(OK())));
Router mainRouter = Router.router(vertx);
mainRouter.mountSubRouter(serverPath, restAPI);
mainRouter.errorHandler(HTTP_NOT_FOUND, h -> invalidRequest(HTTP_NOT_FOUND, h.request()));
mainRouter.errorHandler(HTTP_INTERNAL_ERROR, h -> {
    LOG.error("Internal Server Error", h.failure());
    invalidRequest(HTTP_INTERNAL_ERROR, h.request());
});

httpServer.connectionHandler(this::handleConnection)
    .requestHandler(mainRouter)
    .listen(serverPort, serverHost, this::connectionHandler);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4049
io.vertx.core.impl.logging.Logger should support parameterized messages · Issue #4049 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The slf4j supports the log format e.g. {} then {} and {}, where you may log the message with var-args LOG.info("{}{}{}", "1", 2, 3).
Can we have the same programming paradigm in  Vert.x?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4050
Multicast join/leave group network interface improvements · Issue #4050 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Joining / leaving a multicast group without a specified network interface will most of the time result in an uncaught NullPointerException. In this case the implementation could try reusing the multicast network interface when it is set otherwise guess the network interface from the bind address, otherwise properly report that no network interface could be used for membership management.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4051
Have BlockedThreadChecker release memory on shutdown by Sanne · Pull Request #4051 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
thanks!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4052
Multicast join / leave membership improvements by vietj · Pull Request #4052 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4053
Multicast join / leave membership improvements by vietj · Pull Request #4053 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4054
Provide metric hand-back after event bus consumer unregistration · Issue #4054 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The event-bus consumer clears the metric hand-back object on unregistration causing event-bus metrics event to signal events (messageDelivered and discardMessage) with a null hand-back leading to potential metric corruption.
We should avoid to eagerly set the metrics hand-back to null and instead let the garbage collector handle it when the message consumer is garbaged.
This is the root cause of #4033
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4055
Do no set the hand-back event-bus consumer metric to null on unregistratio by vietj · Pull Request #4055 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4056
Do no set the hand-back event-bus consumer metric to null after unregistration by vietj · Pull Request #4056 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4057
clear set all method when calling with Map by vietj · Pull Request #4057 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4058
Use Vert.x WebClient component under macOS operating system to request warning log · Issue #4058 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I am using the WebClient component to send a request and the following log occurs. How can I solve the problem?
"2021-08-06 18:58:46.372 [vert.x-eventloop-thread-1] WARN io.netty.resolver.dns.DnsServerAddressStreamProviders-Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath , fallback to system defaults. This may result in incorrect DNS resolutions on MacOS.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4059
MacOS IPv6 UDP - No Route to Host (Works on Linux and Windows) · Issue #4059 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
Vert.x: 4.1.2
Context
I encountered an exception which looks suspicious while trying to use UDP packet sending on MacOS.
Do you have a reproducer?
Yes, I hope it is helpful. I spent a lot of time to make it configurable and to try to demonstrate the scenario I'm trying to accomplish and show you the error I am getting.
I tried to give as much documentation as possible..

https://github.com/tmulle/VertxNettyUDP6Tester

Steps to reproduce

Follow README in the repo

Extra

All information is in the README
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4060
Document MacOS native Netty DNS resolver · Issue #4060 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Also use it for vertx-core tests
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4061
HTTP/2 client connection handling might leak when receiving an immediate GO_AWAY frame · Issue #4061 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The handling of a pooled HTTP/2 client connection might race and leak a connection when the server sends immediately a GO_AWAY frame. The client pool integration might set the eviction handler after the connection has been evicted when the connect action is done outside of the event-loop thread.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4062
Avoid leaking HTTP/2 client connections when receiving an immediate GO_AWAY frame by vietj · Pull Request #4062 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4063
HTTP/2 client connection handling might leak when receiving an immediate GO_AWAY frame by vietj · Pull Request #4063 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4064
fix tiny typo by termermc · Pull Request #4064 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closing in favor of just mentioning the typo in Discord.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4065
Enable custom host name verifier · Issue #4065 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
NetClientOptions now support specific algorithm for host name verification.
Is it possible to support custom host name similar to the uses of javax.net.ssl.HostnameVerifier?
Use cases
Besides the default verification which compares the common name in the SubjectDN in the SSL server's digital certificate with the host name of the SSL server, one would want to verify other behaviors.
My uses case is that we use a vertx client to talk to a server whose cert's common name isn't a valid host name. So we want to verify one fixed field in the SubjectDN. Currently we disable the host name verification to skip this because vertx asks a specific algorithm for the verification, but our case needs a more complex logic.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4066
Issue with spring application shutdown · Issue #4066 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version: 4.1.0
I encountered an exception while shutting down my spring application ((AbstractApplicationContext) context).close() (https://www.baeldung.com/spring-boot-shutdown)


I have created a mock server which is running at 8000 port while my application runs at 8090 port. I did below to start the mock server,
ResultHandler startHandler = new ResultHandler<>();
server =
vertx
.createHttpServer(options)
.requestHandler(router)
.exceptionHandler(t -> LOG.error("Exception while processing request", t))
.listen(startHandler);
startHandler.await();


So before closing the spring boot application, i executed the below
server.close();
or
public void stop() {
if (server != null) {
ResultHandler stopHandler = new ResultHandler<>();
server.close(stopHandler);
stopHandler.await();
server = null;
}
}


After executing ((AbstractApplicationContext) context).close() line, i am getting below error,


11:59:44.574 [http-nio-8090-exec-2] ERROR o.s.w.servlet.HandlerExecutionChain "" - HandlerInterceptor.afterCompletion threw exception
java.lang.NullPointerException: null
at org.springframework.boot.actuate.metrics.web.servlet.LongTaskTimingHandlerInterceptor.stopLongTaskTimers(LongTaskTimingHandlerInterceptor.java:123)
at org.springframework.boot.actuate.metrics.web.servlet.LongTaskTimingHandlerInterceptor.afterCompletion(LongTaskTimingHandlerInterceptor.java:79)
at org.springframework.web.servlet.HandlerExecutionChain.triggerAfterCompletion(HandlerExecutionChain.java:178)
at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1156)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1077)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at com.atlassian.oai.validator.springmvc.OpenApiValidationFilter.doFilterInternal(OpenApiValidationFilter.java:58)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter.doFilter(KeycloakAuthenticatedActionsFilter.java:57)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter.doFilter(KeycloakSecurityContextRequestFilter.java:61)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.successfulAuthentication(KeycloakAuthenticationProcessingFilter.java:214)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:232)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at com.gbst.services.common.springrest.logging.MDCServletFilter.doFilter(MDCServletFilter.java:28)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at com.gbst.services.async.filter.ResettableStreamRequestServletFilter.doFilterInternal(ResettableStreamRequestServletFilter.java:27)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter.doFilter(KeycloakAuthenticatedActionsFilter.java:74)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter.doFilter(KeycloakSecurityContextRequestFilter.java:92)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.successfulAuthentication(KeycloakAuthenticationProcessingFilter.java:214)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:232)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
at ch.qos.logback.access.tomcat.LogbackValve.invoke(LogbackValve.java:256)
at org.keycloak.adapters.tomcat.AbstractAuthenticatedActionsValve.invoke(AbstractAuthenticatedActionsValve.java:67)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)
null - - [12/Aug/2021:11:59:44 +1000] "null null null" 500 - "-" "-" "-"
However, if I remove this mock server and try shutting down, it went gracefully.
Could you help me with this ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4067
Provide a mean to disable error loggin in RoutingContextImplBase · Issue #4067 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
In vertx 3.x RoutingContextImplBase did not log at error/info level when an exception occurred in a handler, now it logs twice:
[ERROR] [] i.v.e.w.RoutingContext: Unhandled exception in router + stacktrace
[INFO] [] i.v.e.w.RoutingContext: RoutingContext failure (500) + stacktrace
This is too much noise in the logs. Now i could disable the whole logger from logging but it is slightly an overkill. Furthermore i do not need these logs since i have an error handler on a router which logs already everything i need the way i need.
Use cases

Reduce noise in logs
If error is already properly handled these logs provide little value

Also it logs failures and stacktraces everytime there is a call to fail() which also pollutes logs, disabling this logger is the only solution i am aware right now
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4068
Context: allow storage and retrieval of instances of any type by tsegismont · Pull Request #4068 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
cc @Sanne
@vietj I checked the documentation, there is no need for a change. If this is merged, I will create an entry in the breaking changes page.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4069
Deadlock when closing Vertx and WorkerExecutor concurrently · Issue #4069 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I met a deadlock issue recently on Vertx version 4.1.1 and after investigated and looked into the VertxImpl, CloseFuture, WorkerExecutorImpl, it looks like the deadlock happened in Vertx, please take a look:
In my case, the deadlock issue is hit when the vertx.close and workerExecutor.close happened to be called at same time, one from main thread and another from eventloop thread. (the workerExecutor is created by the vertx.createSharedWorkerExecutor)
Backtrace printed by jstack:
Found one Java-level deadlock:
=============================
"main":
  waiting to lock monitor 0x00007fa958116580 (object 0x00000000b3329eb8, a io.vertx.core.impl.WorkerExecutorImpl),
  which is held by "vert.x-eventloop-thread-0"
"vert.x-eventloop-thread-0":
  waiting to lock monitor 0x00007fa89c01ae80 (object 0x00000000b3329f58, a io.vertx.core.impl.VertxImpl),
  which is held by "main"

Java stack information for the threads listed above:
===================================================
"main":
        at io.vertx.core.impl.WorkerExecutorImpl.close(WorkerExecutorImpl.java:90)
        - waiting to lock <0x00000000b3329eb8> (a io.vertx.core.impl.WorkerExecutorImpl)
        at io.vertx.core.impl.CloseFuture.close(CloseFuture.java:117)
        at io.vertx.core.impl.VertxImpl.close(VertxImpl.java:578)
        - locked <0x00000000b3329f58> (a io.vertx.core.impl.VertxImpl)
        at io.vertx.reactivex.core.Vertx.close(Vertx.java:433)
...
"vert.x-eventloop-thread-0":
        at io.vertx.core.impl.VertxImpl$SharedWorkerPool.close(VertxImpl.java:1080)
        - waiting to lock <0x00000000b3329f58> (a io.vertx.core.impl.VertxImpl)
        at io.vertx.core.impl.WorkerExecutorImpl.close(WorkerExecutorImpl.java:93)
        - locked <0x00000000b3329eb8> (a io.vertx.core.impl.WorkerExecutorImpl)
        at io.vertx.core.impl.WorkerExecutorImpl.close(WorkerExecutorImpl.java:78)
        at io.vertx.core.impl.WorkerExecutorImpl.close(WorkerExecutorImpl.java:84)
        at io.vertx.reactivex.core.WorkerExecutor.close(WorkerExecutor.java:207)
        at io.vertx.reactivex.core.WorkerExecutor.close(WorkerExecutor.java:214)
...

Found 1 deadlock.

Checked vertx 4.1.1 code and find:
When closing WorkerExecutor, it will do:

Lock self (WorkerExecutorImpl)
Remove self from CloseFuture
Close SharedWorkerPool, which require lock Vertx

When closing Vertx, it will do:

Lock self (VertxImpl)
Close CloseFuture, which synchronized copy the list of callbacks and invoke them outside of the synchronized block, one of the callback is to close the same WorkerExecutorImpl instance as above

So, when the copy of callbacks in CloseFuture happened before removing the WorkerExecutorImpl from CloseFuture, it will still be called and cause deadlock



Time
Main thread
Eventloop thread




T1
Start close Vertx, locked VertxImpl instance
 


T2
 
Start close WorkerExecutor, locked WorkerExecutorImpl instance


T3
In CloseFuture, the list of callbacks are copied
 


T4
 
Remove WorkerExecutorImpl instance from CloseFuture. But since the callback is already copied in T3, this doesn't prevent the callback from being called


T5
The callback of close WorkerExecutorImpl instance is called. This require lock on the WorkerExecutorImpl instance, which was acquired by eventloop thread at T2. So it is waiting for the lock to be released by eventloop thread
 


T6
 
Close SharedWorkerPool, and this require lock on the VertxImpl instance, which was acquired by main thread at T1. So it is waiting for the lock to be released by main thread


 
Deadlock
Deadlock



The issue seems still exist in 4.1.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4070
Don't create a Promise from the finalizer and un-necessary remove HTTP client finalizer by stuartwdouglas · Pull Request #4070 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4071
Introduce a flag to disable ContextClassLoader control by VertxThread by Sanne · Pull Request #4071 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I don't know if we want this. I would prefer we go down the Supplier<ClassLoader> route that gives us explicit control over the threads.
The issue is that if something somewhere breaks the TCCL of a vert.x thread (e.g. the finalizer issue we saw) then everything falls apart, and it is incredibly difficult to debug why the TCCL is now wrong (as you don't get the error at the code that has set the wrong TCCL, but generally on the next task the thread performs).
I think that safety is more important than saving a few cycles here. If we want this for benchmarks then I am ok with it, but I don't think we want this in the general sense.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4072
NPE when trying to get body of a chunked HTTP response in client · Issue #4072 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.2
Context
I try to create a server streaming a chunked response, and test it using the Vertx HTTP client. The client throws NullPointerException on receiving response if no headers were added in the Request.
If any header is set, then the test hangs infinitely – the HttpClientResponse never ends and receives the body.
In the first case, this is the NPE’s stack trace:

NPE stack trace

Caused by: java.lang.NullPointerException
	at io.vertx.core.http.impl.Http1xClientConnection.handleResponseBegin(Http1xClientConnection.java:747)
	at io.vertx.core.http.impl.Http1xClientConnection.handleHttpMessage(Http1xClientConnection.java:674)
	at io.vertx.core.http.impl.Http1xClientConnection.handleMessage(Http1xClientConnection.java:649)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:155)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:154)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:311)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:432)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:829)



Do you have a reproducer?
Here’s a simple test-case written in Kotlin, test without the header hack, with header hack to avoid NPE, and another one using async-http-client. Only the async-http-client one passes.
silmeth/vertx-chunked-reproducer
Steps to reproduce

Clone the repo linked above.
Run ./gradlew test from the repo’s directory.

The code is in src/test/kotlin/chunked/reproducer/ChunkedTest.kt
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4073
Context: allow storage and retrieval of instances of any type by vietj · Pull Request #4073 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Closes #3952
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4074
HTTP client tunnel without request headers triggers NPE · Issue #4074 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClient tunnel creation assumes when it gets the server response that the request always sent headers and the headers multimap is never null which leads to an NPE when no headers was sent.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4075
HTTP client tunnel establishment failure prevents HTTP response end event to be signaled · Issue #4075 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When an HttpClient tunnel cannot be established the connection should switch the isConnect field to false so that the response will be normally processed. Otherwise the response will be processed as if a tunnel was established and the last HTTP chunk event will not be signaled to the response end handler.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4076
HTTP/1.1 client stream might be closed twice · Issue #4076 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HTTP/1.1 client stream close handler can be called twice leading to recycling the connection to the pool more than it should triggering the pool guard against it
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4077
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4078
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4079
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4080
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4081
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4082
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4083
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4084
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4085
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4086
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4087
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4088
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4089
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4090
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4091
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4092
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4093
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4094
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4095
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4096
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4097
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4098
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4099
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4100
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4101
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4102
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4103
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4104
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4105
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4106
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4107
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4108
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4109
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4110
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4111
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4112
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4113
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4114
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4115
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4116
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4117
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4118
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4119
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4120
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4121
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4122
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4123
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4124
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4125
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4126
readStream mapping to other type of readStream to support pipe by wang007 · Pull Request #4126 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
#4138
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4127
Move synchonized block in WorkerExecutorImpl to prevent a deadlock. (#4104) by dano · Pull Request #4127 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Backporting the fix for #4104.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4128
ConcurrentModificationException in clustered eventBus · Issue #4128 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx-core 4.1.2
vertx-hazelcast 4.1.2
Context
After the below exception, eventbus do not send portion of message(s). NO exception throw (only log).
In case of EventBus.request, fired io.vertx.core.eventbus.ReplyException: Timed out after waiting 30000(ms) for a reply.
io.netty.util.concurrent.AbstractEventExecutor - A task raised an exception. Task: io.vertx.core.eventbus.impl.clustered.Serializer$$Lambda$1657/0x000000080120acd8@76f060f6
java.util.ConcurrentModificationException: null
	at java.util.HashMap.computeIfAbsent(HashMap.java:1225) ~[?:?]
	at io.vertx.core.eventbus.impl.clustered.Serializer.queue(Serializer.java:64) ~[vertx-core-4.1.2.jar:4.1.2]
	at io.vertx.core.eventbus.impl.clustered.Serializer.lambda$queue$1(Serializer.java:67) ~[vertx-core-4.1.2.jar:4.1.2]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) [netty-common-4.1.65.Final.jar:4.1.65.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472) [netty-common-4.1.65.Final.jar:4.1.65.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500) [netty-transport-4.1.65.Final.jar:4.1.65.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) [netty-common-4.1.65.Final.jar:4.1.65.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.65.Final.jar:4.1.65.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [netty-common-4.1.65.Final.jar:4.1.65.Final]
	at java.lang.Thread.run(Thread.java:832) [?:?]

Do you have a reproducer?
I don't have a simple reproducer (part of high concurrency mesh of microservice), but I think thats make sense:

  
    
      vert.x/src/main/java/io/vertx/core/eventbus/impl/clustered/Serializer.java
    
    
        Lines 37 to 43
      in
      f3dffc1
    
  
  
    

        
          
           private Serializer(ContextInternal context) { 
        

        
          
             this.context = context; 
        

        
          
             queues = new HashMap<>(); 
        

        
          
             if (context.isDeployment()) { 
        

        
          
               context.addCloseHook(this::close); 
        

        
          
             } 
        

        
          
           }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4129
Make sure exception stack trace is logged by tsegismont · Pull Request #4129 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you backport to 4.1 branch ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4130
Make sure exception stack trace is logged by tsegismont · Pull Request #4130 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
If the Throwable is passed to log() method, its exception message only is added to the logs.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4131
FileResolver SPI · Issue #4131 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4132
Provide read/write idle timeout granularity for TCP options · Issue #4132 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4133
Support filtering of insecure CipherSuits when using TLS · Issue #4133 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In order to remove insecure cipher suits from secure TLS versions.
e.g. TLS 1.2 is required rfc5246 to support TLS_RSA_WITH_AES_128_CBC_SHA however and other are vulnirable to the  Lucky13 attack and should be removed by the user.
Netty the underlying transport for VertX supports this via  io.netty.handler.ssl.CipherSuiteFilter
This needs to be exposed to VertX so insecure ciphers can be removed.
This was discussed in #1507 but a solution was not proposed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4134
Implement read/write TCP idle timeout by vietj · Pull Request #4134 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
fixes #4132
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4135
Provide an SPI for the Vert.x file resolver by vietj · Pull Request #4135 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I added some small improvements to the javadocs to make them more consistent with the existing documentation. Hope you don't mind!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4136
Read only buffer implementation copy optimisation · Issue #4136 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a buffer wraps a read-only ByteBuf the implementation of copy() can safely return this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4137
java.util.ConcurrentModificationException when creating localConsumer · Issue #4137 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.5 (or 4.1.+)
Context
Vertx is created with a Zookeeper Cluster manager, ZK 3.5 running locally.
If a create a set of verticles in which I setup a localConsumer in the start() method, I nearly always endup with a hidden exception:
java.util.ConcurrentModificationException at java.util.LinkedHashMap$LinkedHashIterator.nextNode(LinkedHashMap.java:719) at java.util.LinkedHashMap$LinkedKeyIterator.next(LinkedHashMap.java:742) at java.util.Iterator.forEachRemaining(Iterator.java:116) at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742) at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) at io.vertx.spi.cluster.zookeeper.impl.SubsMapHelper.get(SubsMapHelper.java:107) at io.vertx.spi.cluster.zookeeper.impl.SubsMapHelper.fireRegistrationUpdateEvent(SubsMapHelper.java:196) at io.vertx.spi.cluster.zookeeper.impl.SubsMapHelper.put(SubsMapHelper.java:68) at io.vertx.spi.cluster.zookeeper.ZookeeperClusterManager.addRegistration(ZookeeperClusterManager.java:388) at io.vertx.core.eventbus.impl.clustered.ClusteredEventBus.onLocalRegistration(ClusteredEventBus.java:143) at io.vertx.core.eventbus.impl.EventBusImpl.addRegistration(EventBusImpl.java:240) at io.vertx.core.eventbus.impl.HandlerRegistration.register(HandlerRegistration.java:68) at io.vertx.core.eventbus.impl.MessageConsumerImpl.handler(MessageConsumerImpl.java:236) at io.vertx.core.eventbus.impl.EventBusImpl.localConsumer(EventBusImpl.java:178) at com.example.starter.TestVerticle.start(TestVerticle.java:9) at io.vertx.core.AbstractVerticle.start(AbstractVerticle.java:106) at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:196) at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100) at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:63) at io.vertx.core.impl.EventLoopContext.lambda$runOnContext$0(EventLoopContext.java:38) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:164) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500) at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.lang.Thread.run(Thread.java:748)
As a consequence, some messages sent to the same local address endup with a timeout exception, probably because the handler is not correctly registered.
If I do not a ZK manager, no problem.
If I use consumer() instead of localConsumer(), no problem
If I create the localConsumer outside a verticle, no problem
Note that sending the messages from a new thread does not help
Do you have a reproducer?
Please use the tiny java project attached:
src.zip
Steps to reproduce

Setup a VertX cluster with ZK Manager
Create a batch of verticles and create a localConsumer() in the start() method
Send a batch of messages to those consumers

--> Seems to be introduced in 4.1.x, no problem with 4.0.3
Thanks,
Thomas
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4138
readStream mapping to other type of readStream to support pipe · Issue #4138 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Read me
readStream mapping to other type of readStream to support pipe
Describe the feature
ReadStream  rs;
WriteStream ws;
when ReadStream of sub type and WriteStream of  sub type do not match,  Pipe cannot be performed.
so add map function to support this;
rs.map(Integer::toString).pipeTo(ws);
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4139
Example code of Hibernate reactive Docs might create another new Vertx instance · Issue #4139 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Hibernate reactive Docs seems non-rigorous.It will create a new Vertx instance when I run the example code,and it might cause some operations to be not thread-safe.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4140
NullPointerException in ZKMap · Issue #4140 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3
Context
In development, when nodes of the (Zookeeper) cluster are started and stopped often, we randomly receive this exception:
java.lang.NullPointerException at io.vertx.spi.cluster.zookeeper.impl.ZKMap.keyPath(ZKMap.java:70) at io.vertx.spi.cluster.zookeeper.impl.ZKSyncMap.get(ZKSyncMap.java:98) at io.vertx.spi.cluster.zookeeper.impl.ZKSyncMap.lambda$entrySet$5(ZKSyncMap.java:225) at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1556) at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) at io.vertx.spi.cluster.zookeeper.impl.ZKSyncMap.entrySet(ZKSyncMap.java:227) at io.vertx.core.impl.HAManager.nodeLeft(HAManager.java:323) at io.vertx.core.impl.HAManager.access$100(HAManager.java:94) at io.vertx.core.impl.HAManager$1.nodeLeft(HAManager.java:150) at io.vertx.spi.cluster.zookeeper.ZookeeperClusterManager.childEvent(ZookeeperClusterManager.java:419) at com.neterium.context.ClusterContext$1.childEvent(ClusterContext.java:72) at org.apache.curator.framework.recipes.cache.PathChildrenCache$5.apply(PathChildrenCache.java:538) at org.apache.curator.framework.recipes.cache.PathChildrenCache$5.apply(PathChildrenCache.java:532) at org.apache.curator.framework.listen.ListenerContainer$1.run(ListenerContainer.java:100) at org.apache.curator.shaded.com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:30) at org.apache.curator.framework.listen.ListenerContainer.forEach(ListenerContainer.java:92) at org.apache.curator.framework.recipes.cache.PathChildrenCache.callListeners(PathChildrenCache.java:530) at org.apache.curator.framework.recipes.cache.EventOperation.invoke(EventOperation.java:35) at org.apache.curator.framework.recipes.cache.PathChildrenCache$9.run(PathChildrenCache.java:808) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) at java.util.concurrent.FutureTask.run(FutureTask.java) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) at java.util.concurrent.FutureTask.run(FutureTask.java) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) 
Just before this, we have this logged by Vertx:
2021-10-14 13:10:52.903 ERROR 34324 --- [ntloop-thread-0] io.vertx.core.net.impl.ConnectionBase    : An existing connection was forcibly closed by the remote host
2021-10-14 13:11:13.987  WARN 34324 --- [ChildrenCache-0] i.v.s.cluster.zookeeper.impl.ZKSyncMap   : node lost KeeperErrorCode = NoNode for /io.vertx/default/syncMap/__vertx.haInfo/45db3530-9ce0-4c94-9374-1355b20ab753
Do you have a reproducer?
Not really, it happens randomly, not gracefully killing servers increases the odds.
Extra
An easy fix would just be to add some code to check if the "k" argument of the ZKPath::keyPath(k) method is null and, maybe, in ZKSyncMap::get(k) when keyPath returns null (?).
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4141
File resolver resolves classpath resources for absolute file names · Issue #4141 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This should not happen per the documentation. This was fixed by https://github.com/eclipse-vertx/vert.x/pull/4099/files and it might be perceived as a breaking change for applications that were relying on this behaviour.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4142
NetSocketInternal should provide a way to handle events flowing through the channel pipeline. by vietj · Pull Request #4142 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4143
Serializer may throw ConcurrentModificationException when used from worker verticle by tsegismont · Pull Request #4143 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #4128
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4144
unrecoverable java.util.ConcurrentModificationException when sending / publishing eventbus messages from Worker Verticle in clustered deployment. · Issue #4144 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.0 and also in 4.2.0-SNAPSHOT
Context
We switched deployment of a Verticle in one of our existing services to worker and encountered it in a stresstest.
Investigation showed it boils down to send/publish of messages from a Worker Verticle while beeing deployed clustered.
Do you have a reproducer?
https://github.com/DemonicTutor/vertx-worker-clustereventbus
Steps to reproduce

send / publish EventBus messages from a Worker Verticle
deploy Vertx clustered (e.g.: ignite)
it looks like the Serializer instance having a HashMap is beeing shared somehow between eventloop threads.

Extra

adoptium openJdk 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4145
Serializer may throw ConcurrentModificationException when used from worker verticle by tsegismont · Pull Request #4145 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #4128
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4146
Is not possible to redeploy a shared MailClient Verticle · Issue #4146 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm trying to redeploy a Verticle with Mail Client, trying to change the configuration of the client without restarting the application.
I'm getting this error:
java.lang.IllegalStateException: Client is closed
at io.vertx.core.net.impl.NetClientImpl.checkClosed(NetClientImpl.java:176)
at io.vertx.core.net.impl.NetClientImpl.connectInternal(NetClientImpl.java:220)
at io.vertx.core.net.impl.NetClientImpl.connect(NetClientImpl.java:207)
at io.vertx.core.net.impl.NetClientImpl.connect(NetClientImpl.java:122)
at io.vertx.core.net.impl.NetClientImpl.connect(NetClientImpl.java:117)
at io.vertx.core.net.impl.NetClientImpl.connect(NetClientImpl.java:107)
at io.vertx.core.net.impl.NetClientImpl.connect(NetClientImpl.java:102)
at io.vertx.ext.mail.impl.SMTPEndPoint.connect(SMTPEndPoint.java:70)
at io.vertx.core.net.impl.pool.SimpleConnectionPool.connect(SimpleConnectionPool.java:263)
at io.vertx.core.net.impl.pool.SimpleConnectionPool$Acquire$3.run(SimpleConnectionPool.java:591)
at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:50)
at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:254)
at io.vertx.core.net.impl.pool.SimpleConnectionPool.acquire(SimpleConnectionPool.java:634)
at io.vertx.core.net.impl.pool.SimpleConnectionPool.acquire(SimpleConnectionPool.java:638)
at io.vertx.ext.mail.impl.SMTPEndPoint.requestConnection(SMTPEndPoint.java:61)
at io.vertx.core.net.impl.pool.Endpoint.getConnection(Endpoint.java:41)
at io.vertx.ext.mail.impl.SMTPConnectionPool.getConnection0(SMTPConnectionPool.java:155)
at io.vertx.ext.mail.impl.SMTPConnectionPool.getConnection(SMTPConnectionPool.java:102)
at io.vertx.ext.mail.impl.MailClientImpl.getConnection(MailClientImpl.java:119)
at io.vertx.ext.mail.impl.MailClientImpl.lambda$sendMail$2(MailClientImpl.java:103)
at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)
at io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.base/java.lang.Thread.run(Thread.java:832)
This is the code:
import io.vertx.config.ConfigRetriever;
import io.vertx.config.ConfigRetrieverOptions;
import io.vertx.config.ConfigStoreOptions;
import io.vertx.core.AbstractVerticle;
import io.vertx.core.DeploymentOptions;
import io.vertx.core.Promise;
import io.vertx.core.Vertx;
import io.vertx.core.eventbus.Message;
import io.vertx.core.impl.ConcurrentHashSet;
import io.vertx.core.impl.cpu.CpuCoreSensor;
import io.vertx.core.json.JsonObject;
import io.vertx.ext.mail.MailClient;
import io.vertx.ext.mail.MailConfig;
import io.vertx.ext.mail.MailMessage;

public class MailRedeployTest {

    public static void main(String[] args) {

        final var availableProcessors = CpuCoreSensor.availableProcessors();
        final var vertx = Vertx.vertx();

        final var fileStore = new ConfigStoreOptions()
                .setType("file")
                .setFormat("yaml")
                .setConfig(new JsonObject()
                        .put("path", "mail_config.yaml")
                );
        final var configRetrieverOptions = new ConfigRetrieverOptions().addStore(fileStore).setScanPeriod(5000);
        final var retriever = ConfigRetriever.create(vertx, configRetrieverOptions);

        final var set = new ConcurrentHashSet<String>();

        retriever.getConfig()
                .map(json -> new DeploymentOptions().setConfig(json).setInstances(availableProcessors))
                .flatMap(deploymentOptions -> vertx.deployVerticle(MailVerticle::new, deploymentOptions))
                .onSuccess(set::add)
                .onComplete(ar -> {

                    if (ar.failed()) {
                        System.out.println("ERROR");
                        ar.cause().printStackTrace();
                        System.exit(1);
                    } else {
                        System.out.println("STARTED");
                    }

                    vertx.setPeriodic(10000, l -> {
                        final var mailMessage = new MailMessage()
                                .setSubject("TEST")
                                .setText("TEST")
                                .setTo("test@gmail.com")
                                .toJson();

                        vertx.eventBus().sender(MailVerticle.ADDRESS).write(mailMessage);
                    });
                });

        retriever.listen(configChange -> {
            System.out.println("CONFIG_CHANGE");
            final var deploymentOptions = new DeploymentOptions().setConfig(configChange.getNewConfiguration()).setInstances(availableProcessors);
            vertx.deployVerticle(MailVerticle::new, deploymentOptions);

            set.forEach(str -> {
                vertx.undeploy(str)
                        .onComplete(ar -> {
                            set.remove(str);

                            if (ar.failed()) {
                                System.out.println("FAILED_TO_UNDEPLOY");
                                ar.cause().printStackTrace();
                            }
                        });
            });
        });


    }


    public static final class MailVerticle extends AbstractVerticle {
        public static final String ADDRESS = "send-mail";
        private MailClient mailClient;


        @Override
        public void start() throws Exception {
            System.out.println("STARTING");
            final var mailConfig = new MailConfig(config());
            mailClient = MailClient.createShared(vertx, mailConfig);
            vertx.eventBus().consumer(ADDRESS, this::sendMail);
        }

        @Override
        public void stop(Promise<Void> promise) throws Exception {
            try {
                System.out.println("STOPPING");
                mailClient.close();
            } catch (Exception e) {
                System.out.println("ERROR_CLOSING_CLIENT");
                e.printStackTrace();
            }

            mailClient = null;
            promise.complete();
        }

        private void sendMail(Message<JsonObject> message) {

            final var mailMessage = new MailMessage(message.body());

            mailMessage.setFrom(config().getString("from"));

            mailClient.sendMail(mailMessage, ar -> {
                if (ar.failed()) {

                    System.out.println("ERROR_SENDING_MESSAGE");
                    ar.cause().printStackTrace();

                } else {
                    System.out.println("MESSAGE_SENT");
                }

            });
        }


    }
}

this is mail_config.yaml:
from: "test1@gmail.com>"
mail_pool: MAIL_POOL
hostname: {hostname}
port: 25
starttls: REQUIRED
login: REQUIRED
username: {username}
password: {password}
keepAlive: true
trustAll: false
metricsName: MAIL_CLIENT
ssl: false
tcpKeepAlive: true
useAlpn: true
logActivity: false

I'm using version 4.1.5
What would be the correct way to close a shared MailClient and open a new one?
I tried with creating an individual client (not shared), and works perfectly
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4147
Add small native image build project to the repo to catch regressions · Issue #4147 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
The latest vert.x release didn't compile against GraalVM 21.1.0, 21.2.0 and 21.3.0 (the three latest releases) because of some internal changes in the project. In particular, I think changes in VertxInternal are causing static initializers that require netty's PooledByteBufAllocator to be initialized at build time.
I fixed this issue in vertx-howtos/graal-native-image-howto#11 but I was wondering that to avoid future regressions it would be wise to:

Add native-image.properties to the vertx project so that GraalVM automatically picks up the native image settings and downstream consumers don't need to specify them themselves.
Add a small native-image project that uses those settings to compile an http server to native and runs a small workload to force most of vert.x to be initialized and guarantee that it works.

As a result, if a new change that alters how static initializers work was to happen and compiling to native failed, then the CI would also fail and it would be on the vert.x contributor to fix it before merging.
Use cases
These two changes should hopefully prevent any future regressions from happening again and would allow downstream consumers to compile to native automatically without any configuration.
Contribution
I don't currently have the time to implement this but can provide guidance if needed.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4148
Project Loom: Update thread factory code to accept virtual threads by Jotschi · Pull Request #4148 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4149
Starter Gradle project fails to start with java.lang.ClassNotFoundException · Issue #4149 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.1.5
Context
I downloaded starter Gradle project from https://vertx.io/get-started/
Unpacked it and ran ./gradlew clean run
It failed to start:
./gradlew clean run
Starting a Gradle Daemon (subsequent builds will be faster)

> Task :run
Oct 28, 2021 12:38:26 AM io.vertx.core.impl.launcher.commands.Watcher
INFO: Watched paths: [/Users/relgames/myprojects/eatellia/vertx/./src]
Oct 28, 2021 12:38:26 AM io.vertx.core.impl.launcher.commands.Watcher
INFO: Starting the vert.x application in redeploy mode
Starting vert.x application...
fab6aa3a-19eb-474a-a628-561af9e8a349-redeploy
Error: Could not find or load main class
Caused by: java.lang.ClassNotFoundException:
<==========---> 80% EXECUTING [1m 49s]
> :run

Steps to reproduce

Download starter Gradle project from https://vertx.io/get-started/
unzip it to some folder
run ./gradlew clean run

Extra

MacOS Big Sur 11.6
OpenJDK 64-Bit Server VM Corretto-17.0.1.12.1
Also tried with Java 11 (Corretto-11.0.13.8.1), same result.
Maven project works fine on Java 11 and 17:

./mvnw clean compile exec:java
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------< com.example:starter >-------------------------
[INFO] Building starter 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ starter ---
[INFO] Deleting /Users/relgames/myprojects/eatellia/vertx-maven/target
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ starter ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/relgames/myprojects/eatellia/vertx-maven/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ starter ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /Users/relgames/myprojects/eatellia/vertx-maven/target/classes
[INFO]
[INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ starter ---
HTTP server started on port 8888
Oct 28, 2021 12:48:19 AM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
INFO: Succeeded in deploying verticle
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4150
Automatically set `Content-Length` header on HEAD requests · Issue #4150 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Automatically set Content-Length header on HEAD requests to what the body size would have been.
The MDN Web Docs suggests that this header should be defined: https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD
Use cases
I'm using the following code:
response
  .putHeader(HttpHeaders.CONTENT_TYPE, contentType)
  .end(buffer);
As far as I know, Vert.x (or Netty?) will not send a body on a HEAD request (even though I'm using end with a non-empty buffer) which is great but I would expect the Content-Length to be automatically defined on the response since we provide a non-empty buffer.
Please note that we should preserve an explicit value:
response
  .putHeader(HttpHeaders.CONTENT_TYPE, contentType)
  .putHeader(HttpHeaders.CONTENT_LENGTH, 1234)
  .end("");
If both a non-empty buffer and an Content-Length value are provided, I think we should keep the explicit value.
Contribution
I'm willing to contribute this feature. After a quick search, I think I will need to update the following chunks of code:

  
    
      vert.x/src/main/java/io/vertx/core/http/impl/Http1xServerResponse.java
    
    
        Lines 685 to 714
      in
      fbd6fba
    
  
  
    

        
          
           private void prepareHeaders(long contentLength) { 
        

        
          
             if (version == HttpVersion.HTTP_1_0 && keepAlive) { 
        

        
          
               headers.set(HttpHeaders.CONNECTION, HttpHeaders.KEEP_ALIVE); 
        

        
          
             } else if (version == HttpVersion.HTTP_1_1 && !keepAlive) { 
        

        
          
               headers.set(HttpHeaders.CONNECTION, HttpHeaders.CLOSE); 
        

        
          
             } 
        

        
          
             if (head || status == HttpResponseStatus.NOT_MODIFIED) { 
        

        
          
               // For HEAD request or NOT_MODIFIED response 
        

        
          
               // don't set automatically the content-length 
        

        
          
               // and remove the transfer-encoding 
        

        
          
               headers.remove(HttpHeaders.TRANSFER_ENCODING); 
        

        
          
             } else { 
        

        
          
               // Set content-length header automatically 
        

        
          
               if (contentLength >= 0 && !headers.contains(HttpHeaders.CONTENT_LENGTH) && !headers.contains(HttpHeaders.TRANSFER_ENCODING)) { 
        

        
          
                 String value = contentLength == 0 ? "0" : String.valueOf(contentLength); 
        

        
          
                 headers.set(HttpHeaders.CONTENT_LENGTH, value); 
        

        
          
               } 
        

        
          
             } 
        

        
          
             if (headersEndHandler != null) { 
        

        
          
               headersEndHandler.handle(null); 
        

        
          
             } 
        

        
          
             if (cookies != null) { 
        

        
          
               setCookies(); 
        

        
          
             } 
        

        
          
             if (Metrics.METRICS_ENABLED) { 
        

        
          
               // TODO : DONE SOMEWHERE ELSE FROM EVENT LOOP 
        

        
          
               reportResponseBegin(); 
        

        
          
             } 
        

        
          
             headWritten = true; 
        

        
          
           } 
        
    
  



  
    
      vert.x/src/main/java/io/vertx/core/http/impl/Http2ServerResponse.java
    
    
        Lines 473 to 475
      in
      fbd6fba
    
  
  
    

        
          
           private boolean needsContentLengthHeader() { 
        

        
          
             return stream.method != HttpMethod.HEAD && status != HttpResponseStatus.NOT_MODIFIED && !headers.contains(HttpHeaderNames.CONTENT_LENGTH); 
        

        
          
           } 
        
    
  


Related issue: #2630

on HEAD method or NOT_MODIFIED (304) status
content-Length should not be set automatically to 0 or this header can be set to what the body size would have been
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4151
Need explicit support for multipart/related in vertx web · Issue #4151 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Vertx web dose not support content-type multipart/related currently.
If client send post with multipart/related content-type, only respond error with
"Request must have a valid content-type header to decode a multipart request".
We can send multipart/form-data and application/json as two separate post,
but single post is better in most cases, if it is possible.
Use cases
Http apis to communicate json message and file at the same time.
Contribution
Who should implement this feature ? are you volunteering for implementing this feature or
do you know that is able and willing implement this feature ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4152
Allow Http1xServerRequest.toNetSocket work on with HTTP upgrade by coding4m · Pull Request #4152 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the toNetSocket is intended to be used for create tunnels with connect, so instead of removing CONNECT we could extend this method to accept also upgrade requests
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4153
Added TraceOperationName to HttpClientRequest by stampy88 · Pull Request #4153 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Looks like my ECA was out of date, but I have since updated it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4154
HTTP headers multimap caseInsensitive method implementation inverts the caseInsensitive flag  · Issue #4154 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
e.g server.headers().contains("connection", "upgrade", true) is actually server.headers().contains("connection", "upgrade", false)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4155
Retrofit HTTP server WebSocket disable flag as an HTTP server options · Issue #4155 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
It can be useful sometimes to have the server ignore WebSocket and let it handle HTTP WebSocket upgrades itself, e.g a reverse proxy implementation can disable Vert.x HTTP Server WebSocket handling and simply handle it at the wire level and let the inbound server (the server reached by the proxy) handle it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4156
HTTP/1.1 client connection upgrade incorrectly compares headers with specific connect API · Issue #4156 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HTTP client provides an API to connect to a server and perform an opaque conversation after the connect is successful. It supports HTTP CONNECT method and HTTP connection upgrade. The HTTP connection upgrade assumes that the header value is Upgrade sensitively, it should be insensitive instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4157
Several fixes necessary to implement WebSocket upgrade support in a reverse proxy implemented with Vert.x by vietj · Pull Request #4157 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4158
HTTP/1.1 client metric is reset for allocated but non sent requests · Issue #4158 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The client calls the HTTP client metrics SPI for HTTP/1.1 requests which have been allocated but not yet sent: every request that is created by HttpClient#request that has not yet been sent calls back the SPI when it should not.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4159
HTTP/1.1 client metric is reset for allocated but non sent requests by vietj · Pull Request #4159 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4160
HTTP/1.1 client metric is reset for allocated but non sent requests - see #4158 by vietj · Pull Request #4160 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4161
Do not close connection on http client request connect by vietj · Pull Request #4161 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This change is necessary to support WebSocket https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-00 in a reverse proxy as this version of WebSocket has a body
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4162
Adding full details on what are the requirements for the SPI by pmlopes · Pull Request #4162 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4163
Support IO_URING transport · Issue #4163 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I'm implementing support for https://github.com/netty/netty-incubator-transport-io_uring on Vert-x Transport, see https://github.com/franz1981/vert.x/tree/4.2.1_iouring for some initial experiment.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4164
Support IO_URING transport by franz1981 · Pull Request #4164 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
I should add some check re domain socket support on JUnit tests
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4165
IllegalStateException: File handle is closed · Issue #4165 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Unexpected error IllegalStateException: File handle is closed.
Version
vert.x 4.1.4
Context
We have a web server which is built on top of vertx-web. The web server uses BodyHandler to handle file uploads. It looks like if the upload is using HTTP/1.1 protocol, sometimes the following error occurs. It looks like the AsyncFileImpl was already closed when the BodyHandlerImpl tries to cancel the upload.
java.lang.IllegalStateException: File handle is closed
    at io.vertx.core.file.impl.AsyncFileImpl.checkClosed(AsyncFileImpl.java:544)
    at io.vertx.core.file.impl.AsyncFileImpl.check(AsyncFileImpl.java:539)
    at io.vertx.core.file.impl.AsyncFileImpl.drainHandler(AsyncFileImpl.java:271)
    at io.vertx.core.file.impl.AsyncFileImpl.drainHandler(AsyncFileImpl.java:54)
    at io.vertx.core.streams.impl.PipeImpl.close(PipeImpl.java:138)
    at io.vertx.core.http.impl.HttpServerFileUploadImpl.cancelStreamToFileSystem(HttpServerFileUploadImpl.java:223)
    at io.vertx.ext.web.impl.FileUploadImpl.cancel(FileUploadImpl.java:72)
    at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.cancelAndCleanupFileUploads(BodyHandlerImpl.java:323)
    at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.lambda$new$2(BodyHandlerImpl.java:219)
    at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)
    at io.vertx.core.http.impl.HttpEventHandler.handleException(HttpEventHandler.java:89)
    at io.vertx.core.http.impl.Http1xServerRequest.handleException(Http1xServerRequest.java:639)
    at io.vertx.core.http.impl.Http1xServerConnection.lambda$handleClosed$5(Http1xServerConnection.java:448)
    at io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:71)
    at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:163)
    at io.vertx.core.impl.AbstractContext.execute(AbstractContext.java:58)
    at io.vertx.core.http.impl.Http1xServerConnection.handleClosed(Http1xServerConnection.java:447)
    at io.vertx.core.net.impl.VertxHandler.channelInactive(VertxHandler.java:144)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)
    at io.netty.handler.stream.ChunkedWriteHandler.channelInactive(ChunkedWriteHandler.java:137)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)
    at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:81)
    at io.netty.handler.codec.http.HttpContentEncoder.channelInactive(HttpContentEncoder.java:313)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)
    at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:389)
    at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:354)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241)
    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248)
    at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)
    at io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:831)
    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:497)
    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
    at java.lang.Thread.run(Unknown Source)

Do you have a reproducer?
I don't have a readily available reproducer.
Extra

It happens on both JDK 14 and JDK 17, so it should not be JDK version specific.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4166
Trace operation override for HTTP client requests · Issue #4166 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
An HTTP client request begins a trace with the HTTP method as trace operation, we can provide in RequestOptions an override for this value, so the user can set the operation to use instead of the HTTP method.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4167
fix "setTimer throws when delay < 1ms" by mtomfjc · Pull Request #4167 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
that would change the current behavior
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4168
vertx.cacheDirBase semantics has changed from vert.x 3.9 to 4.0 · Issue #4168 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In vert.x 3.x the value set via the vertx.cacheDirBase Java system property had been used to create a temporary directory for resolving files from the classpath as follows:
"${vertx.cacheDirBase}/file-cache-" + UUID.randomUUID().toString()
In vert.x 4.x the semantics has changed to now create a directory as:
"${vertx.cacheDirBase}-" + UUID.randomUUID().toString()
With vert.x 3.x it was possible to e.g. provide the vert.x process with write access to /tmp and set -Dvertx.cacheDirBase=/tmp so that vert.x would create a sub-directory under /tmp during startup.
Using the same system property value under vert.x 4 will fail during startup if the vert.x process does not have write access to the root file system (/) because vert.x will try to create folder /tmp-UUID instead of /tmp/file-cache-UUID in this case.
The online documentation regarding this system property and how its value is being used is also wrong for versions 3.9.10, 4.0.3, 4.1.6 and 4.2.1
This (breaking) change also hasn't been documented in the Migration Guide for upgrading to vert.x 4.
I see two ways of dealing with this. Either keep the breaking change in the code base and amend the Migration Guide accordingly or reinstate the vert.x 3 behavior in the vert.x 4 code base. I can provide a pull request for any of these options as you see fit.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4169
Fix #4168: Update manual to match code expectation by pmlopes · Pull Request #4169 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4170
Connection closed exception expected instead of timeout · Issue #4170 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Which version(s) did you encounter this bug ?
4.0.3
Context
When a vertx server is closed gracefully in a clustered vertx (all consumers unregistered, verticles undeployed, vertx closed), there are consumers in other servers that receive a timeout ReplyException. We would have expected that those consumers did not have to wait for the timeout to expire, and immediately receive an other error such as VertxException : Connection was closed.
I assume that when a verticle (or a consumer) is unregistered, vertx knows what are the pending requests, would it be possible to make them fail with an adequate exception instead of letting them expire in the sender ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4171
Webclient not using all event loop · Issue #4171 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi,
I am running this code on 8 core machine with 16 event loop. However the webclient is not using all the event loop and all webclient request are running on single event loop. Am I doing it incorrectly or is it a bug ?
Also there was some documentation I read long back on how to use Vertx to create standalone application (not using verticles). Can someone share the link for that ?
pom.xml
        <dependency>
            <groupId>io.vertx</groupId>
            <artifactId>vertx-web-client</artifactId>
        </dependency>
        <dependency>
            <groupId>io.netty</groupId>
            <artifactId>netty-tcnative-boringssl-static</artifactId>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>io.netty</groupId>
            <artifactId>netty-transport-native-epoll</artifactId>
            <classifier>linux-x86_64</classifier>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-slf4j-impl</artifactId>
            <version>2.14.1</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.22</version>
            <scope>provided</scope>
        </dependency>


import io.vertx.core.CompositeFuture;
import io.vertx.core.Future;
import io.vertx.core.Vertx;
import io.vertx.core.VertxOptions;
import io.vertx.core.buffer.Buffer;
import io.vertx.core.impl.cpu.CpuCoreSensor;
import io.vertx.core.net.OpenSSLEngineOptions;
import io.vertx.ext.web.client.HttpResponse;
import io.vertx.ext.web.client.WebClient;
import io.vertx.ext.web.client.WebClientOptions;

import java.time.Instant;
import java.util.List;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.function.Function;
import java.util.stream.Collectors;
import java.util.stream.IntStream;

public class VertxFuture {
  private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(VertxFuture.class);
  public static AtomicInteger atomicInteger = new AtomicInteger();
  public static AtomicInteger outerAtomicInteger = new AtomicInteger();

  public static void main(String[] args) {
    System.setProperty("vertx.disableDnsResolver", "true");
    Vertx vertx = Vertx.vertx(new VertxOptions().setEventLoopPoolSize(2 * CpuCoreSensor.availableProcessors()).setPreferNativeTransport(true));
    try {
      Instant now = Instant.now();
      WebClient webclient = WebClient.create(vertx, new WebClientOptions()
              .setTryUseCompression(true)
              .setVerifyHost(false)
              .setReuseAddress(true)
              .setReusePort(true)
              .setTcpFastOpen(true)
              .setTcpNoDelay(true)
              .setTcpQuickAck(true)
              .setKeepAlive(true)
              .setMaxPoolSize(100)
              .setOpenSslEngineOptions(new OpenSSLEngineOptions().setSessionCacheEnabled(false)));
      List<Future> collect = IntStream.range(0, 100).mapToObj(x -> (new VertxFuture()).request(webclient, now)).collect(Collectors.toList());
      System.out.println("Started: " + now);
      CompositeFuture.all(collect).toCompletionStage().toCompletableFuture().get();
      System.out.println("Completed: " + Instant.now());
      System.out.println("Inner Counter: " + atomicInteger.get());
      System.out.println("Outer Counter: " + outerAtomicInteger.get());
    } catch (Exception e) {
      e.printStackTrace();
    }

  }

  public Future request(WebClient webClient, Instant instant) {
    return webClient.get(443,
                    "application-dev.test.com",
                    "/test/0cd7729e-ab1b-445e-ad9f-22a7214305b1/details")
            .ssl(true)
            .putHeader("trace_id", "test12341")
            .putHeader("span_id", "test12341")
            .send()
            .flatMap(new Function<HttpResponse<Buffer>, Future<io.vertx.ext.web.client.HttpResponse<Buffer>>>() {
              @Override
              public Future<io.vertx.ext.web.client.HttpResponse<Buffer>> apply(HttpResponse<Buffer> bufferHttpResponse) {
                log.info("Running on event loop");
                outerAtomicInteger.incrementAndGet();
                if (Instant.now().isBefore(instant.plusSeconds(10))) {
                  atomicInteger.incrementAndGet();
                  return request(webClient, instant);
                } else {
                  return Future.<io.vertx.ext.web.client.HttpResponse<Buffer>>succeededFuture(bufferHttpResponse);
                }
              }
            });
  }
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4172
Shared http client by vietj · Pull Request #4172 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
fixes #3361
fixes #4175
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4173
"Result is already complete" exception in case of timeout · Issue #4173 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.0.3 (Java), Clustered
Context
When a request is send to the cluster with a timeout set in the options, it might happen (especially when heavily loaded) that vertx issues a "Result is already complete" exception when applying the response to its internal promise, if the timeout has been triggered at the same time.
Here's the stack trace:
java.lang.IllegalStateException: Result is already complete at io.vertx.core.Promise.complete(Promise.java:67) at io.vertx.core.eventbus.impl.ReplyHandler.dispatch(ReplyHandler.java:94) at io.vertx.core.eventbus.impl.HandlerRegistration$InboundDeliveryContext.next(HandlerRegistration.java:163) at io.vertx.core.eventbus.impl.HandlerRegistration$InboundDeliveryContext.dispatch(HandlerRegistration.java:128) at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:107) at io.vertx.core.eventbus.impl.HandlerRegistration.dispatch(HandlerRegistration.java:104) at io.vertx.core.eventbus.impl.ReplyHandler.doReceive(ReplyHandler.java:75) at io.vertx.core.eventbus.impl.HandlerRegistration.lambda$receive$0(HandlerRegistration.java:54) at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500) at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.lang.Thread.run(Thread.java:748)
I suppose that the "complete" statement in the reply handler should be replaced by a tryComplete() or should detect that it already timed out
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4174
jvm startup args setting ‘-Dvertx.options.warningExceptionTime=1000000000’ is invalid · Issue #4174 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I used gravitee api gateway, The production environment encountered a block problem, "[vertx-blocked-thread-checker] [] WARN ivcore.impl.BlockedThreadChecker-Thread Thread[vert.x-eventloop-thread-10,5,main] has been blocked for 2075 ms, time limit is 2000" I want to change warningExceptionTime 1 second print VertxException StackTrace, Please help me
Version
JDK:1.8.0_144
Gravitee:1.20.15
Vertx:3.5.4
Do you have a reproducer?
1：Local IntelliJ Idea jvm startup args:
-Dgravitee.home=/Users/daipeng/workspace_longfor/gravitee-home-local -server -Xmx128m -Xms128m -Xmn64m -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelInitialMarkEnabled -XX:+CMSParallelRemarkEnabled -XX:+CMSScavengeBeforeRemark -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+ParallelRefProcEnabled -XX:MaxTenuringThreshold=8 -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+PrintGCDetails -XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+PrintTenuringDistribution -XX:+PrintGCApplicationStoppedTime -XX:+PrintReferenceGC -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=15 -XX:GCLogFileSize=10M -verbose:gc -Xloggc:/Users/daipeng/logs/gc-%t.log -Dvertx.options.warningExceptionTime=1000000000
2：Gravitee process request main thread sleep(3000)
3：Console log still none print VertxException StackTrace Information, due to sleep time less than VertxOptions.DEFAULT_WARNING_EXCEPTION_TIME
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4175
HTTP client fixed event loop pool · Issue #4175 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HTTP client uses event loops provided by actual requests to assign connection event-loops. In some case it is desirable to have the client use its own event loop as a pool, like when it is shared between verticles or statically.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4176
Depolying verticle by name can't initialize non-static field of the verticle class · Issue #4176 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When deploying verticle in Vert.X, if we want to deploy multiple instances of the specified verticle, we can only deploy by name of the verticle, otherwise an exception like this will be thrown: "can't specify > 1 instances for already created verticle".
However, the way of deploying by name calls the constructor without parameters of the verticle instance by default. In this way, if there are non static field in the verticle instance, they will not be initialized correctly as expected. In this case, we can only change the field in the verticle instance to static, but if we want to deploy multiple verticle instances with different values of one of itself non-static field, how should we implement this in the current Vert.x 4.x? I look forward to your response. Thanks in advance!
Here is my sample code：
@SpringBootApplication
@Configuration
public class Application {
    @Value("${ws.port}")
    private int wsPort;

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @EventListener(classes = {ApplicationReadyEvent.class})
    public void afterStarted(final ApplicationReadyEvent applicationReadyEvent) {
        final ConfigurableApplicationContext applicationContext = applicationReadyEvent.getApplicationContext();
        VerticleUtils.deployVerticle(WebSocketServerVerticle.class, false, 1, applicationContext);
        WebSocketClientVerticle.setWsPort(wsPort);
        VerticleUtils.deployVerticle(WebSocketClientVerticle.class.getName(), false, 10, applicationContext);
        VerticleUtils.deployVerticle(WebSocketClient2Verticle.class, false, 1, applicationContext);
    }
}
@Slf4j
@Component
public class WebSocketClientVerticle extends AbstractVerticle {
    //@Value("${ws.port}")
    private static int wsPort;

    @Override
    public void start() throws Exception {
        HttpClient client = vertx.createHttpClient();
        client.webSocket(wsPort, "127.0.0.1", "/ws/123", asyncResult -> {
            WebSocket webSocket = asyncResult.result();
            webSocket.writeTextMessage("ping");
            webSocket.textMessageHandler(message -> {
                log.info("Recieve message From WebSocket Server：{}", message);
                if("pong".equals(message)) {
                    webSocket.writeTextMessage("ping");
                }
            });
        });
    }

    public static void setWsPort(int wsPort) {
        WebSocketClientVerticle.wsPort = wsPort;
    }
}
Vert.x version: 4.2.1
JDK version: 1.8.0_241
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4177
Contex data didn't clean before return to thread pool · Issue #4177 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Context
All data that previously has been persisted in the context, available in next iteration of thread.
Following test:
import java.util.Objects;
import java.util.UUID;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
import java.util.concurrent.atomic.AtomicInteger;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.impl.ContextInternal;
import io.vertx.junit5.VertxExtension;
import io.vertx.junit5.VertxTestContext;

@ExtendWith(VertxExtension.class)
public class WorkingContextTest {
	
	private static final String CONTEXTUAL_KEY = "val";
	
	@Test
	void test(Vertx vertx, VertxTestContext ctx) {
		vertx.deployVerticle(new AbstractVerticle() {
			@Override
			public void start() throws Exception {
				AtomicInteger cnt = new AtomicInteger();
				vertx.setPeriodic(100, id -> {
					var actual = get(CONTEXTUAL_KEY);
					if(null == actual) {
						var expected = UUID.randomUUID().toString();
						put(CONTEXTUAL_KEY, expected);
						
						if(cnt.incrementAndGet() > 100) {
							ctx.completeNow();
						}
					} else {
						vertx.cancelTimer(id);
						ctx.failNow("context not empty. value:" + actual);
					}
				});
			}
		});
	}
	
	private static String put(String key, String value) {
		Objects.requireNonNull(key);
		Objects.requireNonNull(value);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx == null) {
			return null;
		} else {
			return contextualDataMap(ctx).put(key, value);
		}
	}

	public static String get(String key) {
		Objects.requireNonNull(key);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx != null) {
			return contextualDataMap(ctx).get(key);
		}
		return null;
	}
	
	private static ConcurrentMap<String, String> contextualDataMap(ContextInternal ctx) {
		Objects.requireNonNull(ctx);
		return (ConcurrentMap<String, String>) ctx.localContextData().computeIfAbsent(WorkingContextTest.class, k -> new ConcurrentHashMap<String,String>());
	}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4178
Contextual data not copied in Context.runOnContext · Issue #4178 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Inside runOnContext handler of Context, all previously persisted contextual data are not available.
Following test:
import java.util.Objects;
import java.util.UUID;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.Vertx;
import io.vertx.core.impl.ContextInternal;
import io.vertx.junit5.VertxExtension;
import io.vertx.junit5.VertxTestContext;

@ExtendWith(VertxExtension.class)
public class WorkingContextTest {
	
	private static final String ADDRESS = "foo";
	private static final String CONTEXTUAL_KEY = "val";
	
	
	@Test
	void copyContextualDataTest(Vertx vertx, VertxTestContext ctx) {
		var expected = UUID.randomUUID().toString();
		
		vertx.deployVerticle(new AbstractVerticle() {
			@Override
			public void start() throws Exception {
				vertx.eventBus().consumer(ADDRESS, msg -> {
					put(CONTEXTUAL_KEY, expected);
					context.runOnContext(nil -> {
						var actual = get(CONTEXTUAL_KEY);
						
						if(null == actual) {
							ctx.failNow("contextual data not copied");
						} else {
							ctx.completeNow();
						}
					});
				});
			}
		}).map(id -> {
			vertx.eventBus().send(ADDRESS, id);
			return null;
		});
	}
	
	private static String put(String key, String value) {
		Objects.requireNonNull(key);
		Objects.requireNonNull(value);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx == null) {
			return null;
		} else {
			return contextualDataMap(ctx).put(key, value);
		}
	}

	public static String get(String key) {
		Objects.requireNonNull(key);
		ContextInternal ctx = (ContextInternal) Vertx.currentContext();
		if (ctx != null) {
			return contextualDataMap(ctx).get(key);
		}
		return null;
	}
	
	private static ConcurrentMap<String, String> contextualDataMap(ContextInternal ctx) {
		Objects.requireNonNull(ctx);
		return (ConcurrentMap<String, String>) ctx.localContextData().computeIfAbsent(WorkingContextTest.class, k -> new ConcurrentHashMap<String,String>());
	}
}
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4179
Allow loading PKCS#11 keystores (HSM) by pmlopes · Pull Request #4179 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4180
Eventbus - Contextual data shared between different contexts · Issue #4180 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi Friends, After investigations of miss behavior of contextual tracing, I think that we found regression.
Following details:
Several eventbus events have a single (shared) context local data.
This happened in worker verticle and in inboundInterceptor of Reply.
Following the reproduce test:
  @Test
  void testRequestReceive(Vertx vertx, VertxTestContext ctx) {
    logger.trace("testRequestReceive");
    
    vertx.runOnContext(nil -> {
      vertx.eventBus().addOutboundInterceptor(event-> {
        var value = get(CONTEXTUAL_KEY);
        if(null != value) {
          logger.trace("put contextual value: {} to header", value);
          event.message().headers().add(CONTEXTUAL_KEY, value);
        }
        event.next();
      });
      
      vertx.eventBus().addInboundInterceptor(event-> {
        var value = event.message().headers().get(CONTEXTUAL_KEY);
        if(null != value) {
          put(CONTEXTUAL_KEY, value);
        }
        event.next();
      });
      
      vertx.deployVerticle(new AbstractVerticle() {
        public void start(Promise<Void> startPromise) throws Exception {
          vertx.eventBus().consumer(EVENT_ADDRESS, message -> {
            message.reply(message.body());
          });
          
          startPromise.complete();
        }
      }, new DeploymentOptions().setWorker(true))
      .compose(noig -> vertx.deployVerticle(new AbstractVerticle() {
        public void start(Promise<Void> startPromise) throws Exception {
          final int max = 100;
          AtomicInteger cnt = new AtomicInteger();
          AtomicBoolean failed = new AtomicBoolean(); 
          for (int i = 0; i < max; i++) {
            logger.trace("send:{}", i);
            var value = String.valueOf(i);
            put(CONTEXTUAL_KEY, value);
            vertx.eventBus().request(EVENT_ADDRESS, value, res -> {
              try {
                if(! failed.get()) {
                  var expectedValue = (String)res.result().body();
                  var actualValue = get(CONTEXTUAL_KEY);
                  
                  Assertions.assertEquals(expectedValue, actualValue);
                  logger.trace("received: message:{}, context:{}", expectedValue, actualValue);
                  if(cnt.incrementAndGet() >= max) {
                    ctx.completeNow();
                  }
                }
              } catch (Throwable e) {
                if(failed.compareAndSet(false, true)) {
                  ctx.failNow(e);
                }
              }
            });
          };
          
          startPromise.complete();
        }
      }, new DeploymentOptions().setWorker(true)));
    });  
  }
  
  private static String put(String key, String value) {
    Objects.requireNonNull(key);
    Objects.requireNonNull(value);
    ContextInternal ctx = (ContextInternal) Vertx.currentContext();
    if (ctx == null) {
      if (logger.isTraceEnabled()) {
        logger.trace("Attempt to set contextual data from a non Vert.x thread");
      }
      return null;
    } else {
      return contextualDataMap(ctx).put(key, value);
    }
  }

  public static String get(String key) {
    Objects.requireNonNull(key);
    ContextInternal ctx = (ContextInternal) Vertx.currentContext();
    if (ctx != null) {
      return contextualDataMap(ctx).get(key);
    }
    return null;
  }
  
  private static ConcurrentMap<String, String> contextualDataMap(ContextInternal ctx) {
    Objects.requireNonNull(ctx);
    return (ConcurrentMap<String, String>) ctx.localContextData().computeIfAbsent(EventBusTest2.class, k -> new ConcurrentHashMap<String,String>());
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4181
Issue with webclient in 4.1.0 · Issue #4181 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Facing issue with webclient
Having following stackstrace


SEVERE io.vertx.core.net.impl.ConnectionBase Connection reset


java.net.SocketException: Connection reset
at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:345)
at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:376)
at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:253)
at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:350)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.base/java.lang.Thread.run(Thread.java:832)


SEVERE io.vertx.core.http.impl.HttpClientRequestImpl io.vertx.core.VertxException: Connection was closed


above error logs are printed in production logs
it was clearly working with 3.9.1.
When same api tried from local env it works. no errors are returned.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4182
Clustered event-bus shutdown frame · Issue #4182 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
When a clustered event-bus is shutdown, it will close all its connection to its peers. We could introduce a shutdown sequence, that sends a close frame before TCP connection close that indicates the server will not be available anymore.
This would allow peers to fail eagerly the pending requests and perhaps other use cases.
This would require a modification of the event-bus protocol so it would be a breaking change.
See #4183
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4183
Proper event-bus protocol version negotiation. · Issue #4183 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The current event-bus protocol is versioned but does not allow to versions to interoperate. It should be improved in a way that a server can operate with an older version and remain compatible with its peer.
When the peer connects to another peer, it sends the version but it should receive a frame that indicates the version that was agreed between the peers.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4184
Adding lsof linux command after a possible fd leak by franz1981 · Pull Request #4184 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4185
Metric vertx_net_client_active_connections not being decreased · Issue #4185 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx 4.2.0
Context
Values for gauge metric vertx_net_client_active_connections are not being decreased on http connection closed.
Do you have a reproducer?
https://github.com/Mersenne255/vertx_issue_4185_reproducer
Reproducer submits single http request and ends afterwards.
vertx_net_client_active_connections keeps showing value of 1, http metric vertx_http_client_active_connections is correctly decreased to 0.
Extra
JVM 17.0.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4186
LocalMap type checking fails on put for values read by vertx-config · Issue #4186 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This is related to this commit in the vertx-config repo: 47fb7a669b5e68e319d94ce10b6fdea39ed8686a
After this change, vertx-config handles numeric values as BigInteger or BigDecimal. The type checking used by LocalMap, however, doesn't allow these types: Checker.java#L24
Version
4.1.6
Context
Values read from a properties file via vertx-config were being put into a LocalMap. This worked fine in 3.9.x but after the linked change to vertx-config, it throws an IllegalArgumentException.
Do you have a reproducer?
No
Steps to reproduce

Read numerical values from Vertx Config (prop file, etc)
Iterate config JSON object and put those values into a LocalMap

Extra

I noticed that there is a different implementation of checkType in the implementation of SharedData SharedDataImpl.java#L194. This version allows anything that implements Serializable, which in this case I believe would have avoided the problem since that would apply to BigInteger and BigDecimal. Is there a reason that can't be supported in all instances of SharedData's collections?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4187
addCookie method does not replace existing cookie (from browser) and fails when calling RoutingContext.cookieMap() · Issue #4187 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.1
Context
We were using (in version 3.9.9) HttpServerResponse.addCookie to set cookie irrespective of whether the cookie was already present (came from browser) and when we iterate over cookies using RoutingContext.cookieMap() we would get a single cookie with that name (i.e. cookie info was updated)
After upgrading to 4.2.1, calling RoutingContext.cookieMap() fails with this exception stack trace
This method assumes cookies are unique by name. However the implementation for addCookie() always adds a cookie to collection (this seems to be a feature request).
default Map<String, Cookie> cookieMap() {
    return cookies()
      .stream()
      .collect(Collectors.toMap(Cookie::getName, cookie -> cookie));
  }

Do you have a reproducer?
No.
Steps to reproduce
Create sample web app that renders simple form and addCookie("test", "somevalue"). On form submit, call addCookie("test", "anothervalie") to modify the cookie value without removing it first. Then invoke RoutingContext.cookieMap() to get all cookies.
Extra
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4188
NPE on Http1xServerRequest.handleException · Issue #4188 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.1
Context
when Http1xServerRequest.reportRequestBegin() throw exception. will cause a NPE on Http1xServerRequest.handleException (line 621),
because response not initialized.
Steps to reproduce

enable vertx-micrometer-metrics .
config MicrometerOptions like: new MicrometerOptions().setRequestsTagsProvider(req -> {
List tags = new ArrayList<>();
tags.add(Tag.of("uri", req.absoluteURI()));
return tags;
})
startup http server .
curl -v 'http://host:port/path?a=fetch&content=die(@md5(HelloThinkCMF))'  (contains some illegal query-char)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4189
Chrome don't use http/2.0 to get resources from vertx-server · Issue #4189 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Inspecting with developer tools Chrome uses http/1.1 when getting resources from my vert.x server even though https://vertx.io/docs/apidocs/io/vertx/core/http/HttpServerOptions.html states http/2.0 should be prioritized.
I haven't been able to find any information about Chrome doing something weird and when checking other sites h2 (i.e. http/2.0) is used.
I also haven't been able to find any information in the vert.x documentation about configuring the server-side for http/2.0. Only the client-side.
Am I missing something or is it a bug?
Version
Vertx 4.2.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4190
Refactor the HTTP client sharing to manage client sharing with Vertx by vietj · Pull Request #4190 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4191
Fix the cookie comparator to consider user-agent cookies correctly by pmlopes · Pull Request #4191 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4192
why lindex function required two string arguments in RedisAPI class? · Issue #4192 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version: Vert.x 4.2.1
As the title, Lindex command requires only one redis key to be passed in. Why does lindex function in RedisAPI class requires two String parameters to be passed in? Is there anything MISSING in my understanding, or is there a defect in the design of the RedisAPI? I will appreciate your response, Thanks in advance!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4193
NetClientOptions toJson method does not merge the specific NetClientOptions · Issue #4193 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
e.g options.toJson().getLong("reconnectInterval") returns null instead of the actual value.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4194
WebClient with http2 can't recover after StreamResetException · Issue #4194 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.1
Context
After an http2 connection is reset the WebClient that uses that connection can't recover and I see no way to fix this besides recreating the WebClient instance but that goes against the recommendation to create a single webclient instance.
Do you have a reproducer?
No.
Steps to reproduce
I'm using the native transport (I'm not sure that it matters).

Run WebClient that does periodic http2 call
Reset the http2 server
WebClient will not recover from this error

2021-12-09 08:08:06 ERROR io.vertx.core.http.impl.HttpClientRequestImpl - Stream closed before write could take place
io.netty.handler.codec.http2.Http2Exception$StreamException: Stream closed before write could take place
at io.netty.handler.codec.http2.Http2Exception.streamError(Http2Exception.java:172) ~[]
at io.netty.handler.codec.http2.DefaultHttp2RemoteFlowController$FlowState.cancel(DefaultHttp2RemoteFlowController.java:481) []
at io.netty.handler.codec.http2.DefaultHttp2RemoteFlowController$1.onStreamClosed(DefaultHttp2RemoteFlowController.java:105) []
at io.netty.handler.codec.http2.DefaultHttp2Connection.notifyClosed(DefaultHttp2Connection.java:357) []
at io.netty.handler.codec.http2.DefaultHttp2Connection$ActiveStreams.removeFromActiveStreams(DefaultHttp2Connection.java:1007) []
at io.netty.handler.codec.http2.DefaultHttp2Connection$ActiveStreams.deactivate(DefaultHttp2Connection.java:963) []
at io.netty.handler.codec.http2.DefaultHttp2Connection$DefaultStream.close(DefaultHttp2Connection.java:515) []
at io.netty.handler.codec.http2.DefaultHttp2Connection$DefaultStream.close(DefaultHttp2Connection.java:521) []
at io.netty.handler.codec.http2.Http2ConnectionHandler.closeStream(Http2ConnectionHandler.java:613) []
at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onRstStreamRead(DefaultHttp2ConnectionDecoder.java:444) []
at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readRstStreamFrame(DefaultHttp2FrameReader.java:509) []
at io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:259) []
at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:159) []
at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:173) []
at io.netty.handler.codec.http2.DecoratingHttp2ConnectionDecoder.decodeFrame(DecoratingHttp2ConnectionDecoder.java:63) []
at io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378) []
at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438) []
at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507) []
at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446) []
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276) []
at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:378) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) []
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) []
at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1372) []
at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1235) []
at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1284) []
at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507) []
at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446) []
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) []
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) []
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) []
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) []
at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) []
at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795) []
at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:480) []
at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:378) []
at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986) []
at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) []
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) []
at java.lang.Thread.run(Thread.java:829) [?:?]
2021-12-09 08:08:06 ERROR io.vertx.core.net.impl.ConnectionBase - writeAddress(..) failed: Connection reset by peer
2021-12-09 08:08:06 ERROR io.vertx.core.http.impl.HttpClientRequestImpl - Connection was closed
io.vertx.core.VertxException: Connection was closed

Extra
I'm using vertx in a scala app.
openjdk version "11.0.13" 2021-10-19 LTS
OpenJDK Runtime Environment 18.9 (build 11.0.13+8-LTS)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.13+8-LTS, mixed mode, sharing)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4195
add an event bus system codec for serializable objects by craig-day · Pull Request #4195 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
if we merge this we should apply best practices concerning serializable
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4196
Upgrade log4j2 to 2.15.0 for CVE-2021-44228 by zyclonite · Pull Request #4196 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
We already have this on master. We needs to backport to 4.0 and 3.9 still and same across remaining repos
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4197
Bumping log4j: fixes https://github.com/advisories/GHSA-jfh8-c2jp-5v3q by pmlopes · Pull Request #4197 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4198
vert.x 4.1.6 build issue · Issue #4198 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
Cannot find the symbol with vert.x 4.1.6
Context
Trying to upgrade the vertx homebrew formula to the latest (4.1.6 or 4.2.1), but run into some test failure for the build.
  ==> /opt/homebrew/Cellar/vert.x/4.2.1/bin/vertx run HelloWorld.java
  Picked up _JAVA_OPTIONS: -Duser.home=/Users/brew/Library/Caches/Homebrew/java_cache -Djava.io.tmpdir=/private/tmp
  OpenJDK 64-Bit Server VM warning: Option UseBiasedLocking was deprecated in version 15.0 and will likely be removed in a future release.
  OpenJDK 64-Bit Server VM warning: Option BiasedLockingStartupDelay was deprecated in version 15.0 and will likely be removed in a future release.
  /private/tmp/vert.x-test-20211209-76640-dyiq21/HelloWorld.java:1: error: cannot find symbol
  import io.vertx.core.AbstractVerticle;
                      ^
    symbol:   class AbstractVerticle
    location: package io.vertx.core 
  /private/tmp/vert.x-test-20211209-76640-dyiq21/HelloWorld.java:2: error: cannot find symbol
  public class HelloWorld extends AbstractVerticle {
                                  ^
    symbol: class AbstractVerticle 
  /private/tmp/vert.x-test-20211209-76640-dyiq21/HelloWorld.java:5: error: cannot find symbol
      vertx.close();
      ^
    symbol:   variable vertx
    location: class HelloWorld 
  Failed in deploying verticle 
  java.lang.RuntimeException: Compilation failed

relates to Homebrew/homebrew-core#90888
Do you have a reproducer?
captured in the build log in here, https://github.com/Homebrew/homebrew-core/runs/4489473453
Extra

Anything that can be relevant such as OS version, JVM version

macOS 12
openJDK 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4199
Fix the NPE problem of FileSystemImpl by mashirofang · Pull Request #4199 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4200
HTTP client will not update correctly the underlying TCP client metrics · Issue #4200 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HTTP client will create a TCPMetrics and a HttpClientMetrics and only update the HttpClientMetrics, leaving an incorrect TCPMetrics.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4201
HTTP client will not update correctly the underlying TCP client metrics by vietj · Pull Request #4201 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Reported initially by vert-x3/vertx-micrometer-metrics#131
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4202
Fix a NPE in FileSystemImpl & Add a test case. by mashirofang · Pull Request #4202 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj
Hello , I'm sorry that I closed #4199 because of my mis-operation of git to rebase. Here I forked & committed  again ,
would you like to merge this to 4.2.3?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4203
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4204
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4205
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4206
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4207
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4208
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4209
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4210
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4211
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4212
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4213
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4214
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4215
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4216
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4217
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4218
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4219
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4220
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4221
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4222
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4223
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4224
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4225
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4226
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4227
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4228
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4229
Default invalid request handler enhancements. by vietj · Pull Request #4229 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The implementation of the default invalid request handler only send a 400 response (bad_request) in some situation otherwise it will simply close the connection without sending a response message.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4230
ShutdownHook · Issue #4230 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The vertx internal ShutdownHook calls vertx.close();
The problem here is, that it is not waiting on finish, because the internal returned Future is not blocked.
So i thought to make my own ShutdownHook, but then it is race between my ShutDownHook and the Vertx internal.
If i call vertx.close() after the internal hook called it already, then I get a new Future.
So maybe here would be two improvments good:

The option to configure Vertx to gracefully shutdown, so that its internal ShutdownHook waits untill the Future completes (.toCompletionStage().toCompletableFuture().join())
After vertx.close() is called once, an second call recieve the same, a cached Future
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4231
Make formatting and imports consistent across IDEs and editors · Issue #4231 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Subtle IDE differences
Depending on IDE or editor (Eclipse, VSCode, IntelliJ) files are saved with subtle difference. E.g. sort order of imports, allowing wildcard imports, number of empty space to preserve, line breaks / merges
Use cases

enforce unified code layout
reduce "noise" in pull request due to white space / import changes

Implementation details

Create code style file (based on Google style, but merge lines switched off)
Create workspace file for VSCode
Update pom.xml to include the spotless plugin
document usage incl. how to setup a githook

See: https://wissel.net/blog/2021/12/spotless-code-with-a-git-hook.html
Contribution
Happy to implement
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4232
HttpClient's uncatchable exception on illegal HTTP header name · Issue #4232 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
I use vert.x 4.2.3
Context
When trying to send an invalid header name with the Vert.x HTTP Client, an exception is thrown by this line and the exception is not catchable at the HTTP Client level but at the event loop level.
Proposed solution
This error should be either :

thrown eagerly : so the RequestOptions.addHeader() should validate header names (this is currently not the case)
catchable at the HTTP client level : as in the http server, we should have httpClient.invalidRequestHandler(...)

I think the first option is the best to aim for as it's easier to achieve. But it could be interesting to have any exceptions hapenig during this process redirected to client.request(...) future result.
Reproducer
 void shouldFailProperlyOnInvalidHeaderName() throws InterruptedException {
        CountDownLatch latch = new CountDownLatch(1);
        HttpClient client = Vertx.vertx().createHttpClient();
        RequestOptions options = new RequestOptions().setMethod(GET)
                                                     .setHost("localhost")
                                                     .setPort(8181)
                                                     .addHeader("=", "invalid header name");
        Vertx.vertx().createHttpServer()
             .requestHandler(request -> request.response().setStatusCode(200).end())
             .listen(8181)
             .compose(unused -> client.request(options))
             .onComplete(ar -> {
                 // The test never goes here and thus run forever.
                 latch.countDown();
             });
        latch.await();
    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4233
Future returned by Http2ServerResponse#end() does not complete. · Issue #4233 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.3
Context
Writing a simple HttpServer where i have to wait for completed Http 1 / 2 responses.
Do you have a reproducer?
package com.github.tomakehurst.wiremock.it;

import io.vertx.core.CompositeFuture;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpClientOptions;
import io.vertx.core.http.HttpClientRequest;
import io.vertx.core.http.HttpMethod;
import io.vertx.core.http.HttpVersion;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestContext;
import io.vertx.ext.unit.junit.VertxUnitRunner;
import org.junit.Test;
import org.junit.runner.RunWith;

import java.util.Collections;

@RunWith(VertxUnitRunner.class)
public class ReproducerTest {

  @Test
  public void reproducer(final TestContext context) {
    final Vertx vertx = Vertx.vertx();
    final Async async = context.strictAsync(2);

    vertx
      .createHttpServer()
      .requestHandler(
        request -> request.response().setStatusCode(200).end().onComplete(result -> async.countDown())
      )
      .listen(8080)
      .compose(
        server -> CompositeFuture.all(
          vertx.createHttpClient(new HttpClientOptions()
              .setUseAlpn(true)
              .setProtocolVersion(HttpVersion.HTTP_2)
              .setAlpnVersions(Collections.singletonList(HttpVersion.HTTP_2))
              .setHttp2ClearTextUpgrade(false)
              .setDefaultHost("localhost")
              .setDefaultPort(8080)
            )
            .request(HttpMethod.GET, "uri")
            .compose(HttpClientRequest::send)
            .onSuccess(response -> context.assertEquals(200, response.statusCode()))
            .mapEmpty()
          ,
          vertx.createHttpClient(new HttpClientOptions()
              .setDefaultHost("localhost")
              .setDefaultPort(8080)
            )
            .request(HttpMethod.GET, "uri")
            .compose(HttpClientRequest::send)
            .onSuccess(response -> context.assertEquals(200, response.statusCode()))
            .mapEmpty()
        )
      )
      .onComplete(context.asyncAssertSuccess());
  }
}

Extra
openjdk 17.0.1
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4234
bugfix: future for empty http 2 response does not complete. fixes #4233 by DemonicTutor · Pull Request #4234 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
can you add a test ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4235
Fix issue 4232 - Validate header names in RequestOptions by NilsRenaud · Pull Request #4235 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
See #4232
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4236
CVE-2021-44832: bump log4j by pmlopes · Pull Request #4236 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4237
HttpClientRequest response AsyncResult must be failed on invalid response header · Issue #4237 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
I use vert.x 4.2.3
Context
When a server answers an HTTP response containing invalid header line like "aaaa" Netty throws an error which is not caught by vert.x.
This exception should be caught and dispatched to the HttpClientRequest response handler.
Reproducer
@Test
    void shouldFailProperlyOnInvalidHeaderName() throws InterruptedException {
        CountDownLatch latch = new CountDownLatch(1);
        new Thread(() -> basicHttp11Server()).start();
        HttpClient client = Vertx.vertx().createHttpClient();
        RequestOptions options = new RequestOptions().setMethod(GET)
                                                     .setHost("localhost")
                                                     .setPort(8181);
        client.request(options)
              .compose(HttpClientRequest::send)
              .onComplete(ar -> {
                  // This code never reach this part.
                  latch.countDown();
              });
        latch.await();
    }

    private static void basicHttp11Server() {
        try {
            ServerSocket server = new ServerSocket(8181, 1, InetAddress.getLocalHost());
            Socket client = server.accept();
            String content = "HTTP/1.1 200 OK\r\n"
                    + "aaaaa\r\n"
                    + "Content-Length: 2\r\n"
                    + "\r\n"
                    + "OK";
            client.getOutputStream().write(content.getBytes(StandardCharsets.US_ASCII));
            client.getOutputStream().flush();
            client.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4238
Link in documentation is incorrect · Issue #4238 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
In the "Templates" section here:
https://vertx.io/docs/vertx-web/java/#_templates
There is a link in "Please consult the MVEL templates documentation for how to write MVEL templates." where the link is pointing to an invalid resource.
Points to:  http://mvel.codehaus.org/MVEL+2.0+Templating+Guide
Should be:  http://mvel.documentnode.com/
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4239
HttpClientResponse headers should be validated before handing the response by vietj · Pull Request #4239 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4240
HttpClientResponse headers should be validated before handing the response by vietj · Pull Request #4240 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4241
HttpClientResponse headers should be validated before handing the response by vietj · Pull Request #4241 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4242
HttpClientResponse headers should be validated before handing the response by vietj · Pull Request #4242 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4243
ClusteredEventBus/ClusteredMessage : Missing codec failure is silently ignored · Issue #4243 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.3
Context
When using message sending/consuming mechanism with Clustered Vertx instances, if the MessageCodec used by the sender is not registered in the consumer's EventBus then a failure will be set in ClusteredMessage state (OK) ClusteredMessage#L154
But this failure is only traced and in default behavior it will be silently ignored : ClusteredMessage#L278
I do not know if it it would be revelant to handle this failure by the Handler specified in MessageConsumer.exceptionHandler(Handler<Throwable>); but it does not.
Same behavior with 'Invalid wire protocol version' failure : ClusteredMessage#L141
Reproduce code
Consumer.java
ClusterManager mgr = new HazelcastClusterManager();
VertxOptions options = new VertxOptions().setClusterManager(mgr);
Vertx.clusteredVertx(options, result -> {
    if (result.succeeded()) {
        Vertx vertx = result.result();
        EventBus bus = vertx.eventBus();
        // MY_CUSTOM_CODEC is not registered in EventBus
        MessageConsumer<Object> consumer = bus.consumer("test");
        consumer.handler(event -> System.out.println(event.body()));
        consumer.exceptionHandler(event -> {
            throw new RuntimeException(event); // Failure not handled
        });
    }
    else {
        throw new RuntimeException(result.cause());
    }
});
Sender.java
MessageCodec<String, String> MY_CUSTOM_CODEC = ...;
ClusterManager mgr = new HazelcastClusterManager();
VertxOptions options = new VertxOptions().setClusterManager(mgr);
Vertx.clusteredVertx(options, result -> {
    if (result.succeeded()) {
        Vertx vertx = result.result();
        EventBus bus = vertx.eventBus();
        bus.registerCodec(MY_CUSTOM_CODEC);
        DeliveryOptions deliveryOptions = new DeliveryOptions().setCodecName(MY_CUSTOM_CODEC.name());
        MessageProducer<String> sender = bus.sender("test", deliveryOptions);
        Future<Void> future = sender.write("Hello world");
        future.onComplete(result1 -> {
            if (result1.succeeded()) System.out.println("Message sent");
            else throw new RuntimeException(result1.cause());
        });
    }
    else throw new RuntimeException(result.cause());
});
Steps to reproduce

Run Consumer.java
Run Sender.java
See that there are no error/failure handled
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4244
Return failed future when executeBlocking task is rejected by tsegismont · Pull Request #4244 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
also this should be recorded in the changelog I think because it changes the behavior, although the impact is not important, still worth to record this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4245
Timeoutable Futures and timeoutable promises · Issue #4245 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@vietj i know its a old idea, but maybe you think its a good idea now?^^
What do you think about having timeoutable Futures?
myFuture.onComplete();
could be then myFuture.toTimeoutFuture(someTime).onComplete();
If the timeout is over the future is finished with an exception-cause
On the other side we could have also timeoutable promises.
Promise.promise() //its a normal promise
Promise.promise(someTime); //its a timeoutable promise
in that case all registered listeners and listeneres in the future get an timeout exception-cause, if it is not finished in someTime
So you don't need to wrap it into bigger classes with also other functionality you not really want to have -> Circuit-breakers and so on.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4246
Support vfs protocol in the default FileResolver implementation · Issue #4246 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Read me
When an embedded Vertx is used for a war deployment which reads resources in the bundle, and it is deployed to a WildFly server, it fails to read with error message: Invalid url protocol: vfs.
It is more like a feature than a bug from Vert.x point of view.
For more information, please refer to https://github.com/gaol/tests/tree/master/vertx/vfs-resolver for the reproducer.
Describe the feature
The default FileResolver implementation supports several URL protocols to resolve the file path, I would like to add the support of vfs.
vfs comes from jboss-vfs project, which is used inside of WildFly server for managing the files of the deployed applications, any resource loaded by the class loader(ModuleClassLoader) is a vfs URL in the server.
Using a customized FileResolver implementation looks too much than just one line modification in the default implementation, so it is great to have it supported in Vert.x.
Use cases
When embedded Vertx is used in web application, and it is deployed to WildFly server, it faces this problem.
Like when PropertyFileAuthentication is used to read authentication properties from the bundle.
Contribution
I can send PR for this.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4247
[Issue-4246] Support vfs protocol in the default FileResolver implementation by gaol · Pull Request #4247 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4248
HttpClientMetrics is closed twice · Issue #4248 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
HttpClientMetrics is closed by HttpClientImpl and NetClientImpl.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4249
HttpClientMetrics is closed twice by vietj · Pull Request #4249 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4250
Ended HttpClientRequest error logging by vietj · Pull Request #4250 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The HttpClientRequest implementation will always log an error when the request has already been ended. Instead we only log when the request is not yet ended and an exception handler was not set.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4251
HttpClientRequestTimeoutTest implementation by bolbat · Pull Request #4251 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Already covered in HttpTest#testHttpClientRequestTimeoutResetsTheConnection
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4252
Feature Request: Only-Onetime-Caching in SharedData API · Issue #4252 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Im not sure if you are interested in something like that, but i'll just throw it into the ring.
The problem is the following:
Often you have there something expensive to calculate or something you load from the database.
This goes then into the vertx Local-Map/asynchronous shared maps.
But now different eventloops get the same or similar-request, what could follows that you have calculate that expensive result twice or load it twice or more from the database, if the requests are relatively simultaneous.
So @thced had the idea of using vertx locks here. Yes this would work.
I had the idea putting then futures/promises into the Local-Map/async shared map.
So the first caller sees that there is no future in the Map. He creates one promise and put it into the map. After that he checks if it is his Future/promise. If yes, then he do the expensive work/database-load. After that, he completes the promise.
All others, which sees there the Future in the map, register there the onComplete() or something similar listener to get the result.
I think it should work quite similar as the lock-solution?
And now we don't need to calculate the same more than one time.
The things is now the following: There is a little bit overhead we have there, if the normal vertx-user should implement this on himself.
I think it is a feature, which is needed a lot out there. So I think we could integrate it into Vertx directly. What do you think about that?
It could be something like (in pseudo-code)
future = myMap.getOrCalculate(key, someAsyncCalculatingFunctionWhichMustFinishTheGettingPromise ).onComplete(....);
I can imagine that it could be a little bit tricky for the clustered version?!
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4253
Fixing small potential bugs: NPE, Resource leak, invalid branch by pmlopes · Pull Request #4253 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Signed-off-by: Paulo Lopes pmlopes@gmail.com
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4254
Uncaught exception with HTTP Client on HTTP/2.0 connection failure  · Issue #4254 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
I use vert.x 4.2.4
Context
I was playing with the vert.x HTTP client, trying to use it to send an unencrypted HTTP/2.0 request with prior knowledge, but the HTTP server I reached out was only serving HTTP/1.1 requests.
Then, the HTTP/2.0 connection failed but none of my exception handlers have been notified of this failure. I only have these log lines :
10:28:11.317 [vert.x-eventloop-thread-1] ERROR io.vertx.core.net.impl.ConnectionBase - First received frame was not SETTINGS. Hex dump for first 5 bytes: 485454502f
io.netty.handler.codec.http2.Http2Exception: First received frame was not SETTINGS. Hex dump for first 5 bytes: 485454502f
	at io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:108)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.verifyFirstFrameIsSettings(Http2ConnectionHandler.java:338)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:239)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:510)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279)
	at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:378)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
        [...]
10:28:11.317 [vert.x-eventloop-thread-1] WARN io.vertx.core.http.impl.HttpClientConnection - Connection evicted
10:28:11.321 [vert.x-eventloop-thread-1] DEBUG io.netty.handler.codec.http2.Http2ConnectionHandler - [id: 0xb698ce07, L:0.0.0.0/0.0.0.0:63856] Sending GOAWAY failed: lastStreamId '2147483647', errorCode '1', debugData 'First received frame was not SETTINGS. Hex dump for first 5 bytes: 485454502f'. Forcing shutdown of the connection.
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493)
	at io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:423)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:931)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.flush0(AbstractNioChannel.java:354)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750)
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742)
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.onError(Http2ConnectionHandler.java:643)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:510)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279)
	at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:378)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
        [...]

Reproducer
Here is the server set up I used :
ServerSocket server = new ServerSocket(8282, 1, InetAddress.getLocalHost());
while (true) {
    System.out.println("WAITING");
    Socket client = server.accept();
    System.out.println("RECEIVED");
    String content = "HTTP/1.1 200 OK\r\n"
            + "Content-Length: 2\r\n"
            + "\r\n"
            + "OK";
    client.getOutputStream().write(content.getBytes(StandardCharsets.UTF_8));
    client.getOutputStream().flush();
    client.close();
}
And here is my HTTP Client settings :
Vertx vx = Vertx.vertx();
vx.exceptionHandler(t -> System.out.println("VERTX EXCEPTION HANDLER"));
HttpClientOptions options = new HttpClientOptions()
        .setProtocolVersion(HttpVersion.HTTP_2)
        .setHttp2ClearTextUpgrade(false)
        .setSsl(false);
vx.createHttpClient(options)
    .request(HttpMethod.GET, 8282, "127.0.0.1", "/")
    .onSuccess(req -> req.send().onSuccess(resp -> System.out.println("OK"))
                       .onFailure(t -> System.out.println("RESPONSE EXCEPTION HANDLER"))) 
    .onFailure(t -> System.out.println("REQUEST EXCEPTION HANDLER")); // I'm expecting to get the exception here
    // but non of them has been triggered !
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4255
HTTP header values verifier is laxer than what's advised in the RFCs · Issue #4255 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
I use Vert.x 4.2.4
Issue description
The header field value validation does not follows the HTTP/1.1 and HTTP/2.0 specification. Thus it accepts illegal characters.
The RFCs
The HTTP 1.1 spec says :

header-field   = field-name ":" OWS field-value OWS
field-name     = token
field-value    = ( field-content / obs-fold )
field-content  = field-vchar [ 1( SP / HTAB ) field-vchar ]
field-vchar    = VCHAR / obs-text
obs-fold       = CRLF 1*( SP / HTAB )
; obsolete line folding
; see Section 3.2.4

In the ABNF RFC, we can read that :

VCHAR          =  %x21-7E
; visible (printing) characters
And later in the HTTP/1.1 RFC, we can read that :
obs-text = %x80-FF

And the HTTP/2.0 spec says :

Similarly, HTTP/2 allows header field values that are not valid.
While most of the values that can be encoded will not alter header
field parsing, carriage return (CR, ASCII 0xd), line feed (LF, ASCII
0xa), and the zero character (NUL, ASCII 0x0) might be exploited by
an attacker if they are translated verbatim.  Any request or response
that contains a character not permitted in a header field value MUST
be treated as malformed (Section 8.1.2.6).  Valid characters are
defined by the "field-content" ABNF rule in Section 3.2 of [RFC7230].

Conclusion from the RFCs
For both HTTP/1.1 and HTTP/2.0 versions, bytes allowed for header value are : CR (0x0D), LF (0x0A), SP (0x20), HTAB (0x09) and ranges 0x21 to 0x7E and 0x80 to 0xFF (although considered as obsolete)
Moreover the structure is important too.
What's existing

When received from the wire : they are read, byte by byte, as Latin-1 (ISO-8859-1) encoded and put into a Java String. Otherwise ... well header values are stored into java Strings.
Header values are checked thanks to io.vertx.core.http.impl.HttpUtils#validateHeaderValue which is only verifying a subset of the RFC's limitations.
When sending over the wire : they are encoded from Java String to Latin-1 (ISO-8859-1) to be sent over the wire and any character not fitting in 1 byte is transformed to '?' (0x3F).

Conclusion from the existing

The Latin-1 conversion is OK, that's been obsoleted but it's here for historical reasons.
The multibyte character conversion to '?' seems legitimate, although Vert.x could choose to fail to send the request/response instead (or to specify that in some doc/javadoc)
But the character validation is not strict enough according to RFCs.

How to reproduce
This method : io.vertx.core.http.impl.HttpUtils#validateHeaderValue is accessible for testing, so one can unit test it.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4256
Fix issue 4255 - HTTP header values verifier is laxer than what's advised in the RFCs by NilsRenaud · Pull Request #4256 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Not sure why these tests have failed, it does not seem related to my changes 🤔
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4257
Introduce VertxBindException by geoand · Pull Request #4257 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
@cescoffier @vietj if you agree with this change, I'd be glad to add a test (provided you let me know where I should add it) and take the PR out of draft
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4258
why vertx not support unix domain socket? · Issue #4258 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
2022-01-27 15:25:14.549 [vert.x-eventloop-thread-0] INFO  c.q.w.svrkit.server.MeshUDSServer -MeshUDSServer Start Fail: java.lang.IllegalArgumentException
        at io.vertx.core.net.impl.transport.Transport.serverChannelFactory(Transport.java:194)
        at io.vertx.core.net.impl.AsyncResolveConnectHelper.doBind(AsyncResolveConnectHelper.java:37)
        at io.vertx.core.net.impl.TCPServerBase.listen(TCPServerBase.java:143)
        at io.vertx.core.net.impl.NetServerImpl.listen(NetServerImpl.java:169)
        at io.vertx.core.net.impl.NetServerImpl.listen(NetServerImpl.java:193)
        at com.qq.weixin.svrkit.server.MeshUDSServer.run(MeshUDSServer.java:65)
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:758)
        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:748)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:309)
        at com.qq.weixin.mmbizjmeshdockerdemo.MMBizJMeshDockerDemoServer.main(MMBizJMeshDockerDemoServer.java:27)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:67)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)
        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)
        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)
        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)

Version
4.2.4
Context
    public ChannelFactory<? extends ServerChannel> serverChannelFactory(boolean domainSocket) {
        if (domainSocket) {
            throw new IllegalArgumentException();
        } else {
            return NioServerSocketChannel::new;
        }
    }

Do you have a reproducer?
if i provide
netServer.listen(SocketAddress.domainSocketAddress(meshBizListenPath), res -> {
            if (res.succeeded()) {
                log.info("MeshUDSServer Start Success, listen_path={}, work_cnt={}", meshBizListenPath, meshBizWorkCnt);
            } else {
                log.info("MeshUDSServer Start Fail: {}", ExceptionUtils.getStackTrace(res.cause()));
            }
        });

will throw
Steps to reproduce
Extra
there should return EpollServerSocketChannel ?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4259
get transaction information  just by `SqlConnection` · Issue #4259 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
val transaction =  sqlConnection().begin().await()
I hope 'SqlConnection' can disclose 'transaction()' and 'autoCommit().
No extra place is needed to store  transaction
Thank you
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4260
Introduce support for pcap traffic capturing of network traffic by geoand · Pull Request #4260 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
we should have it also on NetSocket as it remains useful for other parts of vertx stack like MQTT or SQL client that use NetSocket
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4261
Fix issue 4084 - setTimer should not throw exception for delay < 1ms by muhammad-abubakar · Pull Request #4261 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
actually, using a timer value of 0 should instead of creating a timer call runOnContext and not schedule a task
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4262
HTTP compression by vietj · Pull Request #4262 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4263
executeBlocking how to run in myself defined thread pool? · Issue #4263 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4264
HttpClient handles HTTP/2 connection closing more gracefully · Issue #4264 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
We are using Vertx HttpClient and we noticed that when a server closes the connection via a GOAWAY frame, the in flight streams with id lower than the Last-Stream-Id returned in the GOAWAY frame are closed and a CONNECTION_CLOSED exception is thrown for each one of them.
As from our understanding this flow is triggered also from Netty's channelInactive method, so from a high level it is not clear if there was an actual error, such as an ECONNRESET, our it is just normal operation of HTTP/2 connection closing.
So, we are thinking of 2 options:

Maybe the HttpClient should retry these requests itself? i.e. sending them on another connection, as it is normal operation, no exceptional behaviour.
Or at least to throw another exception which will clearly state the reason why the given stream was not correctly processed. This is important because it will let the developer know that it can safely retry it, as the stream was not processed by the other part. Where in case of an ECONNRESET you cannot know if the other part received the stream and processed it successfully.

What do you think?
Use cases
Depending on the chosen solution:

providing more clarity
easier developer implementation by not requiring retry for normal HTTP/2 operation

Contribution
Happy to contribute
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4265
Add CORS Private Network headers by zyclonite · Pull Request #4265 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
netty 4.1.74 upgrade
vert-x3/vertx-dependencies#84
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4266
 Fix wrong word quora; it must be quorum by hustwolf · Pull Request #4266 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4267
 Fix wrong word quora; it must be quorum by hustwolf · Pull Request #4267 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
as title
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4268
"Not yet implemented" exception when using WebClient with HTTP/2 on connection concurrency decrease · Issue #4268 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vert.x 4.2.2 (with Quarkus 2.6.3.Final)
Context
We are using a WebClient (with mutiny) for sending http2 request with following configuration:
http2Client = WebClient.create(vertx, new WebClientOptions()
                .setSsl(true)
                .setUseAlpn(true)
                .setProtocolVersion(HttpVersion.HTTP_2)
                .setDefaultHost(host)
                .setDefaultPort(port)
                .setHttp2MaxPoolSize(1)
                .setHttp2KeepAliveTimeout((int) Duration.ofMinutes(30).toSeconds()));
Sometimes we get a UnsupportedOperationException with the message Not yet implemented when sending a request, but most times it works correctly. Probably the error has something to do with the connection getting closed?
2022-02-07 19:07:51,212 ERROR [io.ver.cor.htt.imp.HttpClientRequestImpl] (vert.x-eventloop-thread-1) Not yet implemented: java.lang.UnsupportedOperationException: Not yet implemented
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$SetConcurrency.execute(SimpleConnectionPool.java:473)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$SetConcurrency.execute(SimpleConnectionPool.java:436)
	at io.vertx.core.net.impl.pool.CombinerExecutor.pollAndExecute(CombinerExecutor.java:58)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:44)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:240)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.setConcurrency(SimpleConnectionPool.java:482)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.access$100(SimpleConnectionPool.java:80)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$Slot.onConcurrencyChange(SimpleConnectionPool.java:144)
	at io.vertx.core.http.impl.Http2ClientConnection.concurrencyChanged(Http2ClientConnection.java:122)
	at io.vertx.core.http.impl.Http2ConnectionBase.onSettingsRead(Http2ConnectionBase.java:249)
	at io.netty.handler.codec.http2.Http2FrameListenerDecorator.onSettingsRead(Http2FrameListenerDecorator.java:69)
	at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onSettingsRead(DefaultHttp2ConnectionDecoder.java:515)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readSettingsFrame(DefaultHttp2FrameReader.java:531)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:262)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:159)
	at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:173)
	at io.netty.handler.codec.http2.DecoratingHttp2ConnectionDecoder.decodeFrame(DecoratingHttp2ConnectionDecoder.java:63)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:378)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1371)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1234)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1283)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:833)

2022-02-07 19:07:51,212 ERROR [com.qum.qum.pus.apn.ApnsPushNotificationService] (executor-thread-49) failed to send apns push notification: java.lang.UnsupportedOperationException: Not yet implemented
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$SetConcurrency.execute(SimpleConnectionPool.java:473)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$SetConcurrency.execute(SimpleConnectionPool.java:436)
	at io.vertx.core.net.impl.pool.CombinerExecutor.pollAndExecute(CombinerExecutor.java:58)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:44)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:240)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.setConcurrency(SimpleConnectionPool.java:482)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.access$100(SimpleConnectionPool.java:80)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$Slot.onConcurrencyChange(SimpleConnectionPool.java:144)
	at io.vertx.core.http.impl.Http2ClientConnection.concurrencyChanged(Http2ClientConnection.java:122)
	at io.vertx.core.http.impl.Http2ConnectionBase.onSettingsRead(Http2ConnectionBase.java:249)
	at io.netty.handler.codec.http2.Http2FrameListenerDecorator.onSettingsRead(Http2FrameListenerDecorator.java:69)
	at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onSettingsRead(DefaultHttp2ConnectionDecoder.java:515)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readSettingsFrame(DefaultHttp2FrameReader.java:531)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:262)
	at io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:159)
	at io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:173)
	at io.netty.handler.codec.http2.DecoratingHttp2ConnectionDecoder.decodeFrame(DecoratingHttp2ConnectionDecoder.java:63)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.vertx.core.http.impl.VertxHttp2ConnectionHandler.channelRead(VertxHttp2ConnectionHandler.java:378)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1371)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1234)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1283)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:833)

2022-02-07 19:07:51,216 ERROR [io.ver.cor.net.imp.ConnectionBase] (vert.x-eventloop-thread-1) Not yet implemented
2022-02-07 19:07:51,223 ERROR [io.ver.cor.htt.imp.HttpClientRequestImpl] (vert.x-eventloop-thread-0) Connection was closed: io.vertx.core.VertxException: Connection was closed

Extra

Java 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4269
Support connection concurrency decrease in pool · Issue #4269 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The pool implementation should support connection concurrency decrease instead of throwing an unsupported operation exception failure.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4270
Incorrect initial local HTTP/2 settings · Issue #4270 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Connection local HTTP/2 settings are initialised with default settings, instead they should be initialised with the settings sent to the remote endpoint.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4271
Pool implementation should store the connection concurrency as a long value · Issue #4271 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
So connections sending the default max concurrent stream are correctly handled.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4272
Various fixes for HTTP/2 connection pool by vietj · Pull Request #4272 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4273
vertx webroot doesn't work if it was deployed by springboot jar · Issue #4273 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
when using springboot deploying static web by webroot, it doesn't work, 404 Not Found would be throwed.
error message:
Resource not found
Version
Which version(s) did you encounter this bug ?
version >= 4.0
Context
I encountered an exception which looks suspicious while ...
Do you have a reproducer?
A reproducer is a simple project hosted on GitHub (or another forge supporting git clone operation) that has a build file that can be executed to reproduce the issue.
Reproducers are very helpful for contributors and will likely help them fixing your bug faster.

Link to github project/gist

Steps to reproduce

...
...
...
...

Extra

Anything that can be relevant such as OS version, JVM version
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4274
Add forEach method on HeadersMultiMap that avoids object allocation by geoand · Pull Request #4274 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Done :)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4275
ConnectionBase exception handler should not be called within the synchronized block · Issue #4275 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4276
ConnectionBase exception handler should not be called within the synchronized bloc by vietj · Pull Request #4276 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4277
Add a method to verify if a given Context is a duplicated context by cescoffier · Pull Request #4277 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
This method is helpful to know when you can access the context locals without risking a leak.
The method is only added to ContextInternal as it is an advanced use case.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4278
ArrayList concurrency error when deploying the verticles · Issue #4278 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi
We have an intermitent problem with the startup of our applications, in a few attempts I can reproduce so it it quite often to occur.
vert.x version: 3.9.9
Java version: openjdk version "11.0.10" 2021-01-19 LTS
This is the error:
java.util.ConcurrentModificationException: null
at java.base/java.util.ArrayList.sort(ArrayList.java:1752)
at io.vertx.core.impl.DeploymentManager.registerVerticleFactory(DeploymentManager.java:320)
at io.vertx.core.impl.VertxImpl.registerVerticleFactory(VertxImpl.java:743)
This is the piece of code that is triggering the concurrency error:
// Sort list in ascending order
facts.sort((fact1, fact2) -> fact1.order() - fact2.order());
class: DeploymentManager
method: registerVerticleFactory
The exception is thrown by ArrayList.sort, here is the code
public void sort(Comparator<? super E> c) {
final int expectedModCount = modCount;
Arrays.sort((E[]) elementData, 0, size, c);
if (modCount != expectedModCount)
throw new ConcurrentModificationException();
modCount++;
}
So from my analysis the ArrayList is being modified while it is being sorted.
We have 20 verticles in this application, so we iterate over the collection of class names and invoke the method below from
vertex-rx-java2:3.9.9
rxDeployVerticle(String name, DeploymentOptions options)
Please let me know if any additional information is required.
Thanks
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4279
SSLSession not being reused in Vertx 4.x when multiple instances of verticle is deployed · Issue #4279 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi there,
When the client is sending a ClientHello with the previously negotiated SessionID, the Vertx HTTP server is not reusing the existing session and sending back a new SessionID leading to a Full SSL Handshake which is a performance hit for us.
This is because SSLHelper instance is not being shared by the HttpServerWorker instances when multiple instances of the verticles are deployed.
A sample project to reproduce the issue is attached. Steps:

Please run TestServer
Start the tcpdump to capture packets.
Then run TestClient.
Analyse the SSL Handshake in tcpdump output.

vertx4-session-reuse-bug.zip
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4280
Shared TCP servers should use a single SSLHelper in order to give the client the opportunity to reuse sessions by vietj · Pull Request #4280 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
No description provided.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4281
ConnectionManager for HttpClient disregards proxyOptions · Issue #4281 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Context
Since the merge of my PR I realized that wrong connections are picked when changing proxy per request as per this PR
During my investigation my assumption is that due to EndpointKey not checking proxyOptions in equals methods causes the wrong connection to be matched which leads to the wrong proxy being used
Steps to reproduce

Create WebClient (without proxy)
Create a request and set a proxy to it and send
Create another request and set a different proxy and send
WebClient will use the first proxy (or any proxy that it already has a connection with that matches other EndPoint requirements)

Proposed Fix in EndpointKey.java
  @Override
  public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;
    EndpointKey that = (EndpointKey) o;
    return ssl == that.ssl && serverAddr.equals(that.serverAddr) && peerAddr.equals(that.peerAddr) && proxyOptions.equals(that.proxyOptions);
  }

  @Override
  public int hashCode() {
    int result = ssl ? 1 : 0;
    result = 31 * result + peerAddr.hashCode();
    result = 31 * result + serverAddr.hashCode();
    result = 31 * result + proxyOptions.hashCode();
    return result;
  }
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4282
ASCIIDOC Change: Set Correct Example for Feature Description by Unev · Pull Request #4282 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Motivation:
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4283
Support customizing BlockedThreadChecker by dano · Pull Request #4283 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
the BlockedThreadChecker class should be moved to a impl.btc package and the nested class event should become a regular class instead.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4284
Closed pool connect failure should notify the connection slot future · Issue #4284 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The pool state machine implementation does not notify the connection slot promise on a connect failure after the pool is closed. It is necessary to resolve this promise so pool implementation using the state machine can progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4285
ConnectionBase discards incoming message when it has been proactively closed · Issue #4285 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The ConnectionBase discards incoming message when the connection has been marked as closed, we should always accept such messages otherwise we might lose messages when a connection is closed proactively when a message read is in progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4286
Fixes by vietj · Pull Request #4286 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
A couple of fixes necessary to fix another bug in SQL client.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4287
ConnectionBase discards incoming message when it has been proactively closed by vietj · Pull Request #4287 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The ConnectionBase discards incoming message when the connection has been marked as closed, we should always accept such messages otherwise we might lose messages when a connection is closed proactively when a message read is in progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4288
Closed pool connect failure should notify the connection slot future by vietj · Pull Request #4288 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
The pool state machine implementation does not notify the connection slot promise on a connect failure after the pool is closed. It is required to resolve this promise so pool implementation using the state machine can progress.
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4289
java.lang.NullPointerException: Cannot invoke "io.vertx.core.http.impl.HttpClientConnection.createStream(io.vertx.core.impl.ContextInternal, io.vertx.core.Handler)" because "conn" is null · Issue #4289 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
4.2.3
Context
It seems to happen randomly on very busy server inside docker container (I don't know if this is relevant). There is a timer (actually vertx.setTimer which sets up another setTimer when completes) which triggers every minute and performs two HTTP requests one by one using WebClient.
[2022-02-21 13:00.01.315] [vert.x-eventloop-thread-0] [io.vertx.core.impl.ContextImpl] [ERROR] - Unhandled exception
java.lang.NullPointerException: Cannot invoke "io.vertx.core.http.impl.HttpClientConnection.createStream(io.vertx.core.impl.ContextInternal, io.vertx.core.Handler)" because "conn" is null
        at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$8(HttpClientImpl.java:631) ~[pdf-service.jar:?]
        at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52) ~[pdf-service.jar:?]
        at io.vertx.core.http.impl.ClientHttpEndpointBase.lambda$requestConnection$0(ClientHttpEndpointBase.java:46) ~[pdf-service.jar:?]
        at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162) ~[pdf-service.jar:?]
        at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123) ~[pdf-service.jar:?]
        at io.vertx.core.impl.EventLoopContext.emit(EventLoopContext.java:50) ~[pdf-service.jar:?]
        at io.vertx.core.impl.EventLoopContext.lambda$emit$1(EventLoopContext.java:57) ~[pdf-service.jar:?]
        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) [pdf-service.jar:?]
        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469) [pdf-service.jar:?]
        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:503) [pdf-service.jar:?]
        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986) [pdf-service.jar:?]
        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [pdf-service.jar:?]
        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [pdf-service.jar:?]
        at java.lang.Thread.run(Thread.java:833) [?:?]

The CompletionStage with HTTP request is neither resolved nor rejected. The timer seems to be stopped after that (I guess setTimer never completes so it cannot set up the next execution 1 minute later). We normally handle errors in timers using whenComplete/onFailure/onComplete to set up next execution anyway, but this time it seems not to reach that point.
Do you have a reproducer?
Unfortunately, I don't have a reproducer. It occurs randomly after some time (hours), usually when server is under heavy load. The same code runs totally fine on production (much stronger) server. If this description alone doesn't click I may try to construct simplified code which could at least show the approach we are taking.
Extra
JDK 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4290
On Trailer error Vert.x HttpClientResponse still logs an error although an errorHandler is set · Issue #4290 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
I used Vert.x 4.2.5
Context
The issue I encounter is that Vert.x HttpClientResponse logs an exception at ERROR level (at the TCP level :  ConnectionBase) although I've registered an exception handler. The exception handler is called, but the application will still have an ERROR printed in the logs even though I've managed the issue.
Reproducer
I've set up a simple HTTP server returning an invalid trailer (regarding its name) :
private static void basicHttp11Server() throws IOException {
        ServerSocket server = new ServerSocket(8282, 1, InetAddress.getLocalHost());
        while (true) {
            System.out.println("WAITING");
            Socket client = server.accept();
            System.out.println("RECEIVED");
            String content = "HTTP/1.1 200 OK\r\n"
                    + "transfer-encoding: chunked\r\n"
                    + "\r\n"
                    + "2\r\n"
                    + "OK"
                    + "\r\n"
                    + "0\r\n"
                    + "=_is_an_invalid_character: aa\r\n"
                    + "\r\n";
            client.getOutputStream().write(content.getBytes(StandardCharsets.UTF_8));
            client.getOutputStream().flush();
            client.close();
        }
    }
Then a test with the Vert.x HttpClient and a logger configuration :
@Test
    void printLogsAlthoughErrorIsHandled() throws InterruptedException {
        // Logging configuration
        Logger rootLogger = (Logger) LoggerFactory.getLogger(ROOT_LOGGER_NAME);
        PatternLayout layout = new PatternLayout();
        layout.setPattern("%nopex[%thread] %highlight(%-5level) %logger{35} - %message\r\n %rootException{short}");
        layout.setContext(rootLogger.getLoggerContext());
        layout.start();
        ConsoleAppender<ILoggingEvent> appender = new ConsoleAppender<>();
        appender.setLayout(layout);
        appender.setContext(rootLogger.getLoggerContext());
        appender.start();
        rootLogger.addAppender(appender);
        rootLogger.setLevel(Level.ERROR);
        // Start of the test
        CountDownLatch latch = new CountDownLatch(1);
        HttpClient httpClient = Vertx.vertx().createHttpClient();
        httpClient.request(HttpMethod.GET, 8282, "localhost", "/")
                .onSuccess(requestHandler -> requestHandler.send(ar -> {
                    ar.result().endHandler(v -> rootLogger.error("Never get here"))
                            .exceptionHandler(t -> {
                                rootLogger.info("Exception handled.", t); // on ROOT logger
                                latch.countDown();
                            });
                }));
        latch.await();
    }
Then the output is :
[vert.x-eventloop-thread-1] ERROR i.v.core.net.impl.ConnectionBase - a header name cannot contain the following prohibited characters: =,;: \t\r\n\v\f: =
 [vert.x-eventloop-thread-1] INFO ROOT - Exception handled.
 java.lang.IllegalArgumentException: a header name cannot contain the following prohibited characters: =,;: \t\r\n\v\f: =
	at io.netty.handler.codec.http.DefaultHttpHeaders.validateHeaderNameElement(DefaultHttpHeaders.java:413)
[vert.x-eventloop-thread-1] INFO ROOT - Exception handled.
 io.vertx.core.VertxException: Connection was closed
We can see 3 things :

The ConnectionBase error handler is called before I've been able to react to the exception (why not)
BUT it logs something as error, which will appear in my users logs even though I'm handling it
Then the exception ends up in my error handler (as expected)

Last thing to note : Since the HttpServer I've set up is buggy, my exception handler is called one more time noticing the connection closure. It seems wrong to be called twice on the same error handler, but maybe that's expected (just raising the question here)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4291
The method "beforeStoppingVertx" in Launcher has not been invoked. · Issue #4291 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
I write a custom Launcher in my application, when I debug the lifecycle hooks I saw the "beforeStoppingVertx" has not been invoked. Here is my Launcher:
public class MyLauncher extends Launcher {

    private static final Logger log = LoggerFactory.getLogger(MyLauncher.class);

    public static void main(String[] args) {
        new MyLauncher().dispatch(args);
    }

    public static void executeCommand(String cmd, String... args) {
        new MyLauncher().execute(cmd, args);
    }

    @Override
    public void beforeStoppingVertx(Vertx vertx) {
        log.info("beforeStoppingVertx");
    }

    @Override
    public void afterStoppingVertx() {
        log.info("afterStoppingVertx");
    }
}
The info log "beforeStoppingVertx" never be printed.
I made some debug and tests, I found this issue may be caused by the CloseFuture's hooks type, it's WeakHashMap:
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/impl/CloseFuture.java#L63
The "addCloseHook" method be called successfully when application start
https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/impl/launcher/commands/RunCommand.java#L256
, but then the hook be removed so it is actually not worked.
Don't know whether I'm right or not, need help, please.
Version
4.2.2
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4292
VerticleFactory registration is not thread-safe by tsegismont · Pull Request #4292 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #4278
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4293
Prevent beforeStoppingVertxHook from being GC-ed by tsegismont · Pull Request #4293 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Fixes #4291
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4294
JsonObject.put() throws UnsupportedException when initialized with Immutable Map from Kotlin · Issue #4294 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vertx Core 4.2.5
Context
I encountered an exception when using JsonObject class from vertx and Kotlin. Specifically, when initializing a JsonObject() with an immutable Map.
Do you have a reproducer?
JsonObject(mapOf("foo" to "bar")).put("this", "that")
throws the following exception stacktrace:
java.lang.UnsupportedOperationException
	at java.base/java.util.AbstractMap.put(AbstractMap.java:209)
	at io.vertx.core.json.JsonObject.put(JsonObject.java:642)
	at io.vertx.ext.mongo.impl.codec.json.JsonObjectCodec.generateIdIfAbsentFromDocument(JsonObjectCodec.java:52)
	at io.vertx.ext.mongo.impl.codec.json.JsonObjectCodec.generateIdIfAbsentFromDocument(JsonObjectCodec.java:26)

Extra

Kotlin JVM 1.6.10
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4295
The log disk is full.Thread of eventloop disappears  · Issue #4295 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Questions
The log disk is full.Thread of eventloop disappears
Version
version is 3.9.8
Context
I encountered an exception which looks suspicious while ...
Do you have a reproducer?
A reproducer is a simple project hosted on GitHub (or another forge supporting git clone operation) that has a build file that can be executed to reproduce the issue.
Reproducers are very helpful for contributors and will likely help them fixing your bug faster.

Link to github project/gist

Steps to reproduce

...
...
...
...

Extra

Anything that can be relevant such as OS version, JVM version
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4296
HttpClient supports request on a specified HttpConnection · Issue #4296 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Describe the feature
Allows HttpClient send a request on a specified HttpConnection.
Use cases

for reversed proxy we could bound the client connection to upstream connection (load balance or keeping the authentication context).

Contribution
may be something like:
new io.vertx.core.http.RequestOptions()
         .setConnection(HttpConnection or HttpClientConnection) // currently HttpClientConnection is defined at io.vertx.core.http.impl
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4297
Race condition when use RecordParser with concatMapCompletable and observeOn · Issue #4297 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
vertx 4.1.7
Context
I encountered some issues when using RecordParser with concatMapCompletable and observeOn like the following code to process records one by one on worker thread:
RecordParser.newDelimited(delimiter, asyncFile)
  .toFlowable()
  .concatMapCompletable(data -> Completable.complete()
    .observeOn(blockingScheduler(executor))
    .andThen(process(data))
  )
The issues including:

Sometime the RecordParser will suddenly stop emitting record, there's no error and not reached end of file and it is not disposed... it just stuck there.
Sometime a MissingBackpressureException is thrown

After investigated and tried create a unit test for this issue, it looks like a race condition on RecordParserImpl:
Usually the record is emitted from RecordParserImpl on event loop thread. (RecordParserImpl.handle)
However, when backpressure exists (concatMapCompletable here), it can be the thread running on downstream to request item from upstream. (RecordParserImpl.fetch)
In my case, the inner stream of concatMapCompletable is switched to a worker thread using observeOn, so it will be the worker thread requesting item from RecordParserImpl during backpressure.
When the RecordParserImpl.handle running on event loop thread and the RecordParserImpl.fetch running on worker thread are called at same time, race condition happens because RecordParserImpl is not written in thread-safe way.
The race condition includes but not limited to:

In RecordParserImpl.handleParsing(), both thread may passed the parsing check and do the parsing concurrently
demand could be modified concurrently and result in unexpected value
When RecordParserImpl.handle has filled all demand and paused upstream, but before parsing is set to false, the RecordParserImpl.fetch could add demand and exit quickly due to parsing is true, and then it will stuck - upstream is paused so RecordParserImpl.handle will not be called again, downstream has requested item and is waiting for next item.

Steps to reproduce
Here's a unit test that could reproduce the issue:
  @Test
  public void testBackpressure4() throws Throwable {
    Logger LOG = LogManager.getLogger();
    String fileName = "/tmp/testBackpressure";
    FileWriter writer = new FileWriter(fileName);
    for (int i = 0; i < 300; i++) {
      writer.write(String.format("%1000d\n", i));
    }
    writer.close();

    int count = 100;
    for (int i = 0; i < count; i++) {
      LOG.info("{}: Start", i);
      Vertx vertx = Vertx.vertx();
      WorkerExecutor executor = vertx.createSharedWorkerExecutor("shared-worker", 1);
      Throwable err = Single.just(i)
          .flatMapCompletable(n -> vertx.fileSystem()
              .rxOpen(fileName, new OpenOptions().setWrite(false).setRead(true))
              .flatMapCompletable(f -> RecordParser.newDelimited("\n", f).toFlowable()
                  .map(data -> {
                    final String dataString = data.toString().trim();
                    LOG.info("{}: Read record {}", n, dataString);
                    return dataString;
                  })
                  .concatMapCompletable(data -> Completable.complete()
                    .observeOn(blockingScheduler(executor))
                    .doOnComplete(() -> LOG.info("{}: processed record {}", n, data))
                  )
                  .onErrorResumeNext(e -> f.rxClose().andThen(Completable.error(e)))
                  .andThen(Completable.defer(f::rxClose))
              )
          )
          .timeout(5, TimeUnit.SECONDS)
          .blockingGet();

      vertx.close();

      if (err == null) {
        LOG.info("{}: Success", i);
      } else {
        LOG.error("{}: failure", i, err);
        if (!(err instanceof TimeoutException)) { // it will fail the case when issue 2 happens, remove the "!" to fail the case when issue 1 happens
          throw err;
        }
      }
    }
  }
In the printed log, we can see the xx: Read record yy log can sometime be printed on event loop thread (RecordParserImpl.handle) and sometime be printed on shared worker thread (due to backpressure, RecordParserImpl.fetch)
The backtrace for issue 1 looks like:
The source did not signal an event for 5 seconds and has been terminated.java.util.concurrent.TimeoutException: The source did not signal an event for 5 seconds and has been terminated.
	at io.reactivex.internal.operators.completable.CompletableTimeout$DisposeTask.run(CompletableTimeout.java:109)
	at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38)
	at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:26)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)

The backtrace for issue 2 looks like:
io.reactivex.exceptions.MissingBackpressureException: Queue full?!
	at io.reactivex.internal.operators.mixed.FlowableConcatMapCompletable$ConcatMapCompletableObserver.onNext(FlowableConcatMapCompletable.java:121)
	at io.reactivex.internal.operators.flowable.FlowableMap$MapSubscriber.onNext(FlowableMap.java:68)
	at io.vertx.reactivex.impl.FlowableReadStream.lambda$subscribeActual$2(FlowableReadStream.java:86)
	at io.vertx.core.parsetools.impl.RecordParserImpl.handleParsing(RecordParserImpl.java:214)
	at io.vertx.core.parsetools.impl.RecordParserImpl.handle(RecordParserImpl.java:285)
	at io.vertx.core.parsetools.impl.RecordParserImpl.handle(RecordParserImpl.java:27)
	at io.vertx.core.file.impl.AsyncFileImpl.handleBuffer(AsyncFileImpl.java:425)
	at io.vertx.core.file.impl.AsyncFileImpl.lambda$new$0(AsyncFileImpl.java:110)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:240)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:130)
	at io.vertx.core.file.impl.AsyncFileImpl.lambda$doRead$5(AsyncFileImpl.java:407)
	at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)
	at io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)
	at app//io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at app//io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)
	at app//io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)
	at app//io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at app//io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at app//io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base@11.0.7/java.lang.Thread.run(Thread.java:834)

Not sure if it is a problem in RecordParser or concatMapCompletable (is it expected for upstream to be requested on worker thread in this case?) or maybe it is not a desired to use them in this way?
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4298
Handling SSLHandshakeException with ip information on vertx · Issue #4298 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Hi i am using vertx mutual authentication mechanism.
Client and server , both of them requires SSL cert to access server.
But i want to log "ip" address of SSLHandshakeException.
also i want to log "ip" address of http socket connections.
I can handle cert requirement with , SSLHandshakeException , i catch
    httpServer.exceptionHandler(new Handler<Throwable>() {
        @Override
        public void handle(Throwable throwable) {
            if(throwable instanceof SSLHandshakeException) {
                logger.info("Connection failure due invalid certificate");
            }
        }
    });

But i want to catch the ip address of the user like.
    httpServer.exceptionHandler(new Handler<Throwable>() {
        @Override
        public void handle(Throwable throwable, String ipAddress) {
            if(throwable instanceof SSLHandshakeException) {
                logger.info("Connection failure due invalid certificate {}" , ipAddress );
            }
        }
    });

It would be good feature
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4299
Websockets serving cached/wrong responses and potentially have incorrect headers in websocket · Issue #4299 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
Vertx core 3.6.3 AND 3.7.0
NGINX 1.19.9
Context
Vertx 3.6.3
We use NGINX 1.19.9 to proxy requests to our services in Kubernetes. One such service is a client manager that creates web sockets. For paths where the user in unauthorized, we call client.reject(403).
Let's say client 1 connects to the service using wss://myuri.com/api and gets a valid 403. Great.
Now when client 2 connects to the service, the request handler appears to be re-using the request headers from client 1. The same is true for client 3, 4, 5, etc. Now all of our clients are in a bad state.
We've determined that it seems to be an interplay between nginx and vertx/netty. When we change upstream-keepalive-timeout to 0, the issue goes away. Only client 1 gets the 403. When we get rid of nginx entirely, the issue is also gone.
https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/#upstream-keepalive-timeout
Do you have a reproducer?
Vertx 3.7.0
Reproducer code: https://github.com/NguyenVoDev/pure-vertx-js/blob/main/src/main/java/org/example/Server.java
Note this won't work if you try and repro locally, only if using nginx with keepalive set to > 0 (we have 60s). It could actually just be the headers nginx is adding to the request though
Instead of clients receiving headers from the existing web socket connection (like in 3.6.3), now the connections just hang and the websocket handler isn't even called.
Extra
Are we supposed to be closing websockets after rejecting them?

Java 11, Adopt openJDK
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4300
Use the same logger name in BlockedThreadChecker to avoid regression when logger has been customized for this purpose, plus a couple of minor improvements to the blocked thread checker by vietj · Pull Request #4300 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4301
Thread blocked while try closing a mongoclient · Issue #4301 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
hi everybody,
I have an app that use multiple databases, so I create multiple connections and keep them in a concurrenthashmap.
If a connection doesn't exist I simply create a new one and put it into that map, and we will close and remove some of the client if that task get done.
After many rounds of the create-close-remove operations, exception happens while close some of that client, it says thread has been blocked.
Why close a mongo client  end up with thread block for that long period of time,  how can I avoid this problem from happen?
THX!
Vertx version: 4.2.3
Java version : 1.8.0_201
02:10:05.626 WARN  i.v.core.impl.BlockedThreadChecker - Thread Thread[vert.x-eventloop-thread-27,5,main] has been blocked for 5058 ms, time limit is 2000 ms
io.vertx.core.VertxException: Thread blocked
at sun.misc.Unsafe.park(Native Method)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)
at com.mongodb.internal.connection.AsynchronousChannelStream$FutureAsyncCompletionHandler.get(AsynchronousChannelStream.java:317)
at com.mongodb.internal.connection.AsynchronousChannelStream$FutureAsyncCompletionHandler.getRead(AsynchronousChannelStream.java:312)
at com.mongodb.internal.connection.AsynchronousChannelStream.read(AsynchronousChannelStream.java:151)
at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:648)
at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:513)
at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:356)
at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:280)
at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:83)
at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:33)
at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:107)
at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initialize(InternalStreamConnectionInitializer.java:62)
at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:144)
at com.mongodb.internal.connection.UsageTrackingInternalConnection.open(UsageTrackingInternalConnection.java:51)
at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.open(DefaultConnectionPool.java:431)
at com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:115)
at com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:100)
at com.mongodb.internal.connection.DefaultServer.getConnection(DefaultServer.java:92)
at com.mongodb.internal.session.ServerSessionPool.endClosedSessions(ServerSessionPool.java:156)
at com.mongodb.internal.session.ServerSessionPool.close(ServerSessionPool.java:103)
at com.mongodb.internal.async.client.AsyncMongoClientImpl.close(AsyncMongoClientImpl.java:119)
at com.mongodb.reactivestreams.client.internal.MongoClientImpl.close(MongoClientImpl.java:65)
at io.vertx.ext.mongo.impl.MongoClientImpl$MongoHolder.close(MongoClientImpl.java:1283)
at io.vertx.ext.mongo.impl.MongoClientImpl.close(MongoClientImpl.java:132)
at io.vertx.ext.mongo.impl.MongoClientImpl.close(MongoClientImpl.java:1243)
at io.vertx.reactivex.ext.mongo.MongoClient.close(MongoClient.java:1921)
at io.vertx.reactivex.ext.mongo.MongoClient.close(MongoClient.java:1928)
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4302
ServerResponse endHandler is not invoked when sending a file via HTTP 1 · Issue #4302 · eclipse-vertx/vert.x · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Version
VertX 4.2.5 - did not check prior versions
Context
Using HTTP 1 / 1.1 the endHandler of ServerResponse is not invoked.
Steps to reproduce
Vertx.vertx().createHttpServer()
  .requestHandler(request -> request.response().endHandler(nothing -> System.err.println("never happens")).sendFile("file.txt"))
  .listen();

Extra

openjdk 17
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4303
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4304
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4305
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4306
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4307
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4308
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4309
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4310
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4311
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4312
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4313
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4314
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4315
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4316
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4317
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4318
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4319
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4320
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4321
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

https://github.com/eclipse-vertx/vert.x/issues/4322
Rate limit · GitHub
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[]
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<